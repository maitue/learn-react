{"version":3,"file":"react-multi-select-component.cjs.development.js","sources":["../src/hooks/use-multi-select.tsx","../src/lib/classnames.ts","../src/hooks/use-did-update-effect.tsx","../src/lib/debounce.tsx","../src/lib/fuzzy-match-utils.tsx","../src/select-panel/cross.tsx","../src/select-panel/default-item.tsx","../src/select-panel/select-item.tsx","../src/select-panel/select-list.tsx","../src/select-panel/index.tsx","../src/multi-select/arrow.tsx","../src/multi-select/header.tsx","../src/multi-select/loading.tsx","../src/multi-select/dropdown.tsx","../src/multi-select/index.tsx"],"sourcesContent":["import React from \"react\";\n\nimport { ISelectProps, Option } from \"../lib/interfaces\";\n\nconst defaultStrings = {\n  allItemsAreSelected: \"All items are selected.\",\n  clearSearch: \"Clear Search\",\n  clearSelected: \"Clear Selected\",\n  noOptions: \"No options\",\n  search: \"Search\",\n  selectAll: \"Select All\",\n  selectSomeItems: \"Select...\",\n};\n\nconst defaultProps: Partial<ISelectProps> = {\n  value: [],\n  focusSearchOnOpen: true,\n  hasSelectAll: true,\n  className: \"multi-select\",\n  debounceDuration: 200,\n  options: [] as Option[],\n};\n\ninterface MultiSelectContextProps extends ISelectProps {\n  t: (key: string) => string;\n}\n\ninterface MultiSelectProviderProps {\n  props: ISelectProps;\n  children;\n}\n\nconst MultiSelectContext = React.createContext<MultiSelectContextProps>(\n  {} as MultiSelectContextProps\n);\n\nexport const MultiSelectProvider = ({\n  props,\n  children,\n}: MultiSelectProviderProps) => {\n  const t = (key) => props.overrideStrings?.[key] || defaultStrings[key];\n\n  return (\n    <MultiSelectContext.Provider value={{ t, ...defaultProps, ...props }}>\n      {children}\n    </MultiSelectContext.Provider>\n  );\n};\n\nexport const useMultiSelect = () => React.useContext(MultiSelectContext);\n","/**\n * combines classNames in a friendly way\n *\n * @param {*} classes\n */\nexport const cn = (...classes) => classes.join(\" \");\n","import { useEffect, useRef } from \"react\";\n\n/**\n * similar to `useEffect` but gets triggered only when value changes\n * @param fn executable function on dependency updates\n * @param inputs dependency array\n */\nexport function useDidUpdateEffect(fn, inputs) {\n  const didMountRef = useRef(false);\n\n  useEffect(() => {\n    if (didMountRef.current) fn();\n    else didMountRef.current = true;\n  }, inputs);\n}\n","export const debounce = (func, wait) => {\n  let timeout;\n  return function (...args) {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => {\n      func.apply(null, args);\n    }, wait);\n  };\n};\n","import { Option } from \"./interfaces\";\n\n/**\n * A collection of string matching algorithms built with React Select in mind.\n */\n\n// Option type from React Select and similar libraries.\ntype MapOfStrings = { [key: string]: string };\n\n/**\n * Filters React Select options and sorts by similarity to a search filter.\n * Handles partial matches, eg. searching for \"Waberg High\" will find \"Raoul\n * Wallenberg Traditional High School\". Case insensitive. Ignores\n * non-alphanumeric characters.\n *\n * @param  options  An unfiltered list of Options.\n * @param? filter  A string to compare against Option labels.\n * @param? substitutions  Strings with multiple spellings or variations that we\n *           expect to match, eg. accented characters or abbreviated words.\n *\n * @return A filtered and sorted array of Options.\n */\nexport function filterOptions(\n  options: Option[],\n  filter?: string,\n  substitutions?: MapOfStrings\n): Option[] {\n  // If the filter is blank, return the full list of Options.\n  if (!filter) {\n    return options;\n  }\n\n  const cleanFilter = cleanUpText(filter, substitutions);\n  return (\n    options\n      // Filter out undefined or null Options.\n      .filter(({ label, value }) => label != null && value != null)\n      // Create a {score, Option} pair for each Option based on its label's\n      // similarity to the filter text.\n      .map((option) => ({\n        option: option,\n        score: typeaheadSimilarity(\n          cleanUpText(option.label, substitutions),\n          cleanFilter\n        ),\n      }))\n      // Only include matches of the entire substring, with a slight\n      // affordance for transposition or extra characters.\n      .filter((pair) => pair.score >= cleanFilter.length - 2)\n      // Sort 'em by order of their score.\n      .sort((a, b) => b.score - a.score)\n      // …and grab the original Options back from their pairs.\n      .map((pair) => pair.option)\n  );\n}\n\n/**\n * Scores the similarity between two strings by returning the length of the\n * longest common subsequence. Intended for comparing strings of different\n * lengths; eg. when matching a typeahead search input with a school name.\n\n * Meant for use in an instant search box where results are being fetched\n * as a user is typing.\n *\n * @param  a  The longer string (though, we flip them if it's shorter).\n * @param  b  The shorter string, eg. a typeahead search input.\n *\n * @return The length of the longest common subsequence. Higher scores indicate\n *           closer matches.\n */\nexport function typeaheadSimilarity(a: string, b: string): number {\n  const aLength = a.length;\n  const bLength = b.length;\n  const table: any[] = [];\n\n  if (!aLength || !bLength) {\n    return 0;\n  }\n\n  // Ensure `a` isn't shorter than `b`.\n  if (aLength < bLength) {\n    [a, b] = [b, a];\n  }\n\n  // Early exit if `a` includes `b`; these will be scored higher than any\n  // other options with the same `b` (filter string), with a preference for\n  // shorter `a` strings (option labels).\n  if (a.indexOf(b) !== -1) {\n    return bLength + 1 / aLength;\n  }\n\n  // Initialize the table axes:\n  //\n  //    0 0 0 0 ... bLength\n  //    0\n  //    0\n  //\n  //   ...\n  //\n  // aLength\n  //\n  for (let x = 0; x <= aLength; ++x) {\n    table[x] = [0];\n  }\n  for (let y = 0; y <= bLength; ++y) {\n    table[0][y] = 0;\n  }\n\n  // Populate the rest of the table with a dynamic programming algorithm.\n  for (let x = 1; x <= aLength; ++x) {\n    for (let y = 1; y <= bLength; ++y) {\n      table[x][y] =\n        a[x - 1] === b[y - 1]\n          ? 1 + table[x - 1][y - 1]\n          : Math.max(table[x][y - 1], table[x - 1][y]);\n    }\n  }\n\n  return table[aLength][bLength];\n}\n\n/**\n * Apply string substitutions, remove non-alphanumeric characters, and convert\n * all letters to uppercase.\n *\n * eg. 'Scoil Bhríde Primary School' may become 'SCOILBHRIDEPRIMARYSCHOOL'.\n *\n * @param  input  An unsanitized input string.\n * @param  substitutions  Strings with multiple spellings or variations that we\n *          expect to match, for example accented characters or abbreviated\n *          words.\n *\n * @return The sanitized text.\n */\nexport function cleanUpText(\n  input?: string,\n  substitutions?: MapOfStrings\n): string {\n  if (!input) {\n    return \"\";\n  }\n\n  // Uppercase and remove all non-alphanumeric, non-accented characters.\n  // Also remove underscores.\n  input = input.toUpperCase().replace(/((?=[^\\u00E0-\\u00FC])\\W)|_/g, \"\");\n\n  if (!substitutions) {\n    return input;\n  }\n  const safeSubstitutions: MapOfStrings = substitutions; // For Flow.\n\n  // Replace all strings in `safeSubstitutions` with their standardized\n  // counterparts.\n  return Object.keys(safeSubstitutions).reduce((output, substitution) => {\n    const unsubbed = new RegExp(substitution, \"g\");\n    return output.replace(unsubbed, safeSubstitutions[substitution]);\n  }, input);\n}\n","import React from \"react\";\n\nexport const Cross = () => (\n  <svg\n    width=\"24\"\n    height=\"24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    className=\"dropdown-search-clear-icon gray\"\n  >\n    <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n    <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n  </svg>\n);\n","import { css } from \"goober\";\nimport React from \"react\";\n\nimport { cn } from \"../lib/classnames\";\nimport { Option } from \"../lib/interfaces\";\n\ninterface IDefaultItemRendererProps {\n  checked: boolean;\n  option: Option;\n  disabled?: boolean;\n  onClick;\n}\n\nconst DefaultRenderer = css({\n  \"& input,& span\": {\n    verticalAlign: \"middle\",\n    margin: 0,\n  },\n  span: {\n    display: \"inline-block\",\n    paddingLeft: \"5px\",\n  },\n  \"&.disabled\": {\n    opacity: 0.5,\n  },\n});\n\nconst DefaultItemRenderer = ({\n  checked,\n  option,\n  onClick,\n  disabled,\n}: IDefaultItemRendererProps) => (\n  <div className={cn(DefaultRenderer, \"item-renderer\", disabled && \"disabled\")}>\n    <input\n      type=\"checkbox\"\n      onChange={onClick}\n      checked={checked}\n      tabIndex={-1}\n      disabled={disabled}\n    />\n    <span>{option.label}</span>\n  </div>\n);\n\nexport default DefaultItemRenderer;\n","/**\n * This component represents an individual item in the multi-select drop-down\n */\nimport { css } from \"goober\";\nimport React, { useEffect, useRef } from \"react\";\n\nimport { cn } from \"../lib/classnames\";\nimport { Option } from \"../lib/interfaces\";\nimport DefaultItemRenderer from \"./default-item\";\n\ninterface ISelectItemProps {\n  itemRenderer;\n  option: Option;\n  checked: boolean;\n  focused?: boolean;\n  tabIndex?: number;\n  disabled?: boolean;\n  onSelectionChanged: (checked: boolean) => void;\n  onClick;\n}\n\nconst ItemContainer = css({\n  boxSizing: \"border-box\",\n  cursor: \"pointer\",\n  display: \"block\",\n  padding: \"var(--rmsc-p)\",\n  outline: 0,\n  \"&:hover,&:focus\": {\n    background: \"var(--rmsc-hover)\",\n  },\n  \"&.selected\": {\n    background: \"var(--rmsc-selected)\",\n  },\n});\n\nconst SelectItem = ({\n  itemRenderer: ItemRenderer = DefaultItemRenderer,\n  option,\n  checked,\n  focused,\n  tabIndex,\n  disabled,\n  onSelectionChanged,\n  onClick,\n}: ISelectItemProps) => {\n  const itemRef: any = useRef();\n\n  useEffect(() => {\n    updateFocus();\n    // eslint-disable-next-line\n  }, [checked, focused]);\n\n  const toggleChecked = () => {\n    onSelectionChanged(!checked);\n  };\n\n  const handleClick = (e) => {\n    toggleChecked();\n    onClick(e);\n  };\n\n  const updateFocus = () => {\n    if (focused && !disabled && itemRef) {\n      itemRef.current.focus();\n    }\n  };\n\n  const handleKeyDown = (e) => {\n    switch (e.which) {\n      case 13: // Enter\n      case 32: // Space\n        toggleChecked();\n        break;\n      default:\n        return;\n    }\n    e.preventDefault();\n  };\n\n  return (\n    <label\n      className={cn(ItemContainer, \"select-item\", checked && \"selected\")}\n      role=\"option\"\n      aria-selected={checked}\n      tabIndex={tabIndex}\n      ref={itemRef}\n      onKeyDown={handleKeyDown}\n    >\n      <ItemRenderer\n        option={option}\n        checked={checked}\n        onClick={handleClick}\n        disabled={disabled}\n      />\n    </label>\n  );\n};\n\nexport default SelectItem;\n","/**\n * This component represents an unadorned list of SelectItem (s).\n */\nimport { css } from \"goober\";\nimport React from \"react\";\n\nimport { useMultiSelect } from \"../hooks/use-multi-select\";\nimport { Option } from \"../lib/interfaces\";\nimport SelectItem from \"./select-item\";\n\ninterface ISelectListProps {\n  focusIndex: number;\n  options: Option[];\n  onClick: Function;\n}\n\nconst SelectListUl = css({\n  margin: 0,\n  paddingLeft: 0,\n  li: {\n    listStyle: \"none\",\n    margin: 0,\n  },\n});\n\nconst skipIndex = 2;\n\nconst SelectList = ({ options, focusIndex, onClick }: ISelectListProps) => {\n  const { disabled, value, onChange, ItemRenderer } = useMultiSelect();\n\n  const handleSelectionChanged = (option: Option, checked: boolean) => {\n    if (disabled) {\n      return;\n    }\n    onChange(\n      checked\n        ? [...value, option]\n        : value.filter((o: any) => o.value !== option.value)\n    );\n  };\n\n  return (\n    <ul className={SelectListUl}>\n      {options.map((o: any, i) => {\n        const tabIndex = i + skipIndex;\n\n        return (\n          <li key={o?.key || i}>\n            <SelectItem\n              focused={focusIndex === tabIndex}\n              tabIndex={tabIndex}\n              option={o}\n              onSelectionChanged={(c) => handleSelectionChanged(o, c)}\n              checked={value.find((s) => s.value === o.value) ? true : false}\n              onClick={(e) => onClick(e, tabIndex)}\n              itemRenderer={ItemRenderer}\n              disabled={o.disabled || disabled}\n            />\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\n\nexport default SelectList;\n","/**\n * This component represents the entire panel which gets dropped down when the\n * user selects the component.  It encapsulates the search filter, the\n * Select-all item, and the list of options.\n */\nimport { css } from \"goober\";\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\n\nimport { useMultiSelect } from \"../hooks/use-multi-select\";\nimport { cn } from \"../lib/classnames\";\nimport { debounce } from \"../lib/debounce\";\nimport { filterOptions } from \"../lib/fuzzy-match-utils\";\nimport { Cross } from \"./cross\";\nimport SelectItem from \"./select-item\";\nimport SelectList from \"./select-list\";\n\nenum FocusType {\n  SEARCH = -1,\n  NONE = 1,\n}\n\nconst SelectSearchContainer = css({\n  width: \"100%\",\n  position: \"relative\",\n  borderBottom: \"1px solid var(--rmsc-border)\",\n  input: {\n    height: \"var(--rmsc-h)\",\n    padding: \"0 var(--rmsc-p)\",\n    width: \"100%\",\n    outline: 0,\n    border: 0,\n  },\n});\n\nconst SearchClearButton = css({\n  cursor: \"pointer\",\n  position: \"absolute\",\n  top: 0,\n  right: 0,\n  bottom: 0,\n  background: \"none\",\n  border: 0,\n  padding: \"0 calc(var(--rmsc-p)/2)\",\n  \"[hidden]\": {\n    display: \"none\",\n  },\n});\n\nconst NoOptions = css({\n  padding: \"var(--rmsc-p)\",\n  textAlign: \"center\",\n  color: \"var(--rmsc-gray)\",\n});\n\nconst SelectPanel = () => {\n  const {\n    t,\n    onChange,\n    options,\n    value,\n    filterOptions: customFilterOptions,\n    selectAllLabel,\n    ItemRenderer,\n    disabled,\n    disableSearch,\n    focusSearchOnOpen,\n    hasSelectAll,\n    ClearIcon,\n    debounceDuration,\n  } = useMultiSelect();\n\n  const searchInputRef = useRef<any>();\n  const [searchText, setSearchText] = useState(\"\");\n  const [filteredOptions, setFilteredOptions] = useState(options);\n  const [searchTextForFilter, setSearchTextForFilter] = useState(\"\");\n  const [focusIndex, setFocusIndex] = useState(\n    focusSearchOnOpen && !disableSearch ? FocusType.SEARCH : FocusType.NONE\n  );\n  const debouncedSearch = useCallback(\n    debounce((query) => setSearchTextForFilter(query), debounceDuration),\n    []\n  );\n\n  const selectAllOption = {\n    label: selectAllLabel || t(\"selectAll\"),\n    value: \"\",\n  };\n\n  const selectAllValues = (checked) => {\n    const filteredValues = filteredOptions\n      .filter((o) => !o.disabled)\n      .map((o) => o.value);\n\n    if (checked) {\n      const selectedValues = value.map((o) => o.value);\n      const finalSelectedValues = [...selectedValues, ...filteredValues];\n\n      return filteredOptions.filter((o) =>\n        finalSelectedValues.includes(o.value)\n      );\n    }\n\n    return value.filter((o) => !filteredValues.includes(o.value));\n  };\n\n  const selectAllChanged = (checked: boolean) => {\n    const newOptions = selectAllValues(checked);\n    onChange(newOptions);\n  };\n\n  const handleSearchChange = (e) => {\n    debouncedSearch(e.target.value);\n    setSearchText(e.target.value);\n    setFocusIndex(FocusType.SEARCH);\n  };\n\n  const handleClear = () => {\n    setSearchTextForFilter(\"\");\n    setSearchText(\"\");\n    searchInputRef?.current?.focus();\n  };\n\n  const handleItemClicked = (index: number) => setFocusIndex(index);\n\n  const handleKeyDown = (e) => {\n    switch (e.which) {\n      case 38: // Up Arrow\n        if (e.altKey) {\n          return;\n        }\n        updateFocus(-1);\n        break;\n      case 40: // Down Arrow\n        if (e.altKey) {\n          return;\n        }\n        updateFocus(1);\n        break;\n      default:\n        return;\n    }\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  const handleSearchFocus = () => {\n    setFocusIndex(FocusType.SEARCH);\n  };\n\n  const getFilteredOptions = async () =>\n    customFilterOptions\n      ? await customFilterOptions(options, searchTextForFilter)\n      : filterOptions(options, searchTextForFilter);\n\n  const updateFocus = (offset: number) => {\n    let newFocus = focusIndex + offset;\n    newFocus = Math.max(1, newFocus);\n    newFocus = Math.min(newFocus, options.length + 1);\n    setFocusIndex(newFocus);\n  };\n\n  const [isAllOptionSelected, hasSelectableOptions] = useMemo(() => {\n    const filteredOptionsList = filteredOptions.filter((o) => !o.disabled);\n    return [\n      filteredOptionsList.every(\n        (o) => value.findIndex((v) => v.value === o.value) !== -1\n      ),\n      filteredOptionsList.length !== 0,\n    ];\n    // eslint-disable-next-line\n  }, [filteredOptions, value]);\n\n  useEffect(() => {\n    getFilteredOptions().then(setFilteredOptions);\n  }, [searchTextForFilter, options]);\n\n  return (\n    <div className=\"select-panel\" role=\"listbox\" onKeyDown={handleKeyDown}>\n      {!disableSearch && (\n        <div className={SelectSearchContainer}>\n          <input\n            autoFocus={focusSearchOnOpen}\n            placeholder={t(\"search\")}\n            type=\"text\"\n            aria-describedby={t(\"search\")}\n            onKeyDown={(e) => e.stopPropagation()}\n            onChange={handleSearchChange}\n            onFocus={handleSearchFocus}\n            value={searchText}\n            ref={searchInputRef}\n          />\n          <button\n            type=\"button\"\n            className={cn(SearchClearButton, \"search-clear-button\")}\n            hidden={!searchText}\n            onClick={handleClear}\n            aria-label={t(\"clearSearch\")}\n          >\n            {ClearIcon || <Cross />}\n          </button>\n        </div>\n      )}\n\n      {hasSelectAll && hasSelectableOptions && (\n        <SelectItem\n          focused={focusIndex === 1}\n          tabIndex={1}\n          checked={isAllOptionSelected}\n          option={selectAllOption}\n          onSelectionChanged={selectAllChanged}\n          onClick={() => handleItemClicked(1)}\n          itemRenderer={ItemRenderer}\n          disabled={disabled}\n        />\n      )}\n\n      {filteredOptions.length ? (\n        <SelectList\n          options={filteredOptions}\n          focusIndex={focusIndex}\n          onClick={(_e, index) => handleItemClicked(index)}\n        />\n      ) : (\n        <div className={cn(NoOptions, \"no-options\")}>{t(\"noOptions\")}</div>\n      )}\n    </div>\n  );\n};\n\nexport default SelectPanel;\n","import React from \"react\";\n\nexport const Arrow = ({ expanded }) => (\n  <svg\n    width=\"24\"\n    height=\"24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    className=\"dropdown-heading-dropdown-arrow gray\"\n  >\n    <path d={expanded ? \"M18 15 12 9 6 15\" : \"M6 9L12 15 18 9\"} />\n  </svg>\n);\n","import React from \"react\";\n\nimport { useMultiSelect } from \"../hooks/use-multi-select\";\n\nexport const DropdownHeader = () => {\n  const { t, value, options, valueRenderer } = useMultiSelect();\n\n  const noneSelected = value.length === 0;\n  const allSelected = value.length === options.length;\n  const customText = valueRenderer && valueRenderer(value, options);\n\n  const getSelectedText = () => value.map((s) => s.label).join(\", \");\n\n  return noneSelected ? (\n    <span className=\"gray\">{customText || t(\"selectSomeItems\")}</span>\n  ) : (\n    <span>\n      {customText ||\n        (allSelected ? t(\"allItemsAreSelected\") : getSelectedText())}\n    </span>\n  );\n};\n","import { css } from \"goober\";\nimport React from \"react\";\n\nconst Spinner = css({\n  animation: \"rotate 2s linear infinite\",\n\n  \"& .path\": {\n    stroke: \"var(--rmsc-border)\",\n    strokeWidth: \"4px\",\n    strokeLinecap: \"round\",\n    animation: \"dash 1.5s ease-in-out infinite\",\n  },\n\n  \"@keyframes rotate\": {\n    \"100%\": {\n      transform: \"rotate(360deg)\",\n    },\n  },\n\n  \"@keyframes dash\": {\n    \"0%\": {\n      strokeDasharray: \"1,150\",\n      strokeDashoffset: 0,\n    },\n    \"50%\": {\n      strokeDasharray: \"90,150\",\n      strokeDashoffset: \"-35\",\n    },\n    \"100%\": {\n      strokeDasharray: \"90,150\",\n      strokeDashoffset: \"-124\",\n    },\n  },\n});\n\nexport const Loading = ({ size = 24 }) => (\n  <span\n    style={{\n      width: size,\n      marginRight: \"0.2rem\",\n    }}\n  >\n    <svg\n      width={size}\n      height={size}\n      className={Spinner}\n      viewBox=\"0 0 50 50\"\n      style={{ display: \"inline\", verticalAlign: \"middle\" }}\n    >\n      <circle cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\" className=\"path\"></circle>\n    </svg>\n  </span>\n);\n","/**\n * A generic dropdown component.  It takes the children of the component\n * and hosts it in the component.  When the component is selected, it\n * drops-down the contentComponent and applies the contentProps.\n */\nimport { css } from \"goober\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\nimport { useDidUpdateEffect } from \"../hooks/use-did-update-effect\";\nimport { useMultiSelect } from \"../hooks/use-multi-select\";\nimport { cn } from \"../lib/classnames\";\nimport SelectPanel from \"../select-panel\";\nimport { Cross } from \"../select-panel/cross\";\nimport { Arrow } from \"./arrow\";\nimport { DropdownHeader } from \"./header\";\nimport { Loading } from \"./loading\";\n\nconst PanelContainer = css({\n  position: \"absolute\",\n  zIndex: 1,\n  top: \"100%\",\n  width: \"100%\",\n  paddingTop: \"8px\",\n  \".panel-content\": {\n    maxHeight: \"300px\",\n    overflowY: \"auto\",\n    borderRadius: \"var(--rmsc-radius)\",\n    background: \"var(--rmsc-bg)\",\n    boxShadow: \"0 0 0 1px rgba(0, 0, 0, 0.1), 0 4px 11px rgba(0, 0, 0, 0.1)\",\n  },\n});\n\nconst DropdownContainer = css({\n  position: \"relative\",\n  outline: 0,\n  backgroundColor: \"var(--rmsc-bg)\",\n  border: \"1px solid var(--rmsc-border)\",\n  borderRadius: \"var(--rmsc-radius)\",\n  \"&:focus-within\": {\n    boxShadow: \"var(--rmsc-main) 0 0 0 1px\",\n    borderColor: \"var(--rmsc-main)\",\n  },\n});\n\nconst DropdownHeading = css({\n  position: \"relative\",\n  padding: \"0 var(--rmsc-p)\",\n  display: \"flex\",\n  alignItems: \"center\",\n  width: \"100%\",\n  height: \"var(--rmsc-h)\",\n  cursor: \"default\",\n  outline: 0,\n  \".dropdown-heading-value\": {\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\",\n    whiteSpace: \"nowrap\",\n    flex: 1,\n  },\n});\n\nconst ClearSelectedButton = css({\n  cursor: \"pointer\",\n  background: \"none\",\n  border: 0,\n  padding: 0,\n  display: \"flex\",\n});\n\nconst Dropdown = () => {\n  const {\n    t,\n    onMenuToggle,\n    ArrowRenderer,\n    shouldToggleOnHover,\n    isLoading,\n    disabled,\n    onChange,\n    labelledBy,\n    value,\n    isOpen,\n    defaultIsOpen,\n    ClearSelectedIcon,\n  } = useMultiSelect();\n\n  const [isInternalExpand, setIsInternalExpand] = useState(true);\n  const [expanded, setExpanded] = useState(defaultIsOpen);\n  const [hasFocus, setHasFocus] = useState(false);\n  const FinalArrow = ArrowRenderer || Arrow;\n\n  const wrapper: any = useRef();\n\n  useDidUpdateEffect(() => {\n    onMenuToggle && onMenuToggle(expanded);\n  }, [expanded]);\n\n  useEffect(() => {\n    if (defaultIsOpen === undefined && typeof isOpen === \"boolean\") {\n      setIsInternalExpand(false);\n      setExpanded(isOpen);\n    }\n  }, [isOpen]);\n\n  const handleKeyDown = (e) => {\n    if (isInternalExpand) {\n      switch (e.which) {\n        case 27: // Escape\n        case 38: // Up Arrow\n          setExpanded(false);\n          wrapper?.current?.focus();\n          break;\n        case 32: // Space\n        case 13: // Enter Key\n        case 40: // Down Arrow\n          setExpanded(true);\n          break;\n        default:\n          return;\n      }\n    }\n    e.preventDefault();\n  };\n\n  const handleHover = (iexpanded: boolean) => {\n    isInternalExpand && shouldToggleOnHover && setExpanded(iexpanded);\n  };\n\n  const handleFocus = () => !hasFocus && setHasFocus(true);\n\n  const handleBlur = (e) => {\n    if (!e.currentTarget.contains(e.relatedTarget) && isInternalExpand) {\n      setHasFocus(false);\n      setExpanded(false);\n    }\n  };\n\n  const handleMouseEnter = () => handleHover(true);\n\n  const handleMouseLeave = () => handleHover(false);\n\n  const toggleExpanded = () => {\n    isInternalExpand && setExpanded(isLoading || disabled ? false : !expanded);\n  };\n\n  const handleClearSelected = (e) => {\n    e.stopPropagation();\n    onChange([]);\n    isInternalExpand && setExpanded(false);\n  };\n\n  return (\n    <div\n      tabIndex={0}\n      className={cn(DropdownContainer, \"dropdown-container\")}\n      aria-labelledby={labelledBy}\n      aria-expanded={expanded}\n      aria-readonly={true}\n      aria-disabled={disabled}\n      ref={wrapper}\n      onKeyDown={handleKeyDown}\n      onFocus={handleFocus}\n      onBlur={handleBlur}\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n    >\n      <div\n        className={cn(DropdownHeading, \"dropdown-heading\")}\n        onClick={toggleExpanded}\n      >\n        <div className=\"dropdown-heading-value\">\n          <DropdownHeader />\n        </div>\n        {isLoading && <Loading />}\n        {value.length > 0 && (\n          <button\n            type=\"button\"\n            className={cn(ClearSelectedButton, \"clear-selected-button\")}\n            onClick={handleClearSelected}\n            disabled={disabled}\n            aria-label={t(\"clearSelected\")}\n          >\n            {ClearSelectedIcon || <Cross />}\n          </button>\n        )}\n        <FinalArrow expanded={expanded} />\n      </div>\n      {expanded && (\n        <div className={cn(PanelContainer, \"dropdown-content\")}>\n          <div className=\"panel-content\">\n            <SelectPanel />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Dropdown;\n","import { css } from \"goober\";\nimport React from \"react\";\n\nimport { MultiSelectProvider } from \"../hooks/use-multi-select\";\nimport { cn } from \"../lib/classnames\";\nimport { ISelectProps } from \"../lib/interfaces\";\nimport Dropdown from \"./dropdown\";\n\nconst MultiSelectBox = css({\n  \"--rmscMain\": \"#4285f4\",\n  \"--rmscHover\": \"#f1f3f5\",\n  \"--rmscSelected\": \"#e2e6ea\",\n  \"--rmscBorder\": \"#ccc\",\n  \"--rmscGray\": \"#aaa\",\n  \"--rmscBg\": \"#fff\",\n  \"--rmscP\": \"10px\",\n  \"--rmscRadius\": \"4px\",\n  \"--rmscH\": \"38px\",\n\n  \"*\": {\n    boxSizing: \"border-box\",\n    transition: \"all 0.2s ease\",\n  },\n  \".gray\": {\n    color: \"var(--rmsc-gray)\",\n  },\n});\n\nconst MultiSelect = (props: ISelectProps) => (\n  <MultiSelectProvider props={props}>\n    <div className={cn(MultiSelectBox, props.className || \"multi-select\")}>\n      <Dropdown />\n    </div>\n  </MultiSelectProvider>\n);\n\nexport default MultiSelect;\n"],"names":["defaultStrings","allItemsAreSelected","clearSearch","clearSelected","noOptions","search","selectAll","selectSomeItems","defaultProps","value","focusSearchOnOpen","hasSelectAll","className","debounceDuration","options","MultiSelectContext","React","createContext","MultiSelectProvider","props","children","t","key","overrideStrings","Provider","useMultiSelect","useContext","cn","classes","join","useDidUpdateEffect","fn","inputs","didMountRef","useRef","useEffect","current","debounce","func","wait","timeout","args","clearTimeout","setTimeout","apply","filterOptions","filter","substitutions","cleanFilter","cleanUpText","label","map","option","score","typeaheadSimilarity","pair","length","sort","a","b","aLength","bLength","table","indexOf","x","y","Math","max","input","toUpperCase","replace","safeSubstitutions","Object","keys","reduce","output","substitution","unsubbed","RegExp","Cross","width","height","fill","stroke","strokeWidth","x1","y1","x2","y2","DefaultRenderer","css","verticalAlign","margin","span","display","paddingLeft","opacity","DefaultItemRenderer","checked","onClick","disabled","type","onChange","tabIndex","ItemContainer","boxSizing","cursor","padding","outline","background","SelectItem","itemRenderer","ItemRenderer","focused","onSelectionChanged","itemRef","updateFocus","toggleChecked","handleClick","e","focus","handleKeyDown","which","preventDefault","role","ref","onKeyDown","SelectListUl","li","listStyle","skipIndex","SelectList","focusIndex","handleSelectionChanged","o","i","c","find","s","FocusType","SelectSearchContainer","position","borderBottom","border","SearchClearButton","top","right","bottom","NoOptions","textAlign","color","SelectPanel","customFilterOptions","selectAllLabel","disableSearch","ClearIcon","searchInputRef","searchText","setSearchText","useState","filteredOptions","setFilteredOptions","searchTextForFilter","setSearchTextForFilter","setFocusIndex","SEARCH","NONE","debouncedSearch","useCallback","query","selectAllOption","selectAllValues","filteredValues","selectedValues","finalSelectedValues","includes","selectAllChanged","newOptions","handleSearchChange","target","handleClear","handleItemClicked","index","altKey","stopPropagation","handleSearchFocus","getFilteredOptions","offset","newFocus","min","isAllOptionSelected","hasSelectableOptions","useMemo","filteredOptionsList","every","findIndex","v","then","autoFocus","placeholder","onFocus","hidden","_e","Arrow","expanded","d","DropdownHeader","valueRenderer","noneSelected","allSelected","customText","getSelectedText","Spinner","animation","strokeLinecap","transform","strokeDasharray","strokeDashoffset","Loading","size","style","marginRight","viewBox","cx","cy","r","PanelContainer","zIndex","paddingTop","maxHeight","overflowY","borderRadius","boxShadow","DropdownContainer","backgroundColor","borderColor","DropdownHeading","alignItems","overflow","textOverflow","whiteSpace","flex","ClearSelectedButton","Dropdown","onMenuToggle","ArrowRenderer","shouldToggleOnHover","isLoading","labelledBy","isOpen","defaultIsOpen","ClearSelectedIcon","isInternalExpand","setIsInternalExpand","setExpanded","hasFocus","setHasFocus","FinalArrow","wrapper","undefined","handleHover","iexpanded","handleFocus","handleBlur","currentTarget","contains","relatedTarget","handleMouseEnter","handleMouseLeave","toggleExpanded","handleClearSelected","onBlur","onMouseEnter","onMouseLeave","MultiSelectBox","transition","MultiSelect"],"mappings":"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"}