{"ast":null,"code":"import _classCallCheck from \"C:\\\\laragon\\\\www\\\\LaylaUserGuide\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\laragon\\\\www\\\\LaylaUserGuide\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport { get as _get, del, post, put, upload as _upload, getToken } from \"./HttpService\";\nimport endpoints from \"../config/endpoints\";\n\nvar SubModuleService = /*#__PURE__*/function () {\n  function SubModuleService() {\n    _classCallCheck(this, SubModuleService);\n  }\n\n  _createClass(SubModuleService, null, [{\n    key: \"search\",\n    value: function search() {\n      var dataSearch = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n        nextToken: \"\",\n        limit: 10,\n        query: {}\n      };\n      return _get(endpoints.subModuleManagement.list, dataSearch).then(function (value) {\n        return value ? value.data : null;\n      });\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(id) {\n      return del(endpoints.subModuleManagement.delete.replace(\":ID\", id)).then(function (value) {\n        return value ? value.data : null;\n      });\n    }\n  }, {\n    key: \"relation\",\n    value: function relation(id) {\n      return _get(endpoints.moduleManagement.relation.replace(\":ID\", id)).then(function (value) {\n        return value ? value.data : null;\n      });\n    }\n  }, {\n    key: \"relationSave\",\n    value: function relationSave(id, data) {\n      return put(endpoints.moduleManagement.relation.replace(\":ID\", id), data).then(function (value) {\n        return value ? value.data : null;\n      });\n    }\n  }, {\n    key: \"get\",\n    value: function get(id) {\n      return _get(endpoints.subModuleManagement.get.replace(\":ID\", id)).then(function (value) {\n        return value ? value.data : null;\n      });\n    }\n  }, {\n    key: \"updateSerial\",\n    value: function updateSerial(id, values) {\n      return put(endpoints.subModuleManagement.get.replace(\":ID\", id) + '/serial', values).then(function (value) {\n        return value ? value.data : null;\n      });\n    }\n  }, {\n    key: \"update\",\n    value: function update(id, item) {\n      return put(endpoints.subModuleManagement.update.replace(\":ID\", id), item).then(function (value) {\n        return value ? value.data : null;\n      });\n    }\n  }, {\n    key: \"create\",\n    value: function create(item) {\n      return post(endpoints.subModuleManagement.create, item).then(function (value) {\n        return value ? value.data : null;\n      });\n    }\n  }, {\n    key: \"export\",\n    value: function _export(data) {\n      return post(endpoints.subModuleManagement.export, data).then(function (value) {\n        return value ? value.data : null;\n      });\n    }\n  }, {\n    key: \"exportSocket\",\n    value: function exportSocket(data) {\n      return new Promise(function (resolve) {\n        var socket = new WebSocket(process.env.SOCKET_ENDPOINT);\n        socket.addEventListener('open', function (event) {\n          data.authorization = \"Bearer \".concat(getToken());\n          socket.send(JSON.stringify(data));\n        });\n        socket.addEventListener('message', function (event) {\n          var data = JSON.parse(event.data || '{}');\n\n          if (data && data.Location) {\n            socket.close(1000);\n            resolve({\n              data: data\n            });\n          }\n\n          if (data && data.message === 'Forbidden') {\n            socket.close(1000);\n            resolve(null);\n          }\n\n          if (Object.keys(data).length === 0) {\n            socket.close(1000);\n            resolve({\n              data: {}\n            });\n          }\n        });\n      });\n    }\n  }, {\n    key: \"upload\",\n    value: function upload(file) {\n      var formdata = new FormData();\n      formdata.append(\"file\", file);\n      return _upload(endpoints.subModuleManagement.upload, formdata).then(function (value) {\n        return value ? value.data : null;\n      });\n    }\n  }]);\n\n  return SubModuleService;\n}();\n\nexport { SubModuleService as default };","map":{"version":3,"names":["get","del","post","put","upload","getToken","endpoints","SubModuleService","dataSearch","nextToken","limit","query","subModuleManagement","list","then","value","data","id","delete","replace","moduleManagement","relation","values","item","update","create","export","Promise","resolve","socket","WebSocket","process","env","SOCKET_ENDPOINT","addEventListener","event","authorization","send","JSON","stringify","parse","Location","close","message","Object","keys","length","file","formdata","FormData","append"],"sources":["C:/laragon/www/LaylaUserGuide/src/app/services/SubModuleService.js"],"sourcesContent":["import {get, del, post, put, upload, getToken} from \"./HttpService\";\nimport endpoints from \"../config/endpoints\";\n\nexport default class SubModuleService {\n    static search(dataSearch = {nextToken: \"\", limit: 10, query: {}}) {\n        return get(endpoints.subModuleManagement.list, dataSearch).then(value => {\n            return value ? value.data : null;\n        });\n    }\n\n    static remove(id) {\n        return del(endpoints.subModuleManagement.delete.replace(\":ID\", id)).then(value => {\n            return value ? value.data : null;\n        });\n    }\n\n    static relation(id) {\n        return get(endpoints.moduleManagement.relation.replace(\":ID\", id)).then(value => {\n            return value ? value.data : null;\n        });\n    }\n\n    static relationSave(id, data) {\n        return put(endpoints.moduleManagement.relation.replace(\":ID\", id), data).then(value => {\n            return value ? value.data : null;\n        });\n    }\n\n    static get(id) {\n        return get(endpoints.subModuleManagement.get.replace(\":ID\", id)).then(value => {\n            return value ? value.data : null;\n        });\n    }\n\n    static updateSerial(id, values) {\n        return put(endpoints.subModuleManagement.get.replace(\":ID\", id) + '/serial', values).then(value => {\n            return value ? value.data : null;\n        });\n    }\n\n    static update(id, item) {\n        return put(endpoints.subModuleManagement.update.replace(\":ID\", id), item).then(value => {\n            return value ? value.data : null;\n        });\n    }\n\n    static create(item) {\n        return post(endpoints.subModuleManagement.create, item).then(value => {\n            return value ? value.data : null;\n        });\n    }\n\n    static export(data) {\n        return post(endpoints.subModuleManagement.export, data).then(value => {\n            return value ? value.data : null;\n        });\n    }\n\n    static exportSocket(data) {\n        return new Promise(resolve => {\n            const socket = new WebSocket(process.env.SOCKET_ENDPOINT);\n            socket.addEventListener('open', function (event) {\n                data.authorization = `Bearer ${getToken()}`;\n                socket.send(JSON.stringify(data));\n            });\n            socket.addEventListener('message', function (event) {\n                const data = JSON.parse(event.data || '{}');\n                if (data && data.Location) {\n                    socket.close(1000);\n                    resolve({data});\n                }\n                if (data && data.message === 'Forbidden') {\n                    socket.close(1000);\n                    resolve(null);\n                }\n                if (Object.keys(data).length === 0) {\n                    socket.close(1000);\n                    resolve({data: {}});\n                }\n            });\n        });\n    }\n\n    static upload(file) {\n        var formdata = new FormData();\n        formdata.append(\"file\", file);\n        return upload(endpoints.subModuleManagement.upload, formdata).then(value => {\n            return value ? value.data : null;\n        });\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}