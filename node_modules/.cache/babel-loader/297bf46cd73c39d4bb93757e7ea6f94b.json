{"ast":null,"code":"(function (root, factory) {\n  'use strict';\n  /*istanbul ignore next:cant test*/\n\n  if (typeof module === 'object' && typeof module.exports === 'object') {\n    module.exports = factory();\n  } else if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([], factory);\n  } else {\n    // Browser globals\n    root.objectPath = factory();\n  }\n})(this, function () {\n  'use strict';\n\n  var toStr = Object.prototype.toString;\n\n  function hasOwnProperty(obj, prop) {\n    if (obj == null) {\n      return false;\n    } //to handle objects with null prototypes (too edge case?)\n\n\n    return Object.prototype.hasOwnProperty.call(obj, prop);\n  }\n\n  function isEmpty(value) {\n    if (!value) {\n      return true;\n    }\n\n    if (isArray(value) && value.length === 0) {\n      return true;\n    } else if (typeof value !== 'string') {\n      for (var i in value) {\n        if (hasOwnProperty(value, i)) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    return false;\n  }\n\n  function toString(type) {\n    return toStr.call(type);\n  }\n\n  function isObject(obj) {\n    return typeof obj === 'object' && toString(obj) === '[object Object]';\n  }\n\n  var isArray = Array.isArray || function (obj) {\n    /*istanbul ignore next:cant test*/\n    return toStr.call(obj) === '[object Array]';\n  };\n\n  function isBoolean(obj) {\n    return typeof obj === 'boolean' || toString(obj) === '[object Boolean]';\n  }\n\n  function getKey(key) {\n    var intKey = parseInt(key);\n\n    if (intKey.toString() === key) {\n      return intKey;\n    }\n\n    return key;\n  }\n\n  function factory(options) {\n    options = options || {};\n\n    var objectPath = function objectPath(obj) {\n      return Object.keys(objectPath).reduce(function (proxy, prop) {\n        if (prop === 'create') {\n          return proxy;\n        }\n        /*istanbul ignore else*/\n\n\n        if (typeof objectPath[prop] === 'function') {\n          proxy[prop] = objectPath[prop].bind(objectPath, obj);\n        }\n\n        return proxy;\n      }, {});\n    };\n\n    var hasShallowProperty;\n\n    if (options.includeInheritedProps) {\n      hasShallowProperty = function hasShallowProperty() {\n        return true;\n      };\n    } else {\n      hasShallowProperty = function hasShallowProperty(obj, prop) {\n        return typeof prop === 'number' && Array.isArray(obj) || hasOwnProperty(obj, prop);\n      };\n    }\n\n    function getShallowProperty(obj, prop) {\n      if (hasShallowProperty(obj, prop)) {\n        return obj[prop];\n      }\n    }\n\n    var getShallowPropertySafely;\n\n    if (options.includeInheritedProps) {\n      getShallowPropertySafely = function getShallowPropertySafely(obj, currentPath) {\n        if (typeof currentPath !== 'string' && typeof currentPath !== 'number') {\n          currentPath = String(currentPath);\n        }\n\n        var currentValue = getShallowProperty(obj, currentPath);\n\n        if (currentPath === '__proto__' || currentPath === 'prototype' || currentPath === 'constructor' && typeof currentValue === 'function') {\n          throw new Error('For security reasons, object\\'s magic properties cannot be set');\n        }\n\n        return currentValue;\n      };\n    } else {\n      getShallowPropertySafely = function getShallowPropertySafely(obj, currentPath) {\n        return getShallowProperty(obj, currentPath);\n      };\n    }\n\n    function set(obj, path, value, doNotReplace) {\n      if (typeof path === 'number') {\n        path = [path];\n      }\n\n      if (!path || path.length === 0) {\n        return obj;\n      }\n\n      if (typeof path === 'string') {\n        return set(obj, path.split('.').map(getKey), value, doNotReplace);\n      }\n\n      var currentPath = path[0];\n      var currentValue = getShallowPropertySafely(obj, currentPath);\n\n      if (path.length === 1) {\n        if (currentValue === void 0 || !doNotReplace) {\n          obj[currentPath] = value;\n        }\n\n        return currentValue;\n      }\n\n      if (currentValue === void 0) {\n        //check if we assume an array\n        if (typeof path[1] === 'number') {\n          obj[currentPath] = [];\n        } else {\n          obj[currentPath] = {};\n        }\n      }\n\n      return set(obj[currentPath], path.slice(1), value, doNotReplace);\n    }\n\n    objectPath.has = function (obj, path) {\n      if (typeof path === 'number') {\n        path = [path];\n      } else if (typeof path === 'string') {\n        path = path.split('.');\n      }\n\n      if (!path || path.length === 0) {\n        return !!obj;\n      }\n\n      for (var i = 0; i < path.length; i++) {\n        var j = getKey(path[i]);\n\n        if (typeof j === 'number' && isArray(obj) && j < obj.length || (options.includeInheritedProps ? j in Object(obj) : hasOwnProperty(obj, j))) {\n          obj = obj[j];\n        } else {\n          return false;\n        }\n      }\n\n      return true;\n    };\n\n    objectPath.ensureExists = function (obj, path, value) {\n      return set(obj, path, value, true);\n    };\n\n    objectPath.set = function (obj, path, value, doNotReplace) {\n      return set(obj, path, value, doNotReplace);\n    };\n\n    objectPath.insert = function (obj, path, value, at) {\n      var arr = objectPath.get(obj, path);\n      at = ~~at;\n\n      if (!isArray(arr)) {\n        arr = [];\n        objectPath.set(obj, path, arr);\n      }\n\n      arr.splice(at, 0, value);\n    };\n\n    objectPath.empty = function (obj, path) {\n      if (isEmpty(path)) {\n        return void 0;\n      }\n\n      if (obj == null) {\n        return void 0;\n      }\n\n      var value, i;\n\n      if (!(value = objectPath.get(obj, path))) {\n        return void 0;\n      }\n\n      if (typeof value === 'string') {\n        return objectPath.set(obj, path, '');\n      } else if (isBoolean(value)) {\n        return objectPath.set(obj, path, false);\n      } else if (typeof value === 'number') {\n        return objectPath.set(obj, path, 0);\n      } else if (isArray(value)) {\n        value.length = 0;\n      } else if (isObject(value)) {\n        for (i in value) {\n          if (hasShallowProperty(value, i)) {\n            delete value[i];\n          }\n        }\n      } else {\n        return objectPath.set(obj, path, null);\n      }\n    };\n\n    objectPath.push = function (obj, path\n    /*, values */\n    ) {\n      var arr = objectPath.get(obj, path);\n\n      if (!isArray(arr)) {\n        arr = [];\n        objectPath.set(obj, path, arr);\n      }\n\n      arr.push.apply(arr, Array.prototype.slice.call(arguments, 2));\n    };\n\n    objectPath.coalesce = function (obj, paths, defaultValue) {\n      var value;\n\n      for (var i = 0, len = paths.length; i < len; i++) {\n        if ((value = objectPath.get(obj, paths[i])) !== void 0) {\n          return value;\n        }\n      }\n\n      return defaultValue;\n    };\n\n    objectPath.get = function (obj, path, defaultValue) {\n      if (typeof path === 'number') {\n        path = [path];\n      }\n\n      if (!path || path.length === 0) {\n        return obj;\n      }\n\n      if (obj == null) {\n        return defaultValue;\n      }\n\n      if (typeof path === 'string') {\n        return objectPath.get(obj, path.split('.'), defaultValue);\n      }\n\n      var currentPath = getKey(path[0]);\n      var nextObj = getShallowPropertySafely(obj, currentPath);\n\n      if (nextObj === void 0) {\n        return defaultValue;\n      }\n\n      if (path.length === 1) {\n        return nextObj;\n      }\n\n      return objectPath.get(obj[currentPath], path.slice(1), defaultValue);\n    };\n\n    objectPath.del = function del(obj, path) {\n      if (typeof path === 'number') {\n        path = [path];\n      }\n\n      if (obj == null) {\n        return obj;\n      }\n\n      if (isEmpty(path)) {\n        return obj;\n      }\n\n      if (typeof path === 'string') {\n        return objectPath.del(obj, path.split('.'));\n      }\n\n      var currentPath = getKey(path[0]);\n      getShallowPropertySafely(obj, currentPath);\n\n      if (!hasShallowProperty(obj, currentPath)) {\n        return obj;\n      }\n\n      if (path.length === 1) {\n        if (isArray(obj)) {\n          obj.splice(currentPath, 1);\n        } else {\n          delete obj[currentPath];\n        }\n      } else {\n        return objectPath.del(obj[currentPath], path.slice(1));\n      }\n\n      return obj;\n    };\n\n    return objectPath;\n  }\n\n  var mod = factory();\n  mod.create = factory;\n  mod.withInheritedProps = factory({\n    includeInheritedProps: true\n  });\n  return mod;\n});","map":null,"metadata":{},"sourceType":"script"}