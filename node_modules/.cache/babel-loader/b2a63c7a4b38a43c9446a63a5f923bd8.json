{"ast":null,"code":"var _defineProperty = require(\"C:\\\\laragon\\\\www\\\\Archive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/defineProperty\");\n\nvar _assertThisInitialized = require(\"C:\\\\laragon\\\\www\\\\Archive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/assertThisInitialized\");\n\nvar _construct = require(\"C:\\\\laragon\\\\www\\\\Archive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/construct\");\n\nvar _get = require(\"C:\\\\laragon\\\\www\\\\Archive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/get\");\n\nvar _getPrototypeOf = require(\"C:\\\\laragon\\\\www\\\\Archive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/getPrototypeOf\");\n\nvar _toConsumableArray = require(\"C:\\\\laragon\\\\www\\\\Archive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/toConsumableArray\");\n\nvar _slicedToArray = require(\"C:\\\\laragon\\\\www\\\\Archive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/slicedToArray\");\n\nvar _createForOfIteratorHelper = require(\"C:\\\\laragon\\\\www\\\\Archive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createForOfIteratorHelper\");\n\nvar _classCallCheck = require(\"C:\\\\laragon\\\\www\\\\Archive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:\\\\laragon\\\\www\\\\Archive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createClass\");\n\nvar _inherits = require(\"C:\\\\laragon\\\\www\\\\Archive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/inherits\");\n\nvar _createSuper = require(\"C:\\\\laragon\\\\www\\\\Archive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createSuper\");\n\nvar _wrapNativeSuper = require(\"C:\\\\laragon\\\\www\\\\Archive\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/wrapNativeSuper\");\n\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return generator._invoke = function (innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; }(innerFn, self, context), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == typeof value && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; this._invoke = function (method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); }; } function maybeInvokeDelegate(delegate, context) { var method = delegate.iterator[context.method]; if (undefined === method) { if (context.delegate = null, \"throw\" === context.method) { if (delegate.iterator.return && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method)) return ContinueSentinel; context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a 'throw' method\"); } return ContinueSentinel; } var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) { if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; } return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, define(Gp, \"constructor\", GeneratorFunctionPrototype), define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (object) { var keys = []; for (var key in object) { keys.push(key); } return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) { \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); } }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, catch: function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\n\n/*!\n * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.\n * For licensing, see LICENSE.md.\n */\n(function (e) {\n  e[\"fr\"] = Object.assign(e[\"fr\"] || {}, {\n    a: \"Envoi du fichier échoué :\",\n    b: \"Barre d'outils des images\",\n    c: \"Barre d'outils des tableaux\",\n    d: \"Citation\",\n    e: \"Insérer une image ou un fichier\",\n    f: \"Choisir l'en-tête\",\n    g: \"En-tête\",\n    h: \"Augmenter le retrait\",\n    i: \"Diminuer le retrait\",\n    j: \"Lien\",\n    k: \"Liste numérotée\",\n    l: \"Liste à puces\",\n    m: \"widget média\",\n    n: \"Insérer un média\",\n    o: \"L'URL ne doit pas être vide.\",\n    p: \"Cette URL de média n'est pas supportée.\",\n    q: \"Insérer un tableau\",\n    r: \"Colonne d'entête\",\n    s: \"Insérer une colonne à gauche\",\n    t: \"Insérer une colonne à droite\",\n    u: \"Supprimer la colonne\",\n    v: \"Colonne\",\n    w: \"Ligne d'entête\",\n    x: \"Insérer une ligne en-dessous\",\n    y: \"Insérer une ligne au-dessus\",\n    z: \"Supprimer la ligne\",\n    aa: \"Ligne\",\n    ab: \"Fusionner la cellule au-dessus\",\n    ac: \"Fusionner la cellule à droite\",\n    ad: \"Fusionner la cellule en-dessous\",\n    ae: \"Fusionner la cellule à gauche\",\n    af: \"Scinder la cellule verticalement\",\n    ag: \"Scinder la cellule horizontalement\",\n    ah: \"Fusionner les cellules\",\n    ai: \"Gras\",\n    aj: \"Italique\",\n    ak: \"Objet image\",\n    al: \"Saisir la légende de l’image\",\n    am: \"Image taille réelle\",\n    an: \"Image latérale\",\n    ao: \"Image alignée à gauche\",\n    ap: \"Image centrée\",\n    aq: \"Image alignée à droite\",\n    ar: \"Insérer une image\",\n    as: \"Échec de l'envoi\",\n    at: \"Téléchargement en cours\",\n    au: \"Barre d'outils du widget\",\n    av: \"Impossible d'obtenir l'image redimensionnée\",\n    aw: \"La sélection de l'image redimensionnée a échoué.\",\n    ax: \"Impossible d'insérer l'image à la position courante.\",\n    ay: \"L'insertion d'image a échoué.\",\n    az: \"Changer le texte alternatif à l’image\",\n    ba: \"Éditeur de texte enrichi\",\n    bb: \"Annuler\",\n    bc: \"Restaurer\",\n    bd: \"Enregistrer\",\n    be: \"Annuler\",\n    bf: \"Texte alternatif\",\n    bg: \"%0 sur %1\",\n    bh: \"Précedent\",\n    bi: \"Suivant\",\n    bj: \"Barre d'outils de l'éditeur\",\n    bk: \"Montrer plus d'éléments\",\n    bl: \"Barre d'outils dans un menu déroulant\",\n    bm: \"Coller l'URL du média\",\n    bn: \"Astuce : Copier l'URL du média dans le contenu pour l'insérer plus rapidement\",\n    bo: \"URL de média\",\n    bp: \"Ouvrir dans un nouvel onglet\",\n    bq: \"Fichier téléchargeable\",\n    br: \"Supprimer le lien\",\n    bs: \"Modifier le lien\",\n    bt: \"Ouvrir le lien dans un nouvel onglet\",\n    bu: \"Ce lien n'a pas d'URL\",\n    bv: \"URL du lien\",\n    bw: \"Paragraphe\",\n    bx: \"Titre 1\",\n    by: \"Titre 2\",\n    bz: \"Titre 3\",\n    ca: \"Titre 4\",\n    cb: \"Titre 5\",\n    cc: \"Titre 6\",\n    cd: \"Éditeur de texte enrichi, %0\"\n  });\n})(window.CKEDITOR_TRANSLATIONS || (window.CKEDITOR_TRANSLATIONS = {}));\n\n(function e(t, n) {\n  if (typeof exports === \"object\" && typeof module === \"object\") module.exports = n();else if (typeof define === \"function\" && define.amd) define([], n);else if (typeof exports === \"object\") exports[\"ClassicEditor\"] = n();else t[\"ClassicEditor\"] = n();\n})(window, function () {\n  return function (e) {\n    var t = {};\n\n    function n(i) {\n      if (t[i]) {\n        return t[i].exports;\n      }\n\n      var o = t[i] = {\n        i: i,\n        l: false,\n        exports: {}\n      };\n      e[i].call(o.exports, o, o.exports, n);\n      o.l = true;\n      return o.exports;\n    }\n\n    n.m = e;\n    n.c = t;\n\n    n.d = function (e, t, i) {\n      if (!n.o(e, t)) {\n        Object.defineProperty(e, t, {\n          enumerable: true,\n          get: i\n        });\n      }\n    };\n\n    n.r = function (e) {\n      if (typeof Symbol !== \"undefined\" && Symbol.toStringTag) {\n        Object.defineProperty(e, Symbol.toStringTag, {\n          value: \"Module\"\n        });\n      }\n\n      Object.defineProperty(e, \"__esModule\", {\n        value: true\n      });\n    };\n\n    n.t = function (e, t) {\n      if (t & 1) e = n(e);\n      if (t & 8) return e;\n      if (t & 4 && typeof e === \"object\" && e && e.__esModule) return e;\n      var i = Object.create(null);\n      n.r(i);\n      Object.defineProperty(i, \"default\", {\n        enumerable: true,\n        value: e\n      });\n      if (t & 2 && typeof e != \"string\") for (var o in e) {\n        n.d(i, o, function (t) {\n          return e[t];\n        }.bind(null, o));\n      }\n      return i;\n    };\n\n    n.n = function (e) {\n      var t = e && e.__esModule ? function t() {\n        return e[\"default\"];\n      } : function t() {\n        return e;\n      };\n      n.d(t, \"a\", t);\n      return t;\n    };\n\n    n.o = function (e, t) {\n      return Object.prototype.hasOwnProperty.call(e, t);\n    };\n\n    n.p = \"\";\n    return n(n.s = 96);\n  }([function (e, t, n) {\n    \"use strict\";\n\n    n.d(t, \"b\", function () {\n      return o;\n    });\n    n.d(t, \"a\", function () {\n      return s;\n    });\n    var i = \"https://ckeditor.com/docs/ckeditor5/latest/framework/guides/support/error-codes.html\";\n\n    var o = /*#__PURE__*/function (_Error) {\n      _inherits(o, _Error);\n\n      var _super = _createSuper(o);\n\n      function o(e, t, n) {\n        var _this;\n\n        _classCallCheck(this, o);\n\n        e = s(e);\n\n        if (n) {\n          e += \" \" + JSON.stringify(n);\n        }\n\n        _this = _super.call(this, e);\n        _this.name = \"CKEditorError\";\n        _this.context = t;\n        _this.data = n;\n        return _this;\n      }\n\n      _createClass(o, [{\n        key: \"is\",\n        value: function is(e) {\n          return e === \"CKEditorError\";\n        }\n      }], [{\n        key: \"rethrowUnexpectedError\",\n        value: function rethrowUnexpectedError(e, t) {\n          if (e.is && e.is(\"CKEditorError\")) {\n            throw e;\n          }\n\n          var n = new o(e.message, t);\n          n.stack = e.stack;\n          throw n;\n        }\n      }]);\n\n      return o;\n    }( /*#__PURE__*/_wrapNativeSuper(Error));\n\n    function s(e) {\n      var t = e.match(/^([^:]+):/);\n\n      if (!t) {\n        return e;\n      }\n\n      return e + \" Read more: \".concat(i, \"#error-\").concat(t[1], \"\\n\");\n    }\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var i = function e() {\n      var t;\n      return function e() {\n        if (typeof t === \"undefined\") {\n          t = Boolean(window && document && document.all && !window.atob);\n        }\n\n        return t;\n      };\n    }();\n\n    var o = function e() {\n      var t = {};\n      return function e(n) {\n        if (typeof t[n] === \"undefined\") {\n          var i = document.querySelector(n);\n\n          if (window.HTMLIFrameElement && i instanceof window.HTMLIFrameElement) {\n            try {\n              i = i.contentDocument.head;\n            } catch (e) {\n              i = null;\n            }\n          }\n\n          t[n] = i;\n        }\n\n        return t[n];\n      };\n    }();\n\n    var s = [];\n\n    function r(e) {\n      var t = -1;\n\n      for (var n = 0; n < s.length; n++) {\n        if (s[n].identifier === e) {\n          t = n;\n          break;\n        }\n      }\n\n      return t;\n    }\n\n    function a(e, t) {\n      var n = {};\n      var i = [];\n\n      for (var o = 0; o < e.length; o++) {\n        var a = e[o];\n        var c = t.base ? a[0] + t.base : a[0];\n        var l = n[c] || 0;\n        var d = \"\".concat(c, \" \").concat(l);\n        n[c] = l + 1;\n        var u = r(d);\n        var h = {\n          css: a[1],\n          media: a[2],\n          sourceMap: a[3]\n        };\n\n        if (u !== -1) {\n          s[u].references++;\n          s[u].updater(h);\n        } else {\n          s.push({\n            identifier: d,\n            updater: g(h, t),\n            references: 1\n          });\n        }\n\n        i.push(d);\n      }\n\n      return i;\n    }\n\n    function c(e) {\n      var t = document.createElement(\"style\");\n      var i = e.attributes || {};\n\n      if (typeof i.nonce === \"undefined\") {\n        var s = true ? n.nc : undefined;\n\n        if (s) {\n          i.nonce = s;\n        }\n      }\n\n      Object.keys(i).forEach(function (e) {\n        t.setAttribute(e, i[e]);\n      });\n\n      if (typeof e.insert === \"function\") {\n        e.insert(t);\n      } else {\n        var r = o(e.insert || \"head\");\n\n        if (!r) {\n          throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n        }\n\n        r.appendChild(t);\n      }\n\n      return t;\n    }\n\n    function l(e) {\n      if (e.parentNode === null) {\n        return false;\n      }\n\n      e.parentNode.removeChild(e);\n    }\n\n    var d = function e() {\n      var t = [];\n      return function e(n, i) {\n        t[n] = i;\n        return t.filter(Boolean).join(\"\\n\");\n      };\n    }();\n\n    function u(e, t, n, i) {\n      var o = n ? \"\" : i.media ? \"@media \".concat(i.media, \" {\").concat(i.css, \"}\") : i.css;\n\n      if (e.styleSheet) {\n        e.styleSheet.cssText = d(t, o);\n      } else {\n        var s = document.createTextNode(o);\n        var r = e.childNodes;\n\n        if (r[t]) {\n          e.removeChild(r[t]);\n        }\n\n        if (r.length) {\n          e.insertBefore(s, r[t]);\n        } else {\n          e.appendChild(s);\n        }\n      }\n    }\n\n    function h(e, t, n) {\n      var i = n.css;\n      var o = n.media;\n      var s = n.sourceMap;\n\n      if (o) {\n        e.setAttribute(\"media\", o);\n      } else {\n        e.removeAttribute(\"media\");\n      }\n\n      if (s && btoa) {\n        i += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s)))), \" */\");\n      }\n\n      if (e.styleSheet) {\n        e.styleSheet.cssText = i;\n      } else {\n        while (e.firstChild) {\n          e.removeChild(e.firstChild);\n        }\n\n        e.appendChild(document.createTextNode(i));\n      }\n    }\n\n    var f = null;\n    var m = 0;\n\n    function g(e, t) {\n      var n;\n      var i;\n      var o;\n\n      if (t.singleton) {\n        var s = m++;\n        n = f || (f = c(t));\n        i = u.bind(null, n, s, false);\n        o = u.bind(null, n, s, true);\n      } else {\n        n = c(t);\n        i = h.bind(null, n, t);\n\n        o = function e() {\n          l(n);\n        };\n      }\n\n      i(e);\n      return function t(n) {\n        if (n) {\n          if (n.css === e.css && n.media === e.media && n.sourceMap === e.sourceMap) {\n            return;\n          }\n\n          i(e = n);\n        } else {\n          o();\n        }\n      };\n    }\n\n    e.exports = function (e, t) {\n      t = t || {};\n\n      if (!t.singleton && typeof t.singleton !== \"boolean\") {\n        t.singleton = i();\n      }\n\n      e = e || [];\n      var n = a(e, t);\n      return function e(i) {\n        i = i || [];\n\n        if (Object.prototype.toString.call(i) !== \"[object Array]\") {\n          return;\n        }\n\n        for (var o = 0; o < n.length; o++) {\n          var c = n[o];\n          var l = r(c);\n          s[l].references--;\n        }\n\n        var d = a(i, t);\n\n        for (var u = 0; u < n.length; u++) {\n          var h = n[u];\n          var f = r(h);\n\n          if (s[f].references === 0) {\n            s[f].updater();\n            s.splice(f, 1);\n          }\n        }\n\n        n = d;\n      };\n    };\n  },, function (e, t, n) {\n    \"use strict\";\n\n    var i = n(7);\n    var o = typeof self == \"object\" && self && self.Object === Object && self;\n    var s = i[\"a\"] || o || Function(\"return this\")();\n    t[\"a\"] = s;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    (function (e) {\n      var i = n(3);\n      var o = n(12);\n      var s = typeof exports == \"object\" && exports && !exports.nodeType && exports;\n      var r = s && typeof e == \"object\" && e && !e.nodeType && e;\n      var a = r && r.exports === s;\n      var c = a ? i[\"a\"].Buffer : undefined;\n      var l = c ? c.isBuffer : undefined;\n      var d = l || o[\"a\"];\n      t[\"a\"] = d;\n    }).call(this, n(9)(e));\n  }, function (e, t, n) {\n    \"use strict\";\n\n    (function (e) {\n      var i = n(7);\n      var o = typeof exports == \"object\" && exports && !exports.nodeType && exports;\n      var s = o && typeof e == \"object\" && e && !e.nodeType && e;\n      var r = s && s.exports === o;\n      var a = r && i[\"a\"].process;\n\n      var c = function () {\n        try {\n          var e = s && s.require && s.require(\"util\").types;\n\n          if (e) {\n            return e;\n          }\n\n          return a && a.binding && a.binding(\"util\");\n        } catch (e) {}\n      }();\n\n      t[\"a\"] = c;\n    }).call(this, n(9)(e));\n  }, function (e, t, n) {\n    \"use strict\";\n\n    (function (e) {\n      var t = n(0);\n      var i = \"18.0.0\";\n      var o = typeof window === \"object\" ? window : e;\n\n      if (o.CKEDITOR_VERSION) {\n        throw new t[\"b\"](\"ckeditor-duplicated-modules: Some CKEditor 5 modules are duplicated.\", null);\n      } else {\n        o.CKEDITOR_VERSION = i;\n      }\n    }).call(this, n(10));\n  }, function (e, t, n) {\n    \"use strict\";\n\n    (function (e) {\n      var n = typeof e == \"object\" && e && e.Object === Object && e;\n      t[\"a\"] = n;\n    }).call(this, n(10));\n  }, function (e, t, n) {\n    \"use strict\";\n\n    (function (e) {\n      var i = n(3);\n      var o = typeof exports == \"object\" && exports && !exports.nodeType && exports;\n      var s = o && typeof e == \"object\" && e && !e.nodeType && e;\n      var r = s && s.exports === o;\n      var a = r ? i[\"a\"].Buffer : undefined,\n          c = a ? a.allocUnsafe : undefined;\n\n      function l(e, t) {\n        if (t) {\n          return e.slice();\n        }\n\n        var n = e.length,\n            i = c ? c(n) : new e.constructor(n);\n        e.copy(i);\n        return i;\n      }\n\n      t[\"a\"] = l;\n    }).call(this, n(9)(e));\n  }, function (e, t) {\n    e.exports = function (e) {\n      if (!e.webpackPolyfill) {\n        var t = Object.create(e);\n        if (!t.children) t.children = [];\n        Object.defineProperty(t, \"loaded\", {\n          enumerable: true,\n          get: function get() {\n            return t.l;\n          }\n        });\n        Object.defineProperty(t, \"id\", {\n          enumerable: true,\n          get: function get() {\n            return t.i;\n          }\n        });\n        Object.defineProperty(t, \"exports\", {\n          enumerable: true\n        });\n        t.webpackPolyfill = 1;\n      }\n\n      return t;\n    };\n  }, function (e, t) {\n    var n;\n\n    n = function () {\n      return this;\n    }();\n\n    try {\n      n = n || new Function(\"return this\")();\n    } catch (e) {\n      if (typeof window === \"object\") n = window;\n    }\n\n    e.exports = n;\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(48);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t, n) {\n    \"use strict\";\n\n    function i() {\n      return false;\n    }\n\n    t[\"a\"] = i;\n  }, function (e) {\n    e.exports = JSON.parse('{\"ar\":{\"latex\":\"LaTeX\",\"cancel\":\"إلغاء\",\"accept\":\"موا�?ق\",\"manual\":\"الدليل\",\"insert_math\":\"إدراج صيغة رياضية - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"ca\":{\"latex\":\"LaTeX\",\"cancel\":\"Cancel·lar\",\"accept\":\"Acceptar\",\"manual\":\"Manual\",\"insert_math\":\"Inserir fórmula matemàtica - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"cs\":{\"latex\":\"LaTeX\",\"cancel\":\"Storno\",\"accept\":\"OK\",\"manual\":\"Příru�?ka\",\"insert_math\":\"Vložit matematický vzorec - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"da\":{\"latex\":\"LaTeX\",\"cancel\":\"Annuller\",\"accept\":\"OK\",\"manual\":\"Brugervejledning\",\"insert_math\":\"Indsæt matematisk formel - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"de\":{\"latex\":\"LaTeX\",\"cancel\":\"Abbrechen\",\"accept\":\"OK\",\"manual\":\"Handbuch\",\"insert_math\":\"Mathematische Formel einfügen - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"en\":{\"latex\":\"LaTeX\",\"cancel\":\"Cancel\",\"accept\":\"OK\",\"manual\":\"Manual\",\"insert_math\":\"Insert a math equation - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"es\":{\"latex\":\"LaTeX\",\"cancel\":\"Cancelar\",\"accept\":\"Aceptar\",\"manual\":\"Manual\",\"insert_math\":\"Insertar fórmula matemática - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"et\":{\"latex\":\"LaTeX\",\"cancel\":\"Loobu\",\"accept\":\"OK\",\"manual\":\"Käsiraamat\",\"insert_math\":\"Lisa matemaatiline valem – WIRIS\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"eu\":{\"latex\":\"LaTeX\",\"cancel\":\"Ezeztatu\",\"accept\":\"Onartu\",\"manual\":\"Gida\",\"insert_math\":\"Txertatu matematikako formula - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"fi\":{\"latex\":\"LaTeX\",\"cancel\":\"Peruuta\",\"accept\":\"OK\",\"manual\":\"Manual\",\"insert_math\":\"Liitä matemaattinen kaava - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"fr\":{\"latex\":\"LaTeX\",\"cancel\":\"Annuler\",\"accept\":\"OK\",\"manual\":\"Manuel\",\"insert_math\":\"Insérer une formule mathématique - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"gl\":{\"latex\":\"LaTeX\",\"cancel\":\"Cancelar\",\"accept\":\"Aceptar\",\"manual\":\"Manual\",\"insert_math\":\"Inserir fórmula matemática - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"he\":{\"latex\":\"LaTeX\",\"cancel\":\"ביטול\",\"accept\":\"�?ישור\",\"manual\":\"מדריך\",\"insert_math\":\"הוסף נוסחה מתמטית - MathType\",\"insert_chem\":\"הוספת כתיבה כימית - ChemType\",\"minimize\":\"מזערי\",\"maximize\":\"מרבי\",\"fullscreen\":\"מסך מל�?\",\"exit_fullscreen\":\"יצי�?ה ממצב מסך מל�?\",\"close\":\"סגירה\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"ה�?�? לצ�?ת? שינויי�? �?שר בוצעו ימחקו.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" �?יננה פונקציה\",\"exception_invalid_date_format\":\"תסדיר ת�?ריך �?ינו תקין : \",\"exception_casting\":\"ל�? ניתן להמיר \",\"exception_casting_to\":\" ל \"},\"hr\":{\"latex\":\"LaTeX\",\"cancel\":\"Poništi\",\"accept\":\"U redu\",\"manual\":\"Priru�?nik\",\"insert_math\":\"Umetnite matemati�?ku formulu - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"hu\":{\"latex\":\"LaTeX\",\"cancel\":\"Mégsem\",\"accept\":\"OK\",\"manual\":\"Kézikönyv\",\"insert_math\":\"Matematikai képlet beszúrása - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"it\":{\"latex\":\"LaTeX\",\"cancel\":\"Annulla\",\"accept\":\"Accetta\",\"manual\":\"Manuale\",\"insert_math\":\"Inserisci una formula matematica - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"ja\":{\"latex\":\"LaTeX\",\"cancel\":\"キャンセル\",\"accept\":\"OK\",\"manual\":\"マニュアル\",\"insert_math\":\"数�?を挿入 - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"ko\":{\"latex\":\"LaTeX\",\"cancel\":\"취소\",\"accept\":\"승�?�\",\"manual\":\"설명서\",\"insert_math\":\"수학 공�? 삽입 - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"nl\":{\"latex\":\"LaTeX\",\"cancel\":\"Annuleren\",\"accept\":\"OK\",\"manual\":\"Handleiding\",\"insert_math\":\"Wiskundige formule invoegen - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"no\":{\"latex\":\"LaTeX\",\"cancel\":\"Avbryt\",\"accept\":\"OK\",\"manual\":\"Håndbok\",\"insert_math\":\"Sett inn matematikkformel - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"pl\":{\"latex\":\"LaTeX\",\"cancel\":\"Anuluj\",\"accept\":\"OK\",\"manual\":\"Instrukcja\",\"insert_math\":\"Wstaw formułę matematyczną - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"pt\":{\"latex\":\"LaTeX\",\"cancel\":\"Cancelar\",\"accept\":\"OK\",\"manual\":\"Manual\",\"insert_math\":\"Inserir fórmula matemática - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"pt_br\":{\"latex\":\"LaTeX\",\"cancel\":\"Cancelar\",\"accept\":\"OK\",\"manual\":\"Manual\",\"insert_math\":\"Inserir fórmula matemática - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"ru\":{\"latex\":\"LaTeX\",\"cancel\":\"отмена\",\"accept\":\"OK\",\"manual\":\"вручную\",\"insert_math\":\"В�?тавить математиче�?кую формулу: WIRIS\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"sv\":{\"latex\":\"LaTeX\",\"cancel\":\"Avbryt\",\"accept\":\"OK\",\"manual\":\"Bruksanvisning\",\"insert_math\":\"Infoga matematisk formel - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"tr\":{\"latex\":\"LaTeX\",\"cancel\":\"Vazgeç\",\"accept\":\"Tamam\",\"manual\":\"Kılavuz\",\"insert_math\":\"Matematik formülü ekle - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"zh\":{\"latex\":\"LaTeX\",\"cancel\":\"�?�消\",\"accept\":\"确定\",\"manual\":\"手册\",\"insert_math\":\"�?�入数学公�? - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"el\":{\"latex\":\"LaTeX\",\"cancel\":\"Άκυ�?ο\",\"accept\":\"ΟΚ\",\"manual\":\"Χει�?οκίνητα\",\"insert_math\":\"Εισαγωγή μαθηματικο�? τ�?που - MathType\",\"insert_chem\":\"Insert a chemistry formula - ChemType\",\"minimize\":\"Minimize\",\"maximize\":\"Maximize\",\"fullscreen\":\"Full-screen\",\"exit_fullscreen\":\"Exit full-screen\",\"close\":\"Close\",\"mathtype\":\"MathType\",\"title_modalwindow\":\"MathType modal window\",\"close_modal_warning\":\"Are you sure you want to leave? The changes you made will be lost.\",\"latex_name_label\":\"Latex Formula\",\"browser_no_compatible\":\"Your browser is not compatible with AJAX technology. Please, use the latest version of Mozilla Firefox.\",\"error_convert_accessibility\":\"Error converting from MathML to accessible text.\",\"exception_cross_site\":\"Cross site scripting is only allowed for HTTP.\",\"exception_high_surrogate\":\"High surrogate not followed by low surrogate in fixedCharCodeAt()\",\"exception_string_length\":\"Invalid string. Length must be a multiple of 4\",\"exception_key_nonobject\":\"Object.keys called on non-object\",\"exception_null_or_undefined\":\" this is null or not defined\",\"exception_not_function\":\" is not a function\",\"exception_invalid_date_format\":\"Invalid date format : \",\"exception_casting\":\"Cannot cast \",\"exception_casting_to\":\" to \"},\"\":{}}');\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(15);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-placeholder:before,.ck .ck-placeholder:before{content:attr(data-placeholder);pointer-events:none}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-placeholder:before,.ck .ck-placeholder:before{cursor:text;color:var(--ck-color-engine-placeholder-text)}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(17);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck-hidden{display:none!important}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{box-sizing:border-box;width:auto;height:auto;position:static}:root{--ck-z-default:1;--ck-z-modal:calc(var(--ck-z-default) + 999);--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#c4c4c4;--ck-color-base-action:#61b045;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#198cf0;--ck-color-base-active-focus:#0e7fe1;--ck-color-base-error:#db3700;--ck-color-focus-border:#1f89e5;--ck-color-focus-outer-shadow:#bcdefb;--ck-color-focus-disabled-shadow:rgba(119,186,248,0.3);--ck-color-focus-error-shadow:rgba(255,64,31,0.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,0.15);--ck-color-shadow-drop-active:rgba(0,0,0,0.2);--ck-color-shadow-inner:rgba(0,0,0,0.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#e6e6e6;--ck-color-button-default-active-background:#d9d9d9;--ck-color-button-default-active-shadow:#bfbfbf;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#dedede;--ck-color-button-on-hover-background:#c4c4c4;--ck-color-button-on-active-background:#bababa;--ck-color-button-on-active-shadow:#a1a1a1;--ck-color-button-on-disabled-background:#dedede;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#579e3d;--ck-color-button-action-active-background:#53973b;--ck-color-button-action-active-shadow:#498433;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#b0b0b0;--ck-color-switch-button-off-hover-background:#a3a3a3;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#579e3d;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,0.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:#c7c7c7;--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:#c7c7c7;--ck-color-input-disabled-text:#5c5c5c;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-base-active);--ck-color-list-button-on-background-focus:var(--ck-color-base-active-focus);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-foreground);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,177,255,0.1);--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck.ck-reset,.ck.ck-reset_all,.ck.ck-reset_all *{margin:0;padding:0;border:0;background:transparent;text-decoration:none;vertical-align:middle;transition:none;word-wrap:break-word}.ck.ck-reset_all,.ck.ck-reset_all *{border-collapse:collapse;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);color:var(--ck-color-text);text-align:left;white-space:nowrap;cursor:auto;float:none}.ck.ck-reset_all .ck-rtl *{text-align:right}.ck.ck-reset_all iframe{vertical-align:inherit}.ck.ck-reset_all textarea{white-space:pre-wrap}.ck.ck-reset_all input[type=password],.ck.ck-reset_all input[type=text],.ck.ck-reset_all textarea{cursor:text}.ck.ck-reset_all input[type=password][disabled],.ck.ck-reset_all input[type=text][disabled],.ck.ck-reset_all textarea[disabled]{cursor:default}.ck.ck-reset_all fieldset{padding:10px;border:2px groove #dfdee3}.ck.ck-reset_all button::-moz-focus-inner{padding:0;border:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(19);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-editor__editable:not(.ck-editor__nested-editable).ck-focused{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0}.ck.ck-editor__editable_inline{overflow:auto;padding:0 var(--ck-spacing-standard);border:1px solid transparent}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-base-foreground)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-base-foreground)}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(21);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(23);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-sticky-panel .ck-sticky-panel__content_sticky{z-index:var(--ck-z-modal);position:fixed;top:0}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{top:auto;position:absolute}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{box-shadow:var(--ck-drop-shadow),0 0;border-width:0 1px 1px;border-top-left-radius:0;border-top-right-radius:0}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(25);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on .ck-tooltip{display:none}.ck.ck-dropdown .ck-dropdown__panel{-webkit-backface-visibility:hidden;display:none;z-index:var(--ck-z-modal);position:absolute}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{top:100%;bottom:auto}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}:root{--ck-dropdown-arrow-size:calc(0.5*var(--ck-icon-size))}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{width:7em;overflow:hidden;text-overflow:ellipsis}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown__panel{border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{box-shadow:var(--ck-drop-shadow),0 0;background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;min-width:100%}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(27);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{width:var(--ck-icon-size);height:var(--ck-icon-size);font-size:.8333350694em;will-change:transform}.ck.ck-icon,.ck.ck-icon *{color:inherit;cursor:inherit}.ck.ck-icon :not([fill]){fill:currentColor}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(29);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = '.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{position:absolute;pointer-events:none;-webkit-backface-visibility:hidden}.ck.ck-tooltip{visibility:hidden;opacity:0;display:none;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:\"\";width:0;height:0}:root{--ck-tooltip-arrow-size:5px}.ck.ck-tooltip{left:50%;top:0;transition:opacity .2s ease-in-out .2s}.ck.ck-tooltip .ck-tooltip__text{border-radius:0}.ck-rounded-corners .ck.ck-tooltip .ck-tooltip__text,.ck.ck-tooltip .ck-tooltip__text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-tooltip .ck-tooltip__text{font-size:.9em;line-height:1.5;color:var(--ck-color-tooltip-text);padding:var(--ck-spacing-small) var(--ck-spacing-medium);background:var(--ck-color-tooltip-background);position:relative;left:-50%}.ck.ck-tooltip .ck-tooltip__text:after{transition:opacity .2s ease-in-out .2s;border-style:solid;left:50%}.ck.ck-tooltip.ck-tooltip_s{bottom:calc(-1*var(--ck-tooltip-arrow-size));transform:translateY(100%)}.ck.ck-tooltip.ck-tooltip_s .ck-tooltip__text:after{top:calc(-1*var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-left-color:transparent;border-bottom-color:var(--ck-color-tooltip-background);border-right-color:transparent;border-top-color:transparent;border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:var(--ck-tooltip-arrow-size);border-right-width:var(--ck-tooltip-arrow-size);border-top-width:0}.ck.ck-tooltip.ck-tooltip_n{top:calc(-1*var(--ck-tooltip-arrow-size));transform:translateY(-100%)}.ck.ck-tooltip.ck-tooltip_n .ck-tooltip__text:after{bottom:calc(-1*var(--ck-tooltip-arrow-size));transform:translateX(-50%);border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent;border-top-color:var(--ck-color-tooltip-background);border-left-width:var(--ck-tooltip-arrow-size);border-bottom-width:0;border-right-width:var(--ck-tooltip-arrow-size);border-top-width:var(--ck-tooltip-arrow-size)}';\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(31);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-button,a.ck.ck-button{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:block}@media (hover:none){.ck.ck-button .ck-tooltip,a.ck.ck-button .ck-tooltip{display:none}}.ck.ck-button,a.ck.ck-button{position:relative;display:inline-flex;align-items:center;justify-content:left}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button:hover .ck-tooltip,a.ck.ck-button:hover .ck-tooltip{visibility:visible;opacity:1}.ck.ck-button:focus:not(:hover) .ck-tooltip,a.ck.ck-button:focus:not(:hover) .ck-tooltip{display:none}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-default-active-shadow)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{white-space:nowrap;cursor:default;vertical-align:middle;padding:var(--ck-spacing-tiny);text-align:center;min-width:var(--ck-ui-component-min-height);min-height:var(--ck-ui-component-min-height);line-height:1;font-size:inherit;border:1px solid transparent;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;-webkit-appearance:none}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{font-size:inherit;font-weight:inherit;color:inherit;cursor:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__icon{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(-1*var(--ck-spacing-small));margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-right:calc(-1*var(--ck-spacing-small));margin-left:var(--ck-spacing-small)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-on-active-shadow)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background);box-shadow:inset 0 2px 2px var(--ck-color-button-action-active-shadow)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(33);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-list{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-direction:column}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{list-style-type:none;background:var(--ck-color-list-background)}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{min-height:unset;width:100%;text-align:left;border-radius:0;padding:calc(0.2*var(--ck-line-height-base)*var(--ck-font-size-base)) calc(0.4*var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(1.2*var(--ck-line-height-base)*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck.ck-list__separator{height:1px;width:100%;background:var(--ck-color-base-border)}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(35);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:1.0769230769em;--ck-switch-button-toggle-spacing:1px;--ck-switch-button-translation:1.3846153847em}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(2*var(--ck-spacing-large))}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(2*var(--ck-spacing-large))}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{transition:background .4s ease;width:var(--ck-switch-button-toggle-width);background:var(--ck-color-switch-button-off-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(0.5*var(--ck-border-radius))}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{margin:var(--ck-switch-button-toggle-spacing);width:var(--ck-switch-button-toggle-inner-size);height:var(--ck-switch-button-toggle-inner-size);background:var(--ck-color-switch-button-inner-background);transition:all .3s ease}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var(--ck-switch-button-translation))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(-1*var(--ck-switch-button-translation)))}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(37);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-toolbar-dropdown .ck.ck-toolbar .ck.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar-dropdown .ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(39);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(41);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-toolbar{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;display:flex;flex-flow:row nowrap;align-items:center}.ck.ck-toolbar>.ck-toolbar__items{display:flex;flex-flow:row wrap;align-items:center;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);padding:0 var(--ck-spacing-small);border:1px solid var(--ck-color-toolbar-border)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;width:1px;min-width:1px;margin-top:0;margin-bottom:0;background:var(--ck-color-toolbar-border)}.ck.ck-toolbar>.ck-toolbar__items>*{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small);margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>*,.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{width:100%;margin:0;border-radius:0;border:0}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=rtl].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-top-right-radius:0;border-bottom-right-radius:0}.ck.ck-toolbar[dir=ltr].ck-toolbar_compact>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-top-left-radius:0;border-bottom-left-radius:0}.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr].ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child){margin-right:var(--ck-spacing-small)}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(43);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-modal)}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(45);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck-content blockquote{overflow:hidden;padding-right:1.5em;padding-left:1.5em;margin-left:0;margin-right:0;font-style:italic;border-left:5px solid #ccc}.ck-content[dir=rtl] blockquote{border-left:0;border-right:5px solid #ccc}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(47);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck .ck-link_selected{background:var(--ck-color-link-selected-background)}\";\n  }, function (e, t) {\n    e.exports = \".ck.ck-heading_heading1{font-size:20px}.ck.ck-heading_heading2{font-size:17px}.ck.ck-heading_heading3{font-size:14px}.ck[class*=ck-heading_heading]{font-weight:700}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__button .ck-button__label{width:8em}.ck.ck-dropdown.ck-heading-dropdown .ck-dropdown__panel .ck-list__item{min-width:18em}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(50);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-resizer-size:10px;--ck-resizer-border-width:1px;--ck-resizer-border-radius:2px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-tooltip-offset:10px;--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2}.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover .ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);color:var(--ck-color-resizer-tooltip-text);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);font-size:var(--ck-font-size-tiny);display:block;padding:var(--ck-spacing-small)}.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{top:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{top:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-width:var(--ck-widget-outline-thickness);outline-style:solid;outline-color:transparent;transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;background-color:var(--ck-color-widget-editable-focus-background)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{padding:4px;box-sizing:border-box;background-color:transparent;opacity:0;transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;transform:translateY(-100%);left:calc(0px - var(--ck-widget-outline-thickness))}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{width:var(--ck-widget-handler-icon-size);height:var(--ck-widget-handler-icon-size);color:var(--ck-color-widget-drag-handler-icon-color)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover .ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover .ck-widget__selection-handle{opacity:1;background-color:var(--ck-color-focus-border)}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child,.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle .ck-widget__selection-handle:hover,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck-editor__editable.ck-read-only .ck-widget{--ck-widget-outline-thickness:0}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(52);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-labeled-input .ck-labeled-input__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-input .ck-labeled-input__status_error{color:var(--ck-color-base-error)}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(54);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \":root{--ck-input-text-width:18em}.ck.ck-input-text{border-radius:0}.ck-rounded-corners .ck.ck-input-text,.ck.ck-input-text.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input-text{box-shadow:var(--ck-inner-shadow),0 0;background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);min-width:var(--ck-input-text-width);min-height:var(--ck-ui-component-min-height);transition:box-shadow .2s ease-in-out,border .2s ease-in-out}.ck.ck-input-text:focus{outline:none;border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),var(--ck-inner-shadow)}.ck.ck-input-text[readonly]{border:1px solid var(--ck-color-input-disabled-border);background:var(--ck-color-input-disabled-background);color:var(--ck-color-input-disabled-text)}.ck.ck-input-text[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),var(--ck-inner-shadow)}.ck.ck-input-text.ck-error{border-color:var(--ck-color-input-error-border);animation:ck-text-input-shake .3s ease both}.ck.ck-input-text.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),var(--ck-inner-shadow)}@keyframes ck-text-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(56);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-text-alternative-form{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-text-alternative-form .ck-labeled-input{display:inline-block}.ck.ck-text-alternative-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-text-alternative-form{flex-wrap:wrap}.ck.ck-text-alternative-form .ck-labeled-input{flex-basis:100%}.ck.ck-text-alternative-form .ck-button{flex-basis:50%}}.ck.ck-text-alternative-form{padding:var(--ck-spacing-standard)}.ck.ck-text-alternative-form:focus{outline:none}[dir=ltr] .ck.ck-text-alternative-form>:not(:first-child),[dir=rtl] .ck.ck-text-alternative-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-text-alternative-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-text-alternative-form .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-text-alternative-form .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-text-alternative-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-text-alternative-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-text-alternative-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-text-alternative-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-text-alternative-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(58);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = ':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-modal)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:\"\";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{width:0;height:0;border-style:solid}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:var(--ck-balloon-arrow-height);border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:0}.ck.ck-balloon-panel[class*=arrow_n]:before{border-bottom-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-left-color:transparent;border-right-color:transparent;border-top-color:transparent}.ck.ck-balloon-panel[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background);margin-top:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-width:var(--ck-balloon-arrow-half-width);border-bottom-width:0;border-right-width:var(--ck-balloon-arrow-half-width);border-top-width:var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-top-color:var(--ck-color-panel-border)}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-left-color:transparent;border-bottom-color:transparent;border-right-color:transparent}.ck.ck-balloon-panel[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background);margin-bottom:var(--ck-balloon-arrow-offset)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(-1*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{left:50%;margin-left:calc(-1*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{left:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{right:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{right:25%;margin-right:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{left:25%;margin-left:calc(2*var(--ck-balloon-arrow-half-width));bottom:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{right:25%;margin-right:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(2*var(--ck-balloon-arrow-half-width));top:calc(-1*var(--ck-balloon-arrow-height))}';\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(60);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck .ck-balloon-rotator__navigation{display:flex;align-items:center;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);margin-bottom:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-right:var(--ck-spacing-standard);margin-left:var(--ck-spacing-small)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(62);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-modal) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{box-shadow:var(--ck-drop-shadow),0 0;min-height:15px;background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);width:100%;height:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(64);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck-content .image{display:table;clear:both;text-align:center;margin:1em auto}.ck-content .image>img{display:block;margin:0 auto;max-width:100%;min-width:50px}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(66);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck-content .image>figcaption{display:table-caption;caption-side:bottom;word-break:break-word;color:#333;background-color:#f7f7f7;padding:.6em;font-size:.75em;outline-offset:-1px}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(68);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \":root{--ck-image-style-spacing:1.5em}.ck-content .image-style-align-center,.ck-content .image-style-align-left,.ck-content .image-style-align-right,.ck-content .image-style-side{max-width:50%}.ck-content .image-style-side{float:right;margin-left:var(--ck-image-style-spacing)}.ck-content .image-style-align-left{float:left;margin-right:var(--ck-image-style-spacing)}.ck-content .image-style-align-center{margin-left:auto;margin-right:auto}.ck-content .image-style-align-right{float:right;margin-left:var(--ck-image-style-spacing)}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(70);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-editor__editable .image{position:relative}.ck.ck-editor__editable .image .ck-progress-bar{position:absolute;top:0;left:0}.ck.ck-editor__editable .image.ck-appear{animation:fadeIn .7s}.ck.ck-editor__editable .image .ck-progress-bar{height:2px;width:0;background:var(--ck-color-upload-bar-background);transition:width .1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(72);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = '.ck-image-upload-complete-icon{display:block;position:absolute;top:10px;right:10px;border-radius:50%}.ck-image-upload-complete-icon:after{content:\"\";position:absolute}:root{--ck-color-image-upload-icon:#fff;--ck-color-image-upload-icon-background:#008a00;--ck-image-upload-icon-size:20px;--ck-image-upload-icon-width:2px}.ck-image-upload-complete-icon{width:var(--ck-image-upload-icon-size);height:var(--ck-image-upload-icon-size);opacity:0;background:var(--ck-color-image-upload-icon-background);animation-name:ck-upload-complete-icon-show,ck-upload-complete-icon-hide;animation-fill-mode:forwards,forwards;animation-duration:.5s,.5s;font-size:var(--ck-image-upload-icon-size);animation-delay:0ms,3s}.ck-image-upload-complete-icon:after{left:25%;top:50%;opacity:0;height:0;width:0;transform:scaleX(-1) rotate(135deg);transform-origin:left top;border-top:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);border-right:var(--ck-image-upload-icon-width) solid var(--ck-color-image-upload-icon);animation-name:ck-upload-complete-icon-check;animation-duration:.5s;animation-delay:.5s;animation-fill-mode:forwards;box-sizing:border-box}@keyframes ck-upload-complete-icon-show{0%{opacity:0}to{opacity:1}}@keyframes ck-upload-complete-icon-hide{0%{opacity:1}to{opacity:0}}@keyframes ck-upload-complete-icon-check{0%{opacity:1;width:0;height:0}33%{width:.3em;height:0}to{opacity:1;width:.3em;height:.45em}}';\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(74);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = '.ck .ck-upload-placeholder-loader{position:absolute;display:flex;align-items:center;justify-content:center;top:0;left:0}.ck .ck-upload-placeholder-loader:before{content:\"\";position:relative}:root{--ck-color-upload-placeholder-loader:#b3b3b3;--ck-upload-placeholder-loader-size:32px}.ck .ck-image-upload-placeholder{width:100%;margin:0}.ck .ck-upload-placeholder-loader{width:100%;height:100%}.ck .ck-upload-placeholder-loader:before{width:var(--ck-upload-placeholder-loader-size);height:var(--ck-upload-placeholder-loader-size);border-radius:50%;border-top:3px solid var(--ck-color-upload-placeholder-loader);border-right:2px solid transparent;animation:ck-upload-placeholder-loader 1s linear infinite}@keyframes ck-upload-placeholder-loader{to{transform:rotate(1turn)}}';\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(76);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-link-form{display:flex}.ck.ck-link-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-link-form{flex-wrap:wrap}.ck.ck-link-form .ck-labeled-input{flex-basis:100%}.ck.ck-link-form .ck-button{flex-basis:50%}}.ck.ck-link-form_layout-vertical{display:block}.ck.ck-link-form{padding:var(--ck-spacing-standard)}.ck.ck-link-form:focus{outline:none}[dir=ltr] .ck.ck-link-form>:not(:first-child),[dir=rtl] .ck.ck-link-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-link-form .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-form .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-link-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-link-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}.ck.ck-link-form_layout-vertical{padding:0;min-width:var(--ck-input-text-width)}.ck.ck-link-form_layout-vertical .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) var(--ck-spacing-small)}.ck.ck-link-form_layout-vertical .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-link-form_layout-vertical .ck-button{padding:var(--ck-spacing-standard);margin:0;border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border);width:50%}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=ltr] .ck.ck-link-form_layout-vertical .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button{margin-left:0}[dir=rtl] .ck.ck-link-form_layout-vertical .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}.ck.ck-link-form_layout-vertical .ck.ck-list{margin-left:0}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton{border:0;width:100%}.ck.ck-link-form_layout-vertical .ck.ck-list .ck-button.ck-switchbutton:hover{background:none}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(78);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-link-actions{display:flex;flex-direction:row;flex-wrap:nowrap}.ck.ck-link-actions .ck-link-actions__preview{display:inline-block}.ck.ck-link-actions .ck-link-actions__preview .ck-button__label{overflow:hidden}@media screen and (max-width:600px){.ck.ck-link-actions{flex-wrap:wrap}.ck.ck-link-actions .ck-link-actions__preview{flex-basis:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){flex-basis:50%}}.ck.ck-link-actions{padding:var(--ck-spacing-standard)}.ck.ck-link-actions .ck-button.ck-link-actions__preview{padding-left:0;padding-right:0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{padding:0 var(--ck-spacing-medium);color:var(--ck-color-link-default);text-overflow:ellipsis;cursor:pointer;max-width:var(--ck-input-text-width);min-width:3em;text-align:center}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label:hover{text-decoration:underline}.ck.ck-link-actions .ck-button.ck-link-actions__preview,.ck.ck-link-actions .ck-button.ck-link-actions__preview:active,.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus,.ck.ck-link-actions .ck-button.ck-link-actions__preview:hover{background:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:active{box-shadow:none}.ck.ck-link-actions .ck-button.ck-link-actions__preview:focus .ck-button__label{text-decoration:underline}.ck.ck-link-actions:focus{outline:none}[dir=ltr] .ck.ck-link-actions .ck-button:not(:first-child),[dir=rtl] .ck.ck-link-actions .ck-button:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-link-actions{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-link-actions .ck-button.ck-link-actions__preview{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-link-actions .ck-button.ck-link-actions__preview .ck-button__label{min-width:0;max-width:100%}.ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}[dir=ltr] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview):first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview){margin-left:0}[dir=rtl] .ck.ck-link-actions .ck-button:not(.ck-link-actions__preview):last-of-type{border-right:1px solid var(--ck-color-base-border)}}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(80);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = '.ck-media__wrapper .ck-media__placeholder{display:flex;flex-direction:column;align-items:center}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:block}@media (hover:none){.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-tooltip{display:none}}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url{max-width:100%;position:relative}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url:hover .ck-tooltip{visibility:visible;opacity:1}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url .ck-media__placeholder__url__text{overflow:hidden;display:block}.ck-media__wrapper[data-oembed-url*=\"facebook.com\"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*=\"google.com/maps\"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*=\"instagram.com\"] .ck-media__placeholder__icon *,.ck-media__wrapper[data-oembed-url*=\"twitter.com\"] .ck-media__placeholder__icon *{display:none}.ck-editor__editable:not(.ck-read-only) .ck-media__wrapper>:not(.ck-media__placeholder),.ck-editor__editable:not(.ck-read-only) .ck-widget:not(.ck-widget_selected) .ck-media__placeholder{pointer-events:none}:root{--ck-media-embed-placeholder-icon-size:3em;--ck-color-media-embed-placeholder-url-text:#757575;--ck-color-media-embed-placeholder-url-text-hover:var(--ck-color-base-text)}.ck-media__wrapper{margin:0 auto}.ck-media__wrapper .ck-media__placeholder{padding:calc(3*var(--ck-spacing-standard));background:var(--ck-color-base-foreground)}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon{min-width:var(--ck-media-embed-placeholder-icon-size);height:var(--ck-media-embed-placeholder-icon-size);margin-bottom:var(--ck-spacing-large);background-position:50%;background-size:cover}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__icon .ck-icon{width:100%;height:100%}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text{color:var(--ck-color-media-embed-placeholder-url-text);white-space:nowrap;text-align:center;font-style:italic;text-overflow:ellipsis}.ck-media__wrapper .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:var(--ck-color-media-embed-placeholder-url-text-hover);cursor:pointer;text-decoration:underline}.ck-media__wrapper[data-oembed-url*=\"open.spotify.com\"]{max-width:300px;max-height:380px}.ck-media__wrapper[data-oembed-url*=\"google.com/maps\"] .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAuMzc4IiBoZWlnaHQ9IjI1NC4xNjciIHZpZXdCb3g9IjAgMCA2Ni4yNDYgNjcuMjQ4Ij48ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTcyLjUzMSAtMjE4LjQ1NSkgc2NhbGUoLjk4MDEyKSI+PHJlY3Qgcnk9IjUuMjM4IiByeD0iNS4yMzgiIHk9IjIzMS4zOTkiIHg9IjE3Ni4wMzEiIGhlaWdodD0iNjAuMDk5IiB3aWR0aD0iNjAuMDk5IiBmaWxsPSIjMzRhNjY4IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0yMDYuNDc3IDI2MC45bC0yOC45ODcgMjguOTg3YTUuMjE4IDUuMjE4IDAgMDAzLjc4IDEuNjFoNDkuNjIxYzEuNjk0IDAgMy4xOS0uNzk4IDQuMTQ2LTIuMDM3eiIgZmlsbD0iIzVjODhjNSIvPjxwYXRoIGQ9Ik0yMjYuNzQyIDIyMi45ODhjLTkuMjY2IDAtMTYuNzc3IDcuMTctMTYuNzc3IDE2LjAxNC4wMDcgMi43NjIuNjYzIDUuNDc0IDIuMDkzIDcuODc1LjQzLjcwMy44MyAxLjQwOCAxLjE5IDIuMTA3LjMzMy41MDIuNjUgMS4wMDUuOTUgMS41MDguMzQzLjQ3Ny42NzMuOTU3Ljk4OCAxLjQ0IDEuMzEgMS43NjkgMi41IDMuNTAyIDMuNjM3IDUuMTY4Ljc5MyAxLjI3NSAxLjY4MyAyLjY0IDIuNDY2IDMuOTkgMi4zNjMgNC4wOTQgNC4wMDcgOC4wOTIgNC42IDEzLjkxNHYuMDEyYy4xODIuNDEyLjUxNi42NjYuODc5LjY2Ny40MDMtLjAwMS43NjgtLjMxNC45My0uNzk5LjYwMy01Ljc1NiAyLjIzOC05LjcyOSA0LjU4NS0xMy43OTQuNzgyLTEuMzUgMS42NzMtMi43MTUgMi40NjUtMy45OSAxLjEzNy0xLjY2NiAyLjMyOC0zLjQgMy42MzgtNS4xNjkuMzE1LS40ODIuNjQ1LS45NjIuOTg4LTEuNDM5LjMtLjUwMy42MTctMS4wMDYuOTUtMS41MDguMzU5LS43Ljc2LTEuNDA0IDEuMTktMi4xMDcgMS40MjYtMi40MDIgMi01LjExNCAyLjAwNC03Ljg3NSAwLTguODQ0LTcuNTExLTE2LjAxNC0xNi43NzYtMTYuMDE0eiIgZmlsbD0iI2RkNGIzZSIgcGFpbnQtb3JkZXI9Im1hcmtlcnMgc3Ryb2tlIGZpbGwiLz48ZWxsaXBzZSByeT0iNS41NjQiIHJ4PSI1LjgyOCIgY3k9IjIzOS4wMDIiIGN4PSIyMjYuNzQyIiBmaWxsPSIjODAyZDI3IiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjxwYXRoIGQ9Ik0xOTAuMzAxIDIzNy4yODNjLTQuNjcgMC04LjQ1NyAzLjg1My04LjQ1NyA4LjYwNnMzLjc4NiA4LjYwNyA4LjQ1NyA4LjYwN2MzLjA0MyAwIDQuODA2LS45NTggNi4zMzctMi41MTYgMS41My0xLjU1NyAyLjA4Ny0zLjkxMyAyLjA4Ny02LjI5IDAtLjM2Mi0uMDIzLS43MjItLjA2NC0xLjA3OWgtOC4yNTd2My4wNDNoNC44NWMtLjE5Ny43NTktLjUzMSAxLjQ1LTEuMDU4IDEuOTg2LS45NDIuOTU4LTIuMDI4IDEuNTQ4LTMuOTAxIDEuNTQ4LTIuODc2IDAtNS4yMDgtMi4zNzItNS4yMDgtNS4yOTkgMC0yLjkyNiAyLjMzMi01LjI5OSA1LjIwOC01LjI5OSAxLjM5OSAwIDIuNjE4LjQwNyAzLjU4NCAxLjI5M2wyLjM4MS0yLjM4YzAtLjAwMi0uMDAzLS4wMDQtLjAwNC0uMDA1LTEuNTg4LTEuNTI0LTMuNjItMi4yMTUtNS45NTUtMi4yMTV6bTQuNDMgNS42NmwuMDAzLjAwNnYtLjAwM3oiIGZpbGw9IiNmZmYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxNS4xODQgMjUxLjkyOWwtNy45OCA3Ljk3OSAyOC40NzcgMjguNDc1YTUuMjMzIDUuMjMzIDAgMDAuNDQ5LTIuMTIzdi0zMS4xNjVjLS40NjkuNjc1LS45MzQgMS4zNDktMS4zODIgMi4wMDUtLjc5MiAxLjI3NS0xLjY4MiAyLjY0LTIuNDY1IDMuOTktMi4zNDcgNC4wNjUtMy45ODIgOC4wMzgtNC41ODUgMTMuNzk0LS4xNjIuNDg1LS41MjcuNzk4LS45My43OTktLjM2My0uMDAxLS42OTctLjI1NS0uODc5LS42Njd2LS4wMTJjLS41OTMtNS44MjItMi4yMzctOS44Mi00LjYtMTMuOTE0LS43ODMtMS4zNS0xLjY3My0yLjcxNS0yLjQ2Ni0zLjk5LTEuMTM3LTEuNjY2LTIuMzI3LTMuNC0zLjYzNy01LjE2OWwtLjAwMi0uMDAzeiIgZmlsbD0iI2MzYzNjMyIvPjxwYXRoIGQ9Ik0yMTIuOTgzIDI0OC40OTVsLTM2Ljk1MiAzNi45NTN2LjgxMmE1LjIyNyA1LjIyNyAwIDAwNS4yMzggNS4yMzhoMS4wMTVsMzUuNjY2LTM1LjY2NmExMzYuMjc1IDEzNi4yNzUgMCAwMC0yLjc2NC0zLjkgMzcuNTc1IDM3LjU3NSAwIDAwLS45ODktMS40NCAzNS4xMjcgMzUuMTI3IDAgMDAtLjk1LTEuNTA4Yy0uMDgzLS4xNjItLjE3Ni0uMzI2LS4yNjQtLjQ4OXoiIGZpbGw9IiNmZGRjNGYiIHBhaW50LW9yZGVyPSJtYXJrZXJzIHN0cm9rZSBmaWxsIi8+PHBhdGggZD0iTTIxMS45OTggMjYxLjA4M2wtNi4xNTIgNi4xNTEgMjQuMjY0IDI0LjI2NGguNzgxYTUuMjI3IDUuMjI3IDAgMDA1LjIzOS01LjIzOHYtMS4wNDV6IiBmaWxsPSIjZmZmIiBwYWludC1vcmRlcj0ibWFya2VycyBzdHJva2UgZmlsbCIvPjwvZz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*=\"facebook.com\"] .ck-media__placeholder{background:#4268b3}.ck-media__wrapper[data-oembed-url*=\"facebook.com\"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxwYXRoIGQ9Ik05NjcuNDg0IDBINTYuNTE3QzI1LjMwNCAwIDAgMjUuMzA0IDAgNTYuNTE3djkxMC45NjZDMCA5OTguNjk0IDI1LjI5NyAxMDI0IDU2LjUyMiAxMDI0SDU0N1Y2MjhINDE0VjQ3M2gxMzNWMzU5LjAyOWMwLTEzMi4yNjIgODAuNzczLTIwNC4yODIgMTk4Ljc1Ni0yMDQuMjgyIDU2LjUxMyAwIDEwNS4wODYgNC4yMDggMTE5LjI0NCA2LjA4OVYyOTlsLTgxLjYxNi4wMzdjLTYzLjk5MyAwLTc2LjM4NCAzMC40OTItNzYuMzg0IDc1LjIzNlY0NzNoMTUzLjQ4N2wtMTkuOTg2IDE1NUg3MDd2Mzk2aDI2MC40ODRjMzEuMjEzIDAgNTYuNTE2LTI1LjMwMyA1Ni41MTYtNTYuNTE2VjU2LjUxNUMxMDI0IDI1LjMwMyA5OTguNjk3IDAgOTY3LjQ4NCAwIiBmaWxsPSIjRkZGRkZFIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*=\"facebook.com\"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#cdf}.ck-media__wrapper[data-oembed-url*=\"facebook.com\"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*=\"instagram.com\"] .ck-media__placeholder{background:linear-gradient(-135deg,#1400c8,#b900b4,#f50000)}.ck-media__wrapper[data-oembed-url*=\"instagram.com\"] .ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTA0IiBoZWlnaHQ9IjUwNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIC4xNTloNTAzLjg0MVY1MDMuOTRIMHoiLz48L2RlZnM+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48bWFzayBpZD0iYiIgZmlsbD0iI2ZmZiI+PHVzZSB4bGluazpocmVmPSIjYSIvPjwvbWFzaz48cGF0aCBkPSJNMjUxLjkyMS4xNTljLTY4LjQxOCAwLTc2Ljk5Ny4yOS0xMDMuODY3IDEuNTE2LTI2LjgxNCAxLjIyMy00NS4xMjcgNS40ODItNjEuMTUxIDExLjcxLTE2LjU2NiA2LjQzNy0zMC42MTUgMTUuMDUxLTQ0LjYyMSAyOS4wNTYtMTQuMDA1IDE0LjAwNi0yMi42MTkgMjguMDU1LTI5LjA1NiA0NC42MjEtNi4yMjggMTYuMDI0LTEwLjQ4NyAzNC4zMzctMTEuNzEgNjEuMTUxQy4yOSAxNzUuMDgzIDAgMTgzLjY2MiAwIDI1Mi4wOGMwIDY4LjQxNy4yOSA3Ni45OTYgMS41MTYgMTAzLjg2NiAxLjIyMyAyNi44MTQgNS40ODIgNDUuMTI3IDExLjcxIDYxLjE1MSA2LjQzNyAxNi41NjYgMTUuMDUxIDMwLjYxNSAyOS4wNTYgNDQuNjIxIDE0LjAwNiAxNC4wMDUgMjguMDU1IDIyLjYxOSA0NC42MjEgMjkuMDU3IDE2LjAyNCA2LjIyNyAzNC4zMzcgMTAuNDg2IDYxLjE1MSAxMS43MDkgMjYuODcgMS4yMjYgMzUuNDQ5IDEuNTE2IDEwMy44NjcgMS41MTYgNjguNDE3IDAgNzYuOTk2LS4yOSAxMDMuODY2LTEuNTE2IDI2LjgxNC0xLjIyMyA0NS4xMjctNS40ODIgNjEuMTUxLTExLjcwOSAxNi41NjYtNi40MzggMzAuNjE1LTE1LjA1MiA0NC42MjEtMjkuMDU3IDE0LjAwNS0xNC4wMDYgMjIuNjE5LTI4LjA1NSAyOS4wNTctNDQuNjIxIDYuMjI3LTE2LjAyNCAxMC40ODYtMzQuMzM3IDExLjcwOS02MS4xNTEgMS4yMjYtMjYuODcgMS41MTYtMzUuNDQ5IDEuNTE2LTEwMy44NjYgMC02OC40MTgtLjI5LTc2Ljk5Ny0xLjUxNi0xMDMuODY3LTEuMjIzLTI2LjgxNC01LjQ4Mi00NS4xMjctMTEuNzA5LTYxLjE1MS02LjQzOC0xNi41NjYtMTUuMDUyLTMwLjYxNS0yOS4wNTctNDQuNjIxLTE0LjAwNi0xNC4wMDUtMjguMDU1LTIyLjYxOS00NC42MjEtMjkuMDU2LTE2LjAyNC02LjIyOC0zNC4zMzctMTAuNDg3LTYxLjE1MS0xMS43MUMzMjguOTE3LjQ0OSAzMjAuMzM4LjE1OSAyNTEuOTIxLjE1OXptMCA0NS4zOTFjNjcuMjY1IDAgNzUuMjMzLjI1NyAxMDEuNzk3IDEuNDY5IDI0LjU2MiAxLjEyIDM3LjkwMSA1LjIyNCA0Ni43NzggOC42NzQgMTEuNzU5IDQuNTcgMjAuMTUxIDEwLjAyOSAyOC45NjYgMTguODQ1IDguODE2IDguODE1IDE0LjI3NSAxNy4yMDcgMTguODQ1IDI4Ljk2NiAzLjQ1IDguODc3IDcuNTU0IDIyLjIxNiA4LjY3NCA0Ni43NzggMS4yMTIgMjYuNTY0IDEuNDY5IDM0LjUzMiAxLjQ2OSAxMDEuNzk4IDAgNjcuMjY1LS4yNTcgNzUuMjMzLTEuNDY5IDEwMS43OTctMS4xMiAyNC41NjItNS4yMjQgMzcuOTAxLTguNjc0IDQ2Ljc3OC00LjU3IDExLjc1OS0xMC4wMjkgMjAuMTUxLTE4Ljg0NSAyOC45NjYtOC44MTUgOC44MTYtMTcuMjA3IDE0LjI3NS0yOC45NjYgMTguODQ1LTguODc3IDMuNDUtMjIuMjE2IDcuNTU0LTQ2Ljc3OCA4LjY3NC0yNi41NiAxLjIxMi0zNC41MjcgMS40NjktMTAxLjc5NyAxLjQ2OS02Ny4yNzEgMC03NS4yMzctLjI1Ny0xMDEuNzk4LTEuNDY5LTI0LjU2Mi0xLjEyLTM3LjkwMS01LjIyNC00Ni43NzgtOC42NzQtMTEuNzU5LTQuNTctMjAuMTUxLTEwLjAyOS0yOC45NjYtMTguODQ1LTguODE1LTguODE1LTE0LjI3NS0xNy4yMDctMTguODQ1LTI4Ljk2Ni0zLjQ1LTguODc3LTcuNTU0LTIyLjIxNi04LjY3NC00Ni43NzgtMS4yMTItMjYuNTY0LTEuNDY5LTM0LjUzMi0xLjQ2OS0xMDEuNzk3IDAtNjcuMjY2LjI1Ny03NS4yMzQgMS40NjktMTAxLjc5OCAxLjEyLTI0LjU2MiA1LjIyNC0zNy45MDEgOC42NzQtNDYuNzc4IDQuNTctMTEuNzU5IDEwLjAyOS0yMC4xNTEgMTguODQ1LTI4Ljk2NiA4LjgxNS04LjgxNiAxNy4yMDctMTQuMjc1IDI4Ljk2Ni0xOC44NDUgOC44NzctMy40NSAyMi4yMTYtNy41NTQgNDYuNzc4LTguNjc0IDI2LjU2NC0xLjIxMiAzNC41MzItMS40NjkgMTAxLjc5OC0xLjQ2OXoiIGZpbGw9IiNGRkYiIG1hc2s9InVybCgjYikiLz48cGF0aCBkPSJNMjUxLjkyMSAzMzYuMDUzYy00Ni4zNzggMC04My45NzQtMzcuNTk2LTgzLjk3NC04My45NzMgMC00Ni4zNzggMzcuNTk2LTgzLjk3NCA4My45NzQtODMuOTc0IDQ2LjM3NyAwIDgzLjk3MyAzNy41OTYgODMuOTczIDgzLjk3NCAwIDQ2LjM3Ny0zNy41OTYgODMuOTczLTgzLjk3MyA4My45NzN6bTAtMjEzLjMzOGMtNzEuNDQ3IDAtMTI5LjM2NSA1Ny45MTgtMTI5LjM2NSAxMjkuMzY1IDAgNzEuNDQ2IDU3LjkxOCAxMjkuMzY0IDEyOS4zNjUgMTI5LjM2NCA3MS40NDYgMCAxMjkuMzY0LTU3LjkxOCAxMjkuMzY0LTEyOS4zNjQgMC03MS40NDctNTcuOTE4LTEyOS4zNjUtMTI5LjM2NC0xMjkuMzY1ek00MTYuNjI3IDExNy42MDRjMCAxNi42OTYtMTMuNTM1IDMwLjIzLTMwLjIzMSAzMC4yMy0xNi42OTUgMC0zMC4yMy0xMy41MzQtMzAuMjMtMzAuMjMgMC0xNi42OTYgMTMuNTM1LTMwLjIzMSAzMC4yMy0zMC4yMzEgMTYuNjk2IDAgMzAuMjMxIDEzLjUzNSAzMC4yMzEgMzAuMjMxIiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg==)}.ck-media__wrapper[data-oembed-url*=\"instagram.com\"] .ck-media__placeholder .ck-media__placeholder__url__text{color:#ffe0fe}.ck-media__wrapper[data-oembed-url*=\"instagram.com\"] .ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}.ck-media__wrapper[data-oembed-url*=\"twitter.com\"] .ck.ck-media__placeholder{background:linear-gradient(90deg,#71c6f4,#0d70a5)}.ck-media__wrapper[data-oembed-url*=\"twitter.com\"] .ck.ck-media__placeholder .ck-media__placeholder__icon{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MDAgNDAwIj48cGF0aCBkPSJNNDAwIDIwMGMwIDExMC41LTg5LjUgMjAwLTIwMCAyMDBTMCAzMTAuNSAwIDIwMCA4OS41IDAgMjAwIDBzMjAwIDg5LjUgMjAwIDIwMHpNMTYzLjQgMzA1LjVjODguNyAwIDEzNy4yLTczLjUgMTM3LjItMTM3LjIgMC0yLjEgMC00LjItLjEtNi4yIDkuNC02LjggMTcuNi0xNS4zIDI0LjEtMjUtOC42IDMuOC0xNy45IDYuNC0yNy43IDcuNiAxMC02IDE3LjYtMTUuNCAyMS4yLTI2LjctOS4zIDUuNS0xOS42IDkuNS0zMC42IDExLjctOC44LTkuNC0yMS4zLTE1LjItMzUuMi0xNS4yLTI2LjYgMC00OC4yIDIxLjYtNDguMiA0OC4yIDAgMy44LjQgNy41IDEuMyAxMS00MC4xLTItNzUuNi0yMS4yLTk5LjQtNTAuNC00LjEgNy4xLTYuNSAxNS40LTYuNSAyNC4yIDAgMTYuNyA4LjUgMzEuNSAyMS41IDQwLjEtNy45LS4yLTE1LjMtMi40LTIxLjgtNnYuNmMwIDIzLjQgMTYuNiA0Mi44IDM4LjcgNDcuMy00IDEuMS04LjMgMS43LTEyLjcgMS43LTMuMSAwLTYuMS0uMy05LjEtLjkgNi4xIDE5LjIgMjMuOSAzMy4xIDQ1IDMzLjUtMTYuNSAxMi45LTM3LjMgMjAuNi01OS45IDIwLjYtMy45IDAtNy43LS4yLTExLjUtLjcgMjEuMSAxMy44IDQ2LjUgMjEuOCA3My43IDIxLjgiIGZpbGw9IiNmZmYiLz48L3N2Zz4=)}.ck-media__wrapper[data-oembed-url*=\"twitter.com\"] .ck.ck-media__placeholder .ck-media__placeholder__url__text{color:#b8e6ff}.ck-media__wrapper[data-oembed-url*=\"twitter.com\"] .ck.ck-media__placeholder .ck-media__placeholder__url__text:hover{color:#fff}';\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(82);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck.ck-media-form{display:flex;align-items:flex-start;flex-direction:row;flex-wrap:nowrap}.ck.ck-media-form .ck-labeled-input{display:inline-block}.ck.ck-media-form .ck-label{display:none}@media screen and (max-width:600px){.ck.ck-media-form{flex-wrap:wrap}.ck.ck-media-form .ck-labeled-input{flex-basis:100%}.ck.ck-media-form .ck-button{flex-basis:50%}}.ck.ck-media-form{padding:var(--ck-spacing-standard)}.ck.ck-media-form:focus{outline:none}[dir=ltr] .ck.ck-media-form>:not(:first-child),[dir=rtl] .ck.ck-media-form>:not(:last-child){margin-left:var(--ck-spacing-standard)}@media screen and (max-width:600px){.ck.ck-media-form{padding:0;width:calc(0.8*var(--ck-input-text-width))}.ck.ck-media-form .ck-labeled-input{margin:var(--ck-spacing-standard) var(--ck-spacing-standard) 0}.ck.ck-media-form .ck-labeled-input .ck-input-text{min-width:0;width:100%}.ck.ck-media-form .ck-labeled-input .ck-labeled-input__error{white-space:normal}.ck.ck-media-form .ck-button{padding:var(--ck-spacing-standard);margin-top:var(--ck-spacing-standard);border-radius:0;border:0;border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-media-form .ck-button{margin-left:0}[dir=ltr] .ck.ck-media-form .ck-button:first-of-type{border-right:1px solid var(--ck-color-base-border)}[dir=rtl] .ck.ck-media-form .ck-button{margin-left:0}[dir=rtl] .ck.ck-media-form .ck-button:last-of-type{border-right:1px solid var(--ck-color-base-border)}}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(84);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck-content .media{clear:both;margin:1em 0;display:block;min-width:15em}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(86);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \":root{--ck-color-table-focused-cell-background:rgba(158,207,250,0.3)}.ck-widget.table td.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table td.ck-editor__nested-editable:focus,.ck-widget.table th.ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck-widget.table th.ck-editor__nested-editable:focus{background:var(--ck-color-table-focused-cell-background);border-style:none;outline:1px solid var(--ck-color-focus-border);outline-offset:-1px}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(88);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck .ck-insert-table-dropdown__grid{display:flex;flex-direction:row;flex-wrap:wrap}:root{--ck-insert-table-dropdown-padding:10px;--ck-insert-table-dropdown-box-height:11px;--ck-insert-table-dropdown-box-width:12px;--ck-insert-table-dropdown-box-margin:1px}.ck .ck-insert-table-dropdown__grid{width:calc(var(--ck-insert-table-dropdown-box-width)*10 + var(--ck-insert-table-dropdown-box-margin)*20 + var(--ck-insert-table-dropdown-padding)*2);padding:var(--ck-insert-table-dropdown-padding) var(--ck-insert-table-dropdown-padding) 0}.ck .ck-insert-table-dropdown__label{text-align:center}.ck .ck-insert-table-dropdown-grid-box{width:var(--ck-insert-table-dropdown-box-width);height:var(--ck-insert-table-dropdown-box-height);margin:var(--ck-insert-table-dropdown-box-margin);border:1px solid var(--ck-color-base-border);border-radius:1px}.ck .ck-insert-table-dropdown-grid-box.ck-on{border-color:var(--ck-color-focus-border);background:var(--ck-color-focus-outer-shadow)}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(90);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \":root{--ck-table-selected-cell-background:#cee5fd}.ck.ck-editor__editable .table table td.ck-editor__editable_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected{background-color:var(--ck-table-selected-cell-background)!important;caret-color:transparent;outline:unset;box-shadow:unset}.ck.ck-editor__editable .table table td.ck-editor__editable_selected ::selection,.ck.ck-editor__editable .table table th.ck-editor__editable_selected ::selection{background-color:transparent}.ck.ck-editor__editable .table table td.ck-editor__editable_selected .ck-widget_selected,.ck.ck-editor__editable .table table th.ck-editor__editable_selected .ck-widget_selected{outline:unset}\";\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(92);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".ck-content .table{margin:1em auto;display:table}.ck-content .table table{border-collapse:collapse;border-spacing:0;width:100%;height:100%;border:1px double #b3b3b3}.ck-content .table table td,.ck-content .table table th{min-width:2em;padding:.4em;border-color:#bfbfbf}.ck-content .table table th{font-weight:700;background:hsla(0,0%,0%,5%)}\";\n  }, function (module, __webpack_exports__, __webpack_require__) {\n    \"use strict\";\n\n    var md5;\n    var _unused_webpack_default_export = md5;\n\n    (function () {\n      var HxOverrides = function HxOverrides() {};\n\n      HxOverrides.__name__ = true;\n\n      HxOverrides.dateStr = function (e) {\n        var t = e.getMonth() + 1;\n        var n = e.getDate();\n        var i = e.getHours();\n        var o = e.getMinutes();\n        var s = e.getSeconds();\n        return e.getFullYear() + \"-\" + (t < 10 ? \"0\" + t : \"\" + t) + \"-\" + (n < 10 ? \"0\" + n : \"\" + n) + \" \" + (i < 10 ? \"0\" + i : \"\" + i) + \":\" + (o < 10 ? \"0\" + o : \"\" + o) + \":\" + (s < 10 ? \"0\" + s : \"\" + s);\n      };\n\n      HxOverrides.strDate = function (e) {\n        switch (e.length) {\n          case 8:\n            var t = e.split(\":\");\n            var n = new Date();\n            n.setTime(0);\n            n.setUTCHours(t[0]);\n            n.setUTCMinutes(t[1]);\n            n.setUTCSeconds(t[2]);\n            return n;\n\n          case 10:\n            var t = e.split(\"-\");\n            return new Date(t[0], t[1] - 1, t[2], 0, 0, 0);\n\n          case 19:\n            var t = e.split(\" \");\n            var i = t[0].split(\"-\");\n            var o = t[1].split(\":\");\n            return new Date(i[0], i[1] - 1, i[2], o[0], o[1], o[2]);\n\n          default:\n            throw \"Invalid date format : \" + e;\n        }\n      };\n\n      HxOverrides.cca = function (e, t) {\n        var n = e.charCodeAt(t);\n        if (n != n) return undefined;\n        return n;\n      };\n\n      HxOverrides.substr = function (e, t, n) {\n        if (t != null && t != 0 && n != null && n < 0) return \"\";\n        if (n == null) n = e.length;\n\n        if (t < 0) {\n          t = e.length + t;\n          if (t < 0) t = 0;\n        } else if (n < 0) n = e.length + n - t;\n\n        return e.substr(t, n);\n      };\n\n      HxOverrides.remove = function (e, t) {\n        var n = 0;\n        var i = e.length;\n\n        while (n < i) {\n          if (e[n] == t) {\n            e.splice(n, 1);\n            return true;\n          }\n\n          n++;\n        }\n\n        return false;\n      };\n\n      HxOverrides.iter = function (e) {\n        return {\n          cur: 0,\n          arr: e,\n          hasNext: function hasNext() {\n            return this.cur < this.arr.length;\n          },\n          next: function next() {\n            return this.arr[this.cur++];\n          }\n        };\n      };\n\n      var IntIter = function IntIter(e, t) {\n        this.min = e;\n        this.max = t;\n      };\n\n      IntIter.__name__ = true;\n      IntIter.prototype = {\n        next: function next() {\n          return this.min++;\n        },\n        hasNext: function hasNext() {\n          return this.min < this.max;\n        },\n        __class__: IntIter\n      };\n\n      var Std = function Std() {};\n\n      Std.__name__ = true;\n\n      Std[\"is\"] = function (e, t) {\n        return js.Boot.__instanceof(e, t);\n      };\n\n      Std.string = function (e) {\n        return js.Boot.__string_rec(e, \"\");\n      };\n\n      Std[\"int\"] = function (e) {\n        return e | 0;\n      };\n\n      Std.parseInt = function (e) {\n        var t = parseInt(e, 10);\n        if (t == 0 && (HxOverrides.cca(e, 1) == 120 || HxOverrides.cca(e, 1) == 88)) t = parseInt(e);\n        if (isNaN(t)) return null;\n        return t;\n      };\n\n      Std.parseFloat = function (e) {\n        return parseFloat(e);\n      };\n\n      Std.random = function (e) {\n        return Math.floor(Math.random() * e);\n      };\n\n      var com = com || {};\n      if (!com.wiris) com.wiris = {};\n      if (!com.wiris.js) com.wiris.js = {};\n\n      com.wiris.js.JsPluginTools = function () {\n        this.tryReady();\n      };\n\n      com.wiris.js.JsPluginTools.__name__ = true;\n\n      com.wiris.js.JsPluginTools.main = function () {\n        var e;\n        e = com.wiris.js.JsPluginTools.getInstance();\n        haxe.Timer.delay($bind(e, e.tryReady), 100);\n      };\n\n      com.wiris.js.JsPluginTools.getInstance = function () {\n        if (com.wiris.js.JsPluginTools.instance == null) com.wiris.js.JsPluginTools.instance = new com.wiris.js.JsPluginTools();\n        return com.wiris.js.JsPluginTools.instance;\n      };\n\n      com.wiris.js.JsPluginTools.bypassEncapsulation = function () {\n        if (window.com == null) window.com = {};\n        if (window.com.wiris == null) window.com.wiris = {};\n        if (window.com.wiris.js == null) window.com.wiris.js = {};\n        if (window.com.wiris.js.JsPluginTools == null) window.com.wiris.js.JsPluginTools = com.wiris.js.JsPluginTools.getInstance();\n      };\n\n      com.wiris.js.JsPluginTools.prototype = {\n        md5encode: function md5encode(e) {\n          return haxe.Md5.encode(e);\n        },\n        doLoad: function doLoad() {\n          this.ready = true;\n          com.wiris.js.JsPluginTools.instance = this;\n          com.wiris.js.JsPluginTools.bypassEncapsulation();\n        },\n        tryReady: function tryReady() {\n          this.ready = false;\n\n          if (js.Lib.document.readyState) {\n            this.doLoad();\n            this.ready = true;\n          }\n\n          if (!this.ready) haxe.Timer.delay($bind(this, this.tryReady), 100);\n        },\n        __class__: com.wiris.js.JsPluginTools\n      };\n      var haxe = haxe || {};\n\n      haxe.Log = function () {};\n\n      haxe.Log.__name__ = true;\n\n      haxe.Log.trace = function (e, t) {\n        js.Boot.__trace(e, t);\n      };\n\n      haxe.Log.clear = function () {\n        js.Boot.__clear_trace();\n      };\n\n      haxe.Md5 = function () {};\n\n      haxe.Md5.__name__ = true;\n\n      haxe.Md5.encode = function (e) {\n        return new haxe.Md5().doEncode(e);\n      };\n\n      haxe.Md5.prototype = {\n        doEncode: function doEncode(e) {\n          var t = this.str2blks(e);\n          var n = 1732584193;\n          var i = -271733879;\n          var o = -1732584194;\n          var s = 271733878;\n          var r;\n          var a = 0;\n\n          while (a < t.length) {\n            var c = n;\n            var l = i;\n            var d = o;\n            var u = s;\n            r = 0;\n            n = this.ff(n, i, o, s, t[a], 7, -680876936);\n            s = this.ff(s, n, i, o, t[a + 1], 12, -389564586);\n            o = this.ff(o, s, n, i, t[a + 2], 17, 606105819);\n            i = this.ff(i, o, s, n, t[a + 3], 22, -1044525330);\n            n = this.ff(n, i, o, s, t[a + 4], 7, -176418897);\n            s = this.ff(s, n, i, o, t[a + 5], 12, 1200080426);\n            o = this.ff(o, s, n, i, t[a + 6], 17, -1473231341);\n            i = this.ff(i, o, s, n, t[a + 7], 22, -45705983);\n            n = this.ff(n, i, o, s, t[a + 8], 7, 1770035416);\n            s = this.ff(s, n, i, o, t[a + 9], 12, -1958414417);\n            o = this.ff(o, s, n, i, t[a + 10], 17, -42063);\n            i = this.ff(i, o, s, n, t[a + 11], 22, -1990404162);\n            n = this.ff(n, i, o, s, t[a + 12], 7, 1804603682);\n            s = this.ff(s, n, i, o, t[a + 13], 12, -40341101);\n            o = this.ff(o, s, n, i, t[a + 14], 17, -1502002290);\n            i = this.ff(i, o, s, n, t[a + 15], 22, 1236535329);\n            n = this.gg(n, i, o, s, t[a + 1], 5, -165796510);\n            s = this.gg(s, n, i, o, t[a + 6], 9, -1069501632);\n            o = this.gg(o, s, n, i, t[a + 11], 14, 643717713);\n            i = this.gg(i, o, s, n, t[a], 20, -373897302);\n            n = this.gg(n, i, o, s, t[a + 5], 5, -701558691);\n            s = this.gg(s, n, i, o, t[a + 10], 9, 38016083);\n            o = this.gg(o, s, n, i, t[a + 15], 14, -660478335);\n            i = this.gg(i, o, s, n, t[a + 4], 20, -405537848);\n            n = this.gg(n, i, o, s, t[a + 9], 5, 568446438);\n            s = this.gg(s, n, i, o, t[a + 14], 9, -1019803690);\n            o = this.gg(o, s, n, i, t[a + 3], 14, -187363961);\n            i = this.gg(i, o, s, n, t[a + 8], 20, 1163531501);\n            n = this.gg(n, i, o, s, t[a + 13], 5, -1444681467);\n            s = this.gg(s, n, i, o, t[a + 2], 9, -51403784);\n            o = this.gg(o, s, n, i, t[a + 7], 14, 1735328473);\n            i = this.gg(i, o, s, n, t[a + 12], 20, -1926607734);\n            n = this.hh(n, i, o, s, t[a + 5], 4, -378558);\n            s = this.hh(s, n, i, o, t[a + 8], 11, -2022574463);\n            o = this.hh(o, s, n, i, t[a + 11], 16, 1839030562);\n            i = this.hh(i, o, s, n, t[a + 14], 23, -35309556);\n            n = this.hh(n, i, o, s, t[a + 1], 4, -1530992060);\n            s = this.hh(s, n, i, o, t[a + 4], 11, 1272893353);\n            o = this.hh(o, s, n, i, t[a + 7], 16, -155497632);\n            i = this.hh(i, o, s, n, t[a + 10], 23, -1094730640);\n            n = this.hh(n, i, o, s, t[a + 13], 4, 681279174);\n            s = this.hh(s, n, i, o, t[a], 11, -358537222);\n            o = this.hh(o, s, n, i, t[a + 3], 16, -722521979);\n            i = this.hh(i, o, s, n, t[a + 6], 23, 76029189);\n            n = this.hh(n, i, o, s, t[a + 9], 4, -640364487);\n            s = this.hh(s, n, i, o, t[a + 12], 11, -421815835);\n            o = this.hh(o, s, n, i, t[a + 15], 16, 530742520);\n            i = this.hh(i, o, s, n, t[a + 2], 23, -995338651);\n            n = this.ii(n, i, o, s, t[a], 6, -198630844);\n            s = this.ii(s, n, i, o, t[a + 7], 10, 1126891415);\n            o = this.ii(o, s, n, i, t[a + 14], 15, -1416354905);\n            i = this.ii(i, o, s, n, t[a + 5], 21, -57434055);\n            n = this.ii(n, i, o, s, t[a + 12], 6, 1700485571);\n            s = this.ii(s, n, i, o, t[a + 3], 10, -1894986606);\n            o = this.ii(o, s, n, i, t[a + 10], 15, -1051523);\n            i = this.ii(i, o, s, n, t[a + 1], 21, -2054922799);\n            n = this.ii(n, i, o, s, t[a + 8], 6, 1873313359);\n            s = this.ii(s, n, i, o, t[a + 15], 10, -30611744);\n            o = this.ii(o, s, n, i, t[a + 6], 15, -1560198380);\n            i = this.ii(i, o, s, n, t[a + 13], 21, 1309151649);\n            n = this.ii(n, i, o, s, t[a + 4], 6, -145523070);\n            s = this.ii(s, n, i, o, t[a + 11], 10, -1120210379);\n            o = this.ii(o, s, n, i, t[a + 2], 15, 718787259);\n            i = this.ii(i, o, s, n, t[a + 9], 21, -343485551);\n            n = this.addme(n, c);\n            i = this.addme(i, l);\n            o = this.addme(o, d);\n            s = this.addme(s, u);\n            a += 16;\n          }\n\n          return this.rhex(n) + this.rhex(i) + this.rhex(o) + this.rhex(s);\n        },\n        ii: function ii(e, t, n, i, o, s, r) {\n          return this.cmn(this.bitXOR(n, this.bitOR(t, ~i)), e, t, o, s, r);\n        },\n        hh: function hh(e, t, n, i, o, s, r) {\n          return this.cmn(this.bitXOR(this.bitXOR(t, n), i), e, t, o, s, r);\n        },\n        gg: function gg(e, t, n, i, o, s, r) {\n          return this.cmn(this.bitOR(this.bitAND(t, i), this.bitAND(n, ~i)), e, t, o, s, r);\n        },\n        ff: function ff(e, t, n, i, o, s, r) {\n          return this.cmn(this.bitOR(this.bitAND(t, n), this.bitAND(~t, i)), e, t, o, s, r);\n        },\n        cmn: function cmn(e, t, n, i, o, s) {\n          return this.addme(this.rol(this.addme(this.addme(t, e), this.addme(i, s)), o), n);\n        },\n        rol: function rol(e, t) {\n          return e << t | e >>> 32 - t;\n        },\n        str2blks: function str2blks(e) {\n          var t = (e.length + 8 >> 6) + 1;\n          var n = new Array();\n          var i = 0,\n              o = t * 16;\n\n          while (i < o) {\n            var s = i++;\n            n[s] = 0;\n          }\n\n          var s = 0;\n\n          while (s < e.length) {\n            n[s >> 2] |= HxOverrides.cca(e, s) << (e.length * 8 + s) % 4 * 8;\n            s++;\n          }\n\n          n[s >> 2] |= 128 << (e.length * 8 + s) % 4 * 8;\n          var r = e.length * 8;\n          var a = t * 16 - 2;\n          n[a] = r & 255;\n          n[a] |= (r >>> 8 & 255) << 8;\n          n[a] |= (r >>> 16 & 255) << 16;\n          n[a] |= (r >>> 24 & 255) << 24;\n          return n;\n        },\n        rhex: function rhex(e) {\n          var t = \"\";\n          var n = \"0123456789abcdef\";\n          var i = 0;\n\n          while (i < 4) {\n            var o = i++;\n            t += n.charAt(e >> o * 8 + 4 & 15) + n.charAt(e >> o * 8 & 15);\n          }\n\n          return t;\n        },\n        addme: function addme(e, t) {\n          var n = (e & 65535) + (t & 65535);\n          var i = (e >> 16) + (t >> 16) + (n >> 16);\n          return i << 16 | n & 65535;\n        },\n        bitAND: function bitAND(e, t) {\n          var n = e & 1 & (t & 1);\n          var i = e >>> 1 & t >>> 1;\n          return i << 1 | n;\n        },\n        bitXOR: function bitXOR(e, t) {\n          var n = e & 1 ^ t & 1;\n          var i = e >>> 1 ^ t >>> 1;\n          return i << 1 | n;\n        },\n        bitOR: function bitOR(e, t) {\n          var n = e & 1 | t & 1;\n          var i = e >>> 1 | t >>> 1;\n          return i << 1 | n;\n        },\n        __class__: haxe.Md5\n      };\n\n      haxe.Timer = function (e) {\n        var t = this;\n        this.id = window.setInterval(function () {\n          t.run();\n        }, e);\n      };\n\n      haxe.Timer.__name__ = true;\n\n      haxe.Timer.delay = function (e, t) {\n        var n = new haxe.Timer(t);\n\n        n.run = function () {\n          n.stop();\n          e();\n        };\n\n        return n;\n      };\n\n      haxe.Timer.measure = function (e, t) {\n        var n = haxe.Timer.stamp();\n        var i = e();\n        haxe.Log.trace(haxe.Timer.stamp() - n + \"s\", t);\n        return i;\n      };\n\n      haxe.Timer.stamp = function () {\n        return new Date().getTime() / 1e3;\n      };\n\n      haxe.Timer.prototype = {\n        run: function run() {},\n        stop: function stop() {\n          if (this.id == null) return;\n          window.clearInterval(this.id);\n          this.id = null;\n        },\n        __class__: haxe.Timer\n      };\n      var js = js || {};\n\n      js.Boot = function () {};\n\n      js.Boot.__name__ = true;\n\n      js.Boot.__unhtml = function (e) {\n        return e.split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split(\">\").join(\"&gt;\");\n      };\n\n      js.Boot.__trace = function (e, t) {\n        var n = t != null ? t.fileName + \":\" + t.lineNumber + \": \" : \"\";\n        n += js.Boot.__string_rec(e, \"\");\n        var i;\n        if (typeof document != \"undefined\" && (i = document.getElementById(\"haxe:trace\")) != null) i.innerHTML += js.Boot.__unhtml(n) + \"<br/>\";else if (typeof console != \"undefined\" && console.log != null) console.log(n);\n      };\n\n      js.Boot.__clear_trace = function () {\n        var e = document.getElementById(\"haxe:trace\");\n        if (e != null) e.innerHTML = \"\";\n      };\n\n      js.Boot.isClass = function (e) {\n        return e.__name__;\n      };\n\n      js.Boot.isEnum = function (e) {\n        return e.__ename__;\n      };\n\n      js.Boot.getClass = function (e) {\n        return e.__class__;\n      };\n\n      js.Boot.__string_rec = function (e, t) {\n        if (e == null) return \"null\";\n        if (t.length >= 5) return \"<...>\";\n        var n = typeof e;\n        if (n == \"function\" && (e.__name__ || e.__ename__)) n = \"object\";\n\n        switch (n) {\n          case \"object\":\n            if (e instanceof Array) {\n              if (e.__enum__) {\n                if (e.length == 2) return e[0];\n                var i = e[0] + \"(\";\n                t += \"\\t\";\n                var o = 2,\n                    s = e.length;\n\n                while (o < s) {\n                  var r = o++;\n                  if (r != 2) i += \",\" + js.Boot.__string_rec(e[r], t);else i += js.Boot.__string_rec(e[r], t);\n                }\n\n                return i + \")\";\n              }\n\n              var a = e.length;\n              var r;\n              var i = \"[\";\n              t += \"\\t\";\n              var s = 0;\n\n              while (s < a) {\n                var c = s++;\n                i += (c > 0 ? \",\" : \"\") + js.Boot.__string_rec(e[c], t);\n              }\n\n              i += \"]\";\n              return i;\n            }\n\n            var l;\n\n            try {\n              l = e.toString;\n            } catch (e) {\n              return \"???\";\n            }\n\n            if (l != null && l != Object.toString) {\n              var d = e.toString();\n              if (d != \"[object Object]\") return d;\n            }\n\n            var u = null;\n            var i = \"{\\n\";\n            t += \"\\t\";\n            var h = e.hasOwnProperty != null;\n\n            for (var u in e) {\n              if (h && !e.hasOwnProperty(u)) {\n                continue;\n              }\n\n              if (u == \"prototype\" || u == \"__class__\" || u == \"__super__\" || u == \"__interfaces__\" || u == \"__properties__\") {\n                continue;\n              }\n\n              if (i.length != 2) i += \", \\n\";\n              i += t + u + \" : \" + js.Boot.__string_rec(e[u], t);\n            }\n\n            t = t.substring(1);\n            i += \"\\n\" + t + \"}\";\n            return i;\n\n          case \"function\":\n            return \"<function>\";\n\n          case \"string\":\n            return e;\n\n          default:\n            return String(e);\n        }\n      };\n\n      js.Boot.__interfLoop = function (e, t) {\n        if (e == null) return false;\n        if (e == t) return true;\n        var n = e.__interfaces__;\n\n        if (n != null) {\n          var i = 0,\n              o = n.length;\n\n          while (i < o) {\n            var s = i++;\n            var r = n[s];\n            if (r == t || js.Boot.__interfLoop(r, t)) return true;\n          }\n        }\n\n        return js.Boot.__interfLoop(e.__super__, t);\n      };\n\n      js.Boot.__instanceof = function (e, t) {\n        try {\n          if (e instanceof t) {\n            if (t == Array) return e.__enum__ == null;\n            return true;\n          }\n\n          if (js.Boot.__interfLoop(e.__class__, t)) return true;\n        } catch (e) {\n          if (t == null) return false;\n        }\n\n        switch (t) {\n          case Int:\n            return Math.ceil(e % 2147483648) === e;\n\n          case Float:\n            return typeof e == \"number\";\n\n          case Bool:\n            return e === true || e === false;\n\n          case String:\n            return typeof e == \"string\";\n\n          case Dynamic:\n            return true;\n\n          default:\n            if (e == null) return false;\n            if (t == Class && e.__name__ != null) return true;else null;\n            if (t == Enum && e.__ename__ != null) return true;else null;\n            return e.__enum__ == t;\n        }\n      };\n\n      js.Boot.__cast = function (e, t) {\n        if (js.Boot.__instanceof(e, t)) return e;else throw \"Cannot cast \" + Std.string(e) + \" to \" + Std.string(t);\n      };\n\n      js.Lib = function () {};\n\n      js.Lib.__name__ = true;\n\n      js.Lib.debug = function () {\n        debugger;\n      };\n\n      js.Lib.alert = function (e) {\n        alert(js.Boot.__string_rec(e, \"\"));\n      };\n\n      js.Lib.eval = function (code) {\n        return eval(code);\n      };\n\n      js.Lib.setErrorHandler = function (e) {\n        js.Lib.onerror = e;\n      };\n\n      var $_;\n\n      function $bind(e, t) {\n        var n = function n() {\n          return n.method.apply(n.scope, arguments);\n        };\n\n        n.scope = e;\n        n.method = t;\n        return n;\n      }\n\n      if (Array.prototype.indexOf) HxOverrides.remove = function (e, t) {\n        var n = e.indexOf(t);\n        if (n == -1) return false;\n        e.splice(n, 1);\n        return true;\n      };else null;\n      Math.__name__ = [\"Math\"];\n      Math.NaN = Number.NaN;\n      Math.NEGATIVE_INFINITY = Number.NEGATIVE_INFINITY;\n      Math.POSITIVE_INFINITY = Number.POSITIVE_INFINITY;\n\n      Math.isFinite = function (e) {\n        return isFinite(e);\n      };\n\n      Math.isNaN = function (e) {\n        return isNaN(e);\n      };\n\n      String.prototype.__class__ = String;\n      String.__name__ = true;\n      Array.prototype.__class__ = Array;\n      Array.__name__ = true;\n      Date.prototype.__class__ = Date;\n      Date.__name__ = [\"Date\"];\n      var Int = {\n        __name__: [\"Int\"]\n      };\n      var Dynamic = {\n        __name__: [\"Dynamic\"]\n      };\n      var Float = Number;\n      Float.__name__ = [\"Float\"];\n      var Bool = Boolean;\n      Bool.__ename__ = [\"Bool\"];\n      var Class = {\n        __name__: [\"Class\"]\n      };\n      var Enum = {};\n      var Void = {\n        __ename__: [\"Void\"]\n      };\n      if (typeof document != \"undefined\") js.Lib.document = document;\n\n      if (typeof window != \"undefined\") {\n        js.Lib.window = window;\n\n        js.Lib.window.onerror = function (e, t, n) {\n          var i = js.Lib.onerror;\n          if (i == null) return false;\n          return i(e, [t + \":\" + n]);\n        };\n      }\n\n      com.wiris.js.JsPluginTools.main();\n      delete Array.prototype.__class__;\n    })();\n\n    (function () {\n      var HxOverrides = function HxOverrides() {};\n\n      HxOverrides.__name__ = true;\n\n      HxOverrides.dateStr = function (e) {\n        var t = e.getMonth() + 1;\n        var n = e.getDate();\n        var i = e.getHours();\n        var o = e.getMinutes();\n        var s = e.getSeconds();\n        return e.getFullYear() + \"-\" + (t < 10 ? \"0\" + t : \"\" + t) + \"-\" + (n < 10 ? \"0\" + n : \"\" + n) + \" \" + (i < 10 ? \"0\" + i : \"\" + i) + \":\" + (o < 10 ? \"0\" + o : \"\" + o) + \":\" + (s < 10 ? \"0\" + s : \"\" + s);\n      };\n\n      HxOverrides.strDate = function (e) {\n        switch (e.length) {\n          case 8:\n            var t = e.split(\":\");\n            var n = new Date();\n            n.setTime(0);\n            n.setUTCHours(t[0]);\n            n.setUTCMinutes(t[1]);\n            n.setUTCSeconds(t[2]);\n            return n;\n\n          case 10:\n            var t = e.split(\"-\");\n            return new Date(t[0], t[1] - 1, t[2], 0, 0, 0);\n\n          case 19:\n            var t = e.split(\" \");\n            var i = t[0].split(\"-\");\n            var o = t[1].split(\":\");\n            return new Date(i[0], i[1] - 1, i[2], o[0], o[1], o[2]);\n\n          default:\n            throw \"Invalid date format : \" + e;\n        }\n      };\n\n      HxOverrides.cca = function (e, t) {\n        var n = e.charCodeAt(t);\n        if (n != n) return undefined;\n        return n;\n      };\n\n      HxOverrides.substr = function (e, t, n) {\n        if (t != null && t != 0 && n != null && n < 0) return \"\";\n        if (n == null) n = e.length;\n\n        if (t < 0) {\n          t = e.length + t;\n          if (t < 0) t = 0;\n        } else if (n < 0) n = e.length + n - t;\n\n        return e.substr(t, n);\n      };\n\n      HxOverrides.remove = function (e, t) {\n        var n = 0;\n        var i = e.length;\n\n        while (n < i) {\n          if (e[n] == t) {\n            e.splice(n, 1);\n            return true;\n          }\n\n          n++;\n        }\n\n        return false;\n      };\n\n      HxOverrides.iter = function (e) {\n        return {\n          cur: 0,\n          arr: e,\n          hasNext: function hasNext() {\n            return this.cur < this.arr.length;\n          },\n          next: function next() {\n            return this.arr[this.cur++];\n          }\n        };\n      };\n\n      var IntIter = function IntIter(e, t) {\n        this.min = e;\n        this.max = t;\n      };\n\n      IntIter.__name__ = true;\n      IntIter.prototype = {\n        next: function next() {\n          return this.min++;\n        },\n        hasNext: function hasNext() {\n          return this.min < this.max;\n        },\n        __class__: IntIter\n      };\n\n      var Std = function Std() {};\n\n      Std.__name__ = true;\n\n      Std[\"is\"] = function (e, t) {\n        return js.Boot.__instanceof(e, t);\n      };\n\n      Std.string = function (e) {\n        return js.Boot.__string_rec(e, \"\");\n      };\n\n      Std[\"int\"] = function (e) {\n        return e | 0;\n      };\n\n      Std.parseInt = function (e) {\n        var t = parseInt(e, 10);\n        if (t == 0 && (HxOverrides.cca(e, 1) == 120 || HxOverrides.cca(e, 1) == 88)) t = parseInt(e);\n        if (isNaN(t)) return null;\n        return t;\n      };\n\n      Std.parseFloat = function (e) {\n        return parseFloat(e);\n      };\n\n      Std.random = function (e) {\n        return Math.floor(Math.random() * e);\n      };\n\n      var com = com || {};\n      if (!com.wiris) com.wiris = {};\n      if (!com.wiris.js) com.wiris.js = {};\n\n      com.wiris.js.JsPluginTools = function () {\n        this.tryReady();\n      };\n\n      com.wiris.js.JsPluginTools.__name__ = true;\n\n      com.wiris.js.JsPluginTools.main = function () {\n        var e;\n        e = com.wiris.js.JsPluginTools.getInstance();\n        haxe.Timer.delay($bind(e, e.tryReady), 100);\n      };\n\n      com.wiris.js.JsPluginTools.getInstance = function () {\n        if (com.wiris.js.JsPluginTools.instance == null) com.wiris.js.JsPluginTools.instance = new com.wiris.js.JsPluginTools();\n        return com.wiris.js.JsPluginTools.instance;\n      };\n\n      com.wiris.js.JsPluginTools.bypassEncapsulation = function () {\n        if (window.com == null) window.com = {};\n        if (window.com.wiris == null) window.com.wiris = {};\n        if (window.com.wiris.js == null) window.com.wiris.js = {};\n        if (window.com.wiris.js.JsPluginTools == null) window.com.wiris.js.JsPluginTools = com.wiris.js.JsPluginTools.getInstance();\n      };\n\n      com.wiris.js.JsPluginTools.prototype = {\n        md5encode: function md5encode(e) {\n          return haxe.Md5.encode(e);\n        },\n        doLoad: function doLoad() {\n          this.ready = true;\n          com.wiris.js.JsPluginTools.instance = this;\n          com.wiris.js.JsPluginTools.bypassEncapsulation();\n        },\n        tryReady: function tryReady() {\n          this.ready = false;\n\n          if (js.Lib.document.readyState) {\n            this.doLoad();\n            this.ready = true;\n          }\n\n          if (!this.ready) haxe.Timer.delay($bind(this, this.tryReady), 100);\n        },\n        __class__: com.wiris.js.JsPluginTools\n      };\n      var haxe = haxe || {};\n\n      haxe.Log = function () {};\n\n      haxe.Log.__name__ = true;\n\n      haxe.Log.trace = function (e, t) {\n        js.Boot.__trace(e, t);\n      };\n\n      haxe.Log.clear = function () {\n        js.Boot.__clear_trace();\n      };\n\n      haxe.Md5 = function () {};\n\n      haxe.Md5.__name__ = true;\n\n      haxe.Md5.encode = function (e) {\n        return new haxe.Md5().doEncode(e);\n      };\n\n      haxe.Md5.prototype = {\n        doEncode: function doEncode(e) {\n          var t = this.str2blks(e);\n          var n = 1732584193;\n          var i = -271733879;\n          var o = -1732584194;\n          var s = 271733878;\n          var r;\n          var a = 0;\n\n          while (a < t.length) {\n            var c = n;\n            var l = i;\n            var d = o;\n            var u = s;\n            r = 0;\n            n = this.ff(n, i, o, s, t[a], 7, -680876936);\n            s = this.ff(s, n, i, o, t[a + 1], 12, -389564586);\n            o = this.ff(o, s, n, i, t[a + 2], 17, 606105819);\n            i = this.ff(i, o, s, n, t[a + 3], 22, -1044525330);\n            n = this.ff(n, i, o, s, t[a + 4], 7, -176418897);\n            s = this.ff(s, n, i, o, t[a + 5], 12, 1200080426);\n            o = this.ff(o, s, n, i, t[a + 6], 17, -1473231341);\n            i = this.ff(i, o, s, n, t[a + 7], 22, -45705983);\n            n = this.ff(n, i, o, s, t[a + 8], 7, 1770035416);\n            s = this.ff(s, n, i, o, t[a + 9], 12, -1958414417);\n            o = this.ff(o, s, n, i, t[a + 10], 17, -42063);\n            i = this.ff(i, o, s, n, t[a + 11], 22, -1990404162);\n            n = this.ff(n, i, o, s, t[a + 12], 7, 1804603682);\n            s = this.ff(s, n, i, o, t[a + 13], 12, -40341101);\n            o = this.ff(o, s, n, i, t[a + 14], 17, -1502002290);\n            i = this.ff(i, o, s, n, t[a + 15], 22, 1236535329);\n            n = this.gg(n, i, o, s, t[a + 1], 5, -165796510);\n            s = this.gg(s, n, i, o, t[a + 6], 9, -1069501632);\n            o = this.gg(o, s, n, i, t[a + 11], 14, 643717713);\n            i = this.gg(i, o, s, n, t[a], 20, -373897302);\n            n = this.gg(n, i, o, s, t[a + 5], 5, -701558691);\n            s = this.gg(s, n, i, o, t[a + 10], 9, 38016083);\n            o = this.gg(o, s, n, i, t[a + 15], 14, -660478335);\n            i = this.gg(i, o, s, n, t[a + 4], 20, -405537848);\n            n = this.gg(n, i, o, s, t[a + 9], 5, 568446438);\n            s = this.gg(s, n, i, o, t[a + 14], 9, -1019803690);\n            o = this.gg(o, s, n, i, t[a + 3], 14, -187363961);\n            i = this.gg(i, o, s, n, t[a + 8], 20, 1163531501);\n            n = this.gg(n, i, o, s, t[a + 13], 5, -1444681467);\n            s = this.gg(s, n, i, o, t[a + 2], 9, -51403784);\n            o = this.gg(o, s, n, i, t[a + 7], 14, 1735328473);\n            i = this.gg(i, o, s, n, t[a + 12], 20, -1926607734);\n            n = this.hh(n, i, o, s, t[a + 5], 4, -378558);\n            s = this.hh(s, n, i, o, t[a + 8], 11, -2022574463);\n            o = this.hh(o, s, n, i, t[a + 11], 16, 1839030562);\n            i = this.hh(i, o, s, n, t[a + 14], 23, -35309556);\n            n = this.hh(n, i, o, s, t[a + 1], 4, -1530992060);\n            s = this.hh(s, n, i, o, t[a + 4], 11, 1272893353);\n            o = this.hh(o, s, n, i, t[a + 7], 16, -155497632);\n            i = this.hh(i, o, s, n, t[a + 10], 23, -1094730640);\n            n = this.hh(n, i, o, s, t[a + 13], 4, 681279174);\n            s = this.hh(s, n, i, o, t[a], 11, -358537222);\n            o = this.hh(o, s, n, i, t[a + 3], 16, -722521979);\n            i = this.hh(i, o, s, n, t[a + 6], 23, 76029189);\n            n = this.hh(n, i, o, s, t[a + 9], 4, -640364487);\n            s = this.hh(s, n, i, o, t[a + 12], 11, -421815835);\n            o = this.hh(o, s, n, i, t[a + 15], 16, 530742520);\n            i = this.hh(i, o, s, n, t[a + 2], 23, -995338651);\n            n = this.ii(n, i, o, s, t[a], 6, -198630844);\n            s = this.ii(s, n, i, o, t[a + 7], 10, 1126891415);\n            o = this.ii(o, s, n, i, t[a + 14], 15, -1416354905);\n            i = this.ii(i, o, s, n, t[a + 5], 21, -57434055);\n            n = this.ii(n, i, o, s, t[a + 12], 6, 1700485571);\n            s = this.ii(s, n, i, o, t[a + 3], 10, -1894986606);\n            o = this.ii(o, s, n, i, t[a + 10], 15, -1051523);\n            i = this.ii(i, o, s, n, t[a + 1], 21, -2054922799);\n            n = this.ii(n, i, o, s, t[a + 8], 6, 1873313359);\n            s = this.ii(s, n, i, o, t[a + 15], 10, -30611744);\n            o = this.ii(o, s, n, i, t[a + 6], 15, -1560198380);\n            i = this.ii(i, o, s, n, t[a + 13], 21, 1309151649);\n            n = this.ii(n, i, o, s, t[a + 4], 6, -145523070);\n            s = this.ii(s, n, i, o, t[a + 11], 10, -1120210379);\n            o = this.ii(o, s, n, i, t[a + 2], 15, 718787259);\n            i = this.ii(i, o, s, n, t[a + 9], 21, -343485551);\n            n = this.addme(n, c);\n            i = this.addme(i, l);\n            o = this.addme(o, d);\n            s = this.addme(s, u);\n            a += 16;\n          }\n\n          return this.rhex(n) + this.rhex(i) + this.rhex(o) + this.rhex(s);\n        },\n        ii: function ii(e, t, n, i, o, s, r) {\n          return this.cmn(this.bitXOR(n, this.bitOR(t, ~i)), e, t, o, s, r);\n        },\n        hh: function hh(e, t, n, i, o, s, r) {\n          return this.cmn(this.bitXOR(this.bitXOR(t, n), i), e, t, o, s, r);\n        },\n        gg: function gg(e, t, n, i, o, s, r) {\n          return this.cmn(this.bitOR(this.bitAND(t, i), this.bitAND(n, ~i)), e, t, o, s, r);\n        },\n        ff: function ff(e, t, n, i, o, s, r) {\n          return this.cmn(this.bitOR(this.bitAND(t, n), this.bitAND(~t, i)), e, t, o, s, r);\n        },\n        cmn: function cmn(e, t, n, i, o, s) {\n          return this.addme(this.rol(this.addme(this.addme(t, e), this.addme(i, s)), o), n);\n        },\n        rol: function rol(e, t) {\n          return e << t | e >>> 32 - t;\n        },\n        str2blks: function str2blks(e) {\n          var t = (e.length + 8 >> 6) + 1;\n          var n = new Array();\n          var i = 0,\n              o = t * 16;\n\n          while (i < o) {\n            var s = i++;\n            n[s] = 0;\n          }\n\n          var s = 0;\n\n          while (s < e.length) {\n            n[s >> 2] |= HxOverrides.cca(e, s) << (e.length * 8 + s) % 4 * 8;\n            s++;\n          }\n\n          n[s >> 2] |= 128 << (e.length * 8 + s) % 4 * 8;\n          var r = e.length * 8;\n          var a = t * 16 - 2;\n          n[a] = r & 255;\n          n[a] |= (r >>> 8 & 255) << 8;\n          n[a] |= (r >>> 16 & 255) << 16;\n          n[a] |= (r >>> 24 & 255) << 24;\n          return n;\n        },\n        rhex: function rhex(e) {\n          var t = \"\";\n          var n = \"0123456789abcdef\";\n          var i = 0;\n\n          while (i < 4) {\n            var o = i++;\n            t += n.charAt(e >> o * 8 + 4 & 15) + n.charAt(e >> o * 8 & 15);\n          }\n\n          return t;\n        },\n        addme: function addme(e, t) {\n          var n = (e & 65535) + (t & 65535);\n          var i = (e >> 16) + (t >> 16) + (n >> 16);\n          return i << 16 | n & 65535;\n        },\n        bitAND: function bitAND(e, t) {\n          var n = e & 1 & (t & 1);\n          var i = e >>> 1 & t >>> 1;\n          return i << 1 | n;\n        },\n        bitXOR: function bitXOR(e, t) {\n          var n = e & 1 ^ t & 1;\n          var i = e >>> 1 ^ t >>> 1;\n          return i << 1 | n;\n        },\n        bitOR: function bitOR(e, t) {\n          var n = e & 1 | t & 1;\n          var i = e >>> 1 | t >>> 1;\n          return i << 1 | n;\n        },\n        __class__: haxe.Md5\n      };\n\n      haxe.Timer = function (e) {\n        var t = this;\n        this.id = window.setInterval(function () {\n          t.run();\n        }, e);\n      };\n\n      haxe.Timer.__name__ = true;\n\n      haxe.Timer.delay = function (e, t) {\n        var n = new haxe.Timer(t);\n\n        n.run = function () {\n          n.stop();\n          e();\n        };\n\n        return n;\n      };\n\n      haxe.Timer.measure = function (e, t) {\n        var n = haxe.Timer.stamp();\n        var i = e();\n        haxe.Log.trace(haxe.Timer.stamp() - n + \"s\", t);\n        return i;\n      };\n\n      haxe.Timer.stamp = function () {\n        return new Date().getTime() / 1e3;\n      };\n\n      haxe.Timer.prototype = {\n        run: function run() {},\n        stop: function stop() {\n          if (this.id == null) return;\n          window.clearInterval(this.id);\n          this.id = null;\n        },\n        __class__: haxe.Timer\n      };\n      var js = js || {};\n\n      js.Boot = function () {};\n\n      js.Boot.__name__ = true;\n\n      js.Boot.__unhtml = function (e) {\n        return e.split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split(\">\").join(\"&gt;\");\n      };\n\n      js.Boot.__trace = function (e, t) {\n        var n = t != null ? t.fileName + \":\" + t.lineNumber + \": \" : \"\";\n        n += js.Boot.__string_rec(e, \"\");\n        var i;\n        if (typeof document != \"undefined\" && (i = document.getElementById(\"haxe:trace\")) != null) i.innerHTML += js.Boot.__unhtml(n) + \"<br/>\";else if (typeof console != \"undefined\" && console.log != null) console.log(n);\n      };\n\n      js.Boot.__clear_trace = function () {\n        var e = document.getElementById(\"haxe:trace\");\n        if (e != null) e.innerHTML = \"\";\n      };\n\n      js.Boot.isClass = function (e) {\n        return e.__name__;\n      };\n\n      js.Boot.isEnum = function (e) {\n        return e.__ename__;\n      };\n\n      js.Boot.getClass = function (e) {\n        return e.__class__;\n      };\n\n      js.Boot.__string_rec = function (e, t) {\n        if (e == null) return \"null\";\n        if (t.length >= 5) return \"<...>\";\n        var n = typeof e;\n        if (n == \"function\" && (e.__name__ || e.__ename__)) n = \"object\";\n\n        switch (n) {\n          case \"object\":\n            if (e instanceof Array) {\n              if (e.__enum__) {\n                if (e.length == 2) return e[0];\n                var i = e[0] + \"(\";\n                t += \"\\t\";\n                var o = 2,\n                    s = e.length;\n\n                while (o < s) {\n                  var r = o++;\n                  if (r != 2) i += \",\" + js.Boot.__string_rec(e[r], t);else i += js.Boot.__string_rec(e[r], t);\n                }\n\n                return i + \")\";\n              }\n\n              var a = e.length;\n              var r;\n              var i = \"[\";\n              t += \"\\t\";\n              var s = 0;\n\n              while (s < a) {\n                var c = s++;\n                i += (c > 0 ? \",\" : \"\") + js.Boot.__string_rec(e[c], t);\n              }\n\n              i += \"]\";\n              return i;\n            }\n\n            var l;\n\n            try {\n              l = e.toString;\n            } catch (e) {\n              return \"???\";\n            }\n\n            if (l != null && l != Object.toString) {\n              var d = e.toString();\n              if (d != \"[object Object]\") return d;\n            }\n\n            var u = null;\n            var i = \"{\\n\";\n            t += \"\\t\";\n            var h = e.hasOwnProperty != null;\n\n            for (var u in e) {\n              if (h && !e.hasOwnProperty(u)) {\n                continue;\n              }\n\n              if (u == \"prototype\" || u == \"__class__\" || u == \"__super__\" || u == \"__interfaces__\" || u == \"__properties__\") {\n                continue;\n              }\n\n              if (i.length != 2) i += \", \\n\";\n              i += t + u + \" : \" + js.Boot.__string_rec(e[u], t);\n            }\n\n            t = t.substring(1);\n            i += \"\\n\" + t + \"}\";\n            return i;\n\n          case \"function\":\n            return \"<function>\";\n\n          case \"string\":\n            return e;\n\n          default:\n            return String(e);\n        }\n      };\n\n      js.Boot.__interfLoop = function (e, t) {\n        if (e == null) return false;\n        if (e == t) return true;\n        var n = e.__interfaces__;\n\n        if (n != null) {\n          var i = 0,\n              o = n.length;\n\n          while (i < o) {\n            var s = i++;\n            var r = n[s];\n            if (r == t || js.Boot.__interfLoop(r, t)) return true;\n          }\n        }\n\n        return js.Boot.__interfLoop(e.__super__, t);\n      };\n\n      js.Boot.__instanceof = function (e, t) {\n        try {\n          if (e instanceof t) {\n            if (t == Array) return e.__enum__ == null;\n            return true;\n          }\n\n          if (js.Boot.__interfLoop(e.__class__, t)) return true;\n        } catch (e) {\n          if (t == null) return false;\n        }\n\n        switch (t) {\n          case Int:\n            return Math.ceil(e % 2147483648) === e;\n\n          case Float:\n            return typeof e == \"number\";\n\n          case Bool:\n            return e === true || e === false;\n\n          case String:\n            return typeof e == \"string\";\n\n          case Dynamic:\n            return true;\n\n          default:\n            if (e == null) return false;\n            if (t == Class && e.__name__ != null) return true;else null;\n            if (t == Enum && e.__ename__ != null) return true;else null;\n            return e.__enum__ == t;\n        }\n      };\n\n      js.Boot.__cast = function (e, t) {\n        if (js.Boot.__instanceof(e, t)) return e;else throw \"Cannot cast \" + Std.string(e) + \" to \" + Std.string(t);\n      };\n\n      js.Lib = function () {};\n\n      js.Lib.__name__ = true;\n\n      js.Lib.debug = function () {\n        debugger;\n      };\n\n      js.Lib.alert = function (e) {\n        alert(js.Boot.__string_rec(e, \"\"));\n      };\n\n      js.Lib.eval = function (code) {\n        return eval(code);\n      };\n\n      js.Lib.setErrorHandler = function (e) {\n        js.Lib.onerror = e;\n      };\n\n      var $_;\n\n      function $bind(e, t) {\n        var n = function n() {\n          return n.method.apply(n.scope, arguments);\n        };\n\n        n.scope = e;\n        n.method = t;\n        return n;\n      }\n\n      if (Array.prototype.indexOf) HxOverrides.remove = function (e, t) {\n        var n = e.indexOf(t);\n        if (n == -1) return false;\n        e.splice(n, 1);\n        return true;\n      };else null;\n      Math.__name__ = [\"Math\"];\n      Math.NaN = Number.NaN;\n      Math.NEGATIVE_INFINITY = Number.NEGATIVE_INFINITY;\n      Math.POSITIVE_INFINITY = Number.POSITIVE_INFINITY;\n\n      Math.isFinite = function (e) {\n        return isFinite(e);\n      };\n\n      Math.isNaN = function (e) {\n        return isNaN(e);\n      };\n\n      String.prototype.__class__ = String;\n      String.__name__ = true;\n      Array.prototype.__class__ = Array;\n      Array.__name__ = true;\n      Date.prototype.__class__ = Date;\n      Date.__name__ = [\"Date\"];\n      var Int = {\n        __name__: [\"Int\"]\n      };\n      var Dynamic = {\n        __name__: [\"Dynamic\"]\n      };\n      var Float = Number;\n      Float.__name__ = [\"Float\"];\n      var Bool = Boolean;\n      Bool.__ename__ = [\"Bool\"];\n      var Class = {\n        __name__: [\"Class\"]\n      };\n      var Enum = {};\n      var Void = {\n        __ename__: [\"Void\"]\n      };\n      if (typeof document != \"undefined\") js.Lib.document = document;\n\n      if (typeof window != \"undefined\") {\n        js.Lib.window = window;\n\n        js.Lib.window.onerror = function (e, t, n) {\n          var i = js.Lib.onerror;\n          if (i == null) return false;\n          return i(e, [t + \":\" + n]);\n        };\n      }\n\n      com.wiris.js.JsPluginTools.main();\n    })();\n\n    delete Array.prototype.__class__;\n  }, function (e, t, n) {\n    var i = n(1);\n    var o = n(95);\n    o = o.__esModule ? o.default : o;\n\n    if (typeof o === \"string\") {\n      o = [[e.i, o, \"\"]];\n    }\n\n    var s = {\n      injectType: \"singletonStyleTag\"\n    };\n    s.insert = \"head\";\n    s.singleton = true;\n    var r = i(o, s);\n    var a = o.locals ? o.locals : {};\n    e.exports = a;\n  }, function (e, t) {\n    e.exports = \".wrs_modal_overlay{position:fixed;font-family:arial,sans-serif;top:0;right:0;left:0;bottom:0;background:rgba(0,0,0,.8);z-index:999998;opacity:.65;pointer-events:auto}.wrs_modal_overlay.wrs_modal_android,.wrs_modal_overlay.wrs_modal_ios{visibility:hidden;display:none}.wrs_modal_overlay.wrs_modal_ios.moodle{position:fixed}.wrs_modal_overlay.wrs_modal_desktop.wrs_stack{background:transparent;display:none}.wrs_modal_overlay.wrs_modal_desktop.wrs_maximized{background:rgba(0,0,0,.8)}.wrs_modal_overlay.wrs_modal_desktop.wrs_closed,.wrs_modal_overlay.wrs_modal_desktop.wrs_minimized{background:transparent;display:none}.wrs_modal_title{color:#fff;padding:5px 0 5px 10px;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none;text-align:left}.wrs_modal_close_button{background-repeat:no-repeat}.wrs_modal_close_button,.wrs_modal_minimize_button{float:right;cursor:pointer;color:#fff;padding:5px 10px 5px 0;margin:10px 7px 0 0}.wrs_modal_minimize_button{top:inherit}.wrs_modal_stack_button{float:right;cursor:pointer;color:#fff;margin:10px 7px 0 0;padding:5px 10px 5px 0;top:inherit}.wrs_modal_stack_button.wrs_minimized,.wrs_modal_stack_button.wrs_stack{visibility:hidden;margin:0;padding:0}.wrs_modal_maximize_button{float:right;cursor:pointer;color:#fff;margin:10px 7px 0 0;padding:5px 10px 5px 0;top:inherit}.wrs_modal_maximize_button.wrs_maximized{visibility:hidden;margin:0;padding:0}.wrs_modal_wrapper{display:block}.wrs_modal_title_bar{display:block;background-color:#778e9a}.wrs_modal_dialogContainer{border:none;background:#fafafa;z-index:999999}.wrs_modal_dialogContainer.wrs_modal_desktop{font-size:14px}.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_maximized{position:fixed}.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_minimized{position:fixed;top:inherit;margin:0 10px 0 0}.wrs_modal_dialogContainer.wrs_closed{visibility:hidden;display:none;opacity:0}.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_stack{position:fixed;bottom:0;right:0;box-shadow:0 2px 8px rgba(0,0,0,.5)}.wrs_modal_dialogContainer.wrs_drag,.wrs_modal_dialogContainer.wrs_modal_desktop.wrs_drag{box-shadow:0 2px 8px rgba(0,0,0,.5)}.wrs_modal_dialogContainer.wrs_modal_android{width:99%;height:99%}.wrs_modal_dialogContainer.wrs_modal_android,.wrs_modal_dialogContainer.wrs_modal_ios{margin:auto;overflow:hidden;transform:translate(50%,-50%);top:50%;right:50%!important;position:fixed}.wrs_modal_dialogContainer.wrs_modal_ios{width:100%;height:100%}.wrs_content_container.wrs_minimized{display:none}.wrs_content_container.wrs_modal_android{width:100%;flex-grow:1;display:flex;flex-direction:column}.wrs_content_container.wrs_modal_android>div:first-child,.wrs_content_container.wrs_modal_desktop>div:first-child,.wrs_content_container.wrs_modal_ios>div:first-child{flex-grow:1}.wrs_modal_wrapper.wrs_modal_android{margin:auto;display:flex;flex-direction:column;height:100%;width:100%}.wrs_content_container.wrs_modal_desktop,.wrs_content_container.wrs_modal_ios{width:100%;flex-grow:1;display:flex;flex-direction:column}.wrs_modal_wrapper.wrs_modal_ios{margin:auto;display:flex;flex-direction:column;height:100%;width:100%}.wrs_virtual_keyboard{height:100%;width:100%;top:0;left:50%;transform:translate(-50%)}@media (orientation:portrait){.wrs_modal_dialogContainer.wrs_modal_mobile{width:100vmin;height:100vmin;margin:auto;border-width:0}.wrs_modal_wrapper.wrs_modal_mobile{width:100vmin;height:100vmin;margin:auto}}@media (orientation:landscape){.wrs_modal_dialogContainer.wrs_modal_mobile{width:100vmin;height:100vmin;margin:auto;border-width:0}.wrs_modal_wrapper.wrs_modal_mobile{width:100vmin;height:100vmin;margin:auto}}.wrs_modal_dialogContainer.wrs_modal_badStock,.wrs_modal_wrapper.wrs_modal_badStock{width:100%;height:280px;margin:0 auto;border-width:0}.wrs_noselect{-khtml-user-select:none}.wrs_bottom_right_resizer,.wrs_noselect{-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.wrs_bottom_right_resizer{width:10px;height:10px;color:#778e9a;position:absolute;right:4px;bottom:8px;cursor:se-resize}.wrs_bottom_left_resizer{width:15px;height:15px;color:#778e9a;position:absolute;left:0;top:0;cursor:se-resize}.wrs_modal_controls{height:42px;margin:3px 0;overflow:hidden;line-height:normal}.wrs_modal_links{margin:10px auto 0;font-family:arial,sans-serif;padding:6px;display:inline;float:right;text-align:right}.wrs_modal_links>a{text-decoration:none;color:#778e9a;font-size:16px}.wrs_modal_button_cancel,.wrs_modal_button_cancel:active,.wrs_modal_button_cancel:focus,.wrs_modal_button_cancel:hover,.wrs_modal_button_cancel:visited{min-width:80px;font-size:14px;border-radius:3px;border:1px solid #778e9a;padding:6px 8px;margin:10px auto 0 5px;cursor:pointer;font-family:arial,sans-serif;background-color:#ddd;height:32px}.wrs_modal_button_accept,.wrs_modal_button_accept:active,.wrs_modal_button_accept:focus,.wrs_modal_button_accept:hover,.wrs_modal_button_accept:visited{min-width:80px;font-size:14px;border-radius:3px;border:1px solid #778e9a;padding:6px 8px;margin:10px 5px 0 auto;color:#fff;background:#778e9a;cursor:pointer;font-family:arial,sans-serif;height:32px}.wrs_editor_vertical_bar{height:20px;float:right;background:none;width:20px;cursor:pointer}.wrs_modal_buttons_container{display:inline;float:left}.wrs_modal_buttons_container.wrs_modalAndroid{padding-left:6px}.wrs_modal_buttons_container.wrs_modalDesktop{padding-left:0}.wrs_modal_buttons_container>button{line-height:normal;background-image:none}.wrs_modal_wrapper{margin:6px;display:flex;flex-direction:column}.wrs_modal_wrapper.wrs_modal_desktop.wrs_minimized{display:none}@media only screen and (max-device-width:480px) and (orientation:portrait){#wrs_modal_wrapper{width:140%}}.wrs_popupmessage_overlay_envolture{display:none;width:100%}.wrs_popupmessage_overlay{position:absolute;width:100%;height:100%;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,.5);z-index:4;cursor:pointer}.wrs_popupmessage_panel{top:50%;left:50%;transform:translate(-50%,-50%);position:absolute;background:#fff;max-width:500px;width:75%;border-radius:2px;padding:20px;font-family:sans-serif;font-size:15px;text-align:left;color:#2e2e2e;z-index:5;max-height:75%;overflow:auto}.wrs_popupmessage_button_area{margin:10px 0 0}.wrs_panelContainer *{border:0}.wrs_button_cancel,.wrs_button_cancel:active,.wrs_button_cancel:focus,.wrs_button_cancel:hover,.wrs_button_cancel:visited{min-width:80px;font-size:14px;border-radius:3px;border:1px solid #778e9a;padding:6px 8px;margin:10px auto 0 5px;cursor:pointer;font-family:arial,sans-serif;background-color:#ddd;background-image:none;height:32px}.wrs_button_accept,.wrs_button_accept:active,.wrs_button_accept:focus,.wrs_button_accept:hover,.wrs_button_accept:visited{min-width:80px;font-size:14px;border-radius:3px;border:1px solid #778e9a;padding:6px 8px;margin:10px 5px 0 auto;color:#fff;background:#778e9a;cursor:pointer;font-family:arial,sans-serif;height:32px}.wrs_editor button{box-shadow:none}.wrs_editor .wrs_header button{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0}.wrs_modal_overlay.wrs_modal_desktop.wrs_stack.wrs_overlay_active{display:block}.wrs_toolbar tr:focus,.wrs_toolbar tr:hover{background:none}.wrs_modal_rtl .wrs_modal_button_cancel{margin-right:5px;margin-left:0}.wrs_modal_rtl .wrs_modal_button_accept{margin-right:0;margin-left:5px}.wrs_modal_rtl .wrs_button_cancel{margin-right:5px;margin-left:0}.wrs_modal_rtl .wrs_button_accept{margin-right:0;margin-left:5px}\";\n  }, function (e, t, n) {\n    \"use strict\";\n\n    var _marked = /*#__PURE__*/_regeneratorRuntime().mark(Tm),\n        _marked2 = /*#__PURE__*/_regeneratorRuntime().mark(Mm),\n        _marked3 = /*#__PURE__*/_regeneratorRuntime().mark(Lm),\n        _marked4 = /*#__PURE__*/_regeneratorRuntime().mark(jm),\n        _marked6 = /*#__PURE__*/_regeneratorRuntime().mark(dE);\n\n    n.r(t);\n    n.d(t, \"default\", function () {\n      return HE;\n    });\n    var i = n(3);\n    var o = i[\"a\"].Symbol;\n    var s = o;\n    var r = Object.prototype;\n    var a = r.hasOwnProperty;\n    var c = r.toString;\n    var l = s ? s.toStringTag : undefined;\n\n    function d(e) {\n      var t = a.call(e, l),\n          n = e[l];\n\n      try {\n        e[l] = undefined;\n        var i = true;\n      } catch (e) {}\n\n      var o = c.call(e);\n\n      if (i) {\n        if (t) {\n          e[l] = n;\n        } else {\n          delete e[l];\n        }\n      }\n\n      return o;\n    }\n\n    var u = d;\n    var h = Object.prototype;\n    var f = h.toString;\n\n    function m(e) {\n      return f.call(e);\n    }\n\n    var g = m;\n    var p = \"[object Null]\",\n        b = \"[object Undefined]\";\n    var w = s ? s.toStringTag : undefined;\n\n    function _(e) {\n      if (e == null) {\n        return e === undefined ? b : p;\n      }\n\n      return w && w in Object(e) ? u(e) : g(e);\n    }\n\n    var v = _;\n\n    function k(e, t) {\n      return function (n) {\n        return e(t(n));\n      };\n    }\n\n    var y = k;\n    var x = y(Object.getPrototypeOf, Object);\n    var A = x;\n\n    function C(e) {\n      return e != null && typeof e == \"object\";\n    }\n\n    var T = C;\n    var M = \"[object Object]\";\n    var P = Function.prototype,\n        E = Object.prototype;\n    var S = P.toString;\n    var I = E.hasOwnProperty;\n    var O = S.call(Object);\n\n    function N(e) {\n      if (!T(e) || v(e) != M) {\n        return false;\n      }\n\n      var t = A(e);\n\n      if (t === null) {\n        return true;\n      }\n\n      var n = I.call(t, \"constructor\") && t.constructor;\n      return typeof n == \"function\" && n instanceof n && S.call(n) == O;\n    }\n\n    var R = N;\n\n    function L() {\n      this.__data__ = [];\n      this.size = 0;\n    }\n\n    var j = L;\n\n    function D(e, t) {\n      return e === t || e !== e && t !== t;\n    }\n\n    var z = D;\n\n    function B(e, t) {\n      var n = e.length;\n\n      while (n--) {\n        if (z(e[n][0], t)) {\n          return n;\n        }\n      }\n\n      return -1;\n    }\n\n    var V = B;\n    var F = Array.prototype;\n    var H = F.splice;\n\n    function U(e) {\n      var t = this.__data__,\n          n = V(t, e);\n\n      if (n < 0) {\n        return false;\n      }\n\n      var i = t.length - 1;\n\n      if (n == i) {\n        t.pop();\n      } else {\n        H.call(t, n, 1);\n      }\n\n      --this.size;\n      return true;\n    }\n\n    var W = U;\n\n    function $(e) {\n      var t = this.__data__,\n          n = V(t, e);\n      return n < 0 ? undefined : t[n][1];\n    }\n\n    var q = $;\n\n    function Y(e) {\n      return V(this.__data__, e) > -1;\n    }\n\n    var J = Y;\n\n    function Q(e, t) {\n      var n = this.__data__,\n          i = V(n, e);\n\n      if (i < 0) {\n        ++this.size;\n        n.push([e, t]);\n      } else {\n        n[i][1] = t;\n      }\n\n      return this;\n    }\n\n    var X = Q;\n\n    function G(e) {\n      var t = -1,\n          n = e == null ? 0 : e.length;\n      this.clear();\n\n      while (++t < n) {\n        var i = e[t];\n        this.set(i[0], i[1]);\n      }\n    }\n\n    G.prototype.clear = j;\n    G.prototype[\"delete\"] = W;\n    G.prototype.get = q;\n    G.prototype.has = J;\n    G.prototype.set = X;\n    var K = G;\n\n    function Z() {\n      this.__data__ = new K();\n      this.size = 0;\n    }\n\n    var ee = Z;\n\n    function te(e) {\n      var t = this.__data__,\n          n = t[\"delete\"](e);\n      this.size = t.size;\n      return n;\n    }\n\n    var ne = te;\n\n    function ie(e) {\n      return this.__data__.get(e);\n    }\n\n    var oe = ie;\n\n    function se(e) {\n      return this.__data__.has(e);\n    }\n\n    var re = se;\n\n    function ae(e) {\n      var t = typeof e;\n      return e != null && (t == \"object\" || t == \"function\");\n    }\n\n    var ce = ae;\n    var le = \"[object AsyncFunction]\",\n        de = \"[object Function]\",\n        ue = \"[object GeneratorFunction]\",\n        he = \"[object Proxy]\";\n\n    function fe(e) {\n      if (!ce(e)) {\n        return false;\n      }\n\n      var t = v(e);\n      return t == de || t == ue || t == le || t == he;\n    }\n\n    var me = fe;\n    var ge = i[\"a\"][\"__core-js_shared__\"];\n    var pe = ge;\n\n    var be = function () {\n      var e = /[^.]+$/.exec(pe && pe.keys && pe.keys.IE_PROTO || \"\");\n      return e ? \"Symbol(src)_1.\" + e : \"\";\n    }();\n\n    function we(e) {\n      return !!be && be in e;\n    }\n\n    var _e = we;\n    var ve = Function.prototype;\n    var ke = ve.toString;\n\n    function ye(e) {\n      if (e != null) {\n        try {\n          return ke.call(e);\n        } catch (e) {}\n\n        try {\n          return e + \"\";\n        } catch (e) {}\n      }\n\n      return \"\";\n    }\n\n    var xe = ye;\n    var Ae = /[\\\\^$.*+?()[\\]{}|]/g;\n    var Ce = /^\\[object .+?Constructor\\]$/;\n    var Te = Function.prototype,\n        Me = Object.prototype;\n    var Pe = Te.toString;\n    var Ee = Me.hasOwnProperty;\n    var Se = RegExp(\"^\" + Pe.call(Ee).replace(Ae, \"\\\\$&\").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, \"$1.*?\") + \"$\");\n\n    function Ie(e) {\n      if (!ce(e) || _e(e)) {\n        return false;\n      }\n\n      var t = me(e) ? Se : Ce;\n      return t.test(xe(e));\n    }\n\n    var Oe = Ie;\n\n    function Ne(e, t) {\n      return e == null ? undefined : e[t];\n    }\n\n    var Re = Ne;\n\n    function Le(e, t) {\n      var n = Re(e, t);\n      return Oe(n) ? n : undefined;\n    }\n\n    var je = Le;\n    var De = je(i[\"a\"], \"Map\");\n    var ze = De;\n    var Be = je(Object, \"create\");\n    var Ve = Be;\n\n    function Fe() {\n      this.__data__ = Ve ? Ve(null) : {};\n      this.size = 0;\n    }\n\n    var He = Fe;\n\n    function Ue(e) {\n      var t = this.has(e) && delete this.__data__[e];\n      this.size -= t ? 1 : 0;\n      return t;\n    }\n\n    var We = Ue;\n    var $e = \"__lodash_hash_undefined__\";\n    var qe = Object.prototype;\n    var Ye = qe.hasOwnProperty;\n\n    function Je(e) {\n      var t = this.__data__;\n\n      if (Ve) {\n        var n = t[e];\n        return n === $e ? undefined : n;\n      }\n\n      return Ye.call(t, e) ? t[e] : undefined;\n    }\n\n    var Qe = Je;\n    var Xe = Object.prototype;\n    var Ge = Xe.hasOwnProperty;\n\n    function Ke(e) {\n      var t = this.__data__;\n      return Ve ? t[e] !== undefined : Ge.call(t, e);\n    }\n\n    var Ze = Ke;\n    var et = \"__lodash_hash_undefined__\";\n\n    function tt(e, t) {\n      var n = this.__data__;\n      this.size += this.has(e) ? 0 : 1;\n      n[e] = Ve && t === undefined ? et : t;\n      return this;\n    }\n\n    var nt = tt;\n\n    function it(e) {\n      var t = -1,\n          n = e == null ? 0 : e.length;\n      this.clear();\n\n      while (++t < n) {\n        var i = e[t];\n        this.set(i[0], i[1]);\n      }\n    }\n\n    it.prototype.clear = He;\n    it.prototype[\"delete\"] = We;\n    it.prototype.get = Qe;\n    it.prototype.has = Ze;\n    it.prototype.set = nt;\n    var ot = it;\n\n    function st() {\n      this.size = 0;\n      this.__data__ = {\n        hash: new ot(),\n        map: new (ze || K)(),\n        string: new ot()\n      };\n    }\n\n    var rt = st;\n\n    function at(e) {\n      var t = typeof e;\n      return t == \"string\" || t == \"number\" || t == \"symbol\" || t == \"boolean\" ? e !== \"__proto__\" : e === null;\n    }\n\n    var ct = at;\n\n    function lt(e, t) {\n      var n = e.__data__;\n      return ct(t) ? n[typeof t == \"string\" ? \"string\" : \"hash\"] : n.map;\n    }\n\n    var dt = lt;\n\n    function ut(e) {\n      var t = dt(this, e)[\"delete\"](e);\n      this.size -= t ? 1 : 0;\n      return t;\n    }\n\n    var ht = ut;\n\n    function ft(e) {\n      return dt(this, e).get(e);\n    }\n\n    var mt = ft;\n\n    function gt(e) {\n      return dt(this, e).has(e);\n    }\n\n    var pt = gt;\n\n    function bt(e, t) {\n      var n = dt(this, e),\n          i = n.size;\n      n.set(e, t);\n      this.size += n.size == i ? 0 : 1;\n      return this;\n    }\n\n    var wt = bt;\n\n    function _t(e) {\n      var t = -1,\n          n = e == null ? 0 : e.length;\n      this.clear();\n\n      while (++t < n) {\n        var i = e[t];\n        this.set(i[0], i[1]);\n      }\n    }\n\n    _t.prototype.clear = rt;\n    _t.prototype[\"delete\"] = ht;\n    _t.prototype.get = mt;\n    _t.prototype.has = pt;\n    _t.prototype.set = wt;\n    var vt = _t;\n    var kt = 200;\n\n    function yt(e, t) {\n      var n = this.__data__;\n\n      if (n instanceof K) {\n        var i = n.__data__;\n\n        if (!ze || i.length < kt - 1) {\n          i.push([e, t]);\n          this.size = ++n.size;\n          return this;\n        }\n\n        n = this.__data__ = new vt(i);\n      }\n\n      n.set(e, t);\n      this.size = n.size;\n      return this;\n    }\n\n    var xt = yt;\n\n    function At(e) {\n      var t = this.__data__ = new K(e);\n      this.size = t.size;\n    }\n\n    At.prototype.clear = ee;\n    At.prototype[\"delete\"] = ne;\n    At.prototype.get = oe;\n    At.prototype.has = re;\n    At.prototype.set = xt;\n    var Ct = At;\n\n    function Tt(e, t) {\n      var n = -1,\n          i = e == null ? 0 : e.length;\n\n      while (++n < i) {\n        if (t(e[n], n, e) === false) {\n          break;\n        }\n      }\n\n      return e;\n    }\n\n    var Mt = Tt;\n\n    var Pt = function () {\n      try {\n        var e = je(Object, \"defineProperty\");\n        e({}, \"\", {});\n        return e;\n      } catch (e) {}\n    }();\n\n    var Et = Pt;\n\n    function St(e, t, n) {\n      if (t == \"__proto__\" && Et) {\n        Et(e, t, {\n          configurable: true,\n          enumerable: true,\n          value: n,\n          writable: true\n        });\n      } else {\n        e[t] = n;\n      }\n    }\n\n    var It = St;\n    var Ot = Object.prototype;\n    var Nt = Ot.hasOwnProperty;\n\n    function Rt(e, t, n) {\n      var i = e[t];\n\n      if (!(Nt.call(e, t) && z(i, n)) || n === undefined && !(t in e)) {\n        It(e, t, n);\n      }\n    }\n\n    var Lt = Rt;\n\n    function jt(e, t, n, i) {\n      var o = !n;\n      n || (n = {});\n      var s = -1,\n          r = t.length;\n\n      while (++s < r) {\n        var a = t[s];\n        var c = i ? i(n[a], e[a], a, n, e) : undefined;\n\n        if (c === undefined) {\n          c = e[a];\n        }\n\n        if (o) {\n          It(n, a, c);\n        } else {\n          Lt(n, a, c);\n        }\n      }\n\n      return n;\n    }\n\n    var Dt = jt;\n\n    function zt(e, t) {\n      var n = -1,\n          i = Array(e);\n\n      while (++n < e) {\n        i[n] = t(n);\n      }\n\n      return i;\n    }\n\n    var Bt = zt;\n    var Vt = \"[object Arguments]\";\n\n    function Ft(e) {\n      return T(e) && v(e) == Vt;\n    }\n\n    var Ht = Ft;\n    var Ut = Object.prototype;\n    var Wt = Ut.hasOwnProperty;\n    var $t = Ut.propertyIsEnumerable;\n    var qt = Ht(function () {\n      return arguments;\n    }()) ? Ht : function (e) {\n      return T(e) && Wt.call(e, \"callee\") && !$t.call(e, \"callee\");\n    };\n    var Yt = qt;\n    var Jt = Array.isArray;\n    var Qt = Jt;\n    var Xt = n(4);\n    var Gt = 9007199254740991;\n    var Kt = /^(?:0|[1-9]\\d*)$/;\n\n    function Zt(e, t) {\n      var n = typeof e;\n      t = t == null ? Gt : t;\n      return !!t && (n == \"number\" || n != \"symbol\" && Kt.test(e)) && e > -1 && e % 1 == 0 && e < t;\n    }\n\n    var en = Zt;\n    var tn = 9007199254740991;\n\n    function nn(e) {\n      return typeof e == \"number\" && e > -1 && e % 1 == 0 && e <= tn;\n    }\n\n    var on = nn;\n    var sn = \"[object Arguments]\",\n        rn = \"[object Array]\",\n        an = \"[object Boolean]\",\n        cn = \"[object Date]\",\n        ln = \"[object Error]\",\n        dn = \"[object Function]\",\n        un = \"[object Map]\",\n        hn = \"[object Number]\",\n        fn = \"[object Object]\",\n        mn = \"[object RegExp]\",\n        gn = \"[object Set]\",\n        pn = \"[object String]\",\n        bn = \"[object WeakMap]\";\n    var wn = \"[object ArrayBuffer]\",\n        _n = \"[object DataView]\",\n        vn = \"[object Float32Array]\",\n        kn = \"[object Float64Array]\",\n        yn = \"[object Int8Array]\",\n        xn = \"[object Int16Array]\",\n        An = \"[object Int32Array]\",\n        Cn = \"[object Uint8Array]\",\n        Tn = \"[object Uint8ClampedArray]\",\n        Mn = \"[object Uint16Array]\",\n        Pn = \"[object Uint32Array]\";\n    var En = {};\n    En[vn] = En[kn] = En[yn] = En[xn] = En[An] = En[Cn] = En[Tn] = En[Mn] = En[Pn] = true;\n    En[sn] = En[rn] = En[wn] = En[an] = En[_n] = En[cn] = En[ln] = En[dn] = En[un] = En[hn] = En[fn] = En[mn] = En[gn] = En[pn] = En[bn] = false;\n\n    function Sn(e) {\n      return T(e) && on(e.length) && !!En[v(e)];\n    }\n\n    var In = Sn;\n\n    function On(e) {\n      return function (t) {\n        return e(t);\n      };\n    }\n\n    var Nn = On;\n    var Rn = n(5);\n    var Ln = Rn[\"a\"] && Rn[\"a\"].isTypedArray;\n    var jn = Ln ? Nn(Ln) : In;\n    var Dn = jn;\n    var zn = Object.prototype;\n    var Bn = zn.hasOwnProperty;\n\n    function Vn(e, t) {\n      var n = Qt(e),\n          i = !n && Yt(e),\n          o = !n && !i && Object(Xt[\"a\"])(e),\n          s = !n && !i && !o && Dn(e),\n          r = n || i || o || s,\n          a = r ? Bt(e.length, String) : [],\n          c = a.length;\n\n      for (var l in e) {\n        if ((t || Bn.call(e, l)) && !(r && (l == \"length\" || o && (l == \"offset\" || l == \"parent\") || s && (l == \"buffer\" || l == \"byteLength\" || l == \"byteOffset\") || en(l, c)))) {\n          a.push(l);\n        }\n      }\n\n      return a;\n    }\n\n    var Fn = Vn;\n    var Hn = Object.prototype;\n\n    function Un(e) {\n      var t = e && e.constructor,\n          n = typeof t == \"function\" && t.prototype || Hn;\n      return e === n;\n    }\n\n    var Wn = Un;\n    var $n = y(Object.keys, Object);\n    var qn = $n;\n    var Yn = Object.prototype;\n    var Jn = Yn.hasOwnProperty;\n\n    function Qn(e) {\n      if (!Wn(e)) {\n        return qn(e);\n      }\n\n      var t = [];\n\n      for (var n in Object(e)) {\n        if (Jn.call(e, n) && n != \"constructor\") {\n          t.push(n);\n        }\n      }\n\n      return t;\n    }\n\n    var Xn = Qn;\n\n    function Gn(e) {\n      return e != null && on(e.length) && !me(e);\n    }\n\n    var Kn = Gn;\n\n    function Zn(e) {\n      return Kn(e) ? Fn(e) : Xn(e);\n    }\n\n    var ei = Zn;\n\n    function ti(e, t) {\n      return e && Dt(t, ei(t), e);\n    }\n\n    var ni = ti;\n\n    function ii(e) {\n      var t = [];\n\n      if (e != null) {\n        for (var n in Object(e)) {\n          t.push(n);\n        }\n      }\n\n      return t;\n    }\n\n    var oi = ii;\n    var si = Object.prototype;\n    var ri = si.hasOwnProperty;\n\n    function ai(e) {\n      if (!ce(e)) {\n        return oi(e);\n      }\n\n      var t = Wn(e),\n          n = [];\n\n      for (var i in e) {\n        if (!(i == \"constructor\" && (t || !ri.call(e, i)))) {\n          n.push(i);\n        }\n      }\n\n      return n;\n    }\n\n    var ci = ai;\n\n    function li(e) {\n      return Kn(e) ? Fn(e, true) : ci(e);\n    }\n\n    var di = li;\n\n    function ui(e, t) {\n      return e && Dt(t, di(t), e);\n    }\n\n    var hi = ui;\n    var fi = n(8);\n\n    function mi(e, t) {\n      var n = -1,\n          i = e.length;\n      t || (t = Array(i));\n\n      while (++n < i) {\n        t[n] = e[n];\n      }\n\n      return t;\n    }\n\n    var gi = mi;\n\n    function pi(e, t) {\n      var n = -1,\n          i = e == null ? 0 : e.length,\n          o = 0,\n          s = [];\n\n      while (++n < i) {\n        var r = e[n];\n\n        if (t(r, n, e)) {\n          s[o++] = r;\n        }\n      }\n\n      return s;\n    }\n\n    var bi = pi;\n\n    function wi() {\n      return [];\n    }\n\n    var _i = wi;\n    var vi = Object.prototype;\n    var ki = vi.propertyIsEnumerable;\n    var yi = Object.getOwnPropertySymbols;\n    var xi = !yi ? _i : function (e) {\n      if (e == null) {\n        return [];\n      }\n\n      e = Object(e);\n      return bi(yi(e), function (t) {\n        return ki.call(e, t);\n      });\n    };\n    var Ai = xi;\n\n    function Ci(e, t) {\n      return Dt(e, Ai(e), t);\n    }\n\n    var Ti = Ci;\n\n    function Mi(e, t) {\n      var n = -1,\n          i = t.length,\n          o = e.length;\n\n      while (++n < i) {\n        e[o + n] = t[n];\n      }\n\n      return e;\n    }\n\n    var Pi = Mi;\n    var Ei = Object.getOwnPropertySymbols;\n    var Si = !Ei ? _i : function (e) {\n      var t = [];\n\n      while (e) {\n        Pi(t, Ai(e));\n        e = A(e);\n      }\n\n      return t;\n    };\n    var Ii = Si;\n\n    function Oi(e, t) {\n      return Dt(e, Ii(e), t);\n    }\n\n    var Ni = Oi;\n\n    function Ri(e, t, n) {\n      var i = t(e);\n      return Qt(e) ? i : Pi(i, n(e));\n    }\n\n    var Li = Ri;\n\n    function ji(e) {\n      return Li(e, ei, Ai);\n    }\n\n    var Di = ji;\n\n    function zi(e) {\n      return Li(e, di, Ii);\n    }\n\n    var Bi = zi;\n    var Vi = je(i[\"a\"], \"DataView\");\n    var Fi = Vi;\n    var Hi = je(i[\"a\"], \"Promise\");\n    var Ui = Hi;\n    var Wi = je(i[\"a\"], \"Set\");\n    var $i = Wi;\n    var qi = je(i[\"a\"], \"WeakMap\");\n    var Yi = qi;\n    var Ji = \"[object Map]\",\n        Qi = \"[object Object]\",\n        Xi = \"[object Promise]\",\n        Gi = \"[object Set]\",\n        Ki = \"[object WeakMap]\";\n    var Zi = \"[object DataView]\";\n    var eo = xe(Fi),\n        to = xe(ze),\n        no = xe(Ui),\n        io = xe($i),\n        oo = xe(Yi);\n    var so = v;\n\n    if (Fi && so(new Fi(new ArrayBuffer(1))) != Zi || ze && so(new ze()) != Ji || Ui && so(Ui.resolve()) != Xi || $i && so(new $i()) != Gi || Yi && so(new Yi()) != Ki) {\n      so = function so(e) {\n        var t = v(e),\n            n = t == Qi ? e.constructor : undefined,\n            i = n ? xe(n) : \"\";\n\n        if (i) {\n          switch (i) {\n            case eo:\n              return Zi;\n\n            case to:\n              return Ji;\n\n            case no:\n              return Xi;\n\n            case io:\n              return Gi;\n\n            case oo:\n              return Ki;\n          }\n        }\n\n        return t;\n      };\n    }\n\n    var ro = so;\n    var ao = Object.prototype;\n    var co = ao.hasOwnProperty;\n\n    function lo(e) {\n      var t = e.length,\n          n = new e.constructor(t);\n\n      if (t && typeof e[0] == \"string\" && co.call(e, \"index\")) {\n        n.index = e.index;\n        n.input = e.input;\n      }\n\n      return n;\n    }\n\n    var uo = lo;\n    var ho = i[\"a\"].Uint8Array;\n    var fo = ho;\n\n    function mo(e) {\n      var t = new e.constructor(e.byteLength);\n      new fo(t).set(new fo(e));\n      return t;\n    }\n\n    var go = mo;\n\n    function po(e, t) {\n      var n = t ? go(e.buffer) : e.buffer;\n      return new e.constructor(n, e.byteOffset, e.byteLength);\n    }\n\n    var bo = po;\n    var wo = /\\w*$/;\n\n    function _o(e) {\n      var t = new e.constructor(e.source, wo.exec(e));\n      t.lastIndex = e.lastIndex;\n      return t;\n    }\n\n    var vo = _o;\n    var ko = s ? s.prototype : undefined,\n        yo = ko ? ko.valueOf : undefined;\n\n    function xo(e) {\n      return yo ? Object(yo.call(e)) : {};\n    }\n\n    var Ao = xo;\n\n    function Co(e, t) {\n      var n = t ? go(e.buffer) : e.buffer;\n      return new e.constructor(n, e.byteOffset, e.length);\n    }\n\n    var To = Co;\n    var Mo = \"[object Boolean]\",\n        Po = \"[object Date]\",\n        Eo = \"[object Map]\",\n        So = \"[object Number]\",\n        Io = \"[object RegExp]\",\n        Oo = \"[object Set]\",\n        No = \"[object String]\",\n        Ro = \"[object Symbol]\";\n    var Lo = \"[object ArrayBuffer]\",\n        jo = \"[object DataView]\",\n        Do = \"[object Float32Array]\",\n        zo = \"[object Float64Array]\",\n        Bo = \"[object Int8Array]\",\n        Vo = \"[object Int16Array]\",\n        Fo = \"[object Int32Array]\",\n        Ho = \"[object Uint8Array]\",\n        Uo = \"[object Uint8ClampedArray]\",\n        Wo = \"[object Uint16Array]\",\n        $o = \"[object Uint32Array]\";\n\n    function qo(e, t, n) {\n      var i = e.constructor;\n\n      switch (t) {\n        case Lo:\n          return go(e);\n\n        case Mo:\n        case Po:\n          return new i(+e);\n\n        case jo:\n          return bo(e, n);\n\n        case Do:\n        case zo:\n        case Bo:\n        case Vo:\n        case Fo:\n        case Ho:\n        case Uo:\n        case Wo:\n        case $o:\n          return To(e, n);\n\n        case Eo:\n          return new i();\n\n        case So:\n        case No:\n          return new i(e);\n\n        case Io:\n          return vo(e);\n\n        case Oo:\n          return new i();\n\n        case Ro:\n          return Ao(e);\n      }\n    }\n\n    var Yo = qo;\n    var Jo = Object.create;\n\n    var Qo = function () {\n      function e() {}\n\n      return function (t) {\n        if (!ce(t)) {\n          return {};\n        }\n\n        if (Jo) {\n          return Jo(t);\n        }\n\n        e.prototype = t;\n        var n = new e();\n        e.prototype = undefined;\n        return n;\n      };\n    }();\n\n    var Xo = Qo;\n\n    function Go(e) {\n      return typeof e.constructor == \"function\" && !Wn(e) ? Xo(A(e)) : {};\n    }\n\n    var Ko = Go;\n    var Zo = \"[object Map]\";\n\n    function es(e) {\n      return T(e) && ro(e) == Zo;\n    }\n\n    var ts = es;\n    var ns = Rn[\"a\"] && Rn[\"a\"].isMap;\n    var is = ns ? Nn(ns) : ts;\n    var os = is;\n    var ss = \"[object Set]\";\n\n    function rs(e) {\n      return T(e) && ro(e) == ss;\n    }\n\n    var as = rs;\n    var cs = Rn[\"a\"] && Rn[\"a\"].isSet;\n    var ls = cs ? Nn(cs) : as;\n    var ds = ls;\n    var us = 1,\n        hs = 2,\n        fs = 4;\n    var ms = \"[object Arguments]\",\n        gs = \"[object Array]\",\n        ps = \"[object Boolean]\",\n        bs = \"[object Date]\",\n        ws = \"[object Error]\",\n        _s = \"[object Function]\",\n        vs = \"[object GeneratorFunction]\",\n        ks = \"[object Map]\",\n        ys = \"[object Number]\",\n        xs = \"[object Object]\",\n        As = \"[object RegExp]\",\n        Cs = \"[object Set]\",\n        Ts = \"[object String]\",\n        Ms = \"[object Symbol]\",\n        Ps = \"[object WeakMap]\";\n    var Es = \"[object ArrayBuffer]\",\n        Ss = \"[object DataView]\",\n        Is = \"[object Float32Array]\",\n        Os = \"[object Float64Array]\",\n        Ns = \"[object Int8Array]\",\n        Rs = \"[object Int16Array]\",\n        Ls = \"[object Int32Array]\",\n        js = \"[object Uint8Array]\",\n        Ds = \"[object Uint8ClampedArray]\",\n        zs = \"[object Uint16Array]\",\n        Bs = \"[object Uint32Array]\";\n    var Vs = {};\n    Vs[ms] = Vs[gs] = Vs[Es] = Vs[Ss] = Vs[ps] = Vs[bs] = Vs[Is] = Vs[Os] = Vs[Ns] = Vs[Rs] = Vs[Ls] = Vs[ks] = Vs[ys] = Vs[xs] = Vs[As] = Vs[Cs] = Vs[Ts] = Vs[Ms] = Vs[js] = Vs[Ds] = Vs[zs] = Vs[Bs] = true;\n    Vs[ws] = Vs[_s] = Vs[Ps] = false;\n\n    function Fs(e, t, n, i, o, s) {\n      var r,\n          a = t & us,\n          c = t & hs,\n          l = t & fs;\n\n      if (n) {\n        r = o ? n(e, i, o, s) : n(e);\n      }\n\n      if (r !== undefined) {\n        return r;\n      }\n\n      if (!ce(e)) {\n        return e;\n      }\n\n      var d = Qt(e);\n\n      if (d) {\n        r = uo(e);\n\n        if (!a) {\n          return gi(e, r);\n        }\n      } else {\n        var u = ro(e),\n            h = u == _s || u == vs;\n\n        if (Object(Xt[\"a\"])(e)) {\n          return Object(fi[\"a\"])(e, a);\n        }\n\n        if (u == xs || u == ms || h && !o) {\n          r = c || h ? {} : Ko(e);\n\n          if (!a) {\n            return c ? Ni(e, hi(r, e)) : Ti(e, ni(r, e));\n          }\n        } else {\n          if (!Vs[u]) {\n            return o ? e : {};\n          }\n\n          r = Yo(e, u, a);\n        }\n      }\n\n      s || (s = new Ct());\n      var f = s.get(e);\n\n      if (f) {\n        return f;\n      }\n\n      s.set(e, r);\n\n      if (ds(e)) {\n        e.forEach(function (i) {\n          r.add(Fs(i, t, n, i, e, s));\n        });\n      } else if (os(e)) {\n        e.forEach(function (i, o) {\n          r.set(o, Fs(i, t, n, o, e, s));\n        });\n      }\n\n      var m = l ? c ? Bi : Di : c ? keysIn : ei;\n      var g = d ? undefined : m(e);\n      Mt(g || e, function (i, o) {\n        if (g) {\n          o = i;\n          i = e[o];\n        }\n\n        Lt(r, o, Fs(i, t, n, o, e, s));\n      });\n      return r;\n    }\n\n    var Hs = Fs;\n    var Us = 1,\n        Ws = 4;\n\n    function $s(e, t) {\n      t = typeof t == \"function\" ? t : undefined;\n      return Hs(e, Us | Ws, t);\n    }\n\n    var qs = $s;\n\n    function Ys(e) {\n      return T(e) && e.nodeType === 1 && !R(e);\n    }\n\n    var Js = Ys;\n\n    var Qs = /*#__PURE__*/function () {\n      function Qs(e, t) {\n        _classCallCheck(this, Qs);\n\n        this._config = {};\n\n        if (t) {\n          this.define(Xs(t));\n        }\n\n        if (e) {\n          this._setObjectToTarget(this._config, e);\n        }\n      }\n\n      _createClass(Qs, [{\n        key: \"set\",\n        value: function set(e, t) {\n          this._setToTarget(this._config, e, t);\n        }\n      }, {\n        key: \"define\",\n        value: function define(e, t) {\n          var n = true;\n\n          this._setToTarget(this._config, e, t, n);\n        }\n      }, {\n        key: \"get\",\n        value: function get(e) {\n          return this._getFromSource(this._config, e);\n        }\n      }, {\n        key: \"names\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function names() {\n          var _i2, _Object$keys, _e2;\n\n          return _regeneratorRuntime().wrap(function names$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _i2 = 0, _Object$keys = Object.keys(this._config);\n\n                case 1:\n                  if (!(_i2 < _Object$keys.length)) {\n                    _context.next = 8;\n                    break;\n                  }\n\n                  _e2 = _Object$keys[_i2];\n                  _context.next = 5;\n                  return _e2;\n\n                case 5:\n                  _i2++;\n                  _context.next = 1;\n                  break;\n\n                case 8:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, names, this);\n        })\n      }, {\n        key: \"_setToTarget\",\n        value: function _setToTarget(e, t, n) {\n          var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n          if (R(t)) {\n            this._setObjectToTarget(e, t, i);\n\n            return;\n          }\n\n          var o = t.split(\".\");\n          t = o.pop();\n\n          var _iterator = _createForOfIteratorHelper(o),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var _t2 = _step.value;\n\n              if (!R(e[_t2])) {\n                e[_t2] = {};\n              }\n\n              e = e[_t2];\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n\n          if (R(n)) {\n            if (!R(e[t])) {\n              e[t] = {};\n            }\n\n            e = e[t];\n\n            this._setObjectToTarget(e, n, i);\n\n            return;\n          }\n\n          if (i && typeof e[t] != \"undefined\") {\n            return;\n          }\n\n          e[t] = n;\n        }\n      }, {\n        key: \"_getFromSource\",\n        value: function _getFromSource(e, t) {\n          var n = t.split(\".\");\n          t = n.pop();\n\n          var _iterator2 = _createForOfIteratorHelper(n),\n              _step2;\n\n          try {\n            for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n              var _t3 = _step2.value;\n\n              if (!R(e[_t3])) {\n                e = null;\n                break;\n              }\n\n              e = e[_t3];\n            }\n          } catch (err) {\n            _iterator2.e(err);\n          } finally {\n            _iterator2.f();\n          }\n\n          return e ? Xs(e[t]) : undefined;\n        }\n      }, {\n        key: \"_setObjectToTarget\",\n        value: function _setObjectToTarget(e, t, n) {\n          var _this2 = this;\n\n          Object.keys(t).forEach(function (i) {\n            _this2._setToTarget(e, i, t[i], n);\n          });\n        }\n      }]);\n\n      return Qs;\n    }();\n\n    function Xs(e) {\n      return qs(e, Gs);\n    }\n\n    function Gs(e) {\n      return Js(e) ? e : undefined;\n    }\n\n    function Ks() {\n      return function e() {\n        e.called = true;\n      };\n    }\n\n    var Zs = Ks;\n\n    var er = /*#__PURE__*/_createClass(function er(e, t) {\n      _classCallCheck(this, er);\n\n      this.source = e;\n      this.name = t;\n      this.path = [];\n      this.stop = Zs();\n      this.off = Zs();\n    });\n\n    var tr = new Array(256).fill().map(function (e, t) {\n      return (\"0\" + t.toString(16)).slice(-2);\n    });\n\n    function nr() {\n      var e = Math.random() * 4294967296 >>> 0;\n      var t = Math.random() * 4294967296 >>> 0;\n      var n = Math.random() * 4294967296 >>> 0;\n      var i = Math.random() * 4294967296 >>> 0;\n      return \"e\" + tr[e >> 0 & 255] + tr[e >> 8 & 255] + tr[e >> 16 & 255] + tr[e >> 24 & 255] + tr[t >> 0 & 255] + tr[t >> 8 & 255] + tr[t >> 16 & 255] + tr[t >> 24 & 255] + tr[n >> 0 & 255] + tr[n >> 8 & 255] + tr[n >> 16 & 255] + tr[n >> 24 & 255] + tr[i >> 0 & 255] + tr[i >> 8 & 255] + tr[i >> 16 & 255] + tr[i >> 24 & 255];\n    }\n\n    var ir = {\n      get: function get(e) {\n        if (typeof e != \"number\") {\n          return this[e] || this.normal;\n        } else {\n          return e;\n        }\n      },\n      highest: 1e5,\n      high: 1e3,\n      normal: 0,\n      low: -1e3,\n      lowest: -1e5\n    };\n    var or = ir;\n    var sr = n(6);\n    var rr = n(0);\n    var ar = Symbol(\"listeningTo\");\n    var cr = Symbol(\"emitterId\");\n    var lr = {\n      on: function on(e, t) {\n        var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n        this.listenTo(this, e, t, n);\n      },\n      once: function once(e, t, n) {\n        var i = false;\n\n        var o = function o(e) {\n          if (!i) {\n            i = true;\n            e.off();\n\n            for (var _len = arguments.length, n = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n              n[_key - 1] = arguments[_key];\n            }\n\n            t.call.apply(t, [this, e].concat(n));\n          }\n        };\n\n        this.listenTo(this, e, o, n);\n      },\n      off: function off(e, t) {\n        this.stopListening(this, e, t);\n      },\n      listenTo: function listenTo(e, t, n) {\n        var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n        var o, s;\n\n        if (!this[ar]) {\n          this[ar] = {};\n        }\n\n        var r = this[ar];\n\n        if (!fr(e)) {\n          hr(e);\n        }\n\n        var a = fr(e);\n\n        if (!(o = r[a])) {\n          o = r[a] = {\n            emitter: e,\n            callbacks: {}\n          };\n        }\n\n        if (!(s = o.callbacks[t])) {\n          s = o.callbacks[t] = [];\n        }\n\n        s.push(n);\n        pr(e, t);\n        var c = br(e, t);\n        var l = or.get(i.priority);\n        var d = {\n          callback: n,\n          priority: l\n        };\n\n        var _iterator3 = _createForOfIteratorHelper(c),\n            _step3;\n\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var _e3 = _step3.value;\n            var _t4 = false;\n\n            for (var _n2 = 0; _n2 < _e3.length; _n2++) {\n              if (_e3[_n2].priority < l) {\n                _e3.splice(_n2, 0, d);\n\n                _t4 = true;\n                break;\n              }\n            }\n\n            if (!_t4) {\n              _e3.push(d);\n            }\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n      },\n      stopListening: function stopListening(e, t, n) {\n        var i = this[ar];\n        var o = e && fr(e);\n        var s = i && o && i[o];\n        var r = s && t && s.callbacks[t];\n\n        if (!i || e && !s || t && !r) {\n          return;\n        }\n\n        if (n) {\n          vr(e, t, n);\n        } else if (r) {\n          while (n = r.pop()) {\n            vr(e, t, n);\n          }\n\n          delete s.callbacks[t];\n        } else if (s) {\n          for (t in s.callbacks) {\n            this.stopListening(e, t);\n          }\n\n          delete i[o];\n        } else {\n          for (o in i) {\n            this.stopListening(i[o].emitter);\n          }\n\n          delete this[ar];\n        }\n      },\n      fire: function fire(e) {\n        try {\n          var _n3 = e instanceof er ? e : new er(this, e);\n\n          var _i3 = _n3.name;\n\n          var _o2 = wr(this, _i3);\n\n          _n3.path.push(this);\n\n          for (var _len2 = arguments.length, t = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n            t[_key2 - 1] = arguments[_key2];\n          }\n\n          if (_o2) {\n            var _e4 = [_n3].concat(t);\n\n            _o2 = Array.from(_o2);\n\n            for (var _t5 = 0; _t5 < _o2.length; _t5++) {\n              _o2[_t5].callback.apply(this, _e4);\n\n              if (_n3.off.called) {\n                delete _n3.off.called;\n                vr(this, _i3, _o2[_t5].callback);\n              }\n\n              if (_n3.stop.called) {\n                break;\n              }\n            }\n          }\n\n          if (this._delegations) {\n            var _e5 = this._delegations.get(_i3);\n\n            var _o3 = this._delegations.get(\"*\");\n\n            if (_e5) {\n              _r(_e5, _n3, t);\n            }\n\n            if (_o3) {\n              _r(_o3, _n3, t);\n            }\n          }\n\n          return _n3.return;\n        } catch (e) {\n          rr[\"b\"].rethrowUnexpectedError(e, this);\n        }\n      },\n      delegate: function delegate() {\n        var _this3 = this;\n\n        for (var _len3 = arguments.length, e = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n          e[_key3] = arguments[_key3];\n        }\n\n        return {\n          to: function to(t, n) {\n            if (!_this3._delegations) {\n              _this3._delegations = new Map();\n            }\n\n            e.forEach(function (e) {\n              var i = _this3._delegations.get(e);\n\n              if (!i) {\n                _this3._delegations.set(e, new Map([[t, n]]));\n              } else {\n                i.set(t, n);\n              }\n            });\n          }\n        };\n      },\n      stopDelegating: function stopDelegating(e, t) {\n        if (!this._delegations) {\n          return;\n        }\n\n        if (!e) {\n          this._delegations.clear();\n        } else if (!t) {\n          this._delegations.delete(e);\n        } else {\n          var _n4 = this._delegations.get(e);\n\n          if (_n4) {\n            _n4.delete(t);\n          }\n        }\n      }\n    };\n    var dr = lr;\n\n    function ur(e, t) {\n      if (e[ar] && e[ar][t]) {\n        return e[ar][t].emitter;\n      }\n\n      return null;\n    }\n\n    function hr(e, t) {\n      if (!e[cr]) {\n        e[cr] = t || nr();\n      }\n    }\n\n    function fr(e) {\n      return e[cr];\n    }\n\n    function mr(e) {\n      if (!e._events) {\n        Object.defineProperty(e, \"_events\", {\n          value: {}\n        });\n      }\n\n      return e._events;\n    }\n\n    function gr() {\n      return {\n        callbacks: [],\n        childEvents: []\n      };\n    }\n\n    function pr(e, t) {\n      var n = mr(e);\n\n      if (n[t]) {\n        return;\n      }\n\n      var i = t;\n      var o = null;\n      var s = [];\n\n      while (i !== \"\") {\n        if (n[i]) {\n          break;\n        }\n\n        n[i] = gr();\n        s.push(n[i]);\n\n        if (o) {\n          n[i].childEvents.push(o);\n        }\n\n        o = i;\n        i = i.substr(0, i.lastIndexOf(\":\"));\n      }\n\n      if (i !== \"\") {\n        var _iterator4 = _createForOfIteratorHelper(s),\n            _step4;\n\n        try {\n          for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n            var _e6 = _step4.value;\n            _e6.callbacks = n[i].callbacks.slice();\n          }\n        } catch (err) {\n          _iterator4.e(err);\n        } finally {\n          _iterator4.f();\n        }\n\n        n[i].childEvents.push(o);\n      }\n    }\n\n    function br(e, t) {\n      var n = mr(e)[t];\n\n      if (!n) {\n        return [];\n      }\n\n      var i = [n.callbacks];\n\n      for (var _t6 = 0; _t6 < n.childEvents.length; _t6++) {\n        var _o4 = br(e, n.childEvents[_t6]);\n\n        i = i.concat(_o4);\n      }\n\n      return i;\n    }\n\n    function wr(e, t) {\n      var n;\n\n      if (!e._events || !(n = e._events[t]) || !n.callbacks.length) {\n        if (t.indexOf(\":\") > -1) {\n          return wr(e, t.substr(0, t.lastIndexOf(\":\")));\n        } else {\n          return null;\n        }\n      }\n\n      return n.callbacks;\n    }\n\n    function _r(e, t, n) {\n      var _iterator5 = _createForOfIteratorHelper(e),\n          _step5;\n\n      try {\n        for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n          var _step5$value = _slicedToArray(_step5.value, 2),\n              _i4 = _step5$value[0],\n              _o5 = _step5$value[1];\n\n          if (!_o5) {\n            _o5 = t.name;\n          } else if (typeof _o5 == \"function\") {\n            _o5 = _o5(t.name);\n          }\n\n          var _e7 = new er(t.source, _o5);\n\n          _e7.path = _toConsumableArray(t.path);\n\n          _i4.fire.apply(_i4, [_e7].concat(_toConsumableArray(n)));\n        }\n      } catch (err) {\n        _iterator5.e(err);\n      } finally {\n        _iterator5.f();\n      }\n    }\n\n    function vr(e, t, n) {\n      var i = br(e, t);\n\n      var _iterator6 = _createForOfIteratorHelper(i),\n          _step6;\n\n      try {\n        for (_iterator6.s(); !(_step6 = _iterator6.n()).done;) {\n          var _e8 = _step6.value;\n\n          for (var _t7 = 0; _t7 < _e8.length; _t7++) {\n            if (_e8[_t7].callback == n) {\n              _e8.splice(_t7, 1);\n\n              _t7--;\n            }\n          }\n        }\n      } catch (err) {\n        _iterator6.e(err);\n      } finally {\n        _iterator6.f();\n      }\n    }\n\n    function kr(e) {\n      for (var _len4 = arguments.length, t = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n        t[_key4 - 1] = arguments[_key4];\n      }\n\n      t.forEach(function (t) {\n        Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t)).forEach(function (n) {\n          if (n in e.prototype) {\n            return;\n          }\n\n          var i = Object.getOwnPropertyDescriptor(t, n);\n          i.enumerable = false;\n          Object.defineProperty(e.prototype, n, i);\n        });\n      });\n    }\n\n    var yr = /*#__PURE__*/function (_Symbol$iterator) {\n      function yr() {\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, yr);\n\n        this._items = [];\n        this._itemMap = new Map();\n        this._idProperty = e.idProperty || \"id\";\n        this._bindToExternalToInternalMap = new WeakMap();\n        this._bindToInternalToExternalMap = new WeakMap();\n        this._skippedIndexesFromExternal = [];\n      }\n\n      _createClass(yr, [{\n        key: \"length\",\n        get: function get() {\n          return this._items.length;\n        }\n      }, {\n        key: \"first\",\n        get: function get() {\n          return this._items[0] || null;\n        }\n      }, {\n        key: \"last\",\n        get: function get() {\n          return this._items[this.length - 1] || null;\n        }\n      }, {\n        key: \"add\",\n        value: function add(e, t) {\n          var n;\n          var i = this._idProperty;\n\n          if (i in e) {\n            n = e[i];\n\n            if (typeof n != \"string\") {\n              throw new rr[\"b\"](\"collection-add-invalid-id\", this);\n            }\n\n            if (this.get(n)) {\n              throw new rr[\"b\"](\"collection-add-item-already-exists\", this);\n            }\n          } else {\n            e[i] = n = nr();\n          }\n\n          if (t === undefined) {\n            t = this._items.length;\n          } else if (t > this._items.length || t < 0) {\n            throw new rr[\"b\"](\"collection-add-item-invalid-index\", this);\n          }\n\n          this._items.splice(t, 0, e);\n\n          this._itemMap.set(n, e);\n\n          this.fire(\"add\", e, t);\n          return this;\n        }\n      }, {\n        key: \"get\",\n        value: function get(e) {\n          var t;\n\n          if (typeof e == \"string\") {\n            t = this._itemMap.get(e);\n          } else if (typeof e == \"number\") {\n            t = this._items[e];\n          } else {\n            throw new rr[\"b\"](\"collection-get-invalid-arg: Index or id must be given.\", this);\n          }\n\n          return t || null;\n        }\n      }, {\n        key: \"has\",\n        value: function has(e) {\n          if (typeof e == \"string\") {\n            return this._itemMap.has(e);\n          } else {\n            var _t8 = this._idProperty;\n            var _n5 = e[_t8];\n            return this._itemMap.has(_n5);\n          }\n        }\n      }, {\n        key: \"getIndex\",\n        value: function getIndex(e) {\n          var t;\n\n          if (typeof e == \"string\") {\n            t = this._itemMap.get(e);\n          } else {\n            t = e;\n          }\n\n          return this._items.indexOf(t);\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(e) {\n          var t, n, i;\n          var o = false;\n          var s = this._idProperty;\n\n          if (typeof e == \"string\") {\n            n = e;\n            i = this._itemMap.get(n);\n            o = !i;\n\n            if (i) {\n              t = this._items.indexOf(i);\n            }\n          } else if (typeof e == \"number\") {\n            t = e;\n            i = this._items[t];\n            o = !i;\n\n            if (i) {\n              n = i[s];\n            }\n          } else {\n            i = e;\n            n = i[s];\n            t = this._items.indexOf(i);\n            o = t == -1 || !this._itemMap.get(n);\n          }\n\n          if (o) {\n            throw new rr[\"b\"](\"collection-remove-404: Item not found.\", this);\n          }\n\n          this._items.splice(t, 1);\n\n          this._itemMap.delete(n);\n\n          var r = this._bindToInternalToExternalMap.get(i);\n\n          this._bindToInternalToExternalMap.delete(i);\n\n          this._bindToExternalToInternalMap.delete(r);\n\n          this.fire(\"remove\", i, t);\n          return i;\n        }\n      }, {\n        key: \"map\",\n        value: function map(e, t) {\n          return this._items.map(e, t);\n        }\n      }, {\n        key: \"find\",\n        value: function find(e, t) {\n          return this._items.find(e, t);\n        }\n      }, {\n        key: \"filter\",\n        value: function filter(e, t) {\n          return this._items.filter(e, t);\n        }\n      }, {\n        key: \"clear\",\n        value: function clear() {\n          if (this._bindToCollection) {\n            this.stopListening(this._bindToCollection);\n            this._bindToCollection = null;\n          }\n\n          while (this.length) {\n            this.remove(0);\n          }\n        }\n      }, {\n        key: \"bindTo\",\n        value: function bindTo(e) {\n          var _this4 = this;\n\n          if (this._bindToCollection) {\n            throw new rr[\"b\"](\"collection-bind-to-rebind: The collection cannot be bound more than once.\", this);\n          }\n\n          this._bindToCollection = e;\n          return {\n            as: function as(e) {\n              _this4._setUpBindToBinding(function (t) {\n                return new e(t);\n              });\n            },\n            using: function using(e) {\n              if (typeof e == \"function\") {\n                _this4._setUpBindToBinding(function (t) {\n                  return e(t);\n                });\n              } else {\n                _this4._setUpBindToBinding(function (t) {\n                  return t[e];\n                });\n              }\n            }\n          };\n        }\n      }, {\n        key: \"_setUpBindToBinding\",\n        value: function _setUpBindToBinding(e) {\n          var _this5 = this;\n\n          var t = this._bindToCollection;\n\n          var n = function n(_n7, i, o) {\n            var s = t._bindToCollection == _this5;\n\n            var r = t._bindToInternalToExternalMap.get(i);\n\n            if (s && r) {\n              _this5._bindToExternalToInternalMap.set(i, r);\n\n              _this5._bindToInternalToExternalMap.set(r, i);\n            } else {\n              var _n6 = e(i);\n\n              if (!_n6) {\n                _this5._skippedIndexesFromExternal.push(o);\n\n                return;\n              }\n\n              var _s2 = o;\n\n              var _iterator7 = _createForOfIteratorHelper(_this5._skippedIndexesFromExternal),\n                  _step7;\n\n              try {\n                for (_iterator7.s(); !(_step7 = _iterator7.n()).done;) {\n                  var _e10 = _step7.value;\n\n                  if (o > _e10) {\n                    _s2--;\n                  }\n                }\n              } catch (err) {\n                _iterator7.e(err);\n              } finally {\n                _iterator7.f();\n              }\n\n              var _iterator8 = _createForOfIteratorHelper(t._skippedIndexesFromExternal),\n                  _step8;\n\n              try {\n                for (_iterator8.s(); !(_step8 = _iterator8.n()).done;) {\n                  var _e11 = _step8.value;\n\n                  if (_s2 >= _e11) {\n                    _s2++;\n                  }\n                }\n              } catch (err) {\n                _iterator8.e(err);\n              } finally {\n                _iterator8.f();\n              }\n\n              _this5._bindToExternalToInternalMap.set(i, _n6);\n\n              _this5._bindToInternalToExternalMap.set(_n6, i);\n\n              _this5.add(_n6, _s2);\n\n              for (var _e9 = 0; _e9 < t._skippedIndexesFromExternal.length; _e9++) {\n                if (_s2 <= t._skippedIndexesFromExternal[_e9]) {\n                  t._skippedIndexesFromExternal[_e9]++;\n                }\n              }\n            }\n          };\n\n          var _iterator9 = _createForOfIteratorHelper(t),\n              _step9;\n\n          try {\n            for (_iterator9.s(); !(_step9 = _iterator9.n()).done;) {\n              var _e12 = _step9.value;\n              n(null, _e12, t.getIndex(_e12));\n            }\n          } catch (err) {\n            _iterator9.e(err);\n          } finally {\n            _iterator9.f();\n          }\n\n          this.listenTo(t, \"add\", n);\n          this.listenTo(t, \"remove\", function (e, t, n) {\n            var i = _this5._bindToExternalToInternalMap.get(t);\n\n            if (i) {\n              _this5.remove(i);\n            }\n\n            _this5._skippedIndexesFromExternal = _this5._skippedIndexesFromExternal.reduce(function (e, t) {\n              if (n < t) {\n                e.push(t - 1);\n              }\n\n              if (n > t) {\n                e.push(t);\n              }\n\n              return e;\n            }, []);\n          });\n        }\n      }, {\n        key: _Symbol$iterator,\n        value: function value() {\n          return this._items[Symbol.iterator]();\n        }\n      }]);\n\n      return yr;\n    }(Symbol.iterator);\n\n    kr(yr, dr);\n\n    var xr = /*#__PURE__*/function (_Symbol$iterator2) {\n      function xr(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n        var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n\n        _classCallCheck(this, xr);\n\n        this._context = e;\n        this._plugins = new Map();\n        this._availablePlugins = new Map();\n\n        var _iterator10 = _createForOfIteratorHelper(t),\n            _step10;\n\n        try {\n          for (_iterator10.s(); !(_step10 = _iterator10.n()).done;) {\n            var _e13 = _step10.value;\n\n            if (_e13.pluginName) {\n              this._availablePlugins.set(_e13.pluginName, _e13);\n            }\n          }\n        } catch (err) {\n          _iterator10.e(err);\n        } finally {\n          _iterator10.f();\n        }\n\n        this._contextPlugins = new Map();\n\n        var _iterator11 = _createForOfIteratorHelper(n),\n            _step11;\n\n        try {\n          for (_iterator11.s(); !(_step11 = _iterator11.n()).done;) {\n            var _step11$value = _slicedToArray(_step11.value, 2),\n                _e14 = _step11$value[0],\n                _t9 = _step11$value[1];\n\n            this._contextPlugins.set(_e14, _t9);\n\n            this._contextPlugins.set(_t9, _e14);\n\n            if (_e14.pluginName) {\n              this._availablePlugins.set(_e14.pluginName, _e14);\n            }\n          }\n        } catch (err) {\n          _iterator11.e(err);\n        } finally {\n          _iterator11.f();\n        }\n      }\n\n      _createClass(xr, [{\n        key: _Symbol$iterator2,\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function value() {\n          var _iterator12, _step12, _e15;\n\n          return _regeneratorRuntime().wrap(function value$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _iterator12 = _createForOfIteratorHelper(this._plugins);\n                  _context2.prev = 1;\n\n                  _iterator12.s();\n\n                case 3:\n                  if ((_step12 = _iterator12.n()).done) {\n                    _context2.next = 10;\n                    break;\n                  }\n\n                  _e15 = _step12.value;\n\n                  if (!(typeof _e15[0] == \"function\")) {\n                    _context2.next = 8;\n                    break;\n                  }\n\n                  _context2.next = 8;\n                  return _e15;\n\n                case 8:\n                  _context2.next = 3;\n                  break;\n\n                case 10:\n                  _context2.next = 15;\n                  break;\n\n                case 12:\n                  _context2.prev = 12;\n                  _context2.t0 = _context2[\"catch\"](1);\n\n                  _iterator12.e(_context2.t0);\n\n                case 15:\n                  _context2.prev = 15;\n\n                  _iterator12.f();\n\n                  return _context2.finish(15);\n\n                case 18:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, value, this, [[1, 12, 15, 18]]);\n        })\n      }, {\n        key: \"get\",\n        value: function get(e) {\n          var t = this._plugins.get(e);\n\n          if (!t) {\n            var _t10 = \"plugincollection-plugin-not-loaded: The requested plugin is not loaded.\";\n            var _n8 = e;\n\n            if (typeof e == \"function\") {\n              _n8 = e.pluginName || e.name;\n            }\n\n            throw new rr[\"b\"](_t10, this._context, {\n              plugin: _n8\n            });\n          }\n\n          return t;\n        }\n      }, {\n        key: \"has\",\n        value: function has(e) {\n          return this._plugins.has(e);\n        }\n      }, {\n        key: \"init\",\n        value: function init(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n          var n = this;\n          var i = this._context;\n          var o = new Set();\n          var s = [];\n          var r = m(e);\n          var a = m(t);\n          var c = f(e);\n\n          if (c) {\n            var _e16 = \"plugincollection-plugin-not-found: Some plugins are not available and could not be loaded.\";\n            console.error(Object(rr[\"a\"])(_e16), {\n              plugins: c\n            });\n            return Promise.reject(new rr[\"b\"](_e16, i, {\n              plugins: c\n            }));\n          }\n\n          return Promise.all(r.map(l)).then(function () {\n            return d(s, \"init\");\n          }).then(function () {\n            return d(s, \"afterInit\");\n          }).then(function () {\n            return s;\n          });\n\n          function l(e) {\n            if (a.includes(e)) {\n              return;\n            }\n\n            if (n._plugins.has(e) || o.has(e)) {\n              return;\n            }\n\n            return u(e).catch(function (t) {\n              console.error(Object(rr[\"a\"])(\"plugincollection-load: It was not possible to load the plugin.\"), {\n                plugin: e\n              });\n              throw t;\n            });\n          }\n\n          function d(e, t) {\n            return e.reduce(function (e, i) {\n              if (!i[t]) {\n                return e;\n              }\n\n              if (n._contextPlugins.has(i)) {\n                return e;\n              }\n\n              return e.then(i[t].bind(i));\n            }, Promise.resolve());\n          }\n\n          function u(e) {\n            return new Promise(function (r) {\n              o.add(e);\n\n              if (e.requires) {\n                e.requires.forEach(function (n) {\n                  var o = h(n);\n\n                  if (e.isContextPlugin && !o.isContextPlugin) {\n                    throw new rr[\"b\"](\"plugincollection-context-required: Context plugin can not require plugin which is not a context plugin\", null, {\n                      plugin: o.name,\n                      requiredBy: e.name\n                    });\n                  }\n\n                  if (t.includes(o)) {\n                    throw new rr[\"b\"](\"plugincollection-required: Cannot load a plugin because one of its dependencies is listed in\" + \"the `removePlugins` option.\", i, {\n                      plugin: o.name,\n                      requiredBy: e.name\n                    });\n                  }\n\n                  l(o);\n                });\n              }\n\n              var a = n._contextPlugins.get(e) || new e(i);\n\n              n._add(e, a);\n\n              s.push(a);\n              r();\n            });\n          }\n\n          function h(e) {\n            if (typeof e == \"function\") {\n              return e;\n            }\n\n            return n._availablePlugins.get(e);\n          }\n\n          function f(e) {\n            var t = [];\n\n            var _iterator13 = _createForOfIteratorHelper(e),\n                _step13;\n\n            try {\n              for (_iterator13.s(); !(_step13 = _iterator13.n()).done;) {\n                var _n9 = _step13.value;\n\n                if (!h(_n9)) {\n                  t.push(_n9);\n                }\n              }\n            } catch (err) {\n              _iterator13.e(err);\n            } finally {\n              _iterator13.f();\n            }\n\n            return t.length ? t : null;\n          }\n\n          function m(e) {\n            return e.map(function (e) {\n              return h(e);\n            }).filter(function (e) {\n              return !!e;\n            });\n          }\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          var e = [];\n\n          var _iterator14 = _createForOfIteratorHelper(this),\n              _step14;\n\n          try {\n            for (_iterator14.s(); !(_step14 = _iterator14.n()).done;) {\n              var _step14$value = _slicedToArray(_step14.value, 2),\n                  _t11 = _step14$value[1];\n\n              if (typeof _t11.destroy == \"function\" && !this._contextPlugins.has(_t11)) {\n                e.push(_t11.destroy());\n              }\n            }\n          } catch (err) {\n            _iterator14.e(err);\n          } finally {\n            _iterator14.f();\n          }\n\n          return Promise.all(e);\n        }\n      }, {\n        key: \"_add\",\n        value: function _add(e, t) {\n          this._plugins.set(e, t);\n\n          var n = e.pluginName;\n\n          if (!n) {\n            return;\n          }\n\n          if (this._plugins.has(n)) {\n            throw new rr[\"b\"](\"plugincollection-plugin-name-conflict: Two plugins with the same name were loaded.\", null, {\n              pluginName: n,\n              plugin1: this._plugins.get(n).constructor,\n              plugin2: e\n            });\n          }\n\n          this._plugins.set(n, t);\n        }\n      }]);\n\n      return xr;\n    }(Symbol.iterator);\n\n    kr(xr, dr);\n\n    if (!window.CKEDITOR_TRANSLATIONS) {\n      window.CKEDITOR_TRANSLATIONS = {};\n    }\n\n    function Ar(e, t) {\n      var n = window.CKEDITOR_TRANSLATIONS[e] || (window.CKEDITOR_TRANSLATIONS[e] = {});\n      Object.assign(n, t);\n    }\n\n    function Cr(e, t) {\n      var n = Pr();\n\n      if (n === 1) {\n        e = Object.keys(window.CKEDITOR_TRANSLATIONS)[0];\n      }\n\n      if (n === 0 || !Mr(e, t)) {\n        return t.replace(/ \\[context: [^\\]]+\\]$/, \"\");\n      }\n\n      var i = window.CKEDITOR_TRANSLATIONS[e];\n      return i[t].replace(/ \\[context: [^\\]]+\\]$/, \"\");\n    }\n\n    function Tr() {\n      window.CKEDITOR_TRANSLATIONS = {};\n    }\n\n    function Mr(e, t) {\n      return e in window.CKEDITOR_TRANSLATIONS && t in window.CKEDITOR_TRANSLATIONS[e];\n    }\n\n    function Pr() {\n      return Object.keys(window.CKEDITOR_TRANSLATIONS).length;\n    }\n\n    var Er = [\"ar\", \"fa\", \"he\", \"ku\", \"ug\"];\n\n    var Sr = /*#__PURE__*/function () {\n      function Sr() {\n        var _this6 = this;\n\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, Sr);\n\n        this.uiLanguage = e.uiLanguage || \"en\";\n        this.contentLanguage = e.contentLanguage || this.uiLanguage;\n        this.uiLanguageDirection = Ir(this.uiLanguage);\n        this.contentLanguageDirection = Ir(this.contentLanguage);\n\n        this.t = function () {\n          return _this6._t.apply(_this6, arguments);\n        };\n      }\n\n      _createClass(Sr, [{\n        key: \"language\",\n        get: function get() {\n          console.warn(\"locale-deprecated-language-property: \" + \"The Locale#language property has been deprecated and will be removed in the near future. \" + \"Please use #uiLanguage and #contentLanguage properties instead.\");\n          return this.uiLanguage;\n        }\n      }, {\n        key: \"_t\",\n        value: function _t(e, t) {\n          var n = Cr(this.uiLanguage, e);\n\n          if (t) {\n            n = n.replace(/%(\\d+)/g, function (e, n) {\n              return n < t.length ? t[n] : e;\n            });\n          }\n\n          return n;\n        }\n      }]);\n\n      return Sr;\n    }();\n\n    function Ir(e) {\n      return Er.includes(e) ? \"rtl\" : \"ltr\";\n    }\n\n    var Or = /*#__PURE__*/function () {\n      function Or(e) {\n        _classCallCheck(this, Or);\n\n        this.config = new Qs(e, this.constructor.defaultConfig);\n        var t = this.constructor.builtinPlugins;\n        this.config.define(\"plugins\", t);\n        this.plugins = new xr(this, t);\n        var n = this.config.get(\"language\") || {};\n        this.locale = new Sr({\n          uiLanguage: typeof n === \"string\" ? n : n.ui,\n          contentLanguage: this.config.get(\"language.content\")\n        });\n        this.t = this.locale.t;\n        this.editors = new yr();\n        this._contextOwner = null;\n      }\n\n      _createClass(Or, [{\n        key: \"initPlugins\",\n        value: function initPlugins() {\n          var e = this.config.get(\"plugins\") || [];\n\n          var _iterator15 = _createForOfIteratorHelper(e),\n              _step15;\n\n          try {\n            for (_iterator15.s(); !(_step15 = _iterator15.n()).done;) {\n              var _t12 = _step15.value;\n\n              if (typeof _t12 != \"function\") {\n                throw new rr[\"b\"](\"context-initplugins-constructor-only: Only a constructor function is allowed as a context plugin.\", null, {\n                  Plugin: _t12\n                });\n              }\n\n              if (_t12.isContextPlugin !== true) {\n                throw new rr[\"b\"](\"context-initplugins-invalid-plugin: Only a plugin marked as a context plugin is allowed to be used with a context.\", null, {\n                  Plugin: _t12\n                });\n              }\n            }\n          } catch (err) {\n            _iterator15.e(err);\n          } finally {\n            _iterator15.f();\n          }\n\n          return this.plugins.init(e);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          var _this7 = this;\n\n          return Promise.all(Array.from(this.editors, function (e) {\n            return e.destroy();\n          })).then(function () {\n            return _this7.plugins.destroy();\n          });\n        }\n      }, {\n        key: \"_addEditor\",\n        value: function _addEditor(e, t) {\n          if (this._contextOwner) {\n            throw new rr[\"b\"](\"context-addEditor-private-context: Cannot add multiple editors to the context which is created by the editor.\");\n          }\n\n          this.editors.add(e);\n\n          if (t) {\n            this._contextOwner = e;\n          }\n        }\n      }, {\n        key: \"_removeEditor\",\n        value: function _removeEditor(e) {\n          if (this.editors.has(e)) {\n            this.editors.remove(e);\n          }\n\n          if (this._contextOwner === e) {\n            return this.destroy();\n          }\n\n          return Promise.resolve();\n        }\n      }, {\n        key: \"_getEditorConfig\",\n        value: function _getEditorConfig() {\n          var e = {};\n\n          var _iterator16 = _createForOfIteratorHelper(this.config.names()),\n              _step16;\n\n          try {\n            for (_iterator16.s(); !(_step16 = _iterator16.n()).done;) {\n              var _t13 = _step16.value;\n\n              if (![\"plugins\", \"removePlugins\", \"extraPlugins\"].includes(_t13)) {\n                e[_t13] = this.config.get(_t13);\n              }\n            }\n          } catch (err) {\n            _iterator16.e(err);\n          } finally {\n            _iterator16.f();\n          }\n\n          return e;\n        }\n      }], [{\n        key: \"create\",\n        value: function create(e) {\n          var _this8 = this;\n\n          return new Promise(function (t) {\n            var n = new _this8(e);\n            t(n.initPlugins().then(function () {\n              return n;\n            }));\n          });\n        }\n      }]);\n\n      return Or;\n    }();\n\n    function Nr(e, t) {\n      var n = Math.min(e.length, t.length);\n\n      for (var _i5 = 0; _i5 < n; _i5++) {\n        if (e[_i5] != t[_i5]) {\n          return _i5;\n        }\n      }\n\n      if (e.length == t.length) {\n        return \"same\";\n      } else if (e.length < t.length) {\n        return \"prefix\";\n      } else {\n        return \"extension\";\n      }\n    }\n\n    var Rr = 4;\n\n    function Lr(e) {\n      return Hs(e, Rr);\n    }\n\n    var jr = Lr;\n\n    var Dr = /*#__PURE__*/function () {\n      function Dr(e) {\n        _classCallCheck(this, Dr);\n\n        this.document = e;\n        this.parent = null;\n      }\n\n      _createClass(Dr, [{\n        key: \"index\",\n        get: function get() {\n          var e;\n\n          if (!this.parent) {\n            return null;\n          }\n\n          if ((e = this.parent.getChildIndex(this)) == -1) {\n            throw new rr[\"b\"](\"view-node-not-found-in-parent: The node's parent does not contain this node.\", this);\n          }\n\n          return e;\n        }\n      }, {\n        key: \"nextSibling\",\n        get: function get() {\n          var e = this.index;\n          return e !== null && this.parent.getChild(e + 1) || null;\n        }\n      }, {\n        key: \"previousSibling\",\n        get: function get() {\n          var e = this.index;\n          return e !== null && this.parent.getChild(e - 1) || null;\n        }\n      }, {\n        key: \"root\",\n        get: function get() {\n          var e = this;\n\n          while (e.parent) {\n            e = e.parent;\n          }\n\n          return e;\n        }\n      }, {\n        key: \"isAttached\",\n        value: function isAttached() {\n          return this.root.is(\"rootElement\");\n        }\n      }, {\n        key: \"getPath\",\n        value: function getPath() {\n          var e = [];\n          var t = this;\n\n          while (t.parent) {\n            e.unshift(t.index);\n            t = t.parent;\n          }\n\n          return e;\n        }\n      }, {\n        key: \"getAncestors\",\n        value: function getAncestors() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n            includeSelf: false,\n            parentFirst: false\n          };\n          var t = [];\n          var n = e.includeSelf ? this : this.parent;\n\n          while (n) {\n            t[e.parentFirst ? \"push\" : \"unshift\"](n);\n            n = n.parent;\n          }\n\n          return t;\n        }\n      }, {\n        key: \"getCommonAncestor\",\n        value: function getCommonAncestor(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          var n = this.getAncestors(t);\n          var i = e.getAncestors(t);\n          var o = 0;\n\n          while (n[o] == i[o] && n[o]) {\n            o++;\n          }\n\n          return o === 0 ? null : n[o - 1];\n        }\n      }, {\n        key: \"isBefore\",\n        value: function isBefore(e) {\n          if (this == e) {\n            return false;\n          }\n\n          if (this.root !== e.root) {\n            return false;\n          }\n\n          var t = this.getPath();\n          var n = e.getPath();\n          var i = Nr(t, n);\n\n          switch (i) {\n            case \"prefix\":\n              return true;\n\n            case \"extension\":\n              return false;\n\n            default:\n              return t[i] < n[i];\n          }\n        }\n      }, {\n        key: \"isAfter\",\n        value: function isAfter(e) {\n          if (this == e) {\n            return false;\n          }\n\n          if (this.root !== e.root) {\n            return false;\n          }\n\n          return !this.isBefore(e);\n        }\n      }, {\n        key: \"_remove\",\n        value: function _remove() {\n          this.parent._removeChildren(this.index);\n        }\n      }, {\n        key: \"_fireChange\",\n        value: function _fireChange(e, t) {\n          this.fire(\"change:\" + e, t);\n\n          if (this.parent) {\n            this.parent._fireChange(e, t);\n          }\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          var e = jr(this);\n          delete e.parent;\n          return e;\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          return e == \"node\" || e == \"view:node\";\n        }\n      }]);\n\n      return Dr;\n    }();\n\n    kr(Dr, dr);\n\n    var zr = /*#__PURE__*/function (_Dr) {\n      _inherits(zr, _Dr);\n\n      var _super2 = _createSuper(zr);\n\n      function zr(e, t) {\n        var _this9;\n\n        _classCallCheck(this, zr);\n\n        _this9 = _super2.call(this, e);\n        _this9._textData = t;\n        return _this9;\n      }\n\n      _createClass(zr, [{\n        key: \"is\",\n        value: function is(e) {\n          return e == \"text\" || e == \"view:text\" || _get(_getPrototypeOf(zr.prototype), \"is\", this).call(this, e);\n        }\n      }, {\n        key: \"data\",\n        get: function get() {\n          return this._textData;\n        }\n      }, {\n        key: \"_data\",\n        get: function get() {\n          return this.data;\n        },\n        set: function set(e) {\n          this._fireChange(\"text\", this);\n\n          this._textData = e;\n        }\n      }, {\n        key: \"isSimilar\",\n        value: function isSimilar(e) {\n          if (!(e instanceof zr)) {\n            return false;\n          }\n\n          return this === e || this.data === e.data;\n        }\n      }, {\n        key: \"_clone\",\n        value: function _clone() {\n          return new zr(this.document, this.data);\n        }\n      }]);\n\n      return zr;\n    }(Dr);\n\n    var Br = /*#__PURE__*/function () {\n      function Br(e, t, n) {\n        _classCallCheck(this, Br);\n\n        this.textNode = e;\n\n        if (t < 0 || t > e.data.length) {\n          throw new rr[\"b\"](\"view-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.\", this);\n        }\n\n        if (n < 0 || t + n > e.data.length) {\n          throw new rr[\"b\"](\"view-textproxy-wrong-length: Given length value is incorrect.\", this);\n        }\n\n        this.data = e.data.substring(t, t + n);\n        this.offsetInText = t;\n      }\n\n      _createClass(Br, [{\n        key: \"offsetSize\",\n        get: function get() {\n          return this.data.length;\n        }\n      }, {\n        key: \"isPartial\",\n        get: function get() {\n          return this.data.length !== this.textNode.data.length;\n        }\n      }, {\n        key: \"parent\",\n        get: function get() {\n          return this.textNode.parent;\n        }\n      }, {\n        key: \"root\",\n        get: function get() {\n          return this.textNode.root;\n        }\n      }, {\n        key: \"document\",\n        get: function get() {\n          return this.textNode.document;\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          return e == \"textProxy\" || e == \"view:textProxy\";\n        }\n      }, {\n        key: \"getAncestors\",\n        value: function getAncestors() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n            includeSelf: false,\n            parentFirst: false\n          };\n          var t = [];\n          var n = e.includeSelf ? this.textNode : this.parent;\n\n          while (n !== null) {\n            t[e.parentFirst ? \"push\" : \"unshift\"](n);\n            n = n.parent;\n          }\n\n          return t;\n        }\n      }]);\n\n      return Br;\n    }();\n\n    function Vr(e) {\n      var t = new Map();\n\n      for (var _n10 in e) {\n        t.set(_n10, e[_n10]);\n      }\n\n      return t;\n    }\n\n    function Fr(e) {\n      return !!(e && e[Symbol.iterator]);\n    }\n\n    function Hr(e) {\n      if (Fr(e)) {\n        return new Map(e);\n      } else {\n        return Vr(e);\n      }\n    }\n\n    var Ur = /*#__PURE__*/function () {\n      function Ur() {\n        _classCallCheck(this, Ur);\n\n        this._patterns = [];\n        this.add.apply(this, arguments);\n      }\n\n      _createClass(Ur, [{\n        key: \"add\",\n        value: function add() {\n          for (var _len5 = arguments.length, e = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n            e[_key5] = arguments[_key5];\n          }\n\n          for (var _i6 = 0, _e17 = e; _i6 < _e17.length; _i6++) {\n            var _t14 = _e17[_i6];\n\n            if (typeof _t14 == \"string\" || _t14 instanceof RegExp) {\n              _t14 = {\n                name: _t14\n              };\n            }\n\n            if (_t14.classes && (typeof _t14.classes == \"string\" || _t14.classes instanceof RegExp)) {\n              _t14.classes = [_t14.classes];\n            }\n\n            this._patterns.push(_t14);\n          }\n        }\n      }, {\n        key: \"match\",\n        value: function match() {\n          for (var _len6 = arguments.length, e = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n            e[_key6] = arguments[_key6];\n          }\n\n          for (var _i7 = 0, _e18 = e; _i7 < _e18.length; _i7++) {\n            var _t15 = _e18[_i7];\n\n            var _iterator17 = _createForOfIteratorHelper(this._patterns),\n                _step17;\n\n            try {\n              for (_iterator17.s(); !(_step17 = _iterator17.n()).done;) {\n                var _e19 = _step17.value;\n\n                var _n11 = Wr(_t15, _e19);\n\n                if (_n11) {\n                  return {\n                    element: _t15,\n                    pattern: _e19,\n                    match: _n11\n                  };\n                }\n              }\n            } catch (err) {\n              _iterator17.e(err);\n            } finally {\n              _iterator17.f();\n            }\n          }\n\n          return null;\n        }\n      }, {\n        key: \"matchAll\",\n        value: function matchAll() {\n          var t = [];\n\n          for (var _len7 = arguments.length, e = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {\n            e[_key7] = arguments[_key7];\n          }\n\n          for (var _i8 = 0, _e20 = e; _i8 < _e20.length; _i8++) {\n            var _n12 = _e20[_i8];\n\n            var _iterator18 = _createForOfIteratorHelper(this._patterns),\n                _step18;\n\n            try {\n              for (_iterator18.s(); !(_step18 = _iterator18.n()).done;) {\n                var _e21 = _step18.value;\n\n                var _i9 = Wr(_n12, _e21);\n\n                if (_i9) {\n                  t.push({\n                    element: _n12,\n                    pattern: _e21,\n                    match: _i9\n                  });\n                }\n              }\n            } catch (err) {\n              _iterator18.e(err);\n            } finally {\n              _iterator18.f();\n            }\n          }\n\n          return t.length > 0 ? t : null;\n        }\n      }, {\n        key: \"getElementName\",\n        value: function getElementName() {\n          if (this._patterns.length !== 1) {\n            return null;\n          }\n\n          var e = this._patterns[0];\n          var t = e.name;\n          return typeof e != \"function\" && t && !(t instanceof RegExp) ? t : null;\n        }\n      }]);\n\n      return Ur;\n    }();\n\n    function Wr(e, t) {\n      if (typeof t == \"function\") {\n        return t(e);\n      }\n\n      var n = {};\n\n      if (t.name) {\n        n.name = $r(t.name, e.name);\n\n        if (!n.name) {\n          return null;\n        }\n      }\n\n      if (t.attributes) {\n        n.attributes = qr(t.attributes, e);\n\n        if (!n.attributes) {\n          return null;\n        }\n      }\n\n      if (t.classes) {\n        n.classes = Yr(t.classes, e);\n\n        if (!n.classes) {\n          return false;\n        }\n      }\n\n      if (t.styles) {\n        n.styles = Jr(t.styles, e);\n\n        if (!n.styles) {\n          return false;\n        }\n      }\n\n      return n;\n    }\n\n    function $r(e, t) {\n      if (e instanceof RegExp) {\n        return e.test(t);\n      }\n\n      return e === t;\n    }\n\n    function qr(e, t) {\n      var n = [];\n\n      for (var _i10 in e) {\n        var _o6 = e[_i10];\n\n        if (t.hasAttribute(_i10)) {\n          var _e22 = t.getAttribute(_i10);\n\n          if (_o6 === true) {\n            n.push(_i10);\n          } else if (_o6 instanceof RegExp) {\n            if (_o6.test(_e22)) {\n              n.push(_i10);\n            } else {\n              return null;\n            }\n          } else if (_e22 === _o6) {\n            n.push(_i10);\n          } else {\n            return null;\n          }\n        } else {\n          return null;\n        }\n      }\n\n      return n;\n    }\n\n    function Yr(e, t) {\n      var n = [];\n\n      var _iterator19 = _createForOfIteratorHelper(e),\n          _step19;\n\n      try {\n        for (_iterator19.s(); !(_step19 = _iterator19.n()).done;) {\n          var _i11 = _step19.value;\n\n          if (_i11 instanceof RegExp) {\n            var _e23 = t.getClassNames();\n\n            var _iterator20 = _createForOfIteratorHelper(_e23),\n                _step20;\n\n            try {\n              for (_iterator20.s(); !(_step20 = _iterator20.n()).done;) {\n                var _t16 = _step20.value;\n\n                if (_i11.test(_t16)) {\n                  n.push(_t16);\n                }\n              }\n            } catch (err) {\n              _iterator20.e(err);\n            } finally {\n              _iterator20.f();\n            }\n\n            if (n.length === 0) {\n              return null;\n            }\n          } else if (t.hasClass(_i11)) {\n            n.push(_i11);\n          } else {\n            return null;\n          }\n        }\n      } catch (err) {\n        _iterator19.e(err);\n      } finally {\n        _iterator19.f();\n      }\n\n      return n;\n    }\n\n    function Jr(e, t) {\n      var n = [];\n\n      for (var _i12 in e) {\n        var _o7 = e[_i12];\n\n        if (t.hasStyle(_i12)) {\n          var _e24 = t.getStyle(_i12);\n\n          if (_o7 instanceof RegExp) {\n            if (_o7.test(_e24)) {\n              n.push(_i12);\n            } else {\n              return null;\n            }\n          } else if (_e24 === _o7) {\n            n.push(_i12);\n          } else {\n            return null;\n          }\n        } else {\n          return null;\n        }\n      }\n\n      return n;\n    }\n\n    var Qr = \"[object Symbol]\";\n\n    function Xr(e) {\n      return typeof e == \"symbol\" || T(e) && v(e) == Qr;\n    }\n\n    var Gr = Xr;\n    var Kr = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n        Zr = /^\\w*$/;\n\n    function ea(e, t) {\n      if (Qt(e)) {\n        return false;\n      }\n\n      var n = typeof e;\n\n      if (n == \"number\" || n == \"symbol\" || n == \"boolean\" || e == null || Gr(e)) {\n        return true;\n      }\n\n      return Zr.test(e) || !Kr.test(e) || t != null && e in Object(t);\n    }\n\n    var ta = ea;\n    var na = \"Expected a function\";\n\n    function ia(e, t) {\n      if (typeof e != \"function\" || t != null && typeof t != \"function\") {\n        throw new TypeError(na);\n      }\n\n      var n = function n() {\n        var i = arguments,\n            o = t ? t.apply(this, i) : i[0],\n            s = n.cache;\n\n        if (s.has(o)) {\n          return s.get(o);\n        }\n\n        var r = e.apply(this, i);\n        n.cache = s.set(o, r) || s;\n        return r;\n      };\n\n      n.cache = new (ia.Cache || vt)();\n      return n;\n    }\n\n    ia.Cache = vt;\n    var oa = ia;\n    var sa = 500;\n\n    function ra(e) {\n      var t = oa(e, function (e) {\n        if (n.size === sa) {\n          n.clear();\n        }\n\n        return e;\n      });\n      var n = t.cache;\n      return t;\n    }\n\n    var aa = ra;\n    var ca = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n    var la = /\\\\(\\\\)?/g;\n    var da = aa(function (e) {\n      var t = [];\n\n      if (e.charCodeAt(0) === 46) {\n        t.push(\"\");\n      }\n\n      e.replace(ca, function (e, n, i, o) {\n        t.push(i ? o.replace(la, \"$1\") : n || e);\n      });\n      return t;\n    });\n    var ua = da;\n\n    function ha(e, t) {\n      var n = -1,\n          i = e == null ? 0 : e.length,\n          o = Array(i);\n\n      while (++n < i) {\n        o[n] = t(e[n], n, e);\n      }\n\n      return o;\n    }\n\n    var fa = ha;\n    var ma = 1 / 0;\n    var ga = s ? s.prototype : undefined,\n        pa = ga ? ga.toString : undefined;\n\n    function ba(e) {\n      if (typeof e == \"string\") {\n        return e;\n      }\n\n      if (Qt(e)) {\n        return fa(e, ba) + \"\";\n      }\n\n      if (Gr(e)) {\n        return pa ? pa.call(e) : \"\";\n      }\n\n      var t = e + \"\";\n      return t == \"0\" && 1 / e == -ma ? \"-0\" : t;\n    }\n\n    var wa = ba;\n\n    function _a(e) {\n      return e == null ? \"\" : wa(e);\n    }\n\n    var va = _a;\n\n    function ka(e, t) {\n      if (Qt(e)) {\n        return e;\n      }\n\n      return ta(e, t) ? [e] : ua(va(e));\n    }\n\n    var ya = ka;\n\n    function xa(e) {\n      var t = e == null ? 0 : e.length;\n      return t ? e[t - 1] : undefined;\n    }\n\n    var Aa = xa;\n    var Ca = 1 / 0;\n\n    function Ta(e) {\n      if (typeof e == \"string\" || Gr(e)) {\n        return e;\n      }\n\n      var t = e + \"\";\n      return t == \"0\" && 1 / e == -Ca ? \"-0\" : t;\n    }\n\n    var Ma = Ta;\n\n    function Pa(e, t) {\n      t = ya(t, e);\n      var n = 0,\n          i = t.length;\n\n      while (e != null && n < i) {\n        e = e[Ma(t[n++])];\n      }\n\n      return n && n == i ? e : undefined;\n    }\n\n    var Ea = Pa;\n\n    function Sa(e, t, n) {\n      var i = -1,\n          o = e.length;\n\n      if (t < 0) {\n        t = -t > o ? 0 : o + t;\n      }\n\n      n = n > o ? o : n;\n\n      if (n < 0) {\n        n += o;\n      }\n\n      o = t > n ? 0 : n - t >>> 0;\n      t >>>= 0;\n      var s = Array(o);\n\n      while (++i < o) {\n        s[i] = e[i + t];\n      }\n\n      return s;\n    }\n\n    var Ia = Sa;\n\n    function Oa(e, t) {\n      return t.length < 2 ? e : Ea(e, Ia(t, 0, -1));\n    }\n\n    var Na = Oa;\n\n    function Ra(e, t) {\n      t = ya(t, e);\n      e = Na(e, t);\n      return e == null || delete e[Ma(Aa(t))];\n    }\n\n    var La = Ra;\n\n    function ja(e, t) {\n      return e == null ? true : La(e, t);\n    }\n\n    var Da = ja;\n\n    function za(e, t, n) {\n      var i = e == null ? undefined : Ea(e, t);\n      return i === undefined ? n : i;\n    }\n\n    var Ba = za;\n\n    function Va(e, t, n) {\n      if (n !== undefined && !z(e[t], n) || n === undefined && !(t in e)) {\n        It(e, t, n);\n      }\n    }\n\n    var Fa = Va;\n\n    function Ha(e) {\n      return function (t, n, i) {\n        var o = -1,\n            s = Object(t),\n            r = i(t),\n            a = r.length;\n\n        while (a--) {\n          var c = r[e ? a : ++o];\n\n          if (n(s[c], c, s) === false) {\n            break;\n          }\n        }\n\n        return t;\n      };\n    }\n\n    var Ua = Ha;\n    var Wa = Ua();\n    var $a = Wa;\n\n    function qa(e) {\n      return T(e) && Kn(e);\n    }\n\n    var Ya = qa;\n\n    function Ja(e, t) {\n      if (t === \"constructor\" && typeof e[t] === \"function\") {\n        return;\n      }\n\n      if (t == \"__proto__\") {\n        return;\n      }\n\n      return e[t];\n    }\n\n    var Qa = Ja;\n\n    function Xa(e) {\n      return Dt(e, di(e));\n    }\n\n    var Ga = Xa;\n\n    function Ka(e, t, n, i, o, s, r) {\n      var a = Qa(e, n),\n          c = Qa(t, n),\n          l = r.get(c);\n\n      if (l) {\n        Fa(e, n, l);\n        return;\n      }\n\n      var d = s ? s(a, c, n + \"\", e, t, r) : undefined;\n      var u = d === undefined;\n\n      if (u) {\n        var h = Qt(c),\n            f = !h && Object(Xt[\"a\"])(c),\n            m = !h && !f && Dn(c);\n        d = c;\n\n        if (h || f || m) {\n          if (Qt(a)) {\n            d = a;\n          } else if (Ya(a)) {\n            d = gi(a);\n          } else if (f) {\n            u = false;\n            d = Object(fi[\"a\"])(c, true);\n          } else if (m) {\n            u = false;\n            d = To(c, true);\n          } else {\n            d = [];\n          }\n        } else if (R(c) || Yt(c)) {\n          d = a;\n\n          if (Yt(a)) {\n            d = Ga(a);\n          } else if (!ce(a) || me(a)) {\n            d = Ko(c);\n          }\n        } else {\n          u = false;\n        }\n      }\n\n      if (u) {\n        r.set(c, d);\n        o(d, c, i, s, r);\n        r[\"delete\"](c);\n      }\n\n      Fa(e, n, d);\n    }\n\n    var Za = Ka;\n\n    function ec(e, t, n, i, o) {\n      if (e === t) {\n        return;\n      }\n\n      $a(t, function (s, r) {\n        o || (o = new Ct());\n\n        if (ce(s)) {\n          Za(e, t, r, n, ec, i, o);\n        } else {\n          var a = i ? i(Qa(e, r), s, r + \"\", e, t, o) : undefined;\n\n          if (a === undefined) {\n            a = s;\n          }\n\n          Fa(e, r, a);\n        }\n      }, di);\n    }\n\n    var tc = ec;\n\n    function nc(e) {\n      return e;\n    }\n\n    var ic = nc;\n\n    function oc(e, t, n) {\n      switch (n.length) {\n        case 0:\n          return e.call(t);\n\n        case 1:\n          return e.call(t, n[0]);\n\n        case 2:\n          return e.call(t, n[0], n[1]);\n\n        case 3:\n          return e.call(t, n[0], n[1], n[2]);\n      }\n\n      return e.apply(t, n);\n    }\n\n    var sc = oc;\n    var rc = Math.max;\n\n    function ac(e, t, n) {\n      t = rc(t === undefined ? e.length - 1 : t, 0);\n      return function () {\n        var i = arguments,\n            o = -1,\n            s = rc(i.length - t, 0),\n            r = Array(s);\n\n        while (++o < s) {\n          r[o] = i[t + o];\n        }\n\n        o = -1;\n        var a = Array(t + 1);\n\n        while (++o < t) {\n          a[o] = i[o];\n        }\n\n        a[t] = n(r);\n        return sc(e, this, a);\n      };\n    }\n\n    var cc = ac;\n\n    function lc(e) {\n      return function () {\n        return e;\n      };\n    }\n\n    var dc = lc;\n    var uc = !Et ? ic : function (e, t) {\n      return Et(e, \"toString\", {\n        configurable: true,\n        enumerable: false,\n        value: dc(t),\n        writable: true\n      });\n    };\n    var hc = uc;\n    var fc = 800,\n        mc = 16;\n    var gc = Date.now;\n\n    function pc(e) {\n      var t = 0,\n          n = 0;\n      return function () {\n        var i = gc(),\n            o = mc - (i - n);\n        n = i;\n\n        if (o > 0) {\n          if (++t >= fc) {\n            return arguments[0];\n          }\n        } else {\n          t = 0;\n        }\n\n        return e.apply(undefined, arguments);\n      };\n    }\n\n    var bc = pc;\n    var wc = bc(hc);\n    var _c = wc;\n\n    function vc(e, t) {\n      return _c(cc(e, t, ic), e + \"\");\n    }\n\n    var kc = vc;\n\n    function yc(e, t, n) {\n      if (!ce(n)) {\n        return false;\n      }\n\n      var i = typeof t;\n\n      if (i == \"number\" ? Kn(n) && en(t, n.length) : i == \"string\" && t in n) {\n        return z(n[t], e);\n      }\n\n      return false;\n    }\n\n    var xc = yc;\n\n    function Ac(e) {\n      return kc(function (t, n) {\n        var i = -1,\n            o = n.length,\n            s = o > 1 ? n[o - 1] : undefined,\n            r = o > 2 ? n[2] : undefined;\n        s = e.length > 3 && typeof s == \"function\" ? (o--, s) : undefined;\n\n        if (r && xc(n[0], n[1], r)) {\n          s = o < 3 ? undefined : s;\n          o = 1;\n        }\n\n        t = Object(t);\n\n        while (++i < o) {\n          var a = n[i];\n\n          if (a) {\n            e(t, a, i, s);\n          }\n        }\n\n        return t;\n      });\n    }\n\n    var Cc = Ac;\n    var Tc = Cc(function (e, t, n) {\n      tc(e, t, n);\n    });\n    var Mc = Tc;\n\n    function Pc(e, t, n, i) {\n      if (!ce(e)) {\n        return e;\n      }\n\n      t = ya(t, e);\n      var o = -1,\n          s = t.length,\n          r = s - 1,\n          a = e;\n\n      while (a != null && ++o < s) {\n        var c = Ma(t[o]),\n            l = n;\n\n        if (o != r) {\n          var d = a[c];\n          l = i ? i(d, c, a) : undefined;\n\n          if (l === undefined) {\n            l = ce(d) ? d : en(t[o + 1]) ? [] : {};\n          }\n        }\n\n        Lt(a, c, l);\n        a = a[c];\n      }\n\n      return e;\n    }\n\n    var Ec = Pc;\n\n    function Sc(e, t, n) {\n      return e == null ? e : Ec(e, t, n);\n    }\n\n    var Ic = Sc;\n\n    var Oc = /*#__PURE__*/function () {\n      function Oc(e) {\n        _classCallCheck(this, Oc);\n\n        this._styles = {};\n        this._styleProcessor = e;\n      }\n\n      _createClass(Oc, [{\n        key: \"isEmpty\",\n        get: function get() {\n          var e = Object.entries(this._styles);\n          var t = Array.from(e);\n          return !t.length;\n        }\n      }, {\n        key: \"size\",\n        get: function get() {\n          if (this.isEmpty) {\n            return 0;\n          }\n\n          return this.getStyleNames().length;\n        }\n      }, {\n        key: \"setTo\",\n        value: function setTo(e) {\n          this.clear();\n          var t = Array.from(Rc(e).entries());\n\n          for (var _i13 = 0, _t17 = t; _i13 < _t17.length; _i13++) {\n            var _t17$_i = _slicedToArray(_t17[_i13], 2),\n                _e25 = _t17$_i[0],\n                _n13 = _t17$_i[1];\n\n            this._styleProcessor.toNormalizedForm(_e25, _n13, this._styles);\n          }\n        }\n      }, {\n        key: \"has\",\n        value: function has(e) {\n          if (this.isEmpty) {\n            return false;\n          }\n\n          var t = this._styleProcessor.getReducedForm(e, this._styles);\n\n          var n = t.find(function (_ref) {\n            var _ref2 = _slicedToArray(_ref, 1),\n                t = _ref2[0];\n\n            return t === e;\n          });\n          return Array.isArray(n);\n        }\n      }, {\n        key: \"set\",\n        value: function set(e, t) {\n          if (ce(e)) {\n            for (var _i14 = 0, _Object$entries = Object.entries(e); _i14 < _Object$entries.length; _i14++) {\n              var _Object$entries$_i = _slicedToArray(_Object$entries[_i14], 2),\n                  _t18 = _Object$entries$_i[0],\n                  _n14 = _Object$entries$_i[1];\n\n              this._styleProcessor.toNormalizedForm(_t18, _n14, this._styles);\n            }\n          } else {\n            this._styleProcessor.toNormalizedForm(e, t, this._styles);\n          }\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(e) {\n          var t = Lc(e);\n          Da(this._styles, t);\n          delete this._styles[e];\n\n          this._cleanEmptyObjectsOnPath(t);\n        }\n      }, {\n        key: \"getNormalized\",\n        value: function getNormalized(e) {\n          return this._styleProcessor.getNormalized(e, this._styles);\n        }\n      }, {\n        key: \"toString\",\n        value: function toString() {\n          if (this.isEmpty) {\n            return \"\";\n          }\n\n          return this._getStylesEntries().map(function (e) {\n            return e.join(\":\");\n          }).sort().join(\";\") + \";\";\n        }\n      }, {\n        key: \"getAsString\",\n        value: function getAsString(e) {\n          if (this.isEmpty) {\n            return;\n          }\n\n          if (this._styles[e] && !ce(this._styles[e])) {\n            return this._styles[e];\n          }\n\n          var t = this._styleProcessor.getReducedForm(e, this._styles);\n\n          var n = t.find(function (_ref3) {\n            var _ref4 = _slicedToArray(_ref3, 1),\n                t = _ref4[0];\n\n            return t === e;\n          });\n\n          if (Array.isArray(n)) {\n            return n[1];\n          }\n        }\n      }, {\n        key: \"getStyleNames\",\n        value: function getStyleNames() {\n          if (this.isEmpty) {\n            return [];\n          }\n\n          var e = this._getStylesEntries();\n\n          return e.map(function (_ref5) {\n            var _ref6 = _slicedToArray(_ref5, 1),\n                e = _ref6[0];\n\n            return e;\n          });\n        }\n      }, {\n        key: \"clear\",\n        value: function clear() {\n          this._styles = {};\n        }\n      }, {\n        key: \"_getStylesEntries\",\n        value: function _getStylesEntries() {\n          var e = [];\n          var t = Object.keys(this._styles);\n\n          for (var _i15 = 0, _t19 = t; _i15 < _t19.length; _i15++) {\n            var _n15 = _t19[_i15];\n            e.push.apply(e, _toConsumableArray(this._styleProcessor.getReducedForm(_n15, this._styles)));\n          }\n\n          return e;\n        }\n      }, {\n        key: \"_cleanEmptyObjectsOnPath\",\n        value: function _cleanEmptyObjectsOnPath(e) {\n          var t = e.split(\".\");\n          var n = t.length > 1;\n\n          if (!n) {\n            return;\n          }\n\n          var i = t.splice(0, t.length - 1).join(\".\");\n          var o = Ba(this._styles, i);\n\n          if (!o) {\n            return;\n          }\n\n          var s = !Array.from(Object.keys(o)).length;\n\n          if (s) {\n            this.remove(i);\n          }\n        }\n      }]);\n\n      return Oc;\n    }();\n\n    var Nc = /*#__PURE__*/function () {\n      function Nc() {\n        _classCallCheck(this, Nc);\n\n        this._normalizers = new Map();\n        this._extractors = new Map();\n        this._reducers = new Map();\n        this._consumables = new Map();\n      }\n\n      _createClass(Nc, [{\n        key: \"toNormalizedForm\",\n        value: function toNormalizedForm(e, t, n) {\n          if (ce(t)) {\n            jc(n, Lc(e), t);\n            return;\n          }\n\n          if (this._normalizers.has(e)) {\n            var _i16 = this._normalizers.get(e);\n\n            var _i17 = _i16(t),\n                _o8 = _i17.path,\n                _s3 = _i17.value;\n\n            jc(n, _o8, _s3);\n          } else {\n            jc(n, e, t);\n          }\n        }\n      }, {\n        key: \"getNormalized\",\n        value: function getNormalized(e, t) {\n          if (!e) {\n            return Mc({}, t);\n          }\n\n          if (t[e] !== undefined) {\n            return t[e];\n          }\n\n          if (this._extractors.has(e)) {\n            var _n16 = this._extractors.get(e);\n\n            if (typeof _n16 === \"string\") {\n              return Ba(t, _n16);\n            }\n\n            var _i18 = _n16(e, t);\n\n            if (_i18) {\n              return _i18;\n            }\n          }\n\n          return Ba(t, Lc(e));\n        }\n      }, {\n        key: \"getReducedForm\",\n        value: function getReducedForm(e, t) {\n          var n = this.getNormalized(e, t);\n\n          if (n === undefined) {\n            return [];\n          }\n\n          if (this._reducers.has(e)) {\n            var _t20 = this._reducers.get(e);\n\n            return _t20(n);\n          }\n\n          return [[e, n]];\n        }\n      }, {\n        key: \"getRelatedStyles\",\n        value: function getRelatedStyles(e) {\n          return this._consumables.get(e) || [];\n        }\n      }, {\n        key: \"setNormalizer\",\n        value: function setNormalizer(e, t) {\n          this._normalizers.set(e, t);\n        }\n      }, {\n        key: \"setExtractor\",\n        value: function setExtractor(e, t) {\n          this._extractors.set(e, t);\n        }\n      }, {\n        key: \"setReducer\",\n        value: function setReducer(e, t) {\n          this._reducers.set(e, t);\n        }\n      }, {\n        key: \"setStyleRelation\",\n        value: function setStyleRelation(e, t) {\n          this._mapStyleNames(e, t);\n\n          var _iterator21 = _createForOfIteratorHelper(t),\n              _step21;\n\n          try {\n            for (_iterator21.s(); !(_step21 = _iterator21.n()).done;) {\n              var _n17 = _step21.value;\n\n              this._mapStyleNames(_n17, [e]);\n            }\n          } catch (err) {\n            _iterator21.e(err);\n          } finally {\n            _iterator21.f();\n          }\n        }\n      }, {\n        key: \"_mapStyleNames\",\n        value: function _mapStyleNames(e, t) {\n          var _this$_consumables$ge;\n\n          if (!this._consumables.has(e)) {\n            this._consumables.set(e, []);\n          }\n\n          (_this$_consumables$ge = this._consumables.get(e)).push.apply(_this$_consumables$ge, _toConsumableArray(t));\n        }\n      }]);\n\n      return Nc;\n    }();\n\n    function Rc(e) {\n      var t = null;\n      var n = 0;\n      var i = 0;\n      var o = null;\n      var s = new Map();\n\n      if (e === \"\") {\n        return s;\n      }\n\n      if (e.charAt(e.length - 1) != \";\") {\n        e = e + \";\";\n      }\n\n      for (var _r2 = 0; _r2 < e.length; _r2++) {\n        var _a2 = e.charAt(_r2);\n\n        if (t === null) {\n          switch (_a2) {\n            case \":\":\n              if (!o) {\n                o = e.substr(n, _r2 - n);\n                i = _r2 + 1;\n              }\n\n              break;\n\n            case '\"':\n            case \"'\":\n              t = _a2;\n              break;\n\n            case \";\":\n              {\n                var _t21 = e.substr(i, _r2 - i);\n\n                if (o) {\n                  s.set(o.trim(), _t21.trim());\n                }\n\n                o = null;\n                n = _r2 + 1;\n                break;\n              }\n          }\n        } else if (_a2 === t) {\n          t = null;\n        }\n      }\n\n      return s;\n    }\n\n    function Lc(e) {\n      return e.replace(\"-\", \".\");\n    }\n\n    function jc(e, t, n) {\n      var i = n;\n\n      if (ce(n)) {\n        i = Mc({}, Ba(e, t), n);\n      }\n\n      Ic(e, t, i);\n    }\n\n    var Dc = /*#__PURE__*/function (_Dr2) {\n      _inherits(Dc, _Dr2);\n\n      var _super3 = _createSuper(Dc);\n\n      function Dc(e, t, n, i) {\n        var _this10;\n\n        _classCallCheck(this, Dc);\n\n        _this10 = _super3.call(this, e);\n        _this10.name = t;\n        _this10._attrs = zc(n);\n        _this10._children = [];\n\n        if (i) {\n          _this10._insertChild(0, i);\n        }\n\n        _this10._classes = new Set();\n\n        if (_this10._attrs.has(\"class\")) {\n          var _e26 = _this10._attrs.get(\"class\");\n\n          Bc(_this10._classes, _e26);\n\n          _this10._attrs.delete(\"class\");\n        }\n\n        _this10._styles = new Oc(_this10.document.stylesProcessor);\n\n        if (_this10._attrs.has(\"style\")) {\n          _this10._styles.setTo(_this10._attrs.get(\"style\"));\n\n          _this10._attrs.delete(\"style\");\n        }\n\n        _this10._customProperties = new Map();\n        return _this10;\n      }\n\n      _createClass(Dc, [{\n        key: \"childCount\",\n        get: function get() {\n          return this._children.length;\n        }\n      }, {\n        key: \"isEmpty\",\n        get: function get() {\n          return this._children.length === 0;\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n          var n = e.replace(/^view:/, \"\");\n\n          if (!t) {\n            return n == \"element\" || n == this.name || _get(_getPrototypeOf(Dc.prototype), \"is\", this).call(this, e);\n          } else {\n            return n == \"element\" && t == this.name;\n          }\n        }\n      }, {\n        key: \"getChild\",\n        value: function getChild(e) {\n          return this._children[e];\n        }\n      }, {\n        key: \"getChildIndex\",\n        value: function getChildIndex(e) {\n          return this._children.indexOf(e);\n        }\n      }, {\n        key: \"getChildren\",\n        value: function getChildren() {\n          return this._children[Symbol.iterator]();\n        }\n      }, {\n        key: \"getAttributeKeys\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function getAttributeKeys() {\n          return _regeneratorRuntime().wrap(function getAttributeKeys$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  if (!(this._classes.size > 0)) {\n                    _context3.next = 3;\n                    break;\n                  }\n\n                  _context3.next = 3;\n                  return \"class\";\n\n                case 3:\n                  if (this._styles.isEmpty) {\n                    _context3.next = 6;\n                    break;\n                  }\n\n                  _context3.next = 6;\n                  return \"style\";\n\n                case 6:\n                  return _context3.delegateYield(this._attrs.keys(), \"t0\", 7);\n\n                case 7:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, getAttributeKeys, this);\n        })\n      }, {\n        key: \"getAttributes\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function getAttributes() {\n          return _regeneratorRuntime().wrap(function getAttributes$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  return _context4.delegateYield(this._attrs.entries(), \"t0\", 1);\n\n                case 1:\n                  if (!(this._classes.size > 0)) {\n                    _context4.next = 4;\n                    break;\n                  }\n\n                  _context4.next = 4;\n                  return [\"class\", this.getAttribute(\"class\")];\n\n                case 4:\n                  if (this._styles.isEmpty) {\n                    _context4.next = 7;\n                    break;\n                  }\n\n                  _context4.next = 7;\n                  return [\"style\", this.getAttribute(\"style\")];\n\n                case 7:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }, getAttributes, this);\n        })\n      }, {\n        key: \"getAttribute\",\n        value: function getAttribute(e) {\n          if (e == \"class\") {\n            if (this._classes.size > 0) {\n              return _toConsumableArray(this._classes).join(\" \");\n            }\n\n            return undefined;\n          }\n\n          if (e == \"style\") {\n            var _e27 = this._styles.toString();\n\n            return _e27 == \"\" ? undefined : _e27;\n          }\n\n          return this._attrs.get(e);\n        }\n      }, {\n        key: \"hasAttribute\",\n        value: function hasAttribute(e) {\n          if (e == \"class\") {\n            return this._classes.size > 0;\n          }\n\n          if (e == \"style\") {\n            return !this._styles.isEmpty;\n          }\n\n          return this._attrs.has(e);\n        }\n      }, {\n        key: \"isSimilar\",\n        value: function isSimilar(e) {\n          if (!(e instanceof Dc)) {\n            return false;\n          }\n\n          if (this === e) {\n            return true;\n          }\n\n          if (this.name != e.name) {\n            return false;\n          }\n\n          if (this._attrs.size !== e._attrs.size || this._classes.size !== e._classes.size || this._styles.size !== e._styles.size) {\n            return false;\n          }\n\n          var _iterator22 = _createForOfIteratorHelper(this._attrs),\n              _step22;\n\n          try {\n            for (_iterator22.s(); !(_step22 = _iterator22.n()).done;) {\n              var _step22$value = _slicedToArray(_step22.value, 2),\n                  _t22 = _step22$value[0],\n                  _n18 = _step22$value[1];\n\n              if (!e._attrs.has(_t22) || e._attrs.get(_t22) !== _n18) {\n                return false;\n              }\n            }\n          } catch (err) {\n            _iterator22.e(err);\n          } finally {\n            _iterator22.f();\n          }\n\n          var _iterator23 = _createForOfIteratorHelper(this._classes),\n              _step23;\n\n          try {\n            for (_iterator23.s(); !(_step23 = _iterator23.n()).done;) {\n              var _t23 = _step23.value;\n\n              if (!e._classes.has(_t23)) {\n                return false;\n              }\n            }\n          } catch (err) {\n            _iterator23.e(err);\n          } finally {\n            _iterator23.f();\n          }\n\n          var _iterator24 = _createForOfIteratorHelper(this._styles.getStyleNames()),\n              _step24;\n\n          try {\n            for (_iterator24.s(); !(_step24 = _iterator24.n()).done;) {\n              var _t24 = _step24.value;\n\n              if (!e._styles.has(_t24) || e._styles.getAsString(_t24) !== this._styles.getAsString(_t24)) {\n                return false;\n              }\n            }\n          } catch (err) {\n            _iterator24.e(err);\n          } finally {\n            _iterator24.f();\n          }\n\n          return true;\n        }\n      }, {\n        key: \"hasClass\",\n        value: function hasClass() {\n          for (var _len8 = arguments.length, e = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {\n            e[_key8] = arguments[_key8];\n          }\n\n          for (var _i19 = 0, _e28 = e; _i19 < _e28.length; _i19++) {\n            var _t25 = _e28[_i19];\n\n            if (!this._classes.has(_t25)) {\n              return false;\n            }\n          }\n\n          return true;\n        }\n      }, {\n        key: \"getClassNames\",\n        value: function getClassNames() {\n          return this._classes.keys();\n        }\n      }, {\n        key: \"getStyle\",\n        value: function getStyle(e) {\n          return this._styles.getAsString(e);\n        }\n      }, {\n        key: \"getNormalizedStyle\",\n        value: function getNormalizedStyle(e) {\n          return this._styles.getNormalized(e);\n        }\n      }, {\n        key: \"getStyleNames\",\n        value: function getStyleNames() {\n          return this._styles.getStyleNames();\n        }\n      }, {\n        key: \"hasStyle\",\n        value: function hasStyle() {\n          for (var _len9 = arguments.length, e = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {\n            e[_key9] = arguments[_key9];\n          }\n\n          for (var _i20 = 0, _e29 = e; _i20 < _e29.length; _i20++) {\n            var _t26 = _e29[_i20];\n\n            if (!this._styles.has(_t26)) {\n              return false;\n            }\n          }\n\n          return true;\n        }\n      }, {\n        key: \"findAncestor\",\n        value: function findAncestor() {\n          for (var _len10 = arguments.length, e = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {\n            e[_key10] = arguments[_key10];\n          }\n\n          var t = _construct(Ur, e);\n\n          var n = this.parent;\n\n          while (n) {\n            if (t.match(n)) {\n              return n;\n            }\n\n            n = n.parent;\n          }\n\n          return null;\n        }\n      }, {\n        key: \"getCustomProperty\",\n        value: function getCustomProperty(e) {\n          return this._customProperties.get(e);\n        }\n      }, {\n        key: \"getCustomProperties\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function getCustomProperties() {\n          return _regeneratorRuntime().wrap(function getCustomProperties$(_context5) {\n            while (1) {\n              switch (_context5.prev = _context5.next) {\n                case 0:\n                  return _context5.delegateYield(this._customProperties.entries(), \"t0\", 1);\n\n                case 1:\n                case \"end\":\n                  return _context5.stop();\n              }\n            }\n          }, getCustomProperties, this);\n        })\n      }, {\n        key: \"getIdentity\",\n        value: function getIdentity() {\n          var e = Array.from(this._classes).sort().join(\",\");\n\n          var t = this._styles.toString();\n\n          var n = Array.from(this._attrs).map(function (e) {\n            return \"\".concat(e[0], \"=\\\"\").concat(e[1], \"\\\"\");\n          }).sort().join(\" \");\n          return this.name + (e == \"\" ? \"\" : \" class=\\\"\".concat(e, \"\\\"\")) + (!t ? \"\" : \" style=\\\"\".concat(t, \"\\\"\")) + (n == \"\" ? \"\" : \" \".concat(n));\n        }\n      }, {\n        key: \"_clone\",\n        value: function _clone() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n          var t = [];\n\n          if (e) {\n            var _iterator25 = _createForOfIteratorHelper(this.getChildren()),\n                _step25;\n\n            try {\n              for (_iterator25.s(); !(_step25 = _iterator25.n()).done;) {\n                var _n19 = _step25.value;\n                t.push(_n19._clone(e));\n              }\n            } catch (err) {\n              _iterator25.e(err);\n            } finally {\n              _iterator25.f();\n            }\n          }\n\n          var n = new this.constructor(this.document, this.name, this._attrs, t);\n          n._classes = new Set(this._classes);\n\n          n._styles.set(this._styles.getNormalized());\n\n          n._customProperties = new Map(this._customProperties);\n          n.getFillerOffset = this.getFillerOffset;\n          return n;\n        }\n      }, {\n        key: \"_appendChild\",\n        value: function _appendChild(e) {\n          return this._insertChild(this.childCount, e);\n        }\n      }, {\n        key: \"_insertChild\",\n        value: function _insertChild(e, t) {\n          this._fireChange(\"children\", this);\n\n          var n = 0;\n          var i = Vc(this.document, t);\n\n          var _iterator26 = _createForOfIteratorHelper(i),\n              _step26;\n\n          try {\n            for (_iterator26.s(); !(_step26 = _iterator26.n()).done;) {\n              var _t27 = _step26.value;\n\n              if (_t27.parent !== null) {\n                _t27._remove();\n              }\n\n              _t27.parent = this;\n              _t27.document = this.document;\n\n              this._children.splice(e, 0, _t27);\n\n              e++;\n              n++;\n            }\n          } catch (err) {\n            _iterator26.e(err);\n          } finally {\n            _iterator26.f();\n          }\n\n          return n;\n        }\n      }, {\n        key: \"_removeChildren\",\n        value: function _removeChildren(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n          this._fireChange(\"children\", this);\n\n          for (var _n20 = e; _n20 < e + t; _n20++) {\n            this._children[_n20].parent = null;\n          }\n\n          return this._children.splice(e, t);\n        }\n      }, {\n        key: \"_setAttribute\",\n        value: function _setAttribute(e, t) {\n          t = String(t);\n\n          this._fireChange(\"attributes\", this);\n\n          if (e == \"class\") {\n            Bc(this._classes, t);\n          } else if (e == \"style\") {\n            this._styles.setTo(t);\n          } else {\n            this._attrs.set(e, t);\n          }\n        }\n      }, {\n        key: \"_removeAttribute\",\n        value: function _removeAttribute(e) {\n          this._fireChange(\"attributes\", this);\n\n          if (e == \"class\") {\n            if (this._classes.size > 0) {\n              this._classes.clear();\n\n              return true;\n            }\n\n            return false;\n          }\n\n          if (e == \"style\") {\n            if (!this._styles.isEmpty) {\n              this._styles.clear();\n\n              return true;\n            }\n\n            return false;\n          }\n\n          return this._attrs.delete(e);\n        }\n      }, {\n        key: \"_addClass\",\n        value: function _addClass(e) {\n          var _this11 = this;\n\n          this._fireChange(\"attributes\", this);\n\n          e = Array.isArray(e) ? e : [e];\n          e.forEach(function (e) {\n            return _this11._classes.add(e);\n          });\n        }\n      }, {\n        key: \"_removeClass\",\n        value: function _removeClass(e) {\n          var _this12 = this;\n\n          this._fireChange(\"attributes\", this);\n\n          e = Array.isArray(e) ? e : [e];\n          e.forEach(function (e) {\n            return _this12._classes.delete(e);\n          });\n        }\n      }, {\n        key: \"_setStyle\",\n        value: function _setStyle(e, t) {\n          this._fireChange(\"attributes\", this);\n\n          this._styles.set(e, t);\n        }\n      }, {\n        key: \"_removeStyle\",\n        value: function _removeStyle(e) {\n          var _this13 = this;\n\n          this._fireChange(\"attributes\", this);\n\n          e = Array.isArray(e) ? e : [e];\n          e.forEach(function (e) {\n            return _this13._styles.remove(e);\n          });\n        }\n      }, {\n        key: \"_setCustomProperty\",\n        value: function _setCustomProperty(e, t) {\n          this._customProperties.set(e, t);\n        }\n      }, {\n        key: \"_removeCustomProperty\",\n        value: function _removeCustomProperty(e) {\n          return this._customProperties.delete(e);\n        }\n      }]);\n\n      return Dc;\n    }(Dr);\n\n    function zc(e) {\n      e = Hr(e);\n\n      var _iterator27 = _createForOfIteratorHelper(e),\n          _step27;\n\n      try {\n        for (_iterator27.s(); !(_step27 = _iterator27.n()).done;) {\n          var _step27$value = _slicedToArray(_step27.value, 2),\n              _t28 = _step27$value[0],\n              _n21 = _step27$value[1];\n\n          if (_n21 === null) {\n            e.delete(_t28);\n          } else if (typeof _n21 != \"string\") {\n            e.set(_t28, String(_n21));\n          }\n        }\n      } catch (err) {\n        _iterator27.e(err);\n      } finally {\n        _iterator27.f();\n      }\n\n      return e;\n    }\n\n    function Bc(e, t) {\n      var n = t.split(/\\s+/);\n      e.clear();\n      n.forEach(function (t) {\n        return e.add(t);\n      });\n    }\n\n    function Vc(e, t) {\n      if (typeof t == \"string\") {\n        return [new zr(e, t)];\n      }\n\n      if (!Fr(t)) {\n        t = [t];\n      }\n\n      return Array.from(t).map(function (t) {\n        if (typeof t == \"string\") {\n          return new zr(e, t);\n        }\n\n        if (t instanceof Br) {\n          return new zr(e, t.data);\n        }\n\n        return t;\n      });\n    }\n\n    var Fc = /*#__PURE__*/function (_Dc) {\n      _inherits(Fc, _Dc);\n\n      var _super4 = _createSuper(Fc);\n\n      function Fc(e, t, n, i) {\n        var _this14;\n\n        _classCallCheck(this, Fc);\n\n        _this14 = _super4.call(this, e, t, n, i);\n        _this14.getFillerOffset = Hc;\n        return _this14;\n      }\n\n      _createClass(Fc, [{\n        key: \"is\",\n        value: function is(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n          var n = e && e.replace(/^view:/, \"\");\n\n          if (!t) {\n            return n == \"containerElement\" || _get(_getPrototypeOf(Fc.prototype), \"is\", this).call(this, e);\n          } else {\n            return n == \"containerElement\" && t == this.name || _get(_getPrototypeOf(Fc.prototype), \"is\", this).call(this, e, t);\n          }\n        }\n      }]);\n\n      return Fc;\n    }(Dc);\n\n    function Hc() {\n      var e = _toConsumableArray(this.getChildren());\n\n      var t = e[this.childCount - 1];\n\n      if (t && t.is(\"element\", \"br\")) {\n        return this.childCount;\n      }\n\n      var _iterator28 = _createForOfIteratorHelper(e),\n          _step28;\n\n      try {\n        for (_iterator28.s(); !(_step28 = _iterator28.n()).done;) {\n          var _t29 = _step28.value;\n\n          if (!_t29.is(\"uiElement\")) {\n            return null;\n          }\n        }\n      } catch (err) {\n        _iterator28.e(err);\n      } finally {\n        _iterator28.f();\n      }\n\n      return this.childCount;\n    }\n\n    var Uc = Cc(function (e, t) {\n      Dt(t, di(t), e);\n    });\n    var Wc = Uc;\n    var $c = Symbol(\"observableProperties\");\n    var qc = Symbol(\"boundObservables\");\n    var Yc = Symbol(\"boundProperties\");\n    var Jc = {\n      set: function set(e, t) {\n        var _this15 = this;\n\n        if (ce(e)) {\n          Object.keys(e).forEach(function (t) {\n            _this15.set(t, e[t]);\n          }, this);\n          return;\n        }\n\n        Xc(this);\n        var n = this[$c];\n\n        if (e in this && !n.has(e)) {\n          throw new rr[\"b\"](\"observable-set-cannot-override: Cannot override an existing property.\", this);\n        }\n\n        Object.defineProperty(this, e, {\n          enumerable: true,\n          configurable: true,\n          get: function get() {\n            return n.get(e);\n          },\n          set: function set(t) {\n            var i = n.get(e);\n            var o = this.fire(\"set:\" + e, e, t, i);\n\n            if (o === undefined) {\n              o = t;\n            }\n\n            if (i !== o || !n.has(e)) {\n              n.set(e, o);\n              this.fire(\"change:\" + e, e, o, i);\n            }\n          }\n        });\n        this[e] = t;\n      },\n      bind: function bind() {\n        var _this16 = this;\n\n        for (var _len11 = arguments.length, e = new Array(_len11), _key11 = 0; _key11 < _len11; _key11++) {\n          e[_key11] = arguments[_key11];\n        }\n\n        if (!e.length || !el(e)) {\n          throw new rr[\"b\"](\"observable-bind-wrong-properties: All properties must be strings.\", this);\n        }\n\n        if (new Set(e).size !== e.length) {\n          throw new rr[\"b\"](\"observable-bind-duplicate-properties: Properties must be unique.\", this);\n        }\n\n        Xc(this);\n        var t = this[Yc];\n        e.forEach(function (e) {\n          if (t.has(e)) {\n            throw new rr[\"b\"](\"observable-bind-rebind: Cannot bind the same property more than once.\", _this16);\n          }\n        });\n        var n = new Map();\n        e.forEach(function (e) {\n          var i = {\n            property: e,\n            to: []\n          };\n          t.set(e, i);\n          n.set(e, i);\n        });\n        return {\n          to: Gc,\n          toMany: Kc,\n          _observable: this,\n          _bindProperties: e,\n          _to: [],\n          _bindings: n\n        };\n      },\n      unbind: function unbind() {\n        var _this17 = this;\n\n        if (!($c in this)) {\n          return;\n        }\n\n        var t = this[Yc];\n        var n = this[qc];\n\n        for (var _len12 = arguments.length, e = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) {\n          e[_key12] = arguments[_key12];\n        }\n\n        if (e.length) {\n          if (!el(e)) {\n            throw new rr[\"b\"](\"observable-unbind-wrong-properties: Properties must be strings.\", this);\n          }\n\n          e.forEach(function (e) {\n            var i = t.get(e);\n\n            if (!i) {\n              return;\n            }\n\n            var o, s, r, a;\n            i.to.forEach(function (e) {\n              o = e[0];\n              s = e[1];\n              r = n.get(o);\n              a = r[s];\n              a.delete(i);\n\n              if (!a.size) {\n                delete r[s];\n              }\n\n              if (!Object.keys(r).length) {\n                n.delete(o);\n\n                _this17.stopListening(o, \"change\");\n              }\n            });\n            t.delete(e);\n          });\n        } else {\n          n.forEach(function (e, t) {\n            _this17.stopListening(t, \"change\");\n          });\n          n.clear();\n          t.clear();\n        }\n      },\n      decorate: function decorate(e) {\n        var _this18 = this;\n\n        var t = this[e];\n\n        if (!t) {\n          throw new rr[\"b\"](\"observablemixin-cannot-decorate-undefined: Cannot decorate an undefined method.\", this, {\n            object: this,\n            methodName: e\n          });\n        }\n\n        this.on(e, function (e, n) {\n          e.return = t.apply(_this18, n);\n        });\n\n        this[e] = function () {\n          for (var _len13 = arguments.length, t = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) {\n            t[_key13] = arguments[_key13];\n          }\n\n          return this.fire(e, t);\n        };\n      }\n    };\n    Wc(Jc, dr);\n    var Qc = Jc;\n\n    function Xc(e) {\n      if ($c in e) {\n        return;\n      }\n\n      Object.defineProperty(e, $c, {\n        value: new Map()\n      });\n      Object.defineProperty(e, qc, {\n        value: new Map()\n      });\n      Object.defineProperty(e, Yc, {\n        value: new Map()\n      });\n    }\n\n    function Gc() {\n      var _this19 = this;\n\n      var t = tl.apply(void 0, arguments);\n      var n = Array.from(this._bindings.keys());\n      var i = n.length;\n\n      if (!t.callback && t.to.length > 1) {\n        throw new rr[\"b\"](\"observable-bind-to-no-callback: Binding multiple observables only possible with callback.\", this);\n      }\n\n      if (i > 1 && t.callback) {\n        throw new rr[\"b\"](\"observable-bind-to-extra-callback: Cannot bind multiple properties and use a callback in one binding.\", this);\n      }\n\n      t.to.forEach(function (e) {\n        if (e.properties.length && e.properties.length !== i) {\n          throw new rr[\"b\"](\"observable-bind-to-properties-length: The number of properties must match.\", _this19);\n        }\n\n        if (!e.properties.length) {\n          e.properties = _this19._bindProperties;\n        }\n      });\n      this._to = t.to;\n\n      if (t.callback) {\n        this._bindings.get(n[0]).callback = t.callback;\n      }\n\n      sl(this._observable, this._to);\n      il(this);\n\n      this._bindProperties.forEach(function (e) {\n        ol(_this19._observable, e);\n      });\n    }\n\n    function Kc(e, t, n) {\n      if (this._bindings.size > 1) {\n        throw new rr[\"b\"](\"observable-bind-to-many-not-one-binding: Cannot bind multiple properties with toMany().\", this);\n      }\n\n      this.to.apply(this, _toConsumableArray(Zc(e, t)).concat([n]));\n    }\n\n    function Zc(e, t) {\n      var n = e.map(function (e) {\n        return [e, t];\n      });\n      return Array.prototype.concat.apply([], n);\n    }\n\n    function el(e) {\n      return e.every(function (e) {\n        return typeof e == \"string\";\n      });\n    }\n\n    function tl() {\n      for (var _len14 = arguments.length, e = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) {\n        e[_key14] = arguments[_key14];\n      }\n\n      if (!e.length) {\n        throw new rr[\"b\"](\"observable-bind-to-parse-error: Invalid argument syntax in `to()`.\", null);\n      }\n\n      var t = {\n        to: []\n      };\n      var n;\n\n      if (typeof e[e.length - 1] == \"function\") {\n        t.callback = e.pop();\n      }\n\n      e.forEach(function (e) {\n        if (typeof e == \"string\") {\n          n.properties.push(e);\n        } else if (typeof e == \"object\") {\n          n = {\n            observable: e,\n            properties: []\n          };\n          t.to.push(n);\n        } else {\n          throw new rr[\"b\"](\"observable-bind-to-parse-error: Invalid argument syntax in `to()`.\", null);\n        }\n      });\n      return t;\n    }\n\n    function nl(e, t, n, i) {\n      var o = e[qc];\n      var s = o.get(n);\n      var r = s || {};\n\n      if (!r[i]) {\n        r[i] = new Set();\n      }\n\n      r[i].add(t);\n\n      if (!s) {\n        o.set(n, r);\n      }\n    }\n\n    function il(e) {\n      var t;\n\n      e._bindings.forEach(function (n, i) {\n        e._to.forEach(function (o) {\n          t = o.properties[n.callback ? 0 : e._bindProperties.indexOf(i)];\n          n.to.push([o.observable, t]);\n          nl(e._observable, n, o.observable, t);\n        });\n      });\n    }\n\n    function ol(e, t) {\n      var n = e[Yc];\n      var i = n.get(t);\n      var o;\n\n      if (i.callback) {\n        o = i.callback.apply(e, i.to.map(function (e) {\n          return e[0][e[1]];\n        }));\n      } else {\n        o = i.to[0];\n        o = o[0][o[1]];\n      }\n\n      if (e.hasOwnProperty(t)) {\n        e[t] = o;\n      } else {\n        e.set(t, o);\n      }\n    }\n\n    function sl(e, t) {\n      t.forEach(function (t) {\n        var n = e[qc];\n        var i;\n\n        if (!n.get(t.observable)) {\n          e.listenTo(t.observable, \"change\", function (o, s) {\n            i = n.get(t.observable)[s];\n\n            if (i) {\n              i.forEach(function (t) {\n                ol(e, t.property);\n              });\n            }\n          });\n        }\n      });\n    }\n\n    var rl = /*#__PURE__*/function (_Fc) {\n      _inherits(rl, _Fc);\n\n      var _super5 = _createSuper(rl);\n\n      function rl(e, t, n, i) {\n        var _this20;\n\n        _classCallCheck(this, rl);\n\n        _this20 = _super5.call(this, e, t, n, i);\n\n        _this20.set(\"isReadOnly\", false);\n\n        _this20.set(\"isFocused\", false);\n\n        _this20.bind(\"isReadOnly\").to(e);\n\n        _this20.bind(\"isFocused\").to(e, \"isFocused\", function (t) {\n          return t && e.selection.editableElement == _assertThisInitialized(_this20);\n        });\n\n        _this20.listenTo(e.selection, \"change\", function () {\n          _this20.isFocused = e.isFocused && e.selection.editableElement == _assertThisInitialized(_this20);\n        });\n\n        return _this20;\n      }\n\n      _createClass(rl, [{\n        key: \"is\",\n        value: function is(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n          var n = e && e.replace(/^view:/, \"\");\n\n          if (!t) {\n            return n == \"editableElement\" || _get(_getPrototypeOf(rl.prototype), \"is\", this).call(this, e);\n          } else {\n            return n == \"editableElement\" && t == this.name || _get(_getPrototypeOf(rl.prototype), \"is\", this).call(this, e, t);\n          }\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.stopListening();\n        }\n      }]);\n\n      return rl;\n    }(Fc);\n\n    kr(rl, Qc);\n    var al = Symbol(\"rootName\");\n\n    var cl = /*#__PURE__*/function (_rl) {\n      _inherits(cl, _rl);\n\n      var _super6 = _createSuper(cl);\n\n      function cl(e, t) {\n        var _this21;\n\n        _classCallCheck(this, cl);\n\n        _this21 = _super6.call(this, e, t);\n        _this21.rootName = \"main\";\n        return _this21;\n      }\n\n      _createClass(cl, [{\n        key: \"is\",\n        value: function is(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n          var n = e.replace(/^view:/, \"\");\n\n          if (!t) {\n            return n == \"rootElement\" || _get(_getPrototypeOf(cl.prototype), \"is\", this).call(this, e);\n          } else {\n            return n == \"rootElement\" && t == this.name || _get(_getPrototypeOf(cl.prototype), \"is\", this).call(this, e, t);\n          }\n        }\n      }, {\n        key: \"rootName\",\n        get: function get() {\n          return this.getCustomProperty(al);\n        },\n        set: function set(e) {\n          this._setCustomProperty(al, e);\n        }\n      }, {\n        key: \"_name\",\n        set: function set(e) {\n          this.name = e;\n        }\n      }]);\n\n      return cl;\n    }(rl);\n\n    var ll = /*#__PURE__*/function (_Symbol$iterator3) {\n      function ll() {\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, ll);\n\n        if (!e.boundaries && !e.startPosition) {\n          throw new rr[\"b\"](\"view-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.\", null);\n        }\n\n        if (e.direction && e.direction != \"forward\" && e.direction != \"backward\") {\n          throw new rr[\"b\"](\"view-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.\", e.startPosition, {\n            direction: e.direction\n          });\n        }\n\n        this.boundaries = e.boundaries || null;\n\n        if (e.startPosition) {\n          this.position = dl._createAt(e.startPosition);\n        } else {\n          this.position = dl._createAt(e.boundaries[e.direction == \"backward\" ? \"end\" : \"start\"]);\n        }\n\n        this.direction = e.direction || \"forward\";\n        this.singleCharacters = !!e.singleCharacters;\n        this.shallow = !!e.shallow;\n        this.ignoreElementEnd = !!e.ignoreElementEnd;\n        this._boundaryStartParent = this.boundaries ? this.boundaries.start.parent : null;\n        this._boundaryEndParent = this.boundaries ? this.boundaries.end.parent : null;\n      }\n\n      _createClass(ll, [{\n        key: _Symbol$iterator3,\n        value: function value() {\n          return this;\n        }\n      }, {\n        key: \"skip\",\n        value: function skip(e) {\n          var t, n, i;\n\n          do {\n            i = this.position;\n\n            var _this$next = this.next();\n\n            t = _this$next.done;\n            n = _this$next.value;\n          } while (!t && e(n));\n\n          if (!t) {\n            this.position = i;\n          }\n        }\n      }, {\n        key: \"next\",\n        value: function next() {\n          if (this.direction == \"forward\") {\n            return this._next();\n          } else {\n            return this._previous();\n          }\n        }\n      }, {\n        key: \"_next\",\n        value: function _next() {\n          var e = this.position.clone();\n          var t = this.position;\n          var n = e.parent;\n\n          if (n.parent === null && e.offset === n.childCount) {\n            return {\n              done: true\n            };\n          }\n\n          if (n === this._boundaryEndParent && e.offset == this.boundaries.end.offset) {\n            return {\n              done: true\n            };\n          }\n\n          var i;\n\n          if (n instanceof zr) {\n            if (e.isAtEnd) {\n              this.position = dl._createAfter(n);\n              return this._next();\n            }\n\n            i = n.data[e.offset];\n          } else {\n            i = n.getChild(e.offset);\n          }\n\n          if (i instanceof Dc) {\n            if (!this.shallow) {\n              e = new dl(i, 0);\n            } else {\n              e.offset++;\n            }\n\n            this.position = e;\n            return this._formatReturnValue(\"elementStart\", i, t, e, 1);\n          } else if (i instanceof zr) {\n            if (this.singleCharacters) {\n              e = new dl(i, 0);\n              this.position = e;\n              return this._next();\n            } else {\n              var _n22 = i.data.length;\n\n              var _o9;\n\n              if (i == this._boundaryEndParent) {\n                _n22 = this.boundaries.end.offset;\n                _o9 = new Br(i, 0, _n22);\n                e = dl._createAfter(_o9);\n              } else {\n                _o9 = new Br(i, 0, i.data.length);\n                e.offset++;\n              }\n\n              this.position = e;\n              return this._formatReturnValue(\"text\", _o9, t, e, _n22);\n            }\n          } else if (typeof i == \"string\") {\n            var _i21;\n\n            if (this.singleCharacters) {\n              _i21 = 1;\n            } else {\n              var _t30 = n === this._boundaryEndParent ? this.boundaries.end.offset : n.data.length;\n\n              _i21 = _t30 - e.offset;\n            }\n\n            var _o10 = new Br(n, e.offset, _i21);\n\n            e.offset += _i21;\n            this.position = e;\n            return this._formatReturnValue(\"text\", _o10, t, e, _i21);\n          } else {\n            e = dl._createAfter(n);\n            this.position = e;\n\n            if (this.ignoreElementEnd) {\n              return this._next();\n            } else {\n              return this._formatReturnValue(\"elementEnd\", n, t, e);\n            }\n          }\n        }\n      }, {\n        key: \"_previous\",\n        value: function _previous() {\n          var e = this.position.clone();\n          var t = this.position;\n          var n = e.parent;\n\n          if (n.parent === null && e.offset === 0) {\n            return {\n              done: true\n            };\n          }\n\n          if (n == this._boundaryStartParent && e.offset == this.boundaries.start.offset) {\n            return {\n              done: true\n            };\n          }\n\n          var i;\n\n          if (n instanceof zr) {\n            if (e.isAtStart) {\n              this.position = dl._createBefore(n);\n              return this._previous();\n            }\n\n            i = n.data[e.offset - 1];\n          } else {\n            i = n.getChild(e.offset - 1);\n          }\n\n          if (i instanceof Dc) {\n            if (!this.shallow) {\n              e = new dl(i, i.childCount);\n              this.position = e;\n\n              if (this.ignoreElementEnd) {\n                return this._previous();\n              } else {\n                return this._formatReturnValue(\"elementEnd\", i, t, e);\n              }\n            } else {\n              e.offset--;\n              this.position = e;\n              return this._formatReturnValue(\"elementStart\", i, t, e, 1);\n            }\n          } else if (i instanceof zr) {\n            if (this.singleCharacters) {\n              e = new dl(i, i.data.length);\n              this.position = e;\n              return this._previous();\n            } else {\n              var _n23 = i.data.length;\n\n              var _o11;\n\n              if (i == this._boundaryStartParent) {\n                var _t31 = this.boundaries.start.offset;\n                _o11 = new Br(i, _t31, i.data.length - _t31);\n                _n23 = _o11.data.length;\n                e = dl._createBefore(_o11);\n              } else {\n                _o11 = new Br(i, 0, i.data.length);\n                e.offset--;\n              }\n\n              this.position = e;\n              return this._formatReturnValue(\"text\", _o11, t, e, _n23);\n            }\n          } else if (typeof i == \"string\") {\n            var _i22;\n\n            if (!this.singleCharacters) {\n              var _t32 = n === this._boundaryStartParent ? this.boundaries.start.offset : 0;\n\n              _i22 = e.offset - _t32;\n            } else {\n              _i22 = 1;\n            }\n\n            e.offset -= _i22;\n\n            var _o12 = new Br(n, e.offset, _i22);\n\n            this.position = e;\n            return this._formatReturnValue(\"text\", _o12, t, e, _i22);\n          } else {\n            e = dl._createBefore(n);\n            this.position = e;\n            return this._formatReturnValue(\"elementStart\", n, t, e, 1);\n          }\n        }\n      }, {\n        key: \"_formatReturnValue\",\n        value: function _formatReturnValue(e, t, n, i, o) {\n          if (t instanceof Br) {\n            if (t.offsetInText + t.data.length == t.textNode.data.length) {\n              if (this.direction == \"forward\" && !(this.boundaries && this.boundaries.end.isEqual(this.position))) {\n                i = dl._createAfter(t.textNode);\n                this.position = i;\n              } else {\n                n = dl._createAfter(t.textNode);\n              }\n            }\n\n            if (t.offsetInText === 0) {\n              if (this.direction == \"backward\" && !(this.boundaries && this.boundaries.start.isEqual(this.position))) {\n                i = dl._createBefore(t.textNode);\n                this.position = i;\n              } else {\n                n = dl._createBefore(t.textNode);\n              }\n            }\n          }\n\n          return {\n            done: false,\n            value: {\n              type: e,\n              item: t,\n              previousPosition: n,\n              nextPosition: i,\n              length: o\n            }\n          };\n        }\n      }]);\n\n      return ll;\n    }(Symbol.iterator);\n\n    var dl = /*#__PURE__*/function () {\n      function dl(e, t) {\n        _classCallCheck(this, dl);\n\n        this.parent = e;\n        this.offset = t;\n      }\n\n      _createClass(dl, [{\n        key: \"nodeAfter\",\n        get: function get() {\n          if (this.parent.is(\"text\")) {\n            return null;\n          }\n\n          return this.parent.getChild(this.offset) || null;\n        }\n      }, {\n        key: \"nodeBefore\",\n        get: function get() {\n          if (this.parent.is(\"text\")) {\n            return null;\n          }\n\n          return this.parent.getChild(this.offset - 1) || null;\n        }\n      }, {\n        key: \"isAtStart\",\n        get: function get() {\n          return this.offset === 0;\n        }\n      }, {\n        key: \"isAtEnd\",\n        get: function get() {\n          var e = this.parent.is(\"text\") ? this.parent.data.length : this.parent.childCount;\n          return this.offset === e;\n        }\n      }, {\n        key: \"root\",\n        get: function get() {\n          return this.parent.root;\n        }\n      }, {\n        key: \"editableElement\",\n        get: function get() {\n          var e = this.parent;\n\n          while (!(e instanceof rl)) {\n            if (e.parent) {\n              e = e.parent;\n            } else {\n              return null;\n            }\n          }\n\n          return e;\n        }\n      }, {\n        key: \"getShiftedBy\",\n        value: function getShiftedBy(e) {\n          var t = dl._createAt(this);\n\n          var n = t.offset + e;\n          t.offset = n < 0 ? 0 : n;\n          return t;\n        }\n      }, {\n        key: \"getLastMatchingPosition\",\n        value: function getLastMatchingPosition(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          t.startPosition = this;\n          var n = new ll(t);\n          n.skip(e);\n          return n.position;\n        }\n      }, {\n        key: \"getAncestors\",\n        value: function getAncestors() {\n          if (this.parent.is(\"documentFragment\")) {\n            return [this.parent];\n          } else {\n            return this.parent.getAncestors({\n              includeSelf: true\n            });\n          }\n        }\n      }, {\n        key: \"getCommonAncestor\",\n        value: function getCommonAncestor(e) {\n          var t = this.getAncestors();\n          var n = e.getAncestors();\n          var i = 0;\n\n          while (t[i] == n[i] && t[i]) {\n            i++;\n          }\n\n          return i === 0 ? null : t[i - 1];\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          return e == \"position\" || e == \"view:position\";\n        }\n      }, {\n        key: \"isEqual\",\n        value: function isEqual(e) {\n          return this.parent == e.parent && this.offset == e.offset;\n        }\n      }, {\n        key: \"isBefore\",\n        value: function isBefore(e) {\n          return this.compareWith(e) == \"before\";\n        }\n      }, {\n        key: \"isAfter\",\n        value: function isAfter(e) {\n          return this.compareWith(e) == \"after\";\n        }\n      }, {\n        key: \"compareWith\",\n        value: function compareWith(e) {\n          if (this.root !== e.root) {\n            return \"different\";\n          }\n\n          if (this.isEqual(e)) {\n            return \"same\";\n          }\n\n          var t = this.parent.is(\"node\") ? this.parent.getPath() : [];\n          var n = e.parent.is(\"node\") ? e.parent.getPath() : [];\n          t.push(this.offset);\n          n.push(e.offset);\n          var i = Nr(t, n);\n\n          switch (i) {\n            case \"prefix\":\n              return \"before\";\n\n            case \"extension\":\n              return \"after\";\n\n            default:\n              return t[i] < n[i] ? \"before\" : \"after\";\n          }\n        }\n      }, {\n        key: \"getWalker\",\n        value: function getWalker() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          e.startPosition = this;\n          return new ll(e);\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new dl(this.parent, this.offset);\n        }\n      }], [{\n        key: \"_createAt\",\n        value: function _createAt(e, t) {\n          if (e instanceof dl) {\n            return new this(e.parent, e.offset);\n          } else {\n            var _n24 = e;\n\n            if (t == \"end\") {\n              t = _n24.is(\"text\") ? _n24.data.length : _n24.childCount;\n            } else if (t == \"before\") {\n              return this._createBefore(_n24);\n            } else if (t == \"after\") {\n              return this._createAfter(_n24);\n            } else if (t !== 0 && !t) {\n              throw new rr[\"b\"](\"view-createPositionAt-offset-required: \" + \"View#createPositionAt() requires the offset when the first parameter is a view item.\", _n24);\n            }\n\n            return new dl(_n24, t);\n          }\n        }\n      }, {\n        key: \"_createAfter\",\n        value: function _createAfter(e) {\n          if (e.is(\"textProxy\")) {\n            return new dl(e.textNode, e.offsetInText + e.data.length);\n          }\n\n          if (!e.parent) {\n            throw new rr[\"b\"](\"view-position-after-root: You can not make position after root.\", e, {\n              root: e\n            });\n          }\n\n          return new dl(e.parent, e.index + 1);\n        }\n      }, {\n        key: \"_createBefore\",\n        value: function _createBefore(e) {\n          if (e.is(\"textProxy\")) {\n            return new dl(e.textNode, e.offsetInText);\n          }\n\n          if (!e.parent) {\n            throw new rr[\"b\"](\"view-position-before-root: You can not make position before root.\", e, {\n              root: e\n            });\n          }\n\n          return new dl(e.parent, e.index);\n        }\n      }]);\n\n      return dl;\n    }();\n\n    var ul = /*#__PURE__*/function (_Symbol$iterator4) {\n      function ul(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n        _classCallCheck(this, ul);\n\n        this.start = e.clone();\n        this.end = t ? t.clone() : e.clone();\n      }\n\n      _createClass(ul, [{\n        key: _Symbol$iterator4,\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function value() {\n          return _regeneratorRuntime().wrap(function value$(_context6) {\n            while (1) {\n              switch (_context6.prev = _context6.next) {\n                case 0:\n                  return _context6.delegateYield(new ll({\n                    boundaries: this,\n                    ignoreElementEnd: true\n                  }), \"t0\", 1);\n\n                case 1:\n                case \"end\":\n                  return _context6.stop();\n              }\n            }\n          }, value, this);\n        })\n      }, {\n        key: \"isCollapsed\",\n        get: function get() {\n          return this.start.isEqual(this.end);\n        }\n      }, {\n        key: \"isFlat\",\n        get: function get() {\n          return this.start.parent === this.end.parent;\n        }\n      }, {\n        key: \"root\",\n        get: function get() {\n          return this.start.root;\n        }\n      }, {\n        key: \"getEnlarged\",\n        value: function getEnlarged() {\n          var e = this.start.getLastMatchingPosition(hl, {\n            direction: \"backward\"\n          });\n          var t = this.end.getLastMatchingPosition(hl);\n\n          if (e.parent.is(\"text\") && e.isAtStart) {\n            e = dl._createBefore(e.parent);\n          }\n\n          if (t.parent.is(\"text\") && t.isAtEnd) {\n            t = dl._createAfter(t.parent);\n          }\n\n          return new ul(e, t);\n        }\n      }, {\n        key: \"getTrimmed\",\n        value: function getTrimmed() {\n          var e = this.start.getLastMatchingPosition(hl);\n\n          if (e.isAfter(this.end) || e.isEqual(this.end)) {\n            return new ul(e, e);\n          }\n\n          var t = this.end.getLastMatchingPosition(hl, {\n            direction: \"backward\"\n          });\n          var n = e.nodeAfter;\n          var i = t.nodeBefore;\n\n          if (n && n.is(\"text\")) {\n            e = new dl(n, 0);\n          }\n\n          if (i && i.is(\"text\")) {\n            t = new dl(i, i.data.length);\n          }\n\n          return new ul(e, t);\n        }\n      }, {\n        key: \"isEqual\",\n        value: function isEqual(e) {\n          return this == e || this.start.isEqual(e.start) && this.end.isEqual(e.end);\n        }\n      }, {\n        key: \"containsPosition\",\n        value: function containsPosition(e) {\n          return e.isAfter(this.start) && e.isBefore(this.end);\n        }\n      }, {\n        key: \"containsRange\",\n        value: function containsRange(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n          if (e.isCollapsed) {\n            t = false;\n          }\n\n          var n = this.containsPosition(e.start) || t && this.start.isEqual(e.start);\n          var i = this.containsPosition(e.end) || t && this.end.isEqual(e.end);\n          return n && i;\n        }\n      }, {\n        key: \"getDifference\",\n        value: function getDifference(e) {\n          var t = [];\n\n          if (this.isIntersecting(e)) {\n            if (this.containsPosition(e.start)) {\n              t.push(new ul(this.start, e.start));\n            }\n\n            if (this.containsPosition(e.end)) {\n              t.push(new ul(e.end, this.end));\n            }\n          } else {\n            t.push(this.clone());\n          }\n\n          return t;\n        }\n      }, {\n        key: \"getIntersection\",\n        value: function getIntersection(e) {\n          if (this.isIntersecting(e)) {\n            var _t33 = this.start;\n            var _n25 = this.end;\n\n            if (this.containsPosition(e.start)) {\n              _t33 = e.start;\n            }\n\n            if (this.containsPosition(e.end)) {\n              _n25 = e.end;\n            }\n\n            return new ul(_t33, _n25);\n          }\n\n          return null;\n        }\n      }, {\n        key: \"getWalker\",\n        value: function getWalker() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          e.boundaries = this;\n          return new ll(e);\n        }\n      }, {\n        key: \"getCommonAncestor\",\n        value: function getCommonAncestor() {\n          return this.start.getCommonAncestor(this.end);\n        }\n      }, {\n        key: \"getContainedElement\",\n        value: function getContainedElement() {\n          if (this.isCollapsed) {\n            return null;\n          }\n\n          var e = this.start.nodeAfter;\n          var t = this.end.nodeBefore;\n\n          if (this.start.parent.is(\"text\") && this.start.isAtEnd && this.start.parent.nextSibling) {\n            e = this.start.parent.nextSibling;\n          }\n\n          if (this.end.parent.is(\"text\") && this.end.isAtStart && this.end.parent.previousSibling) {\n            t = this.end.parent.previousSibling;\n          }\n\n          if (e && e.is(\"element\") && e === t) {\n            return e;\n          }\n\n          return null;\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new ul(this.start, this.end);\n        }\n      }, {\n        key: \"getItems\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function getItems() {\n          var e,\n              t,\n              _iterator29,\n              _step29,\n              _e30,\n              _args7 = arguments;\n\n          return _regeneratorRuntime().wrap(function getItems$(_context7) {\n            while (1) {\n              switch (_context7.prev = _context7.next) {\n                case 0:\n                  e = _args7.length > 0 && _args7[0] !== undefined ? _args7[0] : {};\n                  e.boundaries = this;\n                  e.ignoreElementEnd = true;\n                  t = new ll(e);\n                  _iterator29 = _createForOfIteratorHelper(t);\n                  _context7.prev = 5;\n\n                  _iterator29.s();\n\n                case 7:\n                  if ((_step29 = _iterator29.n()).done) {\n                    _context7.next = 13;\n                    break;\n                  }\n\n                  _e30 = _step29.value;\n                  _context7.next = 11;\n                  return _e30.item;\n\n                case 11:\n                  _context7.next = 7;\n                  break;\n\n                case 13:\n                  _context7.next = 18;\n                  break;\n\n                case 15:\n                  _context7.prev = 15;\n                  _context7.t0 = _context7[\"catch\"](5);\n\n                  _iterator29.e(_context7.t0);\n\n                case 18:\n                  _context7.prev = 18;\n\n                  _iterator29.f();\n\n                  return _context7.finish(18);\n\n                case 21:\n                case \"end\":\n                  return _context7.stop();\n              }\n            }\n          }, getItems, this, [[5, 15, 18, 21]]);\n        })\n      }, {\n        key: \"getPositions\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function getPositions() {\n          var e,\n              t,\n              _iterator30,\n              _step30,\n              _e31,\n              _args8 = arguments;\n\n          return _regeneratorRuntime().wrap(function getPositions$(_context8) {\n            while (1) {\n              switch (_context8.prev = _context8.next) {\n                case 0:\n                  e = _args8.length > 0 && _args8[0] !== undefined ? _args8[0] : {};\n                  e.boundaries = this;\n                  t = new ll(e);\n                  _context8.next = 5;\n                  return t.position;\n\n                case 5:\n                  _iterator30 = _createForOfIteratorHelper(t);\n                  _context8.prev = 6;\n\n                  _iterator30.s();\n\n                case 8:\n                  if ((_step30 = _iterator30.n()).done) {\n                    _context8.next = 14;\n                    break;\n                  }\n\n                  _e31 = _step30.value;\n                  _context8.next = 12;\n                  return _e31.nextPosition;\n\n                case 12:\n                  _context8.next = 8;\n                  break;\n\n                case 14:\n                  _context8.next = 19;\n                  break;\n\n                case 16:\n                  _context8.prev = 16;\n                  _context8.t0 = _context8[\"catch\"](6);\n\n                  _iterator30.e(_context8.t0);\n\n                case 19:\n                  _context8.prev = 19;\n\n                  _iterator30.f();\n\n                  return _context8.finish(19);\n\n                case 22:\n                case \"end\":\n                  return _context8.stop();\n              }\n            }\n          }, getPositions, this, [[6, 16, 19, 22]]);\n        })\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          return e == \"range\" || e == \"view:range\";\n        }\n      }, {\n        key: \"isIntersecting\",\n        value: function isIntersecting(e) {\n          return this.start.isBefore(e.end) && this.end.isAfter(e.start);\n        }\n      }], [{\n        key: \"_createFromParentsAndOffsets\",\n        value: function _createFromParentsAndOffsets(e, t, n, i) {\n          return new this(new dl(e, t), new dl(n, i));\n        }\n      }, {\n        key: \"_createFromPositionAndShift\",\n        value: function _createFromPositionAndShift(e, t) {\n          var n = e;\n          var i = e.getShiftedBy(t);\n          return t > 0 ? new this(n, i) : new this(i, n);\n        }\n      }, {\n        key: \"_createIn\",\n        value: function _createIn(e) {\n          return this._createFromParentsAndOffsets(e, 0, e, e.childCount);\n        }\n      }, {\n        key: \"_createOn\",\n        value: function _createOn(e) {\n          var t = e.is(\"textProxy\") ? e.offsetSize : 1;\n          return this._createFromPositionAndShift(dl._createBefore(e), t);\n        }\n      }]);\n\n      return ul;\n    }(Symbol.iterator);\n\n    function hl(e) {\n      if (e.item.is(\"attributeElement\") || e.item.is(\"uiElement\")) {\n        return true;\n      }\n\n      return false;\n    }\n\n    function fl(e) {\n      var t = 0;\n\n      var _iterator31 = _createForOfIteratorHelper(e),\n          _step31;\n\n      try {\n        for (_iterator31.s(); !(_step31 = _iterator31.n()).done;) {\n          var _n26 = _step31.value;\n          t++;\n        }\n      } catch (err) {\n        _iterator31.e(err);\n      } finally {\n        _iterator31.f();\n      }\n\n      return t;\n    }\n\n    var ml = /*#__PURE__*/function () {\n      function ml() {\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n        var t = arguments.length > 1 ? arguments[1] : undefined;\n        var n = arguments.length > 2 ? arguments[2] : undefined;\n\n        _classCallCheck(this, ml);\n\n        this._ranges = [];\n        this._lastRangeBackward = false;\n        this._isFake = false;\n        this._fakeSelectionLabel = \"\";\n        this.setTo(e, t, n);\n      }\n\n      _createClass(ml, [{\n        key: \"isFake\",\n        get: function get() {\n          return this._isFake;\n        }\n      }, {\n        key: \"fakeSelectionLabel\",\n        get: function get() {\n          return this._fakeSelectionLabel;\n        }\n      }, {\n        key: \"anchor\",\n        get: function get() {\n          if (!this._ranges.length) {\n            return null;\n          }\n\n          var e = this._ranges[this._ranges.length - 1];\n          var t = this._lastRangeBackward ? e.end : e.start;\n          return t.clone();\n        }\n      }, {\n        key: \"focus\",\n        get: function get() {\n          if (!this._ranges.length) {\n            return null;\n          }\n\n          var e = this._ranges[this._ranges.length - 1];\n          var t = this._lastRangeBackward ? e.start : e.end;\n          return t.clone();\n        }\n      }, {\n        key: \"isCollapsed\",\n        get: function get() {\n          return this.rangeCount === 1 && this._ranges[0].isCollapsed;\n        }\n      }, {\n        key: \"rangeCount\",\n        get: function get() {\n          return this._ranges.length;\n        }\n      }, {\n        key: \"isBackward\",\n        get: function get() {\n          return !this.isCollapsed && this._lastRangeBackward;\n        }\n      }, {\n        key: \"editableElement\",\n        get: function get() {\n          if (this.anchor) {\n            return this.anchor.editableElement;\n          }\n\n          return null;\n        }\n      }, {\n        key: \"getRanges\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function getRanges() {\n          var _iterator32, _step32, _e32;\n\n          return _regeneratorRuntime().wrap(function getRanges$(_context9) {\n            while (1) {\n              switch (_context9.prev = _context9.next) {\n                case 0:\n                  _iterator32 = _createForOfIteratorHelper(this._ranges);\n                  _context9.prev = 1;\n\n                  _iterator32.s();\n\n                case 3:\n                  if ((_step32 = _iterator32.n()).done) {\n                    _context9.next = 9;\n                    break;\n                  }\n\n                  _e32 = _step32.value;\n                  _context9.next = 7;\n                  return _e32.clone();\n\n                case 7:\n                  _context9.next = 3;\n                  break;\n\n                case 9:\n                  _context9.next = 14;\n                  break;\n\n                case 11:\n                  _context9.prev = 11;\n                  _context9.t0 = _context9[\"catch\"](1);\n\n                  _iterator32.e(_context9.t0);\n\n                case 14:\n                  _context9.prev = 14;\n\n                  _iterator32.f();\n\n                  return _context9.finish(14);\n\n                case 17:\n                case \"end\":\n                  return _context9.stop();\n              }\n            }\n          }, getRanges, this, [[1, 11, 14, 17]]);\n        })\n      }, {\n        key: \"getFirstRange\",\n        value: function getFirstRange() {\n          var e = null;\n\n          var _iterator33 = _createForOfIteratorHelper(this._ranges),\n              _step33;\n\n          try {\n            for (_iterator33.s(); !(_step33 = _iterator33.n()).done;) {\n              var _t34 = _step33.value;\n\n              if (!e || _t34.start.isBefore(e.start)) {\n                e = _t34;\n              }\n            }\n          } catch (err) {\n            _iterator33.e(err);\n          } finally {\n            _iterator33.f();\n          }\n\n          return e ? e.clone() : null;\n        }\n      }, {\n        key: \"getLastRange\",\n        value: function getLastRange() {\n          var e = null;\n\n          var _iterator34 = _createForOfIteratorHelper(this._ranges),\n              _step34;\n\n          try {\n            for (_iterator34.s(); !(_step34 = _iterator34.n()).done;) {\n              var _t35 = _step34.value;\n\n              if (!e || _t35.end.isAfter(e.end)) {\n                e = _t35;\n              }\n            }\n          } catch (err) {\n            _iterator34.e(err);\n          } finally {\n            _iterator34.f();\n          }\n\n          return e ? e.clone() : null;\n        }\n      }, {\n        key: \"getFirstPosition\",\n        value: function getFirstPosition() {\n          var e = this.getFirstRange();\n          return e ? e.start.clone() : null;\n        }\n      }, {\n        key: \"getLastPosition\",\n        value: function getLastPosition() {\n          var e = this.getLastRange();\n          return e ? e.end.clone() : null;\n        }\n      }, {\n        key: \"isEqual\",\n        value: function isEqual(e) {\n          if (this.isFake != e.isFake) {\n            return false;\n          }\n\n          if (this.isFake && this.fakeSelectionLabel != e.fakeSelectionLabel) {\n            return false;\n          }\n\n          if (this.rangeCount != e.rangeCount) {\n            return false;\n          } else if (this.rangeCount === 0) {\n            return true;\n          }\n\n          if (!this.anchor.isEqual(e.anchor) || !this.focus.isEqual(e.focus)) {\n            return false;\n          }\n\n          var _iterator35 = _createForOfIteratorHelper(this._ranges),\n              _step35;\n\n          try {\n            for (_iterator35.s(); !(_step35 = _iterator35.n()).done;) {\n              var _t36 = _step35.value;\n              var _n27 = false;\n\n              var _iterator36 = _createForOfIteratorHelper(e._ranges),\n                  _step36;\n\n              try {\n                for (_iterator36.s(); !(_step36 = _iterator36.n()).done;) {\n                  var _i23 = _step36.value;\n\n                  if (_t36.isEqual(_i23)) {\n                    _n27 = true;\n                    break;\n                  }\n                }\n              } catch (err) {\n                _iterator36.e(err);\n              } finally {\n                _iterator36.f();\n              }\n\n              if (!_n27) {\n                return false;\n              }\n            }\n          } catch (err) {\n            _iterator35.e(err);\n          } finally {\n            _iterator35.f();\n          }\n\n          return true;\n        }\n      }, {\n        key: \"isSimilar\",\n        value: function isSimilar(e) {\n          if (this.isBackward != e.isBackward) {\n            return false;\n          }\n\n          var t = fl(this.getRanges());\n          var n = fl(e.getRanges());\n\n          if (t != n) {\n            return false;\n          }\n\n          if (t == 0) {\n            return true;\n          }\n\n          var _iterator37 = _createForOfIteratorHelper(this.getRanges()),\n              _step37;\n\n          try {\n            for (_iterator37.s(); !(_step37 = _iterator37.n()).done;) {\n              var _t37 = _step37.value;\n              _t37 = _t37.getTrimmed();\n              var _n28 = false;\n\n              var _iterator38 = _createForOfIteratorHelper(e.getRanges()),\n                  _step38;\n\n              try {\n                for (_iterator38.s(); !(_step38 = _iterator38.n()).done;) {\n                  var _i24 = _step38.value;\n                  _i24 = _i24.getTrimmed();\n\n                  if (_t37.start.isEqual(_i24.start) && _t37.end.isEqual(_i24.end)) {\n                    _n28 = true;\n                    break;\n                  }\n                }\n              } catch (err) {\n                _iterator38.e(err);\n              } finally {\n                _iterator38.f();\n              }\n\n              if (!_n28) {\n                return false;\n              }\n            }\n          } catch (err) {\n            _iterator37.e(err);\n          } finally {\n            _iterator37.f();\n          }\n\n          return true;\n        }\n      }, {\n        key: \"getSelectedElement\",\n        value: function getSelectedElement() {\n          if (this.rangeCount !== 1) {\n            return null;\n          }\n\n          return this.getFirstRange().getContainedElement();\n        }\n      }, {\n        key: \"setTo\",\n        value: function setTo(e, t, n) {\n          if (e === null) {\n            this._setRanges([]);\n\n            this._setFakeOptions(t);\n          } else if (e instanceof ml || e instanceof gl) {\n            this._setRanges(e.getRanges(), e.isBackward);\n\n            this._setFakeOptions({\n              fake: e.isFake,\n              label: e.fakeSelectionLabel\n            });\n          } else if (e instanceof ul) {\n            this._setRanges([e], t && t.backward);\n\n            this._setFakeOptions(t);\n          } else if (e instanceof dl) {\n            this._setRanges([new ul(e)]);\n\n            this._setFakeOptions(t);\n          } else if (e instanceof Dr) {\n            var _i25 = !!n && !!n.backward;\n\n            var _o13;\n\n            if (t === undefined) {\n              throw new rr[\"b\"](\"view-selection-setTo-required-second-parameter: \" + \"selection.setTo requires the second parameter when the first parameter is a node.\", this);\n            } else if (t == \"in\") {\n              _o13 = ul._createIn(e);\n            } else if (t == \"on\") {\n              _o13 = ul._createOn(e);\n            } else {\n              _o13 = new ul(dl._createAt(e, t));\n            }\n\n            this._setRanges([_o13], _i25);\n\n            this._setFakeOptions(n);\n          } else if (Fr(e)) {\n            this._setRanges(e, t && t.backward);\n\n            this._setFakeOptions(t);\n          } else {\n            throw new rr[\"b\"](\"view-selection-setTo-not-selectable: Cannot set selection to given place.\", this);\n          }\n\n          this.fire(\"change\");\n        }\n      }, {\n        key: \"setFocus\",\n        value: function setFocus(e, t) {\n          if (this.anchor === null) {\n            throw new rr[\"b\"](\"view-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.\", this);\n          }\n\n          var n = dl._createAt(e, t);\n\n          if (n.compareWith(this.focus) == \"same\") {\n            return;\n          }\n\n          var i = this.anchor;\n\n          this._ranges.pop();\n\n          if (n.compareWith(i) == \"before\") {\n            this._addRange(new ul(n, i), true);\n          } else {\n            this._addRange(new ul(i, n));\n          }\n\n          this.fire(\"change\");\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          return e == \"selection\" || e == \"view:selection\";\n        }\n      }, {\n        key: \"_setRanges\",\n        value: function _setRanges(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n          e = Array.from(e);\n          this._ranges = [];\n\n          var _iterator39 = _createForOfIteratorHelper(e),\n              _step39;\n\n          try {\n            for (_iterator39.s(); !(_step39 = _iterator39.n()).done;) {\n              var _t38 = _step39.value;\n\n              this._addRange(_t38);\n            }\n          } catch (err) {\n            _iterator39.e(err);\n          } finally {\n            _iterator39.f();\n          }\n\n          this._lastRangeBackward = !!t;\n        }\n      }, {\n        key: \"_setFakeOptions\",\n        value: function _setFakeOptions() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          this._isFake = !!e.fake;\n          this._fakeSelectionLabel = e.fake ? e.label || \"\" : \"\";\n        }\n      }, {\n        key: \"_addRange\",\n        value: function _addRange(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n          if (!(e instanceof ul)) {\n            throw new rr[\"b\"](\"view-selection-add-range-not-range: \" + \"Selection range set to an object that is not an instance of view.Range\", this);\n          }\n\n          this._pushRange(e);\n\n          this._lastRangeBackward = !!t;\n        }\n      }, {\n        key: \"_pushRange\",\n        value: function _pushRange(e) {\n          var _iterator40 = _createForOfIteratorHelper(this._ranges),\n              _step40;\n\n          try {\n            for (_iterator40.s(); !(_step40 = _iterator40.n()).done;) {\n              var _t39 = _step40.value;\n\n              if (e.isIntersecting(_t39)) {\n                throw new rr[\"b\"](\"view-selection-range-intersects: Trying to add a range that intersects with another range from selection.\", this, {\n                  addedRange: e,\n                  intersectingRange: _t39\n                });\n              }\n            }\n          } catch (err) {\n            _iterator40.e(err);\n          } finally {\n            _iterator40.f();\n          }\n\n          this._ranges.push(new ul(e.start, e.end));\n        }\n      }]);\n\n      return ml;\n    }();\n\n    kr(ml, dr);\n\n    var gl = /*#__PURE__*/function () {\n      function gl() {\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n        var t = arguments.length > 1 ? arguments[1] : undefined;\n        var n = arguments.length > 2 ? arguments[2] : undefined;\n\n        _classCallCheck(this, gl);\n\n        this._selection = new ml();\n\n        this._selection.delegate(\"change\").to(this);\n\n        this._selection.setTo(e, t, n);\n      }\n\n      _createClass(gl, [{\n        key: \"isFake\",\n        get: function get() {\n          return this._selection.isFake;\n        }\n      }, {\n        key: \"fakeSelectionLabel\",\n        get: function get() {\n          return this._selection.fakeSelectionLabel;\n        }\n      }, {\n        key: \"anchor\",\n        get: function get() {\n          return this._selection.anchor;\n        }\n      }, {\n        key: \"focus\",\n        get: function get() {\n          return this._selection.focus;\n        }\n      }, {\n        key: \"isCollapsed\",\n        get: function get() {\n          return this._selection.isCollapsed;\n        }\n      }, {\n        key: \"rangeCount\",\n        get: function get() {\n          return this._selection.rangeCount;\n        }\n      }, {\n        key: \"isBackward\",\n        get: function get() {\n          return this._selection.isBackward;\n        }\n      }, {\n        key: \"editableElement\",\n        get: function get() {\n          return this._selection.editableElement;\n        }\n      }, {\n        key: \"_ranges\",\n        get: function get() {\n          return this._selection._ranges;\n        }\n      }, {\n        key: \"getRanges\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function getRanges() {\n          return _regeneratorRuntime().wrap(function getRanges$(_context10) {\n            while (1) {\n              switch (_context10.prev = _context10.next) {\n                case 0:\n                  return _context10.delegateYield(this._selection.getRanges(), \"t0\", 1);\n\n                case 1:\n                case \"end\":\n                  return _context10.stop();\n              }\n            }\n          }, getRanges, this);\n        })\n      }, {\n        key: \"getFirstRange\",\n        value: function getFirstRange() {\n          return this._selection.getFirstRange();\n        }\n      }, {\n        key: \"getLastRange\",\n        value: function getLastRange() {\n          return this._selection.getLastRange();\n        }\n      }, {\n        key: \"getFirstPosition\",\n        value: function getFirstPosition() {\n          return this._selection.getFirstPosition();\n        }\n      }, {\n        key: \"getLastPosition\",\n        value: function getLastPosition() {\n          return this._selection.getLastPosition();\n        }\n      }, {\n        key: \"getSelectedElement\",\n        value: function getSelectedElement() {\n          return this._selection.getSelectedElement();\n        }\n      }, {\n        key: \"isEqual\",\n        value: function isEqual(e) {\n          return this._selection.isEqual(e);\n        }\n      }, {\n        key: \"isSimilar\",\n        value: function isSimilar(e) {\n          return this._selection.isSimilar(e);\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          return e == \"selection\" || e == \"documentSelection\" || e == \"view:selection\" || e == \"view:documentSelection\";\n        }\n      }, {\n        key: \"_setTo\",\n        value: function _setTo(e, t, n) {\n          this._selection.setTo(e, t, n);\n        }\n      }, {\n        key: \"_setFocus\",\n        value: function _setFocus(e, t) {\n          this._selection.setFocus(e, t);\n        }\n      }]);\n\n      return gl;\n    }();\n\n    kr(gl, dr);\n\n    var pl = /*#__PURE__*/function () {\n      function pl(e) {\n        _classCallCheck(this, pl);\n\n        this.selection = new gl();\n        this.roots = new yr({\n          idProperty: \"rootName\"\n        });\n        this.stylesProcessor = e;\n        this.set(\"isReadOnly\", false);\n        this.set(\"isFocused\", false);\n        this.set(\"isComposing\", false);\n        this._postFixers = new Set();\n      }\n\n      _createClass(pl, [{\n        key: \"getRoot\",\n        value: function getRoot() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"main\";\n          return this.roots.get(e);\n        }\n      }, {\n        key: \"registerPostFixer\",\n        value: function registerPostFixer(e) {\n          this._postFixers.add(e);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.roots.map(function (e) {\n            return e.destroy();\n          });\n          this.stopListening();\n        }\n      }, {\n        key: \"_callPostFixers\",\n        value: function _callPostFixers(e) {\n          var t = false;\n\n          do {\n            var _iterator41 = _createForOfIteratorHelper(this._postFixers),\n                _step41;\n\n            try {\n              for (_iterator41.s(); !(_step41 = _iterator41.n()).done;) {\n                var _n29 = _step41.value;\n                t = _n29(e);\n\n                if (t) {\n                  break;\n                }\n              }\n            } catch (err) {\n              _iterator41.e(err);\n            } finally {\n              _iterator41.f();\n            }\n          } while (t);\n        }\n      }]);\n\n      return pl;\n    }();\n\n    kr(pl, Qc);\n    var bl = 10;\n\n    var wl = /*#__PURE__*/function (_Dc2) {\n      _inherits(wl, _Dc2);\n\n      var _super7 = _createSuper(wl);\n\n      function wl(e, t, n, i) {\n        var _this22;\n\n        _classCallCheck(this, wl);\n\n        _this22 = _super7.call(this, e, t, n, i);\n        _this22.getFillerOffset = _l;\n        _this22._priority = bl;\n        _this22._id = null;\n        _this22._clonesGroup = null;\n        return _this22;\n      }\n\n      _createClass(wl, [{\n        key: \"priority\",\n        get: function get() {\n          return this._priority;\n        }\n      }, {\n        key: \"id\",\n        get: function get() {\n          return this._id;\n        }\n      }, {\n        key: \"getElementsWithSameId\",\n        value: function getElementsWithSameId() {\n          if (this.id === null) {\n            throw new rr[\"b\"](\"attribute-element-get-elements-with-same-id-no-id: \" + \"Cannot get elements with the same id for an attribute element without id.\", this);\n          }\n\n          return new Set(this._clonesGroup);\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n          var n = e && e.replace(/^view:/, \"\");\n\n          if (!t) {\n            return n == \"attributeElement\" || _get(_getPrototypeOf(wl.prototype), \"is\", this).call(this, e);\n          } else {\n            return n == \"attributeElement\" && t == this.name || _get(_getPrototypeOf(wl.prototype), \"is\", this).call(this, e, t);\n          }\n        }\n      }, {\n        key: \"isSimilar\",\n        value: function isSimilar(e) {\n          if (this.id !== null || e.id !== null) {\n            return this.id === e.id;\n          }\n\n          return _get(_getPrototypeOf(wl.prototype), \"isSimilar\", this).call(this, e) && this.priority == e.priority;\n        }\n      }, {\n        key: \"_clone\",\n        value: function _clone(e) {\n          var t = _get(_getPrototypeOf(wl.prototype), \"_clone\", this).call(this, e);\n\n          t._priority = this._priority;\n          t._id = this._id;\n          return t;\n        }\n      }]);\n\n      return wl;\n    }(Dc);\n\n    wl.DEFAULT_PRIORITY = bl;\n\n    function _l() {\n      if (vl(this)) {\n        return null;\n      }\n\n      var e = this.parent;\n\n      while (e && e.is(\"attributeElement\")) {\n        if (vl(e) > 1) {\n          return null;\n        }\n\n        e = e.parent;\n      }\n\n      if (!e || vl(e) > 1) {\n        return null;\n      }\n\n      return this.childCount;\n    }\n\n    function vl(e) {\n      return Array.from(e.getChildren()).filter(function (e) {\n        return !e.is(\"uiElement\");\n      }).length;\n    }\n\n    var kl = /*#__PURE__*/function (_Dc3) {\n      _inherits(kl, _Dc3);\n\n      var _super8 = _createSuper(kl);\n\n      function kl(e, t, n, i) {\n        var _this23;\n\n        _classCallCheck(this, kl);\n\n        _this23 = _super8.call(this, e, t, n, i);\n        _this23.getFillerOffset = yl;\n        return _this23;\n      }\n\n      _createClass(kl, [{\n        key: \"is\",\n        value: function is(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n          var n = e.replace(/^view:/, \"\");\n\n          if (!t) {\n            return n == \"emptyElement\" || _get(_getPrototypeOf(kl.prototype), \"is\", this).call(this, e);\n          } else {\n            return n == \"emptyElement\" && t == this.name || _get(_getPrototypeOf(kl.prototype), \"is\", this).call(this, e, t);\n          }\n        }\n      }, {\n        key: \"_insertChild\",\n        value: function _insertChild(e, t) {\n          if (t && (t instanceof Dr || Array.from(t).length > 0)) {\n            throw new rr[\"b\"](\"view-emptyelement-cannot-add: Cannot add child nodes to EmptyElement instance.\", [this, t]);\n          }\n        }\n      }]);\n\n      return kl;\n    }(Dc);\n\n    function yl() {\n      return null;\n    }\n\n    var xl = navigator.userAgent.toLowerCase();\n    var Al = {\n      isMac: Tl(xl),\n      isEdge: Ml(xl),\n      isGecko: Pl(xl),\n      isSafari: El(xl),\n      isAndroid: Sl(xl),\n      features: {\n        isRegExpUnicodePropertySupported: Il()\n      }\n    };\n    var Cl = Al;\n\n    function Tl(e) {\n      return e.indexOf(\"macintosh\") > -1;\n    }\n\n    function Ml(e) {\n      return !!e.match(/edge\\/(\\d+.?\\d*)/);\n    }\n\n    function Pl(e) {\n      return !!e.match(/gecko\\/\\d+/);\n    }\n\n    function El(e) {\n      return e.indexOf(\" applewebkit/\") > -1 && e.indexOf(\"chrome\") === -1;\n    }\n\n    function Sl(e) {\n      return e.indexOf(\"android\") > -1;\n    }\n\n    function Il() {\n      var e = false;\n\n      try {\n        e = \"ć\".search(new RegExp(\"[\\\\p{L}]\", \"u\")) === 0;\n      } catch (e) {}\n\n      return e;\n    }\n\n    var Ol = {\n      \"⌘\": \"ctrl\",\n      \"⇧\": \"shift\",\n      \"⌥\": \"alt\"\n    };\n    var Nl = {\n      ctrl: \"⌘\",\n      shift: \"⇧\",\n      alt: \"⌥\"\n    };\n    var Rl = zl();\n\n    function Ll(e) {\n      var t;\n\n      if (typeof e == \"string\") {\n        t = Rl[e.toLowerCase()];\n\n        if (!t) {\n          throw new rr[\"b\"](\"keyboard-unknown-key: Unknown key name.\", null, {\n            key: e\n          });\n        }\n      } else {\n        t = e.keyCode + (e.altKey ? Rl.alt : 0) + (e.ctrlKey ? Rl.ctrl : 0) + (e.shiftKey ? Rl.shift : 0);\n      }\n\n      return t;\n    }\n\n    function jl(e) {\n      if (typeof e == \"string\") {\n        e = Bl(e);\n      }\n\n      return e.map(function (e) {\n        return typeof e == \"string\" ? Ll(e) : e;\n      }).reduce(function (e, t) {\n        return t + e;\n      }, 0);\n    }\n\n    function Dl(e) {\n      if (!Cl.isMac) {\n        return e;\n      }\n\n      return Bl(e).map(function (e) {\n        return Nl[e.toLowerCase()] || e;\n      }).reduce(function (e, t) {\n        if (e.slice(-1) in Ol) {\n          return e + t;\n        } else {\n          return e + \"+\" + t;\n        }\n      });\n    }\n\n    function zl() {\n      var e = {\n        arrowleft: 37,\n        arrowup: 38,\n        arrowright: 39,\n        arrowdown: 40,\n        backspace: 8,\n        delete: 46,\n        enter: 13,\n        space: 32,\n        esc: 27,\n        tab: 9,\n        ctrl: 1114112,\n        cmd: 1114112,\n        shift: 2228224,\n        alt: 4456448\n      };\n\n      for (var _t40 = 65; _t40 <= 90; _t40++) {\n        var _n30 = String.fromCharCode(_t40);\n\n        e[_n30.toLowerCase()] = _t40;\n      }\n\n      for (var _t41 = 48; _t41 <= 57; _t41++) {\n        e[_t41 - 48] = _t41;\n      }\n\n      for (var _t42 = 112; _t42 <= 123; _t42++) {\n        e[\"f\" + (_t42 - 111)] = _t42;\n      }\n\n      return e;\n    }\n\n    function Bl(e) {\n      return e.split(/\\s*\\+\\s*/);\n    }\n\n    var Vl = /*#__PURE__*/function (_Dc4) {\n      _inherits(Vl, _Dc4);\n\n      var _super9 = _createSuper(Vl);\n\n      function Vl(e, t, n, i) {\n        var _this24;\n\n        _classCallCheck(this, Vl);\n\n        _this24 = _super9.call(this, e, t, n, i);\n        _this24.getFillerOffset = Hl;\n        return _this24;\n      }\n\n      _createClass(Vl, [{\n        key: \"is\",\n        value: function is(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n          var n = e.replace(/^view:/, \"\");\n\n          if (!t) {\n            return n == \"uiElement\" || _get(_getPrototypeOf(Vl.prototype), \"is\", this).call(this, e);\n          } else {\n            return n == \"uiElement\" && t == this.name || _get(_getPrototypeOf(Vl.prototype), \"is\", this).call(this, e, t);\n          }\n        }\n      }, {\n        key: \"_insertChild\",\n        value: function _insertChild(e, t) {\n          if (t && (t instanceof Dr || Array.from(t).length > 0)) {\n            throw new rr[\"b\"](\"view-uielement-cannot-add: Cannot add child nodes to UIElement instance.\", this);\n          }\n        }\n      }, {\n        key: \"render\",\n        value: function render(e) {\n          return this.toDomElement(e);\n        }\n      }, {\n        key: \"toDomElement\",\n        value: function toDomElement(e) {\n          var t = e.createElement(this.name);\n\n          var _iterator42 = _createForOfIteratorHelper(this.getAttributeKeys()),\n              _step42;\n\n          try {\n            for (_iterator42.s(); !(_step42 = _iterator42.n()).done;) {\n              var _e33 = _step42.value;\n              t.setAttribute(_e33, this.getAttribute(_e33));\n            }\n          } catch (err) {\n            _iterator42.e(err);\n          } finally {\n            _iterator42.f();\n          }\n\n          return t;\n        }\n      }]);\n\n      return Vl;\n    }(Dc);\n\n    function Fl(e) {\n      e.document.on(\"keydown\", function (t, n) {\n        return Ul(t, n, e.domConverter);\n      });\n    }\n\n    function Hl() {\n      return null;\n    }\n\n    function Ul(e, t, n) {\n      if (t.keyCode == Rl.arrowright) {\n        var _e34 = t.domTarget.ownerDocument.defaultView.getSelection();\n\n        var _i26 = _e34.rangeCount == 1 && _e34.getRangeAt(0).collapsed;\n\n        if (_i26 || t.shiftKey) {\n          var _t43 = _e34.focusNode;\n          var _o14 = _e34.focusOffset;\n\n          var _s4 = n.domPositionToView(_t43, _o14);\n\n          if (_s4 === null) {\n            return;\n          }\n\n          var _r3 = false;\n\n          var _a3 = _s4.getLastMatchingPosition(function (e) {\n            if (e.item.is(\"uiElement\")) {\n              _r3 = true;\n            }\n\n            if (e.item.is(\"uiElement\") || e.item.is(\"attributeElement\")) {\n              return true;\n            }\n\n            return false;\n          });\n\n          if (_r3) {\n            var _t44 = n.viewPositionToDom(_a3);\n\n            if (_i26) {\n              _e34.collapse(_t44.parent, _t44.offset);\n            } else {\n              _e34.extend(_t44.parent, _t44.offset);\n            }\n          }\n        }\n      }\n    }\n\n    var Wl = /*#__PURE__*/function (_Symbol$iterator5) {\n      function Wl(e, t) {\n        _classCallCheck(this, Wl);\n\n        this.document = e;\n        this._children = [];\n\n        if (t) {\n          this._insertChild(0, t);\n        }\n      }\n\n      _createClass(Wl, [{\n        key: _Symbol$iterator5,\n        value: function value() {\n          return this._children[Symbol.iterator]();\n        }\n      }, {\n        key: \"childCount\",\n        get: function get() {\n          return this._children.length;\n        }\n      }, {\n        key: \"isEmpty\",\n        get: function get() {\n          return this.childCount === 0;\n        }\n      }, {\n        key: \"root\",\n        get: function get() {\n          return this;\n        }\n      }, {\n        key: \"parent\",\n        get: function get() {\n          return null;\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          return e == \"documentFragment\" || e == \"view:documentFragment\";\n        }\n      }, {\n        key: \"_appendChild\",\n        value: function _appendChild(e) {\n          return this._insertChild(this.childCount, e);\n        }\n      }, {\n        key: \"getChild\",\n        value: function getChild(e) {\n          return this._children[e];\n        }\n      }, {\n        key: \"getChildIndex\",\n        value: function getChildIndex(e) {\n          return this._children.indexOf(e);\n        }\n      }, {\n        key: \"getChildren\",\n        value: function getChildren() {\n          return this._children[Symbol.iterator]();\n        }\n      }, {\n        key: \"_insertChild\",\n        value: function _insertChild(e, t) {\n          this._fireChange(\"children\", this);\n\n          var n = 0;\n          var i = $l(this.document, t);\n\n          var _iterator43 = _createForOfIteratorHelper(i),\n              _step43;\n\n          try {\n            for (_iterator43.s(); !(_step43 = _iterator43.n()).done;) {\n              var _t45 = _step43.value;\n\n              if (_t45.parent !== null) {\n                _t45._remove();\n              }\n\n              _t45.parent = this;\n\n              this._children.splice(e, 0, _t45);\n\n              e++;\n              n++;\n            }\n          } catch (err) {\n            _iterator43.e(err);\n          } finally {\n            _iterator43.f();\n          }\n\n          return n;\n        }\n      }, {\n        key: \"_removeChildren\",\n        value: function _removeChildren(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n          this._fireChange(\"children\", this);\n\n          for (var _n31 = e; _n31 < e + t; _n31++) {\n            this._children[_n31].parent = null;\n          }\n\n          return this._children.splice(e, t);\n        }\n      }, {\n        key: \"_fireChange\",\n        value: function _fireChange(e, t) {\n          this.fire(\"change:\" + e, t);\n        }\n      }]);\n\n      return Wl;\n    }(Symbol.iterator);\n\n    kr(Wl, dr);\n\n    function $l(e, t) {\n      if (typeof t == \"string\") {\n        return [new zr(e, t)];\n      }\n\n      if (!Fr(t)) {\n        t = [t];\n      }\n\n      return Array.from(t).map(function (t) {\n        if (typeof t == \"string\") {\n          return new zr(e, t);\n        }\n\n        if (t instanceof Br) {\n          return new zr(e, t.data);\n        }\n\n        return t;\n      });\n    }\n\n    var ql = /*#__PURE__*/function () {\n      function ql(e) {\n        _classCallCheck(this, ql);\n\n        this.document = e;\n        this._cloneGroups = new Map();\n      }\n\n      _createClass(ql, [{\n        key: \"setSelection\",\n        value: function setSelection(e, t, n) {\n          this.document.selection._setTo(e, t, n);\n        }\n      }, {\n        key: \"setSelectionFocus\",\n        value: function setSelectionFocus(e, t) {\n          this.document.selection._setFocus(e, t);\n        }\n      }, {\n        key: \"createText\",\n        value: function createText(e) {\n          return new zr(this.document, e);\n        }\n      }, {\n        key: \"createAttributeElement\",\n        value: function createAttributeElement(e, t) {\n          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          var i = new wl(this.document, e, t);\n\n          if (n.priority) {\n            i._priority = n.priority;\n          }\n\n          if (n.id) {\n            i._id = n.id;\n          }\n\n          return i;\n        }\n      }, {\n        key: \"createContainerElement\",\n        value: function createContainerElement(e, t) {\n          return new Fc(this.document, e, t);\n        }\n      }, {\n        key: \"createEditableElement\",\n        value: function createEditableElement(e, t) {\n          var n = new rl(this.document, e, t);\n          n._document = this.document;\n          return n;\n        }\n      }, {\n        key: \"createEmptyElement\",\n        value: function createEmptyElement(e, t) {\n          return new kl(this.document, e, t);\n        }\n      }, {\n        key: \"createUIElement\",\n        value: function createUIElement(e, t, n) {\n          var i = new Vl(this.document, e, t);\n\n          if (n) {\n            i.render = n;\n          }\n\n          return i;\n        }\n      }, {\n        key: \"setAttribute\",\n        value: function setAttribute(e, t, n) {\n          n._setAttribute(e, t);\n        }\n      }, {\n        key: \"removeAttribute\",\n        value: function removeAttribute(e, t) {\n          t._removeAttribute(e);\n        }\n      }, {\n        key: \"addClass\",\n        value: function addClass(e, t) {\n          t._addClass(e);\n        }\n      }, {\n        key: \"removeClass\",\n        value: function removeClass(e, t) {\n          t._removeClass(e);\n        }\n      }, {\n        key: \"setStyle\",\n        value: function setStyle(e, t, n) {\n          if (R(e) && n === undefined) {\n            n = t;\n          }\n\n          n._setStyle(e, t);\n        }\n      }, {\n        key: \"removeStyle\",\n        value: function removeStyle(e, t) {\n          t._removeStyle(e);\n        }\n      }, {\n        key: \"setCustomProperty\",\n        value: function setCustomProperty(e, t, n) {\n          n._setCustomProperty(e, t);\n        }\n      }, {\n        key: \"removeCustomProperty\",\n        value: function removeCustomProperty(e, t) {\n          return t._removeCustomProperty(e);\n        }\n      }, {\n        key: \"breakAttributes\",\n        value: function breakAttributes(e) {\n          if (e instanceof dl) {\n            return this._breakAttributes(e);\n          } else {\n            return this._breakAttributesRange(e);\n          }\n        }\n      }, {\n        key: \"breakContainer\",\n        value: function breakContainer(e) {\n          var t = e.parent;\n\n          if (!t.is(\"containerElement\")) {\n            throw new rr[\"b\"](\"view-writer-break-non-container-element: Trying to break an element which is not a container element.\", this.document);\n          }\n\n          if (!t.parent) {\n            throw new rr[\"b\"](\"view-writer-break-root: Trying to break root element.\", this.document);\n          }\n\n          if (e.isAtStart) {\n            return dl._createBefore(t);\n          } else if (!e.isAtEnd) {\n            var _n32 = t._clone(false);\n\n            this.insert(dl._createAfter(t), _n32);\n\n            var _i27 = new ul(e, dl._createAt(t, \"end\"));\n\n            var _o15 = new dl(_n32, 0);\n\n            this.move(_i27, _o15);\n          }\n\n          return dl._createAfter(t);\n        }\n      }, {\n        key: \"mergeAttributes\",\n        value: function mergeAttributes(e) {\n          var t = e.offset;\n          var n = e.parent;\n\n          if (n.is(\"text\")) {\n            return e;\n          }\n\n          if (n.is(\"attributeElement\") && n.childCount === 0) {\n            var _e35 = n.parent;\n            var _t46 = n.index;\n\n            n._remove();\n\n            this._removeFromClonedElementsGroup(n);\n\n            return this.mergeAttributes(new dl(_e35, _t46));\n          }\n\n          var i = n.getChild(t - 1);\n          var o = n.getChild(t);\n\n          if (!i || !o) {\n            return e;\n          }\n\n          if (i.is(\"text\") && o.is(\"text\")) {\n            return Kl(i, o);\n          } else if (i.is(\"attributeElement\") && o.is(\"attributeElement\") && i.isSimilar(o)) {\n            var _e36 = i.childCount;\n\n            i._appendChild(o.getChildren());\n\n            o._remove();\n\n            this._removeFromClonedElementsGroup(o);\n\n            return this.mergeAttributes(new dl(i, _e36));\n          }\n\n          return e;\n        }\n      }, {\n        key: \"mergeContainers\",\n        value: function mergeContainers(e) {\n          var t = e.nodeBefore;\n          var n = e.nodeAfter;\n\n          if (!t || !n || !t.is(\"containerElement\") || !n.is(\"containerElement\")) {\n            throw new rr[\"b\"](\"view-writer-merge-containers-invalid-position: \" + \"Element before and after given position cannot be merged.\", this.document);\n          }\n\n          var i = t.getChild(t.childCount - 1);\n          var o = i instanceof zr ? dl._createAt(i, \"end\") : dl._createAt(t, \"end\");\n          this.move(ul._createIn(n), dl._createAt(t, \"end\"));\n          this.remove(ul._createOn(n));\n          return o;\n        }\n      }, {\n        key: \"insert\",\n        value: function insert(e, t) {\n          t = Fr(t) ? _toConsumableArray(t) : [t];\n          Zl(t, this.document);\n          var n = Jl(e);\n\n          if (!n) {\n            throw new rr[\"b\"](\"view-writer-invalid-position-container\", this.document);\n          }\n\n          var i = this._breakAttributes(e, true);\n\n          var o = n._insertChild(i.offset, t);\n\n          var _iterator44 = _createForOfIteratorHelper(t),\n              _step44;\n\n          try {\n            for (_iterator44.s(); !(_step44 = _iterator44.n()).done;) {\n              var _e38 = _step44.value;\n\n              this._addToClonedElementsGroup(_e38);\n            }\n          } catch (err) {\n            _iterator44.e(err);\n          } finally {\n            _iterator44.f();\n          }\n\n          var s = i.getShiftedBy(o);\n          var r = this.mergeAttributes(i);\n\n          if (o === 0) {\n            return new ul(r, r);\n          } else {\n            if (!r.isEqual(i)) {\n              s.offset--;\n            }\n\n            var _e37 = this.mergeAttributes(s);\n\n            return new ul(r, _e37);\n          }\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(e) {\n          var t = e instanceof ul ? e : ul._createOn(e);\n          nd(t, this.document);\n\n          if (t.isCollapsed) {\n            return new Wl(this.document);\n          }\n\n          var _this$_breakAttribute = this._breakAttributesRange(t, true),\n              n = _this$_breakAttribute.start,\n              i = _this$_breakAttribute.end;\n\n          var o = n.parent;\n          var s = i.offset - n.offset;\n\n          var r = o._removeChildren(n.offset, s);\n\n          var _iterator45 = _createForOfIteratorHelper(r),\n              _step45;\n\n          try {\n            for (_iterator45.s(); !(_step45 = _iterator45.n()).done;) {\n              var _e39 = _step45.value;\n\n              this._removeFromClonedElementsGroup(_e39);\n            }\n          } catch (err) {\n            _iterator45.e(err);\n          } finally {\n            _iterator45.f();\n          }\n\n          var a = this.mergeAttributes(n);\n          t.start = a;\n          t.end = a.clone();\n          return new Wl(this.document, r);\n        }\n      }, {\n        key: \"clear\",\n        value: function clear(e, t) {\n          nd(e, this.document);\n          var n = e.getWalker({\n            direction: \"backward\",\n            ignoreElementEnd: true\n          });\n\n          var _iterator46 = _createForOfIteratorHelper(n),\n              _step46;\n\n          try {\n            for (_iterator46.s(); !(_step46 = _iterator46.n()).done;) {\n              var _i28 = _step46.value;\n              var _n33 = _i28.item;\n\n              var _o16 = void 0;\n\n              if (_n33.is(\"element\") && t.isSimilar(_n33)) {\n                _o16 = ul._createOn(_n33);\n              } else if (!_i28.nextPosition.isAfter(e.start) && _n33.is(\"textProxy\")) {\n                var _e40 = _n33.getAncestors().find(function (e) {\n                  return e.is(\"element\") && t.isSimilar(e);\n                });\n\n                if (_e40) {\n                  _o16 = ul._createIn(_e40);\n                }\n              }\n\n              if (_o16) {\n                if (_o16.end.isAfter(e.end)) {\n                  _o16.end = e.end;\n                }\n\n                if (_o16.start.isBefore(e.start)) {\n                  _o16.start = e.start;\n                }\n\n                this.remove(_o16);\n              }\n            }\n          } catch (err) {\n            _iterator46.e(err);\n          } finally {\n            _iterator46.f();\n          }\n        }\n      }, {\n        key: \"move\",\n        value: function move(e, t) {\n          var n;\n\n          if (t.isAfter(e.end)) {\n            t = this._breakAttributes(t, true);\n            var _i29 = t.parent;\n            var _o17 = _i29.childCount;\n            e = this._breakAttributesRange(e, true);\n            n = this.remove(e);\n            t.offset += _i29.childCount - _o17;\n          } else {\n            n = this.remove(e);\n          }\n\n          return this.insert(t, n);\n        }\n      }, {\n        key: \"wrap\",\n        value: function wrap(e, t) {\n          if (!(t instanceof wl)) {\n            throw new rr[\"b\"](\"view-writer-wrap-invalid-attribute\", this.document);\n          }\n\n          nd(e, this.document);\n\n          if (!e.isCollapsed) {\n            return this._wrapRange(e, t);\n          } else {\n            var _n34 = e.start;\n\n            if (_n34.parent.is(\"element\") && !Yl(_n34.parent)) {\n              _n34 = _n34.getLastMatchingPosition(function (e) {\n                return e.item.is(\"uiElement\");\n              });\n            }\n\n            _n34 = this._wrapPosition(_n34, t);\n            var _i30 = this.document.selection;\n\n            if (_i30.isCollapsed && _i30.getFirstPosition().isEqual(e.start)) {\n              this.setSelection(_n34);\n            }\n\n            return new ul(_n34);\n          }\n        }\n      }, {\n        key: \"unwrap\",\n        value: function unwrap(e, t) {\n          if (!(t instanceof wl)) {\n            throw new rr[\"b\"](\"view-writer-unwrap-invalid-attribute\", this.document);\n          }\n\n          nd(e, this.document);\n\n          if (e.isCollapsed) {\n            return e;\n          }\n\n          var _this$_breakAttribute2 = this._breakAttributesRange(e, true),\n              n = _this$_breakAttribute2.start,\n              i = _this$_breakAttribute2.end;\n\n          var o = n.parent;\n\n          var s = this._unwrapChildren(o, n.offset, i.offset, t);\n\n          var r = this.mergeAttributes(s.start);\n\n          if (!r.isEqual(s.start)) {\n            s.end.offset--;\n          }\n\n          var a = this.mergeAttributes(s.end);\n          return new ul(r, a);\n        }\n      }, {\n        key: \"rename\",\n        value: function rename(e, t) {\n          var n = new Fc(this.document, e, t.getAttributes());\n          this.insert(dl._createAfter(t), n);\n          this.move(ul._createIn(t), dl._createAt(n, 0));\n          this.remove(ul._createOn(t));\n          return n;\n        }\n      }, {\n        key: \"clearClonedElementsGroup\",\n        value: function clearClonedElementsGroup(e) {\n          this._cloneGroups.delete(e);\n        }\n      }, {\n        key: \"createPositionAt\",\n        value: function createPositionAt(e, t) {\n          return dl._createAt(e, t);\n        }\n      }, {\n        key: \"createPositionAfter\",\n        value: function createPositionAfter(e) {\n          return dl._createAfter(e);\n        }\n      }, {\n        key: \"createPositionBefore\",\n        value: function createPositionBefore(e) {\n          return dl._createBefore(e);\n        }\n      }, {\n        key: \"createRange\",\n        value: function createRange(e, t) {\n          return new ul(e, t);\n        }\n      }, {\n        key: \"createRangeOn\",\n        value: function createRangeOn(e) {\n          return ul._createOn(e);\n        }\n      }, {\n        key: \"createRangeIn\",\n        value: function createRangeIn(e) {\n          return ul._createIn(e);\n        }\n      }, {\n        key: \"createSelection\",\n        value: function createSelection(e, t, n) {\n          return new ml(e, t, n);\n        }\n      }, {\n        key: \"_wrapChildren\",\n        value: function _wrapChildren(e, t, n, i) {\n          var o = t;\n          var s = [];\n\n          while (o < n) {\n            var _t47 = e.getChild(o);\n\n            var _n35 = _t47.is(\"text\");\n\n            var _r4 = _t47.is(\"attributeElement\");\n\n            var _a4 = _t47.is(\"emptyElement\");\n\n            var _c2 = _t47.is(\"uiElement\");\n\n            if (_r4 && this._wrapAttributeElement(i, _t47)) {\n              s.push(new dl(e, o));\n            } else if (_n35 || _a4 || _c2 || _r4 && Ql(i, _t47)) {\n              var _n36 = i._clone();\n\n              _t47._remove();\n\n              _n36._appendChild(_t47);\n\n              e._insertChild(o, _n36);\n\n              this._addToClonedElementsGroup(_n36);\n\n              s.push(new dl(e, o));\n            } else if (_r4) {\n              this._wrapChildren(_t47, 0, _t47.childCount, i);\n            }\n\n            o++;\n          }\n\n          var r = 0;\n\n          for (var _i31 = 0, _s5 = s; _i31 < _s5.length; _i31++) {\n            var _e41 = _s5[_i31];\n            _e41.offset -= r;\n\n            if (_e41.offset == t) {\n              continue;\n            }\n\n            var _i32 = this.mergeAttributes(_e41);\n\n            if (!_i32.isEqual(_e41)) {\n              r++;\n              n--;\n            }\n          }\n\n          return ul._createFromParentsAndOffsets(e, t, e, n);\n        }\n      }, {\n        key: \"_unwrapChildren\",\n        value: function _unwrapChildren(e, t, n, i) {\n          var o = t;\n          var s = [];\n\n          while (o < n) {\n            var _t48 = e.getChild(o);\n\n            if (!_t48.is(\"attributeElement\")) {\n              o++;\n              continue;\n            }\n\n            if (_t48.isSimilar(i)) {\n              var _i33 = _t48.getChildren();\n\n              var _r5 = _t48.childCount;\n\n              _t48._remove();\n\n              e._insertChild(o, _i33);\n\n              this._removeFromClonedElementsGroup(_t48);\n\n              s.push(new dl(e, o), new dl(e, o + _r5));\n              o += _r5;\n              n += _r5 - 1;\n              continue;\n            }\n\n            if (this._unwrapAttributeElement(i, _t48)) {\n              s.push(new dl(e, o), new dl(e, o + 1));\n              o++;\n              continue;\n            }\n\n            this._unwrapChildren(_t48, 0, _t48.childCount, i);\n\n            o++;\n          }\n\n          var r = 0;\n\n          for (var _i34 = 0, _s6 = s; _i34 < _s6.length; _i34++) {\n            var _e42 = _s6[_i34];\n            _e42.offset -= r;\n\n            if (_e42.offset == t || _e42.offset == n) {\n              continue;\n            }\n\n            var _i35 = this.mergeAttributes(_e42);\n\n            if (!_i35.isEqual(_e42)) {\n              r++;\n              n--;\n            }\n          }\n\n          return ul._createFromParentsAndOffsets(e, t, e, n);\n        }\n      }, {\n        key: \"_wrapRange\",\n        value: function _wrapRange(e, t) {\n          var _this$_breakAttribute3 = this._breakAttributesRange(e, true),\n              n = _this$_breakAttribute3.start,\n              i = _this$_breakAttribute3.end;\n\n          var o = n.parent;\n\n          var s = this._wrapChildren(o, n.offset, i.offset, t);\n\n          var r = this.mergeAttributes(s.start);\n\n          if (!r.isEqual(s.start)) {\n            s.end.offset--;\n          }\n\n          var a = this.mergeAttributes(s.end);\n          return new ul(r, a);\n        }\n      }, {\n        key: \"_wrapPosition\",\n        value: function _wrapPosition(e, t) {\n          if (t.isSimilar(e.parent)) {\n            return Xl(e.clone());\n          }\n\n          if (e.parent.is(\"text\")) {\n            e = Gl(e);\n          }\n\n          var n = this.createAttributeElement();\n          n._priority = Number.POSITIVE_INFINITY;\n\n          n.isSimilar = function () {\n            return false;\n          };\n\n          e.parent._insertChild(e.offset, n);\n\n          var i = new ul(e, e.getShiftedBy(1));\n          this.wrap(i, t);\n          var o = new dl(n.parent, n.index);\n\n          n._remove();\n\n          var s = o.nodeBefore;\n          var r = o.nodeAfter;\n\n          if (s instanceof zr && r instanceof zr) {\n            return Kl(s, r);\n          }\n\n          return Xl(o);\n        }\n      }, {\n        key: \"_wrapAttributeElement\",\n        value: function _wrapAttributeElement(e, t) {\n          if (!id(e, t)) {\n            return false;\n          }\n\n          if (e.name !== t.name || e.priority !== t.priority) {\n            return false;\n          }\n\n          var _iterator47 = _createForOfIteratorHelper(e.getAttributeKeys()),\n              _step47;\n\n          try {\n            for (_iterator47.s(); !(_step47 = _iterator47.n()).done;) {\n              var _n37 = _step47.value;\n\n              if (_n37 === \"class\" || _n37 === \"style\") {\n                continue;\n              }\n\n              if (t.hasAttribute(_n37) && t.getAttribute(_n37) !== e.getAttribute(_n37)) {\n                return false;\n              }\n            }\n          } catch (err) {\n            _iterator47.e(err);\n          } finally {\n            _iterator47.f();\n          }\n\n          var _iterator48 = _createForOfIteratorHelper(e.getStyleNames()),\n              _step48;\n\n          try {\n            for (_iterator48.s(); !(_step48 = _iterator48.n()).done;) {\n              var _n38 = _step48.value;\n\n              if (t.hasStyle(_n38) && t.getStyle(_n38) !== e.getStyle(_n38)) {\n                return false;\n              }\n            }\n          } catch (err) {\n            _iterator48.e(err);\n          } finally {\n            _iterator48.f();\n          }\n\n          var _iterator49 = _createForOfIteratorHelper(e.getAttributeKeys()),\n              _step49;\n\n          try {\n            for (_iterator49.s(); !(_step49 = _iterator49.n()).done;) {\n              var _n39 = _step49.value;\n\n              if (_n39 === \"class\" || _n39 === \"style\") {\n                continue;\n              }\n\n              if (!t.hasAttribute(_n39)) {\n                this.setAttribute(_n39, e.getAttribute(_n39), t);\n              }\n            }\n          } catch (err) {\n            _iterator49.e(err);\n          } finally {\n            _iterator49.f();\n          }\n\n          var _iterator50 = _createForOfIteratorHelper(e.getStyleNames()),\n              _step50;\n\n          try {\n            for (_iterator50.s(); !(_step50 = _iterator50.n()).done;) {\n              var _n40 = _step50.value;\n\n              if (!t.hasStyle(_n40)) {\n                this.setStyle(_n40, e.getStyle(_n40), t);\n              }\n            }\n          } catch (err) {\n            _iterator50.e(err);\n          } finally {\n            _iterator50.f();\n          }\n\n          var _iterator51 = _createForOfIteratorHelper(e.getClassNames()),\n              _step51;\n\n          try {\n            for (_iterator51.s(); !(_step51 = _iterator51.n()).done;) {\n              var _n41 = _step51.value;\n\n              if (!t.hasClass(_n41)) {\n                this.addClass(_n41, t);\n              }\n            }\n          } catch (err) {\n            _iterator51.e(err);\n          } finally {\n            _iterator51.f();\n          }\n\n          return true;\n        }\n      }, {\n        key: \"_unwrapAttributeElement\",\n        value: function _unwrapAttributeElement(e, t) {\n          if (!id(e, t)) {\n            return false;\n          }\n\n          if (e.name !== t.name || e.priority !== t.priority) {\n            return false;\n          }\n\n          var _iterator52 = _createForOfIteratorHelper(e.getAttributeKeys()),\n              _step52;\n\n          try {\n            for (_iterator52.s(); !(_step52 = _iterator52.n()).done;) {\n              var _n42 = _step52.value;\n\n              if (_n42 === \"class\" || _n42 === \"style\") {\n                continue;\n              }\n\n              if (!t.hasAttribute(_n42) || t.getAttribute(_n42) !== e.getAttribute(_n42)) {\n                return false;\n              }\n            }\n          } catch (err) {\n            _iterator52.e(err);\n          } finally {\n            _iterator52.f();\n          }\n\n          if (!t.hasClass.apply(t, _toConsumableArray(e.getClassNames()))) {\n            return false;\n          }\n\n          var _iterator53 = _createForOfIteratorHelper(e.getStyleNames()),\n              _step53;\n\n          try {\n            for (_iterator53.s(); !(_step53 = _iterator53.n()).done;) {\n              var _n43 = _step53.value;\n\n              if (!t.hasStyle(_n43) || t.getStyle(_n43) !== e.getStyle(_n43)) {\n                return false;\n              }\n            }\n          } catch (err) {\n            _iterator53.e(err);\n          } finally {\n            _iterator53.f();\n          }\n\n          var _iterator54 = _createForOfIteratorHelper(e.getAttributeKeys()),\n              _step54;\n\n          try {\n            for (_iterator54.s(); !(_step54 = _iterator54.n()).done;) {\n              var _n44 = _step54.value;\n\n              if (_n44 === \"class\" || _n44 === \"style\") {\n                continue;\n              }\n\n              this.removeAttribute(_n44, t);\n            }\n          } catch (err) {\n            _iterator54.e(err);\n          } finally {\n            _iterator54.f();\n          }\n\n          this.removeClass(Array.from(e.getClassNames()), t);\n          this.removeStyle(Array.from(e.getStyleNames()), t);\n          return true;\n        }\n      }, {\n        key: \"_breakAttributesRange\",\n        value: function _breakAttributesRange(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n          var n = e.start;\n          var i = e.end;\n          nd(e, this.document);\n\n          if (e.isCollapsed) {\n            var _n45 = this._breakAttributes(e.start, t);\n\n            return new ul(_n45, _n45);\n          }\n\n          var o = this._breakAttributes(i, t);\n\n          var s = o.parent.childCount;\n\n          var r = this._breakAttributes(n, t);\n\n          o.offset += o.parent.childCount - s;\n          return new ul(r, o);\n        }\n      }, {\n        key: \"_breakAttributes\",\n        value: function _breakAttributes(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n          var n = e.offset;\n          var i = e.parent;\n\n          if (e.parent.is(\"emptyElement\")) {\n            throw new rr[\"b\"](\"view-writer-cannot-break-empty-element\", this.document);\n          }\n\n          if (e.parent.is(\"uiElement\")) {\n            throw new rr[\"b\"](\"view-writer-cannot-break-ui-element\", this.document);\n          }\n\n          if (!t && i.is(\"text\") && td(i.parent)) {\n            return e.clone();\n          }\n\n          if (td(i)) {\n            return e.clone();\n          }\n\n          if (i.is(\"text\")) {\n            return this._breakAttributes(Gl(e), t);\n          }\n\n          var o = i.childCount;\n\n          if (n == o) {\n            var _e43 = new dl(i.parent, i.index + 1);\n\n            return this._breakAttributes(_e43, t);\n          } else {\n            if (n === 0) {\n              var _e44 = new dl(i.parent, i.index);\n\n              return this._breakAttributes(_e44, t);\n            } else {\n              var _e45 = i.index + 1;\n\n              var _o18 = i._clone();\n\n              i.parent._insertChild(_e45, _o18);\n\n              this._addToClonedElementsGroup(_o18);\n\n              var _s7 = i.childCount - n;\n\n              var _r6 = i._removeChildren(n, _s7);\n\n              _o18._appendChild(_r6);\n\n              var _a5 = new dl(i.parent, _e45);\n\n              return this._breakAttributes(_a5, t);\n            }\n          }\n        }\n      }, {\n        key: \"_addToClonedElementsGroup\",\n        value: function _addToClonedElementsGroup(e) {\n          if (!e.root.is(\"rootElement\")) {\n            return;\n          }\n\n          if (e.is(\"element\")) {\n            var _iterator55 = _createForOfIteratorHelper(e.getChildren()),\n                _step55;\n\n            try {\n              for (_iterator55.s(); !(_step55 = _iterator55.n()).done;) {\n                var _t49 = _step55.value;\n\n                this._addToClonedElementsGroup(_t49);\n              }\n            } catch (err) {\n              _iterator55.e(err);\n            } finally {\n              _iterator55.f();\n            }\n          }\n\n          var t = e.id;\n\n          if (!t) {\n            return;\n          }\n\n          var n = this._cloneGroups.get(t);\n\n          if (!n) {\n            n = new Set();\n\n            this._cloneGroups.set(t, n);\n          }\n\n          n.add(e);\n          e._clonesGroup = n;\n        }\n      }, {\n        key: \"_removeFromClonedElementsGroup\",\n        value: function _removeFromClonedElementsGroup(e) {\n          if (e.is(\"element\")) {\n            var _iterator56 = _createForOfIteratorHelper(e.getChildren()),\n                _step56;\n\n            try {\n              for (_iterator56.s(); !(_step56 = _iterator56.n()).done;) {\n                var _t50 = _step56.value;\n\n                this._removeFromClonedElementsGroup(_t50);\n              }\n            } catch (err) {\n              _iterator56.e(err);\n            } finally {\n              _iterator56.f();\n            }\n          }\n\n          var t = e.id;\n\n          if (!t) {\n            return;\n          }\n\n          var n = this._cloneGroups.get(t);\n\n          if (!n) {\n            return;\n          }\n\n          n.delete(e);\n        }\n      }]);\n\n      return ql;\n    }();\n\n    function Yl(e) {\n      return Array.from(e.getChildren()).some(function (e) {\n        return !e.is(\"uiElement\");\n      });\n    }\n\n    function Jl(e) {\n      var t = e.parent;\n\n      while (!td(t)) {\n        if (!t) {\n          return undefined;\n        }\n\n        t = t.parent;\n      }\n\n      return t;\n    }\n\n    function Ql(e, t) {\n      if (e.priority < t.priority) {\n        return true;\n      } else if (e.priority > t.priority) {\n        return false;\n      }\n\n      return e.getIdentity() < t.getIdentity();\n    }\n\n    function Xl(e) {\n      var t = e.nodeBefore;\n\n      if (t && t.is(\"text\")) {\n        return new dl(t, t.data.length);\n      }\n\n      var n = e.nodeAfter;\n\n      if (n && n.is(\"text\")) {\n        return new dl(n, 0);\n      }\n\n      return e;\n    }\n\n    function Gl(e) {\n      if (e.offset == e.parent.data.length) {\n        return new dl(e.parent.parent, e.parent.index + 1);\n      }\n\n      if (e.offset === 0) {\n        return new dl(e.parent.parent, e.parent.index);\n      }\n\n      var t = e.parent.data.slice(e.offset);\n      e.parent._data = e.parent.data.slice(0, e.offset);\n\n      e.parent.parent._insertChild(e.parent.index + 1, new zr(e.root.document, t));\n\n      return new dl(e.parent.parent, e.parent.index + 1);\n    }\n\n    function Kl(e, t) {\n      var n = e.data.length;\n      e._data += t.data;\n\n      t._remove();\n\n      return new dl(e, n);\n    }\n\n    function Zl(e, t) {\n      var _iterator57 = _createForOfIteratorHelper(e),\n          _step57;\n\n      try {\n        var _loop = function _loop() {\n          var n = _step57.value;\n\n          if (!ed.some(function (e) {\n            return n instanceof e;\n          })) {\n            throw new rr[\"b\"](\"view-writer-insert-invalid-node\", t);\n          }\n\n          if (!n.is(\"text\")) {\n            Zl(n.getChildren(), t);\n          }\n        };\n\n        for (_iterator57.s(); !(_step57 = _iterator57.n()).done;) {\n          _loop();\n        }\n      } catch (err) {\n        _iterator57.e(err);\n      } finally {\n        _iterator57.f();\n      }\n    }\n\n    var ed = [zr, wl, Fc, kl, Vl];\n\n    function td(e) {\n      return e && (e.is(\"containerElement\") || e.is(\"documentFragment\"));\n    }\n\n    function nd(e, t) {\n      var n = Jl(e.start);\n      var i = Jl(e.end);\n\n      if (!n || !i || n !== i) {\n        throw new rr[\"b\"](\"view-writer-invalid-range-container\", t);\n      }\n    }\n\n    function id(e, t) {\n      return e.id === null && t.id === null;\n    }\n\n    function od(e) {\n      return Object.prototype.toString.call(e) == \"[object Text]\";\n    }\n\n    var sd = function sd(e) {\n      return e.createTextNode(\" \");\n    };\n\n    var rd = function rd(e) {\n      var t = e.createElement(\"br\");\n      t.dataset.ckeFiller = true;\n      return t;\n    };\n\n    var ad = 7;\n\n    var cd = function () {\n      var e = \"\";\n\n      for (var _t51 = 0; _t51 < ad; _t51++) {\n        e += \"​\";\n      }\n\n      return e;\n    }();\n\n    function ld(e) {\n      return od(e) && e.data.substr(0, ad) === cd;\n    }\n\n    function dd(e) {\n      return e.data.length == ad && ld(e);\n    }\n\n    function ud(e) {\n      if (ld(e)) {\n        return e.data.slice(ad);\n      } else {\n        return e.data;\n      }\n    }\n\n    function hd(e) {\n      e.document.on(\"keydown\", fd);\n    }\n\n    function fd(e, t) {\n      if (t.keyCode == Rl.arrowleft) {\n        var _e46 = t.domTarget.ownerDocument.defaultView.getSelection();\n\n        if (_e46.rangeCount == 1 && _e46.getRangeAt(0).collapsed) {\n          var _t52 = _e46.getRangeAt(0).startContainer;\n\n          var _n46 = _e46.getRangeAt(0).startOffset;\n\n          if (ld(_t52) && _n46 <= ad) {\n            _e46.collapse(_t52, 0);\n          }\n        }\n      }\n    }\n\n    function md(e, t, n) {\n      var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n      n = n || function (e, t) {\n        return e === t;\n      };\n\n      if (!Array.isArray(e)) {\n        e = Array.from(e);\n      }\n\n      if (!Array.isArray(t)) {\n        t = Array.from(t);\n      }\n\n      var o = gd(e, t, n);\n      return i ? _d(o, t.length) : wd(t, o);\n    }\n\n    function gd(e, t, n) {\n      var i = pd(e, t, n);\n\n      if (i === -1) {\n        return {\n          firstIndex: -1,\n          lastIndexOld: -1,\n          lastIndexNew: -1\n        };\n      }\n\n      var o = bd(e, i);\n      var s = bd(t, i);\n      var r = pd(o, s, n);\n      var a = e.length - r;\n      var c = t.length - r;\n      return {\n        firstIndex: i,\n        lastIndexOld: a,\n        lastIndexNew: c\n      };\n    }\n\n    function pd(e, t, n) {\n      for (var _i36 = 0; _i36 < Math.max(e.length, t.length); _i36++) {\n        if (e[_i36] === undefined || t[_i36] === undefined || !n(e[_i36], t[_i36])) {\n          return _i36;\n        }\n      }\n\n      return -1;\n    }\n\n    function bd(e, t) {\n      return e.slice(t).reverse();\n    }\n\n    function wd(e, t) {\n      var n = [];\n      var i = t.firstIndex,\n          o = t.lastIndexOld,\n          s = t.lastIndexNew;\n\n      if (s - i > 0) {\n        n.push({\n          index: i,\n          type: \"insert\",\n          values: e.slice(i, s)\n        });\n      }\n\n      if (o - i > 0) {\n        n.push({\n          index: i + (s - i),\n          type: \"delete\",\n          howMany: o - i\n        });\n      }\n\n      return n;\n    }\n\n    function _d(e, t) {\n      var n = e.firstIndex,\n          i = e.lastIndexOld,\n          o = e.lastIndexNew;\n\n      if (n === -1) {\n        return Array(t).fill(\"equal\");\n      }\n\n      var s = [];\n\n      if (n > 0) {\n        s = s.concat(Array(n).fill(\"equal\"));\n      }\n\n      if (o - n > 0) {\n        s = s.concat(Array(o - n).fill(\"insert\"));\n      }\n\n      if (i - n > 0) {\n        s = s.concat(Array(i - n).fill(\"delete\"));\n      }\n\n      if (o < t) {\n        s = s.concat(Array(t - o).fill(\"equal\"));\n      }\n\n      return s;\n    }\n\n    function vd(e, t, n) {\n      n = n || function (e, t) {\n        return e === t;\n      };\n\n      var i = e.length;\n      var o = t.length;\n\n      if (i > 200 || o > 200 || i + o > 300) {\n        return vd.fastDiff(e, t, n, true);\n      }\n\n      var s, r;\n\n      if (o < i) {\n        var _n47 = e;\n        e = t;\n        t = _n47;\n        s = \"delete\";\n        r = \"insert\";\n      } else {\n        s = \"insert\";\n        r = \"delete\";\n      }\n\n      var a = e.length;\n      var c = t.length;\n      var l = c - a;\n      var d = {};\n      var u = {};\n\n      function h(i) {\n        var o = (u[i - 1] !== undefined ? u[i - 1] : -1) + 1;\n        var l = u[i + 1] !== undefined ? u[i + 1] : -1;\n        var h = o > l ? -1 : 1;\n\n        if (d[i + h]) {\n          d[i] = d[i + h].slice(0);\n        }\n\n        if (!d[i]) {\n          d[i] = [];\n        }\n\n        d[i].push(o > l ? s : r);\n        var f = Math.max(o, l);\n        var m = f - i;\n\n        while (m < a && f < c && n(e[m], t[f])) {\n          m++;\n          f++;\n          d[i].push(\"equal\");\n        }\n\n        return f;\n      }\n\n      var f = 0;\n      var m;\n\n      do {\n        for (m = -f; m < l; m++) {\n          u[m] = h(m);\n        }\n\n        for (m = l + f; m > l; m--) {\n          u[m] = h(m);\n        }\n\n        u[l] = h(l);\n        f++;\n      } while (u[l] !== c);\n\n      return d[l].slice(1);\n    }\n\n    vd.fastDiff = md;\n\n    function kd(e, t, n) {\n      e.insertBefore(n, e.childNodes[t] || null);\n    }\n\n    function yd(e) {\n      var t = e.parentNode;\n\n      if (t) {\n        t.removeChild(e);\n      }\n    }\n\n    function xd(e) {\n      if (e) {\n        if (e.defaultView) {\n          return e instanceof e.defaultView.Document;\n        } else if (e.ownerDocument && e.ownerDocument.defaultView) {\n          return e instanceof e.ownerDocument.defaultView.Node;\n        }\n      }\n\n      return false;\n    }\n\n    var Ad = /*#__PURE__*/function () {\n      function Ad(e, t) {\n        _classCallCheck(this, Ad);\n\n        this.domDocuments = new Set();\n        this.domConverter = e;\n        this.markedAttributes = new Set();\n        this.markedChildren = new Set();\n        this.markedTexts = new Set();\n        this.selection = t;\n        this.isFocused = false;\n        this._inlineFiller = null;\n        this._fakeSelectionContainer = null;\n      }\n\n      _createClass(Ad, [{\n        key: \"markToSync\",\n        value: function markToSync(e, t) {\n          if (e === \"text\") {\n            if (this.domConverter.mapViewToDom(t.parent)) {\n              this.markedTexts.add(t);\n            }\n          } else {\n            if (!this.domConverter.mapViewToDom(t)) {\n              return;\n            }\n\n            if (e === \"attributes\") {\n              this.markedAttributes.add(t);\n            } else if (e === \"children\") {\n              this.markedChildren.add(t);\n            } else {\n              throw new rr[\"b\"](\"view-renderer-unknown-type: Unknown type passed to Renderer.markToSync.\", this);\n            }\n          }\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var e;\n\n          var _iterator58 = _createForOfIteratorHelper(this.markedChildren),\n              _step58;\n\n          try {\n            for (_iterator58.s(); !(_step58 = _iterator58.n()).done;) {\n              var _e47 = _step58.value;\n\n              this._updateChildrenMappings(_e47);\n            }\n          } catch (err) {\n            _iterator58.e(err);\n          } finally {\n            _iterator58.f();\n          }\n\n          if (this._inlineFiller && !this._isSelectionInInlineFiller()) {\n            this._removeInlineFiller();\n          }\n\n          if (this._inlineFiller) {\n            e = this._getInlineFillerPosition();\n          } else if (this._needsInlineFillerAtSelection()) {\n            e = this.selection.getFirstPosition();\n            this.markedChildren.add(e.parent);\n          }\n\n          var _iterator59 = _createForOfIteratorHelper(this.markedAttributes),\n              _step59;\n\n          try {\n            for (_iterator59.s(); !(_step59 = _iterator59.n()).done;) {\n              var _e48 = _step59.value;\n\n              this._updateAttrs(_e48);\n            }\n          } catch (err) {\n            _iterator59.e(err);\n          } finally {\n            _iterator59.f();\n          }\n\n          var _iterator60 = _createForOfIteratorHelper(this.markedChildren),\n              _step60;\n\n          try {\n            for (_iterator60.s(); !(_step60 = _iterator60.n()).done;) {\n              var _t54 = _step60.value;\n\n              this._updateChildren(_t54, {\n                inlineFillerPosition: e\n              });\n            }\n          } catch (err) {\n            _iterator60.e(err);\n          } finally {\n            _iterator60.f();\n          }\n\n          var _iterator61 = _createForOfIteratorHelper(this.markedTexts),\n              _step61;\n\n          try {\n            for (_iterator61.s(); !(_step61 = _iterator61.n()).done;) {\n              var _t55 = _step61.value;\n\n              if (!this.markedChildren.has(_t55.parent) && this.domConverter.mapViewToDom(_t55.parent)) {\n                this._updateText(_t55, {\n                  inlineFillerPosition: e\n                });\n              }\n            }\n          } catch (err) {\n            _iterator61.e(err);\n          } finally {\n            _iterator61.f();\n          }\n\n          if (e) {\n            var _t53 = this.domConverter.viewPositionToDom(e);\n\n            var _n48 = _t53.parent.ownerDocument;\n\n            if (!ld(_t53.parent)) {\n              this._inlineFiller = Td(_n48, _t53.parent, _t53.offset);\n            } else {\n              this._inlineFiller = _t53.parent;\n            }\n          } else {\n            this._inlineFiller = null;\n          }\n\n          this._updateSelection();\n\n          this._updateFocus();\n\n          this.markedTexts.clear();\n          this.markedAttributes.clear();\n          this.markedChildren.clear();\n        }\n      }, {\n        key: \"_updateChildrenMappings\",\n        value: function _updateChildrenMappings(e) {\n          var t = this.domConverter.mapViewToDom(e);\n\n          if (!t) {\n            return;\n          }\n\n          var n = this.domConverter.mapViewToDom(e).childNodes;\n          var i = Array.from(this.domConverter.viewChildrenToDom(e, t.ownerDocument, {\n            withChildren: false\n          }));\n\n          var o = this._diffNodeLists(n, i);\n\n          var s = this._findReplaceActions(o, n, i);\n\n          if (s.indexOf(\"replace\") !== -1) {\n            var _t56 = {\n              equal: 0,\n              insert: 0,\n              delete: 0\n            };\n\n            var _iterator62 = _createForOfIteratorHelper(s),\n                _step62;\n\n            try {\n              for (_iterator62.s(); !(_step62 = _iterator62.n()).done;) {\n                var _o19 = _step62.value;\n\n                if (_o19 === \"replace\") {\n                  var _o20 = _t56.equal + _t56.insert;\n\n                  var _s8 = _t56.equal + _t56.delete;\n\n                  var _r7 = e.getChild(_o20);\n\n                  if (_r7 && !_r7.is(\"uiElement\")) {\n                    this._updateElementMappings(_r7, n[_s8]);\n                  }\n\n                  yd(i[_o20]);\n                  _t56.equal++;\n                } else {\n                  _t56[_o19]++;\n                }\n              }\n            } catch (err) {\n              _iterator62.e(err);\n            } finally {\n              _iterator62.f();\n            }\n          }\n        }\n      }, {\n        key: \"_updateElementMappings\",\n        value: function _updateElementMappings(e, t) {\n          this.domConverter.unbindDomElement(t);\n          this.domConverter.bindElements(t, e);\n          this.markedChildren.add(e);\n          this.markedAttributes.add(e);\n        }\n      }, {\n        key: \"_getInlineFillerPosition\",\n        value: function _getInlineFillerPosition() {\n          var e = this.selection.getFirstPosition();\n\n          if (e.parent.is(\"text\")) {\n            return dl._createBefore(this.selection.getFirstPosition().parent);\n          } else {\n            return e;\n          }\n        }\n      }, {\n        key: \"_isSelectionInInlineFiller\",\n        value: function _isSelectionInInlineFiller() {\n          if (this.selection.rangeCount != 1 || !this.selection.isCollapsed) {\n            return false;\n          }\n\n          var e = this.selection.getFirstPosition();\n          var t = this.domConverter.viewPositionToDom(e);\n\n          if (t && od(t.parent) && ld(t.parent)) {\n            return true;\n          }\n\n          return false;\n        }\n      }, {\n        key: \"_removeInlineFiller\",\n        value: function _removeInlineFiller() {\n          var e = this._inlineFiller;\n\n          if (!ld(e)) {\n            throw new rr[\"b\"](\"view-renderer-filler-was-lost: The inline filler node was lost.\", this);\n          }\n\n          if (dd(e)) {\n            e.parentNode.removeChild(e);\n          } else {\n            e.data = e.data.substr(ad);\n          }\n\n          this._inlineFiller = null;\n        }\n      }, {\n        key: \"_needsInlineFillerAtSelection\",\n        value: function _needsInlineFillerAtSelection() {\n          if (this.selection.rangeCount != 1 || !this.selection.isCollapsed) {\n            return false;\n          }\n\n          var e = this.selection.getFirstPosition();\n          var t = e.parent;\n          var n = e.offset;\n\n          if (!this.domConverter.mapViewToDom(t.root)) {\n            return false;\n          }\n\n          if (!t.is(\"element\")) {\n            return false;\n          }\n\n          if (!Cd(t)) {\n            return false;\n          }\n\n          if (n === t.getFillerOffset()) {\n            return false;\n          }\n\n          var i = e.nodeBefore;\n          var o = e.nodeAfter;\n\n          if (i instanceof zr || o instanceof zr) {\n            return false;\n          }\n\n          return true;\n        }\n      }, {\n        key: \"_updateText\",\n        value: function _updateText(e, t) {\n          var n = this.domConverter.findCorrespondingDomText(e);\n          var i = this.domConverter.viewToDom(e, n.ownerDocument);\n          var o = n.data;\n          var s = i.data;\n          var r = t.inlineFillerPosition;\n\n          if (r && r.parent == e.parent && r.offset == e.index) {\n            s = cd + s;\n          }\n\n          if (o != s) {\n            var _e49 = md(o, s);\n\n            var _iterator63 = _createForOfIteratorHelper(_e49),\n                _step63;\n\n            try {\n              for (_iterator63.s(); !(_step63 = _iterator63.n()).done;) {\n                var _t57 = _step63.value;\n\n                if (_t57.type === \"insert\") {\n                  n.insertData(_t57.index, _t57.values.join(\"\"));\n                } else {\n                  n.deleteData(_t57.index, _t57.howMany);\n                }\n              }\n            } catch (err) {\n              _iterator63.e(err);\n            } finally {\n              _iterator63.f();\n            }\n          }\n        }\n      }, {\n        key: \"_updateAttrs\",\n        value: function _updateAttrs(e) {\n          var t = this.domConverter.mapViewToDom(e);\n\n          if (!t) {\n            return;\n          }\n\n          var n = Array.from(t.attributes).map(function (e) {\n            return e.name;\n          });\n          var i = e.getAttributeKeys();\n\n          var _iterator64 = _createForOfIteratorHelper(i),\n              _step64;\n\n          try {\n            for (_iterator64.s(); !(_step64 = _iterator64.n()).done;) {\n              var _n49 = _step64.value;\n              t.setAttribute(_n49, e.getAttribute(_n49));\n            }\n          } catch (err) {\n            _iterator64.e(err);\n          } finally {\n            _iterator64.f();\n          }\n\n          var _iterator65 = _createForOfIteratorHelper(n),\n              _step65;\n\n          try {\n            for (_iterator65.s(); !(_step65 = _iterator65.n()).done;) {\n              var _i37 = _step65.value;\n\n              if (!e.hasAttribute(_i37)) {\n                t.removeAttribute(_i37);\n              }\n            }\n          } catch (err) {\n            _iterator65.e(err);\n          } finally {\n            _iterator65.f();\n          }\n        }\n      }, {\n        key: \"_updateChildren\",\n        value: function _updateChildren(e, t) {\n          var n = this.domConverter.mapViewToDom(e);\n\n          if (!n) {\n            return;\n          }\n\n          var i = t.inlineFillerPosition;\n          var o = this.domConverter.mapViewToDom(e).childNodes;\n          var s = Array.from(this.domConverter.viewChildrenToDom(e, n.ownerDocument, {\n            bind: true,\n            inlineFillerPosition: i\n          }));\n\n          if (i && i.parent === e) {\n            Td(n.ownerDocument, s, i.offset);\n          }\n\n          var r = this._diffNodeLists(o, s);\n\n          var a = 0;\n          var c = new Set();\n\n          var _iterator66 = _createForOfIteratorHelper(r),\n              _step66;\n\n          try {\n            for (_iterator66.s(); !(_step66 = _iterator66.n()).done;) {\n              var _e50 = _step66.value;\n\n              if (_e50 === \"delete\") {\n                c.add(o[a]);\n                yd(o[a]);\n              } else if (_e50 === \"equal\") {\n                a++;\n              }\n            }\n          } catch (err) {\n            _iterator66.e(err);\n          } finally {\n            _iterator66.f();\n          }\n\n          a = 0;\n\n          var _iterator67 = _createForOfIteratorHelper(r),\n              _step67;\n\n          try {\n            for (_iterator67.s(); !(_step67 = _iterator67.n()).done;) {\n              var _e51 = _step67.value;\n\n              if (_e51 === \"insert\") {\n                kd(n, a, s[a]);\n                a++;\n              } else if (_e51 === \"equal\") {\n                this._markDescendantTextToSync(this.domConverter.domToView(s[a]));\n\n                a++;\n              }\n            }\n          } catch (err) {\n            _iterator67.e(err);\n          } finally {\n            _iterator67.f();\n          }\n\n          var _iterator68 = _createForOfIteratorHelper(c),\n              _step68;\n\n          try {\n            for (_iterator68.s(); !(_step68 = _iterator68.n()).done;) {\n              var _e52 = _step68.value;\n\n              if (!_e52.parentNode) {\n                this.domConverter.unbindDomElement(_e52);\n              }\n            }\n          } catch (err) {\n            _iterator68.e(err);\n          } finally {\n            _iterator68.f();\n          }\n        }\n      }, {\n        key: \"_diffNodeLists\",\n        value: function _diffNodeLists(e, t) {\n          e = Sd(e, this._fakeSelectionContainer);\n          return vd(e, t, Pd.bind(null, this.domConverter));\n        }\n      }, {\n        key: \"_findReplaceActions\",\n        value: function _findReplaceActions(e, t, n) {\n          if (e.indexOf(\"insert\") === -1 || e.indexOf(\"delete\") === -1) {\n            return e;\n          }\n\n          var i = [];\n          var o = [];\n          var s = [];\n          var r = {\n            equal: 0,\n            insert: 0,\n            delete: 0\n          };\n\n          var _iterator69 = _createForOfIteratorHelper(e),\n              _step69;\n\n          try {\n            for (_iterator69.s(); !(_step69 = _iterator69.n()).done;) {\n              var _a6 = _step69.value;\n\n              if (_a6 === \"insert\") {\n                s.push(n[r.equal + r.insert]);\n              } else if (_a6 === \"delete\") {\n                o.push(t[r.equal + r.delete]);\n              } else {\n                i = i.concat(vd(o, s, Md).map(function (e) {\n                  return e === \"equal\" ? \"replace\" : e;\n                }));\n                i.push(\"equal\");\n                o = [];\n                s = [];\n              }\n\n              r[_a6]++;\n            }\n          } catch (err) {\n            _iterator69.e(err);\n          } finally {\n            _iterator69.f();\n          }\n\n          return i.concat(vd(o, s, Md).map(function (e) {\n            return e === \"equal\" ? \"replace\" : e;\n          }));\n        }\n      }, {\n        key: \"_markDescendantTextToSync\",\n        value: function _markDescendantTextToSync(e) {\n          if (!e) {\n            return;\n          }\n\n          if (e.is(\"text\")) {\n            this.markedTexts.add(e);\n          } else if (e.is(\"element\")) {\n            var _iterator70 = _createForOfIteratorHelper(e.getChildren()),\n                _step70;\n\n            try {\n              for (_iterator70.s(); !(_step70 = _iterator70.n()).done;) {\n                var _t58 = _step70.value;\n\n                this._markDescendantTextToSync(_t58);\n              }\n            } catch (err) {\n              _iterator70.e(err);\n            } finally {\n              _iterator70.f();\n            }\n          }\n        }\n      }, {\n        key: \"_updateSelection\",\n        value: function _updateSelection() {\n          if (this.selection.rangeCount === 0) {\n            this._removeDomSelection();\n\n            this._removeFakeSelection();\n\n            return;\n          }\n\n          var e = this.domConverter.mapViewToDom(this.selection.editableElement);\n\n          if (!this.isFocused || !e) {\n            return;\n          }\n\n          if (this.selection.isFake) {\n            this._updateFakeSelection(e);\n          } else {\n            this._removeFakeSelection();\n\n            this._updateDomSelection(e);\n          }\n        }\n      }, {\n        key: \"_updateFakeSelection\",\n        value: function _updateFakeSelection(e) {\n          var t = e.ownerDocument;\n\n          if (!this._fakeSelectionContainer) {\n            this._fakeSelectionContainer = Id(t);\n          }\n\n          var n = this._fakeSelectionContainer;\n          this.domConverter.bindFakeSelection(n, this.selection);\n\n          if (!this._fakeSelectionNeedsUpdate(e)) {\n            return;\n          }\n\n          if (!n.parentElement || n.parentElement != e) {\n            e.appendChild(n);\n          }\n\n          n.textContent = this.selection.fakeSelectionLabel || \" \";\n          var i = t.getSelection();\n          var o = t.createRange();\n          i.removeAllRanges();\n          o.selectNodeContents(n);\n          i.addRange(o);\n        }\n      }, {\n        key: \"_updateDomSelection\",\n        value: function _updateDomSelection(e) {\n          var t = e.ownerDocument.defaultView.getSelection();\n\n          if (!this._domSelectionNeedsUpdate(t)) {\n            return;\n          }\n\n          var n = this.domConverter.viewPositionToDom(this.selection.anchor);\n          var i = this.domConverter.viewPositionToDom(this.selection.focus);\n          e.focus();\n          t.collapse(n.parent, n.offset);\n          t.extend(i.parent, i.offset);\n\n          if (Cl.isGecko) {\n            Ed(i, t);\n          }\n        }\n      }, {\n        key: \"_domSelectionNeedsUpdate\",\n        value: function _domSelectionNeedsUpdate(e) {\n          if (!this.domConverter.isDomSelectionCorrect(e)) {\n            return true;\n          }\n\n          var t = e && this.domConverter.domSelectionToView(e);\n\n          if (t && this.selection.isEqual(t)) {\n            return false;\n          }\n\n          if (!this.selection.isCollapsed && this.selection.isSimilar(t)) {\n            return false;\n          }\n\n          return true;\n        }\n      }, {\n        key: \"_fakeSelectionNeedsUpdate\",\n        value: function _fakeSelectionNeedsUpdate(e) {\n          var t = this._fakeSelectionContainer;\n          var n = e.ownerDocument.getSelection();\n\n          if (!t || t.parentElement !== e) {\n            return true;\n          }\n\n          if (n.anchorNode !== t && !t.contains(n.anchorNode)) {\n            return true;\n          }\n\n          return t.textContent !== this.selection.fakeSelectionLabel;\n        }\n      }, {\n        key: \"_removeDomSelection\",\n        value: function _removeDomSelection() {\n          var _iterator71 = _createForOfIteratorHelper(this.domDocuments),\n              _step71;\n\n          try {\n            for (_iterator71.s(); !(_step71 = _iterator71.n()).done;) {\n              var _e53 = _step71.value;\n\n              var _t59 = _e53.getSelection();\n\n              if (_t59.rangeCount) {\n                var _t60 = _e53.activeElement;\n\n                var _n50 = this.domConverter.mapDomToView(_t60);\n\n                if (_t60 && _n50) {\n                  _e53.getSelection().removeAllRanges();\n                }\n              }\n            }\n          } catch (err) {\n            _iterator71.e(err);\n          } finally {\n            _iterator71.f();\n          }\n        }\n      }, {\n        key: \"_removeFakeSelection\",\n        value: function _removeFakeSelection() {\n          var e = this._fakeSelectionContainer;\n\n          if (e) {\n            e.remove();\n          }\n        }\n      }, {\n        key: \"_updateFocus\",\n        value: function _updateFocus() {\n          if (this.isFocused) {\n            var _e54 = this.selection.editableElement;\n\n            if (_e54) {\n              this.domConverter.focus(_e54);\n            }\n          }\n        }\n      }]);\n\n      return Ad;\n    }();\n\n    kr(Ad, Qc);\n\n    function Cd(e) {\n      if (e.getAttribute(\"contenteditable\") == \"false\") {\n        return false;\n      }\n\n      var t = e.findAncestor(function (e) {\n        return e.hasAttribute(\"contenteditable\");\n      });\n      return !t || t.getAttribute(\"contenteditable\") == \"true\";\n    }\n\n    function Td(e, t, n) {\n      var i = t instanceof Array ? t : t.childNodes;\n      var o = i[n];\n\n      if (od(o)) {\n        o.data = cd + o.data;\n        return o;\n      } else {\n        var _o21 = e.createTextNode(cd);\n\n        if (Array.isArray(t)) {\n          i.splice(n, 0, _o21);\n        } else {\n          kd(t, n, _o21);\n        }\n\n        return _o21;\n      }\n    }\n\n    function Md(e, t) {\n      return xd(e) && xd(t) && !od(e) && !od(t) && e.tagName.toLowerCase() === t.tagName.toLowerCase();\n    }\n\n    function Pd(e, t, n) {\n      if (t === n) {\n        return true;\n      } else if (od(t) && od(n)) {\n        return t.data === n.data;\n      } else if (e.isBlockFiller(t) && e.isBlockFiller(n)) {\n        return true;\n      }\n\n      return false;\n    }\n\n    function Ed(e, t) {\n      var n = e.parent;\n\n      if (n.nodeType != Node.ELEMENT_NODE || e.offset != n.childNodes.length - 1) {\n        return;\n      }\n\n      var i = n.childNodes[e.offset];\n\n      if (i && i.tagName == \"BR\") {\n        t.addRange(t.getRangeAt(0));\n      }\n    }\n\n    function Sd(e, t) {\n      var n = Array.from(e);\n\n      if (n.length == 0 || !t) {\n        return n;\n      }\n\n      var i = n[n.length - 1];\n\n      if (i == t) {\n        n.pop();\n      }\n\n      return n;\n    }\n\n    function Id(e) {\n      var t = e.createElement(\"div\");\n      Object.assign(t.style, {\n        position: \"fixed\",\n        top: 0,\n        left: \"-9999px\",\n        width: \"42px\"\n      });\n      t.textContent = \" \";\n      return t;\n    }\n\n    var Od = {\n      window: window,\n      document: document\n    };\n\n    function Nd(e) {\n      var t = 0;\n\n      while (e.previousSibling) {\n        e = e.previousSibling;\n        t++;\n      }\n\n      return t;\n    }\n\n    function Rd(e) {\n      var t = [];\n\n      while (e && e.nodeType != Node.DOCUMENT_NODE) {\n        t.unshift(e);\n        e = e.parentNode;\n      }\n\n      return t;\n    }\n\n    function Ld(e, t) {\n      var n = Rd(e);\n      var i = Rd(t);\n      var o = 0;\n\n      while (n[o] == i[o] && n[o]) {\n        o++;\n      }\n\n      return o === 0 ? null : n[o - 1];\n    }\n\n    var jd = rd(document);\n\n    var Dd = /*#__PURE__*/function () {\n      function Dd(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        _classCallCheck(this, Dd);\n\n        this.document = e;\n        this.blockFillerMode = t.blockFillerMode || \"br\";\n        this.preElements = [\"pre\"];\n        this.blockElements = [\"p\", \"div\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\", \"li\", \"dd\", \"dt\", \"figcaption\"];\n        this._blockFiller = this.blockFillerMode == \"br\" ? rd : sd;\n        this._domToViewMapping = new WeakMap();\n        this._viewToDomMapping = new WeakMap();\n        this._fakeSelectionMapping = new WeakMap();\n      }\n\n      _createClass(Dd, [{\n        key: \"bindFakeSelection\",\n        value: function bindFakeSelection(e, t) {\n          this._fakeSelectionMapping.set(e, new ml(t));\n        }\n      }, {\n        key: \"fakeSelectionToView\",\n        value: function fakeSelectionToView(e) {\n          return this._fakeSelectionMapping.get(e);\n        }\n      }, {\n        key: \"bindElements\",\n        value: function bindElements(e, t) {\n          this._domToViewMapping.set(e, t);\n\n          this._viewToDomMapping.set(t, e);\n        }\n      }, {\n        key: \"unbindDomElement\",\n        value: function unbindDomElement(e) {\n          var t = this._domToViewMapping.get(e);\n\n          if (t) {\n            this._domToViewMapping.delete(e);\n\n            this._viewToDomMapping.delete(t);\n\n            for (var _i38 = 0, _Array$from = Array.from(e.childNodes); _i38 < _Array$from.length; _i38++) {\n              var _t61 = _Array$from[_i38];\n              this.unbindDomElement(_t61);\n            }\n          }\n        }\n      }, {\n        key: \"bindDocumentFragments\",\n        value: function bindDocumentFragments(e, t) {\n          this._domToViewMapping.set(e, t);\n\n          this._viewToDomMapping.set(t, e);\n        }\n      }, {\n        key: \"viewToDom\",\n        value: function viewToDom(e, t) {\n          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n          if (e.is(\"text\")) {\n            var _n51 = this._processDataFromViewText(e);\n\n            return t.createTextNode(_n51);\n          } else {\n            if (this.mapViewToDom(e)) {\n              return this.mapViewToDom(e);\n            }\n\n            var _i39;\n\n            if (e.is(\"documentFragment\")) {\n              _i39 = t.createDocumentFragment();\n\n              if (n.bind) {\n                this.bindDocumentFragments(_i39, e);\n              }\n            } else if (e.is(\"uiElement\")) {\n              _i39 = e.render(t);\n\n              if (n.bind) {\n                this.bindElements(_i39, e);\n              }\n\n              return _i39;\n            } else {\n              if (e.hasAttribute(\"xmlns\")) {\n                _i39 = t.createElementNS(e.getAttribute(\"xmlns\"), e.name);\n              } else {\n                _i39 = t.createElement(e.name);\n              }\n\n              if (n.bind) {\n                this.bindElements(_i39, e);\n              }\n\n              var _iterator72 = _createForOfIteratorHelper(e.getAttributeKeys()),\n                  _step72;\n\n              try {\n                for (_iterator72.s(); !(_step72 = _iterator72.n()).done;) {\n                  var _t62 = _step72.value;\n\n                  _i39.setAttribute(_t62, e.getAttribute(_t62));\n                }\n              } catch (err) {\n                _iterator72.e(err);\n              } finally {\n                _iterator72.f();\n              }\n            }\n\n            if (n.withChildren || n.withChildren === undefined) {\n              var _iterator73 = _createForOfIteratorHelper(this.viewChildrenToDom(e, t, n)),\n                  _step73;\n\n              try {\n                for (_iterator73.s(); !(_step73 = _iterator73.n()).done;) {\n                  var _o22 = _step73.value;\n\n                  _i39.appendChild(_o22);\n                }\n              } catch (err) {\n                _iterator73.e(err);\n              } finally {\n                _iterator73.f();\n              }\n            }\n\n            return _i39;\n          }\n        }\n      }, {\n        key: \"viewChildrenToDom\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function viewChildrenToDom(e, t) {\n          var n,\n              i,\n              o,\n              _iterator74,\n              _step74,\n              _s9,\n              _args11 = arguments;\n\n          return _regeneratorRuntime().wrap(function viewChildrenToDom$(_context11) {\n            while (1) {\n              switch (_context11.prev = _context11.next) {\n                case 0:\n                  n = _args11.length > 2 && _args11[2] !== undefined ? _args11[2] : {};\n                  i = e.getFillerOffset && e.getFillerOffset();\n                  o = 0;\n                  _iterator74 = _createForOfIteratorHelper(e.getChildren());\n                  _context11.prev = 4;\n\n                  _iterator74.s();\n\n                case 6:\n                  if ((_step74 = _iterator74.n()).done) {\n                    _context11.next = 16;\n                    break;\n                  }\n\n                  _s9 = _step74.value;\n\n                  if (!(i === o)) {\n                    _context11.next = 11;\n                    break;\n                  }\n\n                  _context11.next = 11;\n                  return this._blockFiller(t);\n\n                case 11:\n                  _context11.next = 13;\n                  return this.viewToDom(_s9, t, n);\n\n                case 13:\n                  o++;\n\n                case 14:\n                  _context11.next = 6;\n                  break;\n\n                case 16:\n                  _context11.next = 21;\n                  break;\n\n                case 18:\n                  _context11.prev = 18;\n                  _context11.t0 = _context11[\"catch\"](4);\n\n                  _iterator74.e(_context11.t0);\n\n                case 21:\n                  _context11.prev = 21;\n\n                  _iterator74.f();\n\n                  return _context11.finish(21);\n\n                case 24:\n                  if (!(i === o)) {\n                    _context11.next = 27;\n                    break;\n                  }\n\n                  _context11.next = 27;\n                  return this._blockFiller(t);\n\n                case 27:\n                case \"end\":\n                  return _context11.stop();\n              }\n            }\n          }, viewChildrenToDom, this, [[4, 18, 21, 24]]);\n        })\n      }, {\n        key: \"viewRangeToDom\",\n        value: function viewRangeToDom(e) {\n          var t = this.viewPositionToDom(e.start);\n          var n = this.viewPositionToDom(e.end);\n          var i = document.createRange();\n          i.setStart(t.parent, t.offset);\n          i.setEnd(n.parent, n.offset);\n          return i;\n        }\n      }, {\n        key: \"viewPositionToDom\",\n        value: function viewPositionToDom(e) {\n          var t = e.parent;\n\n          if (t.is(\"text\")) {\n            var _n52 = this.findCorrespondingDomText(t);\n\n            if (!_n52) {\n              return null;\n            }\n\n            var _i40 = e.offset;\n\n            if (ld(_n52)) {\n              _i40 += ad;\n            }\n\n            return {\n              parent: _n52,\n              offset: _i40\n            };\n          } else {\n            var _n53, _i41, _o23;\n\n            if (e.offset === 0) {\n              _n53 = this.mapViewToDom(t);\n\n              if (!_n53) {\n                return null;\n              }\n\n              _o23 = _n53.childNodes[0];\n            } else {\n              var _t63 = e.nodeBefore;\n              _i41 = _t63.is(\"text\") ? this.findCorrespondingDomText(_t63) : this.mapViewToDom(e.nodeBefore);\n\n              if (!_i41) {\n                return null;\n              }\n\n              _n53 = _i41.parentNode;\n              _o23 = _i41.nextSibling;\n            }\n\n            if (od(_o23) && ld(_o23)) {\n              return {\n                parent: _o23,\n                offset: ad\n              };\n            }\n\n            var _s10 = _i41 ? Nd(_i41) + 1 : 0;\n\n            return {\n              parent: _n53,\n              offset: _s10\n            };\n          }\n        }\n      }, {\n        key: \"domToView\",\n        value: function domToView(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n          if (this.isBlockFiller(e, this.blockFillerMode)) {\n            return null;\n          }\n\n          var n = this.getParentUIElement(e, this._domToViewMapping);\n\n          if (n) {\n            return n;\n          }\n\n          if (od(e)) {\n            if (dd(e)) {\n              return null;\n            } else {\n              var _t64 = this._processDataFromDomText(e);\n\n              return _t64 === \"\" ? null : new zr(this.document, _t64);\n            }\n          } else if (this.isComment(e)) {\n            return null;\n          } else {\n            if (this.mapDomToView(e)) {\n              return this.mapDomToView(e);\n            }\n\n            var _n54;\n\n            if (this.isDocumentFragment(e)) {\n              _n54 = new Wl(this.document);\n\n              if (t.bind) {\n                this.bindDocumentFragments(e, _n54);\n              }\n            } else {\n              var _i42 = t.keepOriginalCase ? e.tagName : e.tagName.toLowerCase();\n\n              _n54 = new Dc(this.document, _i42);\n\n              if (t.bind) {\n                this.bindElements(e, _n54);\n              }\n\n              var _o24 = e.attributes;\n\n              for (var _e55 = _o24.length - 1; _e55 >= 0; _e55--) {\n                _n54._setAttribute(_o24[_e55].name, _o24[_e55].value);\n              }\n            }\n\n            if (t.withChildren || t.withChildren === undefined) {\n              var _iterator75 = _createForOfIteratorHelper(this.domChildrenToView(e, t)),\n                  _step75;\n\n              try {\n                for (_iterator75.s(); !(_step75 = _iterator75.n()).done;) {\n                  var _i43 = _step75.value;\n\n                  _n54._appendChild(_i43);\n                }\n              } catch (err) {\n                _iterator75.e(err);\n              } finally {\n                _iterator75.f();\n              }\n            }\n\n            return _n54;\n          }\n        }\n      }, {\n        key: \"domChildrenToView\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function domChildrenToView(e) {\n          var t,\n              _n55,\n              _i44,\n              _o25,\n              _args12 = arguments;\n\n          return _regeneratorRuntime().wrap(function domChildrenToView$(_context12) {\n            while (1) {\n              switch (_context12.prev = _context12.next) {\n                case 0:\n                  t = _args12.length > 1 && _args12[1] !== undefined ? _args12[1] : {};\n                  _n55 = 0;\n\n                case 2:\n                  if (!(_n55 < e.childNodes.length)) {\n                    _context12.next = 11;\n                    break;\n                  }\n\n                  _i44 = e.childNodes[_n55];\n                  _o25 = this.domToView(_i44, t);\n\n                  if (!(_o25 !== null)) {\n                    _context12.next = 8;\n                    break;\n                  }\n\n                  _context12.next = 8;\n                  return _o25;\n\n                case 8:\n                  _n55++;\n                  _context12.next = 2;\n                  break;\n\n                case 11:\n                case \"end\":\n                  return _context12.stop();\n              }\n            }\n          }, domChildrenToView, this);\n        })\n      }, {\n        key: \"domSelectionToView\",\n        value: function domSelectionToView(e) {\n          if (e.rangeCount === 1) {\n            var _t65 = e.getRangeAt(0).startContainer;\n\n            if (od(_t65)) {\n              _t65 = _t65.parentNode;\n            }\n\n            var _n56 = this.fakeSelectionToView(_t65);\n\n            if (_n56) {\n              return _n56;\n            }\n          }\n\n          var t = this.isDomSelectionBackward(e);\n          var n = [];\n\n          for (var _t66 = 0; _t66 < e.rangeCount; _t66++) {\n            var _i45 = e.getRangeAt(_t66);\n\n            var _o26 = this.domRangeToView(_i45);\n\n            if (_o26) {\n              n.push(_o26);\n            }\n          }\n\n          return new ml(n, {\n            backward: t\n          });\n        }\n      }, {\n        key: \"domRangeToView\",\n        value: function domRangeToView(e) {\n          var t = this.domPositionToView(e.startContainer, e.startOffset);\n          var n = this.domPositionToView(e.endContainer, e.endOffset);\n\n          if (t && n) {\n            return new ul(t, n);\n          }\n\n          return null;\n        }\n      }, {\n        key: \"domPositionToView\",\n        value: function domPositionToView(e, t) {\n          if (this.isBlockFiller(e, this.blockFillerMode)) {\n            return this.domPositionToView(e.parentNode, Nd(e));\n          }\n\n          var n = this.mapDomToView(e);\n\n          if (n && n.is(\"uiElement\")) {\n            return dl._createBefore(n);\n          }\n\n          if (od(e)) {\n            if (dd(e)) {\n              return this.domPositionToView(e.parentNode, Nd(e));\n            }\n\n            var _n57 = this.findCorrespondingViewText(e);\n\n            var _i46 = t;\n\n            if (!_n57) {\n              return null;\n            }\n\n            if (ld(e)) {\n              _i46 -= ad;\n              _i46 = _i46 < 0 ? 0 : _i46;\n            }\n\n            return new dl(_n57, _i46);\n          } else {\n            if (t === 0) {\n              var _t67 = this.mapDomToView(e);\n\n              if (_t67) {\n                return new dl(_t67, 0);\n              }\n            } else {\n              var _n58 = e.childNodes[t - 1];\n\n              var _i47 = od(_n58) ? this.findCorrespondingViewText(_n58) : this.mapDomToView(_n58);\n\n              if (_i47 && _i47.parent) {\n                return new dl(_i47.parent, _i47.index + 1);\n              }\n            }\n\n            return null;\n          }\n        }\n      }, {\n        key: \"mapDomToView\",\n        value: function mapDomToView(e) {\n          return this.getParentUIElement(e) || this._domToViewMapping.get(e);\n        }\n      }, {\n        key: \"findCorrespondingViewText\",\n        value: function findCorrespondingViewText(e) {\n          if (dd(e)) {\n            return null;\n          }\n\n          var t = this.getParentUIElement(e);\n\n          if (t) {\n            return t;\n          }\n\n          var n = e.previousSibling;\n\n          if (n) {\n            if (!this.isElement(n)) {\n              return null;\n            }\n\n            var _e56 = this.mapDomToView(n);\n\n            if (_e56) {\n              var _t68 = _e56.nextSibling;\n\n              if (_t68 instanceof zr) {\n                return _e56.nextSibling;\n              } else {\n                return null;\n              }\n            }\n          } else {\n            var _t69 = this.mapDomToView(e.parentNode);\n\n            if (_t69) {\n              var _e57 = _t69.getChild(0);\n\n              if (_e57 instanceof zr) {\n                return _e57;\n              } else {\n                return null;\n              }\n            }\n          }\n\n          return null;\n        }\n      }, {\n        key: \"mapViewToDom\",\n        value: function mapViewToDom(e) {\n          return this._viewToDomMapping.get(e);\n        }\n      }, {\n        key: \"findCorrespondingDomText\",\n        value: function findCorrespondingDomText(e) {\n          var t = e.previousSibling;\n\n          if (t && this.mapViewToDom(t)) {\n            return this.mapViewToDom(t).nextSibling;\n          }\n\n          if (!t && e.parent && this.mapViewToDom(e.parent)) {\n            return this.mapViewToDom(e.parent).childNodes[0];\n          }\n\n          return null;\n        }\n      }, {\n        key: \"focus\",\n        value: function focus(e) {\n          var t = this.mapViewToDom(e);\n\n          if (t && t.ownerDocument.activeElement !== t) {\n            var _Od$window = Od.window,\n                _e58 = _Od$window.scrollX,\n                _n59 = _Od$window.scrollY;\n            var _i48 = [];\n            Bd(t, function (e) {\n              var t = e.scrollLeft,\n                  n = e.scrollTop;\n\n              _i48.push([t, n]);\n            });\n            t.focus();\n            Bd(t, function (e) {\n              var _i48$shift = _i48.shift(),\n                  _i48$shift2 = _slicedToArray(_i48$shift, 2),\n                  t = _i48$shift2[0],\n                  n = _i48$shift2[1];\n\n              e.scrollLeft = t;\n              e.scrollTop = n;\n            });\n            Od.window.scrollTo(_e58, _n59);\n          }\n        }\n      }, {\n        key: \"isElement\",\n        value: function isElement(e) {\n          return e && e.nodeType == Node.ELEMENT_NODE;\n        }\n      }, {\n        key: \"isDocumentFragment\",\n        value: function isDocumentFragment(e) {\n          return e && e.nodeType == Node.DOCUMENT_FRAGMENT_NODE;\n        }\n      }, {\n        key: \"isComment\",\n        value: function isComment(e) {\n          return e && e.nodeType == Node.COMMENT_NODE;\n        }\n      }, {\n        key: \"isBlockFiller\",\n        value: function isBlockFiller(e) {\n          if (this.blockFillerMode == \"br\") {\n            return e.isEqualNode(jd);\n          }\n\n          if (e.tagName === \"BR\" && Fd(e, this.blockElements) && e.parentNode.childNodes.length === 1) {\n            return true;\n          }\n\n          return Vd(e, this.blockElements);\n        }\n      }, {\n        key: \"isDomSelectionBackward\",\n        value: function isDomSelectionBackward(e) {\n          if (e.isCollapsed) {\n            return false;\n          }\n\n          var t = document.createRange();\n          t.setStart(e.anchorNode, e.anchorOffset);\n          t.setEnd(e.focusNode, e.focusOffset);\n          var n = t.collapsed;\n          t.detach();\n          return n;\n        }\n      }, {\n        key: \"getParentUIElement\",\n        value: function getParentUIElement(e) {\n          var t = Rd(e);\n          t.pop();\n\n          while (t.length) {\n            var _e59 = t.pop();\n\n            var _n60 = this._domToViewMapping.get(_e59);\n\n            if (_n60 && _n60.is(\"uiElement\")) {\n              return _n60;\n            }\n          }\n\n          return null;\n        }\n      }, {\n        key: \"isDomSelectionCorrect\",\n        value: function isDomSelectionCorrect(e) {\n          return this._isDomSelectionPositionCorrect(e.anchorNode, e.anchorOffset) && this._isDomSelectionPositionCorrect(e.focusNode, e.focusOffset);\n        }\n      }, {\n        key: \"_isDomSelectionPositionCorrect\",\n        value: function _isDomSelectionPositionCorrect(e, t) {\n          if (od(e) && ld(e) && t < ad) {\n            return false;\n          }\n\n          if (this.isElement(e) && ld(e.childNodes[t])) {\n            return false;\n          }\n\n          var n = this.mapDomToView(e);\n\n          if (n && n.is(\"uiElement\")) {\n            return false;\n          }\n\n          return true;\n        }\n      }, {\n        key: \"_processDataFromViewText\",\n        value: function _processDataFromViewText(e) {\n          var _this25 = this;\n\n          var t = e.data;\n\n          if (e.getAncestors().some(function (e) {\n            return _this25.preElements.includes(e.name);\n          })) {\n            return t;\n          }\n\n          if (t.charAt(0) == \" \") {\n            var _n61 = this._getTouchingViewTextNode(e, false);\n\n            var _i49 = _n61 && this._nodeEndsWithSpace(_n61);\n\n            if (_i49 || !_n61) {\n              t = \" \" + t.substr(1);\n            }\n          }\n\n          if (t.charAt(t.length - 1) == \" \") {\n            var _n62 = this._getTouchingViewTextNode(e, true);\n\n            if (t.charAt(t.length - 2) == \" \" || !_n62 || _n62.data.charAt(0) == \" \") {\n              t = t.substr(0, t.length - 1) + \" \";\n            }\n          }\n\n          return t.replace(/ {2}/g, \"  \");\n        }\n      }, {\n        key: \"_nodeEndsWithSpace\",\n        value: function _nodeEndsWithSpace(e) {\n          var _this26 = this;\n\n          if (e.getAncestors().some(function (e) {\n            return _this26.preElements.includes(e.name);\n          })) {\n            return false;\n          }\n\n          var t = this._processDataFromViewText(e);\n\n          return t.charAt(t.length - 1) == \" \";\n        }\n      }, {\n        key: \"_processDataFromDomText\",\n        value: function _processDataFromDomText(e) {\n          var t = e.data;\n\n          if (zd(e, this.preElements)) {\n            return ud(e);\n          }\n\n          t = t.replace(/[ \\n\\t\\r]{1,}/g, \" \");\n\n          var n = this._getTouchingInlineDomNode(e, false);\n\n          var i = this._getTouchingInlineDomNode(e, true);\n\n          var o = this._checkShouldLeftTrimDomText(n);\n\n          var s = this._checkShouldRightTrimDomText(e, i);\n\n          if (o) {\n            t = t.replace(/^ /, \"\");\n          }\n\n          if (s) {\n            t = t.replace(/ $/, \"\");\n          }\n\n          t = ud(new Text(t));\n          t = t.replace(/ \\u00A0/g, \"  \");\n\n          if (/( |\\u00A0)\\u00A0$/.test(t) || !i || i.data && i.data.charAt(0) == \" \") {\n            t = t.replace(/\\u00A0$/, \" \");\n          }\n\n          if (o) {\n            t = t.replace(/^\\u00A0/, \" \");\n          }\n\n          return t;\n        }\n      }, {\n        key: \"_checkShouldLeftTrimDomText\",\n        value: function _checkShouldLeftTrimDomText(e) {\n          if (!e) {\n            return true;\n          }\n\n          if (Js(e)) {\n            return true;\n          }\n\n          return /[^\\S\\u00A0]/.test(e.data.charAt(e.data.length - 1));\n        }\n      }, {\n        key: \"_checkShouldRightTrimDomText\",\n        value: function _checkShouldRightTrimDomText(e, t) {\n          if (t) {\n            return false;\n          }\n\n          return !ld(e);\n        }\n      }, {\n        key: \"_getTouchingViewTextNode\",\n        value: function _getTouchingViewTextNode(e, t) {\n          var n = new ll({\n            startPosition: t ? dl._createAfter(e) : dl._createBefore(e),\n            direction: t ? \"forward\" : \"backward\"\n          });\n\n          var _iterator76 = _createForOfIteratorHelper(n),\n              _step76;\n\n          try {\n            for (_iterator76.s(); !(_step76 = _iterator76.n()).done;) {\n              var _e60 = _step76.value;\n\n              if (_e60.item.is(\"containerElement\")) {\n                return null;\n              } else if (_e60.item.is(\"br\")) {\n                return null;\n              } else if (_e60.item.is(\"textProxy\")) {\n                return _e60.item;\n              }\n            }\n          } catch (err) {\n            _iterator76.e(err);\n          } finally {\n            _iterator76.f();\n          }\n\n          return null;\n        }\n      }, {\n        key: \"_getTouchingInlineDomNode\",\n        value: function _getTouchingInlineDomNode(e, t) {\n          if (!e.parentNode) {\n            return null;\n          }\n\n          var n = t ? \"nextNode\" : \"previousNode\";\n          var i = e.ownerDocument;\n          var o = Rd(e)[0];\n          var s = i.createTreeWalker(o, NodeFilter.SHOW_TEXT | NodeFilter.SHOW_ELEMENT, {\n            acceptNode: function acceptNode(e) {\n              if (od(e)) {\n                return NodeFilter.FILTER_ACCEPT;\n              }\n\n              if (e.tagName == \"BR\") {\n                return NodeFilter.FILTER_ACCEPT;\n              }\n\n              return NodeFilter.FILTER_SKIP;\n            }\n          });\n          s.currentNode = e;\n          var r = s[n]();\n\n          if (r !== null) {\n            var _t70 = Ld(e, r);\n\n            if (_t70 && !zd(e, this.blockElements, _t70) && !zd(r, this.blockElements, _t70)) {\n              return r;\n            }\n          }\n\n          return null;\n        }\n      }]);\n\n      return Dd;\n    }();\n\n    function zd(e, t, n) {\n      var i = Rd(e);\n\n      if (n) {\n        i = i.slice(i.indexOf(n) + 1);\n      }\n\n      return i.some(function (e) {\n        return e.tagName && t.includes(e.tagName.toLowerCase());\n      });\n    }\n\n    function Bd(e, t) {\n      while (e && e != Od.document) {\n        t(e);\n        e = e.parentNode;\n      }\n    }\n\n    function Vd(e, t) {\n      var n = od(e) && e.data == \" \";\n      return n && Fd(e, t) && e.parentNode.childNodes.length === 1;\n    }\n\n    function Fd(e, t) {\n      var n = e.parentNode;\n      return n && n.tagName && t.includes(n.tagName.toLowerCase());\n    }\n\n    function Hd(e) {\n      var t = Object.prototype.toString.apply(e);\n\n      if (t == \"[object Window]\") {\n        return true;\n      }\n\n      if (t == \"[object global]\") {\n        return true;\n      }\n\n      return false;\n    }\n\n    var Ud = Wc({}, dr, {\n      listenTo: function listenTo(e) {\n        var _dr$listenTo;\n\n        for (var _len15 = arguments.length, t = new Array(_len15 > 1 ? _len15 - 1 : 0), _key15 = 1; _key15 < _len15; _key15++) {\n          t[_key15 - 1] = arguments[_key15];\n        }\n\n        if (xd(e) || Hd(e)) {\n          var _n63 = this._getProxyEmitter(e) || new $d(e);\n\n          _n63.attach.apply(_n63, t);\n\n          e = _n63;\n        }\n\n        (_dr$listenTo = dr.listenTo).call.apply(_dr$listenTo, [this, e].concat(t));\n      },\n      stopListening: function stopListening(e, t, n) {\n        if (xd(e) || Hd(e)) {\n          var _t71 = this._getProxyEmitter(e);\n\n          if (!_t71) {\n            return;\n          }\n\n          e = _t71;\n        }\n\n        dr.stopListening.call(this, e, t, n);\n\n        if (e instanceof $d) {\n          e.detach(t);\n        }\n      },\n      _getProxyEmitter: function _getProxyEmitter(e) {\n        return ur(this, qd(e));\n      }\n    });\n    var Wd = Ud;\n\n    var $d = /*#__PURE__*/_createClass(function $d(e) {\n      _classCallCheck(this, $d);\n\n      hr(this, qd(e));\n      this._domNode = e;\n    });\n\n    Wc($d.prototype, dr, {\n      attach: function attach(e, t) {\n        var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n        if (this._domListeners && this._domListeners[e]) {\n          return;\n        }\n\n        var i = this._createDomListener(e, !!n.useCapture);\n\n        this._domNode.addEventListener(e, i, !!n.useCapture);\n\n        if (!this._domListeners) {\n          this._domListeners = {};\n        }\n\n        this._domListeners[e] = i;\n      },\n      detach: function detach(e) {\n        var t;\n\n        if (this._domListeners[e] && (!(t = this._events[e]) || !t.callbacks.length)) {\n          this._domListeners[e].removeListener();\n        }\n      },\n      _createDomListener: function _createDomListener(e, t) {\n        var _this27 = this;\n\n        var n = function n(t) {\n          _this27.fire(e, t);\n        };\n\n        n.removeListener = function () {\n          _this27._domNode.removeEventListener(e, n, t);\n\n          delete _this27._domListeners[e];\n        };\n\n        return n;\n      }\n    });\n\n    function qd(e) {\n      return e[\"data-ck-expando\"] || (e[\"data-ck-expando\"] = nr());\n    }\n\n    var Yd = /*#__PURE__*/function () {\n      function Yd(e) {\n        _classCallCheck(this, Yd);\n\n        this.view = e;\n        this.document = e.document;\n        this.isEnabled = false;\n      }\n\n      _createClass(Yd, [{\n        key: \"enable\",\n        value: function enable() {\n          this.isEnabled = true;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this.isEnabled = false;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.disable();\n          this.stopListening();\n        }\n      }]);\n\n      return Yd;\n    }();\n\n    kr(Yd, Wd);\n    var Jd = \"__lodash_hash_undefined__\";\n\n    function Qd(e) {\n      this.__data__.set(e, Jd);\n\n      return this;\n    }\n\n    var Xd = Qd;\n\n    function Gd(e) {\n      return this.__data__.has(e);\n    }\n\n    var Kd = Gd;\n\n    function Zd(e) {\n      var t = -1,\n          n = e == null ? 0 : e.length;\n      this.__data__ = new vt();\n\n      while (++t < n) {\n        this.add(e[t]);\n      }\n    }\n\n    Zd.prototype.add = Zd.prototype.push = Xd;\n    Zd.prototype.has = Kd;\n    var eu = Zd;\n\n    function tu(e, t) {\n      var n = -1,\n          i = e == null ? 0 : e.length;\n\n      while (++n < i) {\n        if (t(e[n], n, e)) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n    var nu = tu;\n\n    function iu(e, t) {\n      return e.has(t);\n    }\n\n    var ou = iu;\n    var su = 1,\n        ru = 2;\n\n    function au(e, t, n, i, o, s) {\n      var r = n & su,\n          a = e.length,\n          c = t.length;\n\n      if (a != c && !(r && c > a)) {\n        return false;\n      }\n\n      var l = s.get(e);\n\n      if (l && s.get(t)) {\n        return l == t;\n      }\n\n      var d = -1,\n          u = true,\n          h = n & ru ? new eu() : undefined;\n      s.set(e, t);\n      s.set(t, e);\n\n      while (++d < a) {\n        var f = e[d],\n            m = t[d];\n\n        if (i) {\n          var g = r ? i(m, f, d, t, e, s) : i(f, m, d, e, t, s);\n        }\n\n        if (g !== undefined) {\n          if (g) {\n            continue;\n          }\n\n          u = false;\n          break;\n        }\n\n        if (h) {\n          if (!nu(t, function (e, t) {\n            if (!ou(h, t) && (f === e || o(f, e, n, i, s))) {\n              return h.push(t);\n            }\n          })) {\n            u = false;\n            break;\n          }\n        } else if (!(f === m || o(f, m, n, i, s))) {\n          u = false;\n          break;\n        }\n      }\n\n      s[\"delete\"](e);\n      s[\"delete\"](t);\n      return u;\n    }\n\n    var cu = au;\n\n    function lu(e) {\n      var t = -1,\n          n = Array(e.size);\n      e.forEach(function (e, i) {\n        n[++t] = [i, e];\n      });\n      return n;\n    }\n\n    var du = lu;\n\n    function uu(e) {\n      var t = -1,\n          n = Array(e.size);\n      e.forEach(function (e) {\n        n[++t] = e;\n      });\n      return n;\n    }\n\n    var hu = uu;\n    var fu = 1,\n        mu = 2;\n    var gu = \"[object Boolean]\",\n        pu = \"[object Date]\",\n        bu = \"[object Error]\",\n        wu = \"[object Map]\",\n        _u = \"[object Number]\",\n        vu = \"[object RegExp]\",\n        ku = \"[object Set]\",\n        yu = \"[object String]\",\n        xu = \"[object Symbol]\";\n    var Au = \"[object ArrayBuffer]\",\n        Cu = \"[object DataView]\";\n    var Tu = s ? s.prototype : undefined,\n        Mu = Tu ? Tu.valueOf : undefined;\n\n    function Pu(e, t, n, i, o, s, r) {\n      switch (n) {\n        case Cu:\n          if (e.byteLength != t.byteLength || e.byteOffset != t.byteOffset) {\n            return false;\n          }\n\n          e = e.buffer;\n          t = t.buffer;\n\n        case Au:\n          if (e.byteLength != t.byteLength || !s(new fo(e), new fo(t))) {\n            return false;\n          }\n\n          return true;\n\n        case gu:\n        case pu:\n        case _u:\n          return z(+e, +t);\n\n        case bu:\n          return e.name == t.name && e.message == t.message;\n\n        case vu:\n        case yu:\n          return e == t + \"\";\n\n        case wu:\n          var a = du;\n\n        case ku:\n          var c = i & fu;\n          a || (a = hu);\n\n          if (e.size != t.size && !c) {\n            return false;\n          }\n\n          var l = r.get(e);\n\n          if (l) {\n            return l == t;\n          }\n\n          i |= mu;\n          r.set(e, t);\n          var d = cu(a(e), a(t), i, o, s, r);\n          r[\"delete\"](e);\n          return d;\n\n        case xu:\n          if (Mu) {\n            return Mu.call(e) == Mu.call(t);\n          }\n\n      }\n\n      return false;\n    }\n\n    var Eu = Pu;\n    var Su = 1;\n    var Iu = Object.prototype;\n    var Ou = Iu.hasOwnProperty;\n\n    function Nu(e, t, n, i, o, s) {\n      var r = n & Su,\n          a = Di(e),\n          c = a.length,\n          l = Di(t),\n          d = l.length;\n\n      if (c != d && !r) {\n        return false;\n      }\n\n      var u = c;\n\n      while (u--) {\n        var h = a[u];\n\n        if (!(r ? h in t : Ou.call(t, h))) {\n          return false;\n        }\n      }\n\n      var f = s.get(e);\n\n      if (f && s.get(t)) {\n        return f == t;\n      }\n\n      var m = true;\n      s.set(e, t);\n      s.set(t, e);\n      var g = r;\n\n      while (++u < c) {\n        h = a[u];\n        var p = e[h],\n            b = t[h];\n\n        if (i) {\n          var w = r ? i(b, p, h, t, e, s) : i(p, b, h, e, t, s);\n        }\n\n        if (!(w === undefined ? p === b || o(p, b, n, i, s) : w)) {\n          m = false;\n          break;\n        }\n\n        g || (g = h == \"constructor\");\n      }\n\n      if (m && !g) {\n        var _ = e.constructor,\n            v = t.constructor;\n\n        if (_ != v && \"constructor\" in e && \"constructor\" in t && !(typeof _ == \"function\" && _ instanceof _ && typeof v == \"function\" && v instanceof v)) {\n          m = false;\n        }\n      }\n\n      s[\"delete\"](e);\n      s[\"delete\"](t);\n      return m;\n    }\n\n    var Ru = Nu;\n    var Lu = 1;\n    var ju = \"[object Arguments]\",\n        Du = \"[object Array]\",\n        zu = \"[object Object]\";\n    var Bu = Object.prototype;\n    var Vu = Bu.hasOwnProperty;\n\n    function Fu(e, t, n, i, o, s) {\n      var r = Qt(e),\n          a = Qt(t),\n          c = r ? Du : ro(e),\n          l = a ? Du : ro(t);\n      c = c == ju ? zu : c;\n      l = l == ju ? zu : l;\n      var d = c == zu,\n          u = l == zu,\n          h = c == l;\n\n      if (h && Object(Xt[\"a\"])(e)) {\n        if (!Object(Xt[\"a\"])(t)) {\n          return false;\n        }\n\n        r = true;\n        d = false;\n      }\n\n      if (h && !d) {\n        s || (s = new Ct());\n        return r || Dn(e) ? cu(e, t, n, i, o, s) : Eu(e, t, c, n, i, o, s);\n      }\n\n      if (!(n & Lu)) {\n        var f = d && Vu.call(e, \"__wrapped__\"),\n            m = u && Vu.call(t, \"__wrapped__\");\n\n        if (f || m) {\n          var g = f ? e.value() : e,\n              p = m ? t.value() : t;\n          s || (s = new Ct());\n          return o(g, p, n, i, s);\n        }\n      }\n\n      if (!h) {\n        return false;\n      }\n\n      s || (s = new Ct());\n      return Ru(e, t, n, i, o, s);\n    }\n\n    var Hu = Fu;\n\n    function Uu(e, t, n, i, o) {\n      if (e === t) {\n        return true;\n      }\n\n      if (e == null || t == null || !T(e) && !T(t)) {\n        return e !== e && t !== t;\n      }\n\n      return Hu(e, t, n, i, Uu, o);\n    }\n\n    var Wu = Uu;\n\n    function $u(e, t, n) {\n      n = typeof n == \"function\" ? n : undefined;\n      var i = n ? n(e, t) : undefined;\n      return i === undefined ? Wu(e, t, undefined, n) : !!i;\n    }\n\n    var qu = $u;\n\n    var Yu = /*#__PURE__*/function (_Yd) {\n      _inherits(Yu, _Yd);\n\n      var _super10 = _createSuper(Yu);\n\n      function Yu(e) {\n        var _this28;\n\n        _classCallCheck(this, Yu);\n\n        _this28 = _super10.call(this, e);\n        _this28._config = {\n          childList: true,\n          characterData: true,\n          characterDataOldValue: true,\n          subtree: true\n        };\n        _this28.domConverter = e.domConverter;\n        _this28.renderer = e._renderer;\n        _this28._domElements = [];\n        _this28._mutationObserver = new window.MutationObserver(_this28._onMutations.bind(_assertThisInitialized(_this28)));\n        return _this28;\n      }\n\n      _createClass(Yu, [{\n        key: \"flush\",\n        value: function flush() {\n          this._onMutations(this._mutationObserver.takeRecords());\n        }\n      }, {\n        key: \"observe\",\n        value: function observe(e) {\n          this._domElements.push(e);\n\n          if (this.isEnabled) {\n            this._mutationObserver.observe(e, this._config);\n          }\n        }\n      }, {\n        key: \"enable\",\n        value: function enable() {\n          _get(_getPrototypeOf(Yu.prototype), \"enable\", this).call(this);\n\n          var _iterator77 = _createForOfIteratorHelper(this._domElements),\n              _step77;\n\n          try {\n            for (_iterator77.s(); !(_step77 = _iterator77.n()).done;) {\n              var _e61 = _step77.value;\n\n              this._mutationObserver.observe(_e61, this._config);\n            }\n          } catch (err) {\n            _iterator77.e(err);\n          } finally {\n            _iterator77.f();\n          }\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          _get(_getPrototypeOf(Yu.prototype), \"disable\", this).call(this);\n\n          this._mutationObserver.disconnect();\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          _get(_getPrototypeOf(Yu.prototype), \"destroy\", this).call(this);\n\n          this._mutationObserver.disconnect();\n        }\n      }, {\n        key: \"_onMutations\",\n        value: function _onMutations(e) {\n          if (e.length === 0) {\n            return;\n          }\n\n          var t = this.domConverter;\n          var n = new Map();\n          var i = new Set();\n\n          var _iterator78 = _createForOfIteratorHelper(e),\n              _step78;\n\n          try {\n            for (_iterator78.s(); !(_step78 = _iterator78.n()).done;) {\n              var _n65 = _step78.value;\n\n              if (_n65.type === \"childList\") {\n                var _e63 = t.mapDomToView(_n65.target);\n\n                if (_e63 && _e63.is(\"uiElement\")) {\n                  continue;\n                }\n\n                if (_e63 && !this._isBogusBrMutation(_n65)) {\n                  i.add(_e63);\n                }\n              }\n            }\n          } catch (err) {\n            _iterator78.e(err);\n          } finally {\n            _iterator78.f();\n          }\n\n          var _iterator79 = _createForOfIteratorHelper(e),\n              _step79;\n\n          try {\n            for (_iterator79.s(); !(_step79 = _iterator79.n()).done;) {\n              var _o27 = _step79.value;\n\n              var _e64 = t.mapDomToView(_o27.target);\n\n              if (_e64 && _e64.is(\"uiElement\")) {\n                continue;\n              }\n\n              if (_o27.type === \"characterData\") {\n                var _e65 = t.findCorrespondingViewText(_o27.target);\n\n                if (_e65 && !i.has(_e65.parent)) {\n                  n.set(_e65, {\n                    type: \"text\",\n                    oldText: _e65.data,\n                    newText: ud(_o27.target),\n                    node: _e65\n                  });\n                } else if (!_e65 && ld(_o27.target)) {\n                  i.add(t.mapDomToView(_o27.target.parentNode));\n                }\n              }\n            }\n          } catch (err) {\n            _iterator79.e(err);\n          } finally {\n            _iterator79.f();\n          }\n\n          var o = [];\n\n          var _iterator80 = _createForOfIteratorHelper(n.values()),\n              _step80;\n\n          try {\n            for (_iterator80.s(); !(_step80 = _iterator80.n()).done;) {\n              var _e66 = _step80.value;\n              this.renderer.markToSync(\"text\", _e66.node);\n              o.push(_e66);\n            }\n          } catch (err) {\n            _iterator80.e(err);\n          } finally {\n            _iterator80.f();\n          }\n\n          var _iterator81 = _createForOfIteratorHelper(i),\n              _step81;\n\n          try {\n            for (_iterator81.s(); !(_step81 = _iterator81.n()).done;) {\n              var _e67 = _step81.value;\n\n              var _n66 = t.mapViewToDom(_e67);\n\n              var _i50 = Array.from(_e67.getChildren());\n\n              var _s11 = Array.from(t.domChildrenToView(_n66, {\n                withChildren: false\n              }));\n\n              if (!qu(_i50, _s11, a)) {\n                this.renderer.markToSync(\"children\", _e67);\n                o.push({\n                  type: \"children\",\n                  oldChildren: _i50,\n                  newChildren: _s11,\n                  node: _e67\n                });\n              }\n            }\n          } catch (err) {\n            _iterator81.e(err);\n          } finally {\n            _iterator81.f();\n          }\n\n          var s = e[0].target.ownerDocument.getSelection();\n          var r = null;\n\n          if (s && s.anchorNode) {\n            var _e62 = t.domPositionToView(s.anchorNode, s.anchorOffset);\n\n            var _n64 = t.domPositionToView(s.focusNode, s.focusOffset);\n\n            if (_e62 && _n64) {\n              r = new ml(_e62);\n              r.setFocus(_n64);\n            }\n          }\n\n          if (o.length) {\n            this.document.fire(\"mutations\", o, r);\n            this.view.forceRender();\n          }\n\n          function a(e, t) {\n            if (Array.isArray(e)) {\n              return;\n            }\n\n            if (e === t) {\n              return true;\n            } else if (e.is(\"text\") && t.is(\"text\")) {\n              return e.data === t.data;\n            }\n\n            return false;\n          }\n        }\n      }, {\n        key: \"_isBogusBrMutation\",\n        value: function _isBogusBrMutation(e) {\n          var t = null;\n\n          if (e.nextSibling === null && e.removedNodes.length === 0 && e.addedNodes.length == 1) {\n            t = this.domConverter.domToView(e.addedNodes[0], {\n              withChildren: false\n            });\n          }\n\n          return t && t.is(\"element\", \"br\");\n        }\n      }]);\n\n      return Yu;\n    }(Yd);\n\n    var Ju = /*#__PURE__*/function () {\n      function Ju(e, t, n) {\n        _classCallCheck(this, Ju);\n\n        this.view = e;\n        this.document = e.document;\n        this.domEvent = t;\n        this.domTarget = t.target;\n        Wc(this, n);\n      }\n\n      _createClass(Ju, [{\n        key: \"target\",\n        get: function get() {\n          return this.view.domConverter.mapDomToView(this.domTarget);\n        }\n      }, {\n        key: \"preventDefault\",\n        value: function preventDefault() {\n          this.domEvent.preventDefault();\n        }\n      }, {\n        key: \"stopPropagation\",\n        value: function stopPropagation() {\n          this.domEvent.stopPropagation();\n        }\n      }]);\n\n      return Ju;\n    }();\n\n    var Qu = /*#__PURE__*/function (_Yd2) {\n      _inherits(Qu, _Yd2);\n\n      var _super11 = _createSuper(Qu);\n\n      function Qu(e) {\n        var _this29;\n\n        _classCallCheck(this, Qu);\n\n        _this29 = _super11.call(this, e);\n        _this29.useCapture = false;\n        return _this29;\n      }\n\n      _createClass(Qu, [{\n        key: \"observe\",\n        value: function observe(e) {\n          var _this30 = this;\n\n          var t = typeof this.domEventType == \"string\" ? [this.domEventType] : this.domEventType;\n          t.forEach(function (t) {\n            _this30.listenTo(e, t, function (e, t) {\n              if (_this30.isEnabled) {\n                _this30.onDomEvent(t);\n              }\n            }, {\n              useCapture: _this30.useCapture\n            });\n          });\n        }\n      }, {\n        key: \"fire\",\n        value: function fire(e, t, n) {\n          if (this.isEnabled) {\n            this.document.fire(e, new Ju(this.view, t, n));\n          }\n        }\n      }]);\n\n      return Qu;\n    }(Yd);\n\n    var Xu = /*#__PURE__*/function (_Qu) {\n      _inherits(Xu, _Qu);\n\n      var _super12 = _createSuper(Xu);\n\n      function Xu(e) {\n        var _this31;\n\n        _classCallCheck(this, Xu);\n\n        _this31 = _super12.call(this, e);\n        _this31.domEventType = [\"keydown\", \"keyup\"];\n        return _this31;\n      }\n\n      _createClass(Xu, [{\n        key: \"onDomEvent\",\n        value: function onDomEvent(e) {\n          this.fire(e.type, e, {\n            keyCode: e.keyCode,\n            altKey: e.altKey,\n            ctrlKey: e.ctrlKey || e.metaKey,\n            shiftKey: e.shiftKey,\n\n            get keystroke() {\n              return Ll(this);\n            }\n\n          });\n        }\n      }]);\n\n      return Xu;\n    }(Qu);\n\n    var Gu = function Gu() {\n      return i[\"a\"].Date.now();\n    };\n\n    var Ku = Gu;\n    var Zu = 0 / 0;\n    var eh = /^\\s+|\\s+$/g;\n    var th = /^[-+]0x[0-9a-f]+$/i;\n    var nh = /^0b[01]+$/i;\n    var ih = /^0o[0-7]+$/i;\n    var oh = parseInt;\n\n    function sh(e) {\n      if (typeof e == \"number\") {\n        return e;\n      }\n\n      if (Gr(e)) {\n        return Zu;\n      }\n\n      if (ce(e)) {\n        var t = typeof e.valueOf == \"function\" ? e.valueOf() : e;\n        e = ce(t) ? t + \"\" : t;\n      }\n\n      if (typeof e != \"string\") {\n        return e === 0 ? e : +e;\n      }\n\n      e = e.replace(eh, \"\");\n      var n = nh.test(e);\n      return n || ih.test(e) ? oh(e.slice(2), n ? 2 : 8) : th.test(e) ? Zu : +e;\n    }\n\n    var rh = sh;\n    var ah = \"Expected a function\";\n    var ch = Math.max,\n        lh = Math.min;\n\n    function dh(e, t, n) {\n      var i,\n          o,\n          s,\n          r,\n          a,\n          c,\n          l = 0,\n          d = false,\n          u = false,\n          h = true;\n\n      if (typeof e != \"function\") {\n        throw new TypeError(ah);\n      }\n\n      t = rh(t) || 0;\n\n      if (ce(n)) {\n        d = !!n.leading;\n        u = \"maxWait\" in n;\n        s = u ? ch(rh(n.maxWait) || 0, t) : s;\n        h = \"trailing\" in n ? !!n.trailing : h;\n      }\n\n      function f(t) {\n        var n = i,\n            s = o;\n        i = o = undefined;\n        l = t;\n        r = e.apply(s, n);\n        return r;\n      }\n\n      function m(e) {\n        l = e;\n        a = setTimeout(b, t);\n        return d ? f(e) : r;\n      }\n\n      function g(e) {\n        var n = e - c,\n            i = e - l,\n            o = t - n;\n        return u ? lh(o, s - i) : o;\n      }\n\n      function p(e) {\n        var n = e - c,\n            i = e - l;\n        return c === undefined || n >= t || n < 0 || u && i >= s;\n      }\n\n      function b() {\n        var e = Ku();\n\n        if (p(e)) {\n          return w(e);\n        }\n\n        a = setTimeout(b, g(e));\n      }\n\n      function w(e) {\n        a = undefined;\n\n        if (h && i) {\n          return f(e);\n        }\n\n        i = o = undefined;\n        return r;\n      }\n\n      function _() {\n        if (a !== undefined) {\n          clearTimeout(a);\n        }\n\n        l = 0;\n        i = c = o = a = undefined;\n      }\n\n      function v() {\n        return a === undefined ? r : w(Ku());\n      }\n\n      function k() {\n        var e = Ku(),\n            n = p(e);\n        i = arguments;\n        o = this;\n        c = e;\n\n        if (n) {\n          if (a === undefined) {\n            return m(c);\n          }\n\n          if (u) {\n            clearTimeout(a);\n            a = setTimeout(b, t);\n            return f(c);\n          }\n        }\n\n        if (a === undefined) {\n          a = setTimeout(b, t);\n        }\n\n        return r;\n      }\n\n      k.cancel = _;\n      k.flush = v;\n      return k;\n    }\n\n    var uh = dh;\n\n    var hh = /*#__PURE__*/function (_Yd3) {\n      _inherits(hh, _Yd3);\n\n      var _super13 = _createSuper(hh);\n\n      function hh(e) {\n        var _this32;\n\n        _classCallCheck(this, hh);\n\n        _this32 = _super13.call(this, e);\n        _this32._fireSelectionChangeDoneDebounced = uh(function (e) {\n          return _this32.document.fire(\"selectionChangeDone\", e);\n        }, 200);\n        return _this32;\n      }\n\n      _createClass(hh, [{\n        key: \"observe\",\n        value: function observe() {\n          var _this33 = this;\n\n          var e = this.document;\n          e.on(\"keydown\", function (t, n) {\n            var i = e.selection;\n\n            if (i.isFake && fh(n.keyCode) && _this33.isEnabled) {\n              n.preventDefault();\n\n              _this33._handleSelectionMove(n.keyCode);\n            }\n          }, {\n            priority: \"lowest\"\n          });\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          _get(_getPrototypeOf(hh.prototype), \"destroy\", this).call(this);\n\n          this._fireSelectionChangeDoneDebounced.cancel();\n        }\n      }, {\n        key: \"_handleSelectionMove\",\n        value: function _handleSelectionMove(e) {\n          var t = this.document.selection;\n          var n = new ml(t.getRanges(), {\n            backward: t.isBackward,\n            fake: false\n          });\n\n          if (e == Rl.arrowleft || e == Rl.arrowup) {\n            n.setTo(n.getFirstPosition());\n          }\n\n          if (e == Rl.arrowright || e == Rl.arrowdown) {\n            n.setTo(n.getLastPosition());\n          }\n\n          var i = {\n            oldSelection: t,\n            newSelection: n,\n            domSelection: null\n          };\n          this.document.fire(\"selectionChange\", i);\n\n          this._fireSelectionChangeDoneDebounced(i);\n        }\n      }]);\n\n      return hh;\n    }(Yd);\n\n    function fh(e) {\n      return e == Rl.arrowright || e == Rl.arrowleft || e == Rl.arrowup || e == Rl.arrowdown;\n    }\n\n    var mh = /*#__PURE__*/function (_Yd4) {\n      _inherits(mh, _Yd4);\n\n      var _super14 = _createSuper(mh);\n\n      function mh(e) {\n        var _this34;\n\n        _classCallCheck(this, mh);\n\n        _this34 = _super14.call(this, e);\n        _this34.mutationObserver = e.getObserver(Yu);\n        _this34.selection = _this34.document.selection;\n        _this34.domConverter = e.domConverter;\n        _this34._documents = new WeakSet();\n        _this34._fireSelectionChangeDoneDebounced = uh(function (e) {\n          return _this34.document.fire(\"selectionChangeDone\", e);\n        }, 200);\n        _this34._clearInfiniteLoopInterval = setInterval(function () {\n          return _this34._clearInfiniteLoop();\n        }, 1e3);\n        _this34._loopbackCounter = 0;\n        return _this34;\n      }\n\n      _createClass(mh, [{\n        key: \"observe\",\n        value: function observe(e) {\n          var _this35 = this;\n\n          var t = e.ownerDocument;\n\n          if (this._documents.has(t)) {\n            return;\n          }\n\n          this.listenTo(t, \"selectionchange\", function () {\n            _this35._handleSelectionChange(t);\n          });\n\n          this._documents.add(t);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          _get(_getPrototypeOf(mh.prototype), \"destroy\", this).call(this);\n\n          clearInterval(this._clearInfiniteLoopInterval);\n\n          this._fireSelectionChangeDoneDebounced.cancel();\n        }\n      }, {\n        key: \"_handleSelectionChange\",\n        value: function _handleSelectionChange(e) {\n          if (!this.isEnabled) {\n            return;\n          }\n\n          this.mutationObserver.flush();\n          var t = e.defaultView.getSelection();\n          var n = this.domConverter.domSelectionToView(t);\n\n          if (n.rangeCount == 0) {\n            return;\n          }\n\n          if (this.selection.isEqual(n) && this.domConverter.isDomSelectionCorrect(t)) {\n            return;\n          }\n\n          if (++this._loopbackCounter > 60) {\n            return;\n          }\n\n          if (this.selection.isSimilar(n)) {\n            this.view.forceRender();\n          } else {\n            var _e68 = {\n              oldSelection: this.selection,\n              newSelection: n,\n              domSelection: t\n            };\n            this.document.fire(\"selectionChange\", _e68);\n\n            this._fireSelectionChangeDoneDebounced(_e68);\n          }\n        }\n      }, {\n        key: \"_clearInfiniteLoop\",\n        value: function _clearInfiniteLoop() {\n          this._loopbackCounter = 0;\n        }\n      }]);\n\n      return mh;\n    }(Yd);\n\n    var gh = /*#__PURE__*/function (_Qu2) {\n      _inherits(gh, _Qu2);\n\n      var _super15 = _createSuper(gh);\n\n      function gh(e) {\n        var _this36;\n\n        _classCallCheck(this, gh);\n\n        _this36 = _super15.call(this, e);\n        _this36.domEventType = [\"focus\", \"blur\"];\n        _this36.useCapture = true;\n        var t = _this36.document;\n        t.on(\"focus\", function () {\n          t.isFocused = true;\n          _this36._renderTimeoutId = setTimeout(function () {\n            return e.forceRender();\n          }, 50);\n        });\n        t.on(\"blur\", function (n, i) {\n          var o = t.selection.editableElement;\n\n          if (o === null || o === i.target) {\n            t.isFocused = false;\n            e.forceRender();\n          }\n        });\n        return _this36;\n      }\n\n      _createClass(gh, [{\n        key: \"onDomEvent\",\n        value: function onDomEvent(e) {\n          this.fire(e.type, e);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          if (this._renderTimeoutId) {\n            clearTimeout(this._renderTimeoutId);\n          }\n\n          _get(_getPrototypeOf(gh.prototype), \"destroy\", this).call(this);\n        }\n      }]);\n\n      return gh;\n    }(Qu);\n\n    var ph = /*#__PURE__*/function (_Qu3) {\n      _inherits(ph, _Qu3);\n\n      var _super16 = _createSuper(ph);\n\n      function ph(e) {\n        var _this37;\n\n        _classCallCheck(this, ph);\n\n        _this37 = _super16.call(this, e);\n        _this37.domEventType = [\"compositionstart\", \"compositionupdate\", \"compositionend\"];\n        var t = _this37.document;\n        t.on(\"compositionstart\", function () {\n          t.isComposing = true;\n        });\n        t.on(\"compositionend\", function () {\n          t.isComposing = false;\n        });\n        return _this37;\n      }\n\n      _createClass(ph, [{\n        key: \"onDomEvent\",\n        value: function onDomEvent(e) {\n          this.fire(e.type, e);\n        }\n      }]);\n\n      return ph;\n    }(Qu);\n\n    var bh = /*#__PURE__*/function (_Qu4) {\n      _inherits(bh, _Qu4);\n\n      var _super17 = _createSuper(bh);\n\n      function bh(e) {\n        var _this38;\n\n        _classCallCheck(this, bh);\n\n        _this38 = _super17.call(this, e);\n        _this38.domEventType = [\"beforeinput\"];\n        return _this38;\n      }\n\n      _createClass(bh, [{\n        key: \"onDomEvent\",\n        value: function onDomEvent(e) {\n          this.fire(e.type, e);\n        }\n      }]);\n\n      return bh;\n    }(Qu);\n\n    function wh(e) {\n      return Object.prototype.toString.apply(e) == \"[object Range]\";\n    }\n\n    function _h(e) {\n      var t = e.ownerDocument.defaultView.getComputedStyle(e);\n      return {\n        top: parseInt(t.borderTopWidth, 10),\n        right: parseInt(t.borderRightWidth, 10),\n        bottom: parseInt(t.borderBottomWidth, 10),\n        left: parseInt(t.borderLeftWidth, 10)\n      };\n    }\n\n    var vh = [\"top\", \"right\", \"bottom\", \"left\", \"width\", \"height\"];\n\n    var kh = /*#__PURE__*/function () {\n      function kh(e) {\n        _classCallCheck(this, kh);\n\n        var t = wh(e);\n        Object.defineProperty(this, \"_source\", {\n          value: e._source || e,\n          writable: true,\n          enumerable: false\n        });\n\n        if (Js(e) || t) {\n          if (t) {\n            yh(this, kh.getDomRangeRects(e)[0]);\n          } else {\n            yh(this, e.getBoundingClientRect());\n          }\n        } else if (Hd(e)) {\n          var _t72 = e.innerWidth,\n              _n67 = e.innerHeight;\n          yh(this, {\n            top: 0,\n            right: _t72,\n            bottom: _n67,\n            left: 0,\n            width: _t72,\n            height: _n67\n          });\n        } else {\n          yh(this, e);\n        }\n      }\n\n      _createClass(kh, [{\n        key: \"clone\",\n        value: function clone() {\n          return new kh(this);\n        }\n      }, {\n        key: \"moveTo\",\n        value: function moveTo(e, t) {\n          this.top = t;\n          this.right = e + this.width;\n          this.bottom = t + this.height;\n          this.left = e;\n          return this;\n        }\n      }, {\n        key: \"moveBy\",\n        value: function moveBy(e, t) {\n          this.top += t;\n          this.right += e;\n          this.left += e;\n          this.bottom += t;\n          return this;\n        }\n      }, {\n        key: \"getIntersection\",\n        value: function getIntersection(e) {\n          var t = {\n            top: Math.max(this.top, e.top),\n            right: Math.min(this.right, e.right),\n            bottom: Math.min(this.bottom, e.bottom),\n            left: Math.max(this.left, e.left)\n          };\n          t.width = t.right - t.left;\n          t.height = t.bottom - t.top;\n\n          if (t.width < 0 || t.height < 0) {\n            return null;\n          } else {\n            return new kh(t);\n          }\n        }\n      }, {\n        key: \"getIntersectionArea\",\n        value: function getIntersectionArea(e) {\n          var t = this.getIntersection(e);\n\n          if (t) {\n            return t.getArea();\n          } else {\n            return 0;\n          }\n        }\n      }, {\n        key: \"getArea\",\n        value: function getArea() {\n          return this.width * this.height;\n        }\n      }, {\n        key: \"getVisible\",\n        value: function getVisible() {\n          var e = this._source;\n          var t = this.clone();\n\n          if (!xh(e)) {\n            var _n68 = e.parentNode || e.commonAncestorContainer;\n\n            while (_n68 && !xh(_n68)) {\n              var _e69 = new kh(_n68);\n\n              var _i51 = t.getIntersection(_e69);\n\n              if (_i51) {\n                if (_i51.getArea() < t.getArea()) {\n                  t = _i51;\n                }\n              } else {\n                return null;\n              }\n\n              _n68 = _n68.parentNode;\n            }\n          }\n\n          return t;\n        }\n      }, {\n        key: \"isEqual\",\n        value: function isEqual(e) {\n          var _iterator82 = _createForOfIteratorHelper(vh),\n              _step82;\n\n          try {\n            for (_iterator82.s(); !(_step82 = _iterator82.n()).done;) {\n              var _t73 = _step82.value;\n\n              if (this[_t73] !== e[_t73]) {\n                return false;\n              }\n            }\n          } catch (err) {\n            _iterator82.e(err);\n          } finally {\n            _iterator82.f();\n          }\n\n          return true;\n        }\n      }, {\n        key: \"contains\",\n        value: function contains(e) {\n          var t = this.getIntersection(e);\n          return !!(t && t.isEqual(e));\n        }\n      }, {\n        key: \"excludeScrollbarsAndBorders\",\n        value: function excludeScrollbarsAndBorders() {\n          var e = this._source;\n          var t, n, i;\n\n          if (Hd(e)) {\n            t = e.innerWidth - e.document.documentElement.clientWidth;\n            n = e.innerHeight - e.document.documentElement.clientHeight;\n            i = e.getComputedStyle(e.document.documentElement).direction;\n          } else {\n            var _o28 = _h(this._source);\n\n            t = e.offsetWidth - e.clientWidth - _o28.left - _o28.right;\n            n = e.offsetHeight - e.clientHeight - _o28.top - _o28.bottom;\n            i = e.ownerDocument.defaultView.getComputedStyle(e).direction;\n            this.left += _o28.left;\n            this.top += _o28.top;\n            this.right -= _o28.right;\n            this.bottom -= _o28.bottom;\n            this.width = this.right - this.left;\n            this.height = this.bottom - this.top;\n          }\n\n          this.width -= t;\n\n          if (i === \"ltr\") {\n            this.right -= t;\n          } else {\n            this.left += t;\n          }\n\n          this.height -= n;\n          this.bottom -= n;\n          return this;\n        }\n      }], [{\n        key: \"getDomRangeRects\",\n        value: function getDomRangeRects(e) {\n          var t = [];\n          var n = Array.from(e.getClientRects());\n\n          if (n.length) {\n            var _iterator83 = _createForOfIteratorHelper(n),\n                _step83;\n\n            try {\n              for (_iterator83.s(); !(_step83 = _iterator83.n()).done;) {\n                var _e70 = _step83.value;\n                t.push(new kh(_e70));\n              }\n            } catch (err) {\n              _iterator83.e(err);\n            } finally {\n              _iterator83.f();\n            }\n          } else {\n            var _n69 = e.startContainer;\n\n            if (od(_n69)) {\n              _n69 = _n69.parentNode;\n            }\n\n            var _i52 = new kh(_n69.getBoundingClientRect());\n\n            _i52.right = _i52.left;\n            _i52.width = 0;\n            t.push(_i52);\n          }\n\n          return t;\n        }\n      }]);\n\n      return kh;\n    }();\n\n    function yh(e, t) {\n      var _iterator84 = _createForOfIteratorHelper(vh),\n          _step84;\n\n      try {\n        for (_iterator84.s(); !(_step84 = _iterator84.n()).done;) {\n          var _n70 = _step84.value;\n          e[_n70] = t[_n70];\n        }\n      } catch (err) {\n        _iterator84.e(err);\n      } finally {\n        _iterator84.f();\n      }\n    }\n\n    function xh(e) {\n      if (!Js(e)) {\n        return false;\n      }\n\n      return e === e.ownerDocument.body;\n    }\n\n    var Ah = {};\n\n    function Ch(_ref7) {\n      var e = _ref7.target,\n          _ref7$viewportOffset = _ref7.viewportOffset,\n          t = _ref7$viewportOffset === void 0 ? 0 : _ref7$viewportOffset;\n      var n = Nh(e);\n      var i = n;\n      var o = null;\n\n      while (i) {\n        var _s12 = void 0;\n\n        if (i == n) {\n          _s12 = Rh(e);\n        } else {\n          _s12 = Rh(o);\n        }\n\n        Ph(_s12, function () {\n          return Lh(e, i);\n        });\n\n        var _r8 = Lh(e, i);\n\n        Mh(i, _r8, t);\n\n        if (i.parent != i) {\n          o = i.frameElement;\n          i = i.parent;\n\n          if (!o) {\n            return;\n          }\n        } else {\n          i = null;\n        }\n      }\n    }\n\n    function Th(e) {\n      var t = Rh(e);\n      Ph(t, function () {\n        return new kh(e);\n      });\n    }\n\n    Object.assign(Ah, {\n      scrollViewportToShowTarget: Ch,\n      scrollAncestorsToShowTarget: Th\n    });\n\n    function Mh(e, t, n) {\n      var i = t.clone().moveBy(0, n);\n      var o = t.clone().moveBy(0, -n);\n      var s = new kh(e).excludeScrollbarsAndBorders();\n      var r = [o, i];\n\n      if (!r.every(function (e) {\n        return s.contains(e);\n      })) {\n        var _r9 = e.scrollX,\n            _a7 = e.scrollY;\n\n        if (Sh(o, s)) {\n          _a7 -= s.top - t.top + n;\n        } else if (Eh(i, s)) {\n          _a7 += t.bottom - s.bottom + n;\n        }\n\n        if (Ih(t, s)) {\n          _r9 -= s.left - t.left + n;\n        } else if (Oh(t, s)) {\n          _r9 += t.right - s.right + n;\n        }\n\n        e.scrollTo(_r9, _a7);\n      }\n    }\n\n    function Ph(e, t) {\n      var n = Nh(e);\n      var i, o;\n\n      while (e != n.document.body) {\n        o = t();\n        i = new kh(e).excludeScrollbarsAndBorders();\n\n        if (!i.contains(o)) {\n          if (Sh(o, i)) {\n            e.scrollTop -= i.top - o.top;\n          } else if (Eh(o, i)) {\n            e.scrollTop += o.bottom - i.bottom;\n          }\n\n          if (Ih(o, i)) {\n            e.scrollLeft -= i.left - o.left;\n          } else if (Oh(o, i)) {\n            e.scrollLeft += o.right - i.right;\n          }\n        }\n\n        e = e.parentNode;\n      }\n    }\n\n    function Eh(e, t) {\n      return e.bottom > t.bottom;\n    }\n\n    function Sh(e, t) {\n      return e.top < t.top;\n    }\n\n    function Ih(e, t) {\n      return e.left < t.left;\n    }\n\n    function Oh(e, t) {\n      return e.right > t.right;\n    }\n\n    function Nh(e) {\n      if (wh(e)) {\n        return e.startContainer.ownerDocument.defaultView;\n      } else {\n        return e.ownerDocument.defaultView;\n      }\n    }\n\n    function Rh(e) {\n      if (wh(e)) {\n        var _t74 = e.commonAncestorContainer;\n\n        if (od(_t74)) {\n          _t74 = _t74.parentNode;\n        }\n\n        return _t74;\n      } else {\n        return e.parentNode;\n      }\n    }\n\n    function Lh(e, t) {\n      var n = Nh(e);\n      var i = new kh(e);\n\n      if (n === t) {\n        return i;\n      } else {\n        var _e71 = n;\n\n        while (_e71 != t) {\n          var _t75 = _e71.frameElement;\n\n          var _n71 = new kh(_t75).excludeScrollbarsAndBorders();\n\n          i.moveBy(_n71.left, _n71.top);\n          _e71 = _e71.parent;\n        }\n      }\n\n      return i;\n    }\n\n    var jh = /*#__PURE__*/function () {\n      function jh(e) {\n        var _this39 = this;\n\n        _classCallCheck(this, jh);\n\n        this.document = new pl(e);\n        this.domConverter = new Dd(this.document);\n        this.domRoots = new Map();\n        this.set(\"isRenderingInProgress\", false);\n        this._renderer = new Ad(this.domConverter, this.document.selection);\n\n        this._renderer.bind(\"isFocused\").to(this.document);\n\n        this._initialDomRootAttributes = new WeakMap();\n        this._observers = new Map();\n        this._ongoingChange = false;\n        this._postFixersInProgress = false;\n        this._renderingDisabled = false;\n        this._hasChangedSinceTheLastRendering = false;\n        this._writer = new ql(this.document);\n        this.addObserver(Yu);\n        this.addObserver(mh);\n        this.addObserver(gh);\n        this.addObserver(Xu);\n        this.addObserver(hh);\n        this.addObserver(ph);\n\n        if (Cl.isAndroid) {\n          this.addObserver(bh);\n        }\n\n        hd(this);\n        Fl(this);\n        this.on(\"render\", function () {\n          _this39._render();\n\n          _this39.document.fire(\"layoutChanged\");\n\n          _this39._hasChangedSinceTheLastRendering = false;\n        });\n        this.listenTo(this.document.selection, \"change\", function () {\n          _this39._hasChangedSinceTheLastRendering = true;\n        });\n      }\n\n      _createClass(jh, [{\n        key: \"attachDomRoot\",\n        value: function attachDomRoot(e) {\n          var _this40 = this;\n\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"main\";\n          var n = this.document.getRoot(t);\n          n._name = e.tagName.toLowerCase();\n          var i = {};\n\n          for (var _i53 = 0, _Array$from2 = Array.from(e.attributes); _i53 < _Array$from2.length; _i53++) {\n            var _Array$from2$_i = _Array$from2[_i53],\n                _t76 = _Array$from2$_i.name,\n                _o29 = _Array$from2$_i.value;\n            i[_t76] = _o29;\n\n            if (_t76 === \"class\") {\n              this._writer.addClass(_o29.split(\" \"), n);\n            } else {\n              this._writer.setAttribute(_t76, _o29, n);\n            }\n          }\n\n          this._initialDomRootAttributes.set(e, i);\n\n          var o = function o() {\n            _this40._writer.setAttribute(\"contenteditable\", !n.isReadOnly, n);\n\n            if (n.isReadOnly) {\n              _this40._writer.addClass(\"ck-read-only\", n);\n            } else {\n              _this40._writer.removeClass(\"ck-read-only\", n);\n            }\n          };\n\n          o();\n          this.domRoots.set(t, e);\n          this.domConverter.bindElements(e, n);\n\n          this._renderer.markToSync(\"children\", n);\n\n          this._renderer.markToSync(\"attributes\", n);\n\n          this._renderer.domDocuments.add(e.ownerDocument);\n\n          n.on(\"change:children\", function (e, t) {\n            return _this40._renderer.markToSync(\"children\", t);\n          });\n          n.on(\"change:attributes\", function (e, t) {\n            return _this40._renderer.markToSync(\"attributes\", t);\n          });\n          n.on(\"change:text\", function (e, t) {\n            return _this40._renderer.markToSync(\"text\", t);\n          });\n          n.on(\"change:isReadOnly\", function () {\n            return _this40.change(o);\n          });\n          n.on(\"change\", function () {\n            _this40._hasChangedSinceTheLastRendering = true;\n          });\n\n          var _iterator85 = _createForOfIteratorHelper(this._observers.values()),\n              _step85;\n\n          try {\n            for (_iterator85.s(); !(_step85 = _iterator85.n()).done;) {\n              var _n72 = _step85.value;\n\n              _n72.observe(e, t);\n            }\n          } catch (err) {\n            _iterator85.e(err);\n          } finally {\n            _iterator85.f();\n          }\n        }\n      }, {\n        key: \"detachDomRoot\",\n        value: function detachDomRoot(e) {\n          var t = this.domRoots.get(e);\n          Array.from(t.attributes).forEach(function (_ref8) {\n            var e = _ref8.name;\n            return t.removeAttribute(e);\n          });\n\n          var n = this._initialDomRootAttributes.get(t);\n\n          for (var _e72 in n) {\n            t.setAttribute(_e72, n[_e72]);\n          }\n\n          this.domRoots.delete(e);\n          this.domConverter.unbindDomElement(t);\n        }\n      }, {\n        key: \"getDomRoot\",\n        value: function getDomRoot() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"main\";\n          return this.domRoots.get(e);\n        }\n      }, {\n        key: \"addObserver\",\n        value: function addObserver(e) {\n          var t = this._observers.get(e);\n\n          if (t) {\n            return t;\n          }\n\n          t = new e(this);\n\n          this._observers.set(e, t);\n\n          var _iterator86 = _createForOfIteratorHelper(this.domRoots),\n              _step86;\n\n          try {\n            for (_iterator86.s(); !(_step86 = _iterator86.n()).done;) {\n              var _step86$value = _slicedToArray(_step86.value, 2),\n                  _e73 = _step86$value[0],\n                  _n73 = _step86$value[1];\n\n              t.observe(_n73, _e73);\n            }\n          } catch (err) {\n            _iterator86.e(err);\n          } finally {\n            _iterator86.f();\n          }\n\n          t.enable();\n          return t;\n        }\n      }, {\n        key: \"getObserver\",\n        value: function getObserver(e) {\n          return this._observers.get(e);\n        }\n      }, {\n        key: \"disableObservers\",\n        value: function disableObservers() {\n          var _iterator87 = _createForOfIteratorHelper(this._observers.values()),\n              _step87;\n\n          try {\n            for (_iterator87.s(); !(_step87 = _iterator87.n()).done;) {\n              var _e74 = _step87.value;\n\n              _e74.disable();\n            }\n          } catch (err) {\n            _iterator87.e(err);\n          } finally {\n            _iterator87.f();\n          }\n        }\n      }, {\n        key: \"enableObservers\",\n        value: function enableObservers() {\n          var _iterator88 = _createForOfIteratorHelper(this._observers.values()),\n              _step88;\n\n          try {\n            for (_iterator88.s(); !(_step88 = _iterator88.n()).done;) {\n              var _e75 = _step88.value;\n\n              _e75.enable();\n            }\n          } catch (err) {\n            _iterator88.e(err);\n          } finally {\n            _iterator88.f();\n          }\n        }\n      }, {\n        key: \"scrollToTheSelection\",\n        value: function scrollToTheSelection() {\n          var e = this.document.selection.getFirstRange();\n\n          if (e) {\n            Ch({\n              target: this.domConverter.viewRangeToDom(e),\n              viewportOffset: 20\n            });\n          }\n        }\n      }, {\n        key: \"focus\",\n        value: function focus() {\n          if (!this.document.isFocused) {\n            var _e76 = this.document.selection.editableElement;\n\n            if (_e76) {\n              this.domConverter.focus(_e76);\n              this.forceRender();\n            } else {}\n          }\n        }\n      }, {\n        key: \"change\",\n        value: function change(e) {\n          if (this.isRenderingInProgress || this._postFixersInProgress) {\n            throw new rr[\"b\"](\"cannot-change-view-tree: \" + \"Attempting to make changes to the view when it is in an incorrect state: rendering or post-fixers are in progress. \" + \"This may cause some unexpected behavior and inconsistency between the DOM and the view.\", this);\n          }\n\n          try {\n            if (this._ongoingChange) {\n              return e(this._writer);\n            }\n\n            this._ongoingChange = true;\n\n            var _t77 = e(this._writer);\n\n            this._ongoingChange = false;\n\n            if (!this._renderingDisabled && this._hasChangedSinceTheLastRendering) {\n              this._postFixersInProgress = true;\n\n              this.document._callPostFixers(this._writer);\n\n              this._postFixersInProgress = false;\n              this.fire(\"render\");\n            }\n\n            return _t77;\n          } catch (e) {\n            rr[\"b\"].rethrowUnexpectedError(e, this);\n          }\n        }\n      }, {\n        key: \"forceRender\",\n        value: function forceRender() {\n          this._hasChangedSinceTheLastRendering = true;\n          this.change(function () {});\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          var _iterator89 = _createForOfIteratorHelper(this._observers.values()),\n              _step89;\n\n          try {\n            for (_iterator89.s(); !(_step89 = _iterator89.n()).done;) {\n              var _e77 = _step89.value;\n\n              _e77.destroy();\n            }\n          } catch (err) {\n            _iterator89.e(err);\n          } finally {\n            _iterator89.f();\n          }\n\n          this.document.destroy();\n          this.stopListening();\n        }\n      }, {\n        key: \"createPositionAt\",\n        value: function createPositionAt(e, t) {\n          return dl._createAt(e, t);\n        }\n      }, {\n        key: \"createPositionAfter\",\n        value: function createPositionAfter(e) {\n          return dl._createAfter(e);\n        }\n      }, {\n        key: \"createPositionBefore\",\n        value: function createPositionBefore(e) {\n          return dl._createBefore(e);\n        }\n      }, {\n        key: \"createRange\",\n        value: function createRange(e, t) {\n          return new ul(e, t);\n        }\n      }, {\n        key: \"createRangeOn\",\n        value: function createRangeOn(e) {\n          return ul._createOn(e);\n        }\n      }, {\n        key: \"createRangeIn\",\n        value: function createRangeIn(e) {\n          return ul._createIn(e);\n        }\n      }, {\n        key: \"createSelection\",\n        value: function createSelection(e, t, n) {\n          return new ml(e, t, n);\n        }\n      }, {\n        key: \"_disableRendering\",\n        value: function _disableRendering(e) {\n          this._renderingDisabled = e;\n\n          if (e == false) {\n            this.change(function () {});\n          }\n        }\n      }, {\n        key: \"_render\",\n        value: function _render() {\n          this.isRenderingInProgress = true;\n          this.disableObservers();\n\n          this._renderer.render();\n\n          this.enableObservers();\n          this.isRenderingInProgress = false;\n        }\n      }]);\n\n      return jh;\n    }();\n\n    kr(jh, Qc);\n\n    var Dh = /*#__PURE__*/function () {\n      function Dh(e) {\n        _classCallCheck(this, Dh);\n\n        this.parent = null;\n        this._attrs = Hr(e);\n      }\n\n      _createClass(Dh, [{\n        key: \"index\",\n        get: function get() {\n          var e;\n\n          if (!this.parent) {\n            return null;\n          }\n\n          if ((e = this.parent.getChildIndex(this)) === null) {\n            throw new rr[\"b\"](\"model-node-not-found-in-parent: The node's parent does not contain this node.\", this);\n          }\n\n          return e;\n        }\n      }, {\n        key: \"startOffset\",\n        get: function get() {\n          var e;\n\n          if (!this.parent) {\n            return null;\n          }\n\n          if ((e = this.parent.getChildStartOffset(this)) === null) {\n            throw new rr[\"b\"](\"model-node-not-found-in-parent: The node's parent does not contain this node.\", this);\n          }\n\n          return e;\n        }\n      }, {\n        key: \"offsetSize\",\n        get: function get() {\n          return 1;\n        }\n      }, {\n        key: \"endOffset\",\n        get: function get() {\n          if (!this.parent) {\n            return null;\n          }\n\n          return this.startOffset + this.offsetSize;\n        }\n      }, {\n        key: \"nextSibling\",\n        get: function get() {\n          var e = this.index;\n          return e !== null && this.parent.getChild(e + 1) || null;\n        }\n      }, {\n        key: \"previousSibling\",\n        get: function get() {\n          var e = this.index;\n          return e !== null && this.parent.getChild(e - 1) || null;\n        }\n      }, {\n        key: \"root\",\n        get: function get() {\n          var e = this;\n\n          while (e.parent) {\n            e = e.parent;\n          }\n\n          return e;\n        }\n      }, {\n        key: \"isAttached\",\n        value: function isAttached() {\n          return this.root.is(\"rootElement\");\n        }\n      }, {\n        key: \"getPath\",\n        value: function getPath() {\n          var e = [];\n          var t = this;\n\n          while (t.parent) {\n            e.unshift(t.startOffset);\n            t = t.parent;\n          }\n\n          return e;\n        }\n      }, {\n        key: \"getAncestors\",\n        value: function getAncestors() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n            includeSelf: false,\n            parentFirst: false\n          };\n          var t = [];\n          var n = e.includeSelf ? this : this.parent;\n\n          while (n) {\n            t[e.parentFirst ? \"push\" : \"unshift\"](n);\n            n = n.parent;\n          }\n\n          return t;\n        }\n      }, {\n        key: \"getCommonAncestor\",\n        value: function getCommonAncestor(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          var n = this.getAncestors(t);\n          var i = e.getAncestors(t);\n          var o = 0;\n\n          while (n[o] == i[o] && n[o]) {\n            o++;\n          }\n\n          return o === 0 ? null : n[o - 1];\n        }\n      }, {\n        key: \"isBefore\",\n        value: function isBefore(e) {\n          if (this == e) {\n            return false;\n          }\n\n          if (this.root !== e.root) {\n            return false;\n          }\n\n          var t = this.getPath();\n          var n = e.getPath();\n          var i = Nr(t, n);\n\n          switch (i) {\n            case \"prefix\":\n              return true;\n\n            case \"extension\":\n              return false;\n\n            default:\n              return t[i] < n[i];\n          }\n        }\n      }, {\n        key: \"isAfter\",\n        value: function isAfter(e) {\n          if (this == e) {\n            return false;\n          }\n\n          if (this.root !== e.root) {\n            return false;\n          }\n\n          return !this.isBefore(e);\n        }\n      }, {\n        key: \"hasAttribute\",\n        value: function hasAttribute(e) {\n          return this._attrs.has(e);\n        }\n      }, {\n        key: \"getAttribute\",\n        value: function getAttribute(e) {\n          return this._attrs.get(e);\n        }\n      }, {\n        key: \"getAttributes\",\n        value: function getAttributes() {\n          return this._attrs.entries();\n        }\n      }, {\n        key: \"getAttributeKeys\",\n        value: function getAttributeKeys() {\n          return this._attrs.keys();\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          var e = {};\n\n          if (this._attrs.size) {\n            e.attributes = Array.from(this._attrs).reduce(function (e, t) {\n              e[t[0]] = t[1];\n              return e;\n            }, {});\n          }\n\n          return e;\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          return e == \"node\" || e == \"model:node\";\n        }\n      }, {\n        key: \"_clone\",\n        value: function _clone() {\n          return new Dh(this._attrs);\n        }\n      }, {\n        key: \"_remove\",\n        value: function _remove() {\n          this.parent._removeChildren(this.index);\n        }\n      }, {\n        key: \"_setAttribute\",\n        value: function _setAttribute(e, t) {\n          this._attrs.set(e, t);\n        }\n      }, {\n        key: \"_setAttributesTo\",\n        value: function _setAttributesTo(e) {\n          this._attrs = Hr(e);\n        }\n      }, {\n        key: \"_removeAttribute\",\n        value: function _removeAttribute(e) {\n          return this._attrs.delete(e);\n        }\n      }, {\n        key: \"_clearAttributes\",\n        value: function _clearAttributes() {\n          this._attrs.clear();\n        }\n      }]);\n\n      return Dh;\n    }();\n\n    var zh = /*#__PURE__*/function (_Dh) {\n      _inherits(zh, _Dh);\n\n      var _super18 = _createSuper(zh);\n\n      function zh(e, t) {\n        var _this41;\n\n        _classCallCheck(this, zh);\n\n        _this41 = _super18.call(this, t);\n        _this41._data = e || \"\";\n        return _this41;\n      }\n\n      _createClass(zh, [{\n        key: \"offsetSize\",\n        get: function get() {\n          return this.data.length;\n        }\n      }, {\n        key: \"data\",\n        get: function get() {\n          return this._data;\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          return e == \"text\" || e == \"model:text\" || _get(_getPrototypeOf(zh.prototype), \"is\", this).call(this, e);\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          var e = _get(_getPrototypeOf(zh.prototype), \"toJSON\", this).call(this);\n\n          e.data = this.data;\n          return e;\n        }\n      }, {\n        key: \"_clone\",\n        value: function _clone() {\n          return new zh(this.data, this.getAttributes());\n        }\n      }], [{\n        key: \"fromJSON\",\n        value: function fromJSON(e) {\n          return new zh(e.data, e.attributes);\n        }\n      }]);\n\n      return zh;\n    }(Dh);\n\n    var Bh = /*#__PURE__*/function () {\n      function Bh(e, t, n) {\n        _classCallCheck(this, Bh);\n\n        this.textNode = e;\n\n        if (t < 0 || t > e.offsetSize) {\n          throw new rr[\"b\"](\"model-textproxy-wrong-offsetintext: Given offsetInText value is incorrect.\", this);\n        }\n\n        if (n < 0 || t + n > e.offsetSize) {\n          throw new rr[\"b\"](\"model-textproxy-wrong-length: Given length value is incorrect.\", this);\n        }\n\n        this.data = e.data.substring(t, t + n);\n        this.offsetInText = t;\n      }\n\n      _createClass(Bh, [{\n        key: \"startOffset\",\n        get: function get() {\n          return this.textNode.startOffset !== null ? this.textNode.startOffset + this.offsetInText : null;\n        }\n      }, {\n        key: \"offsetSize\",\n        get: function get() {\n          return this.data.length;\n        }\n      }, {\n        key: \"endOffset\",\n        get: function get() {\n          return this.startOffset !== null ? this.startOffset + this.offsetSize : null;\n        }\n      }, {\n        key: \"isPartial\",\n        get: function get() {\n          return this.offsetSize !== this.textNode.offsetSize;\n        }\n      }, {\n        key: \"parent\",\n        get: function get() {\n          return this.textNode.parent;\n        }\n      }, {\n        key: \"root\",\n        get: function get() {\n          return this.textNode.root;\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          return e == \"textProxy\" || e == \"model:textProxy\";\n        }\n      }, {\n        key: \"getPath\",\n        value: function getPath() {\n          var e = this.textNode.getPath();\n\n          if (e.length > 0) {\n            e[e.length - 1] += this.offsetInText;\n          }\n\n          return e;\n        }\n      }, {\n        key: \"getAncestors\",\n        value: function getAncestors() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n            includeSelf: false,\n            parentFirst: false\n          };\n          var t = [];\n          var n = e.includeSelf ? this : this.parent;\n\n          while (n) {\n            t[e.parentFirst ? \"push\" : \"unshift\"](n);\n            n = n.parent;\n          }\n\n          return t;\n        }\n      }, {\n        key: \"hasAttribute\",\n        value: function hasAttribute(e) {\n          return this.textNode.hasAttribute(e);\n        }\n      }, {\n        key: \"getAttribute\",\n        value: function getAttribute(e) {\n          return this.textNode.getAttribute(e);\n        }\n      }, {\n        key: \"getAttributes\",\n        value: function getAttributes() {\n          return this.textNode.getAttributes();\n        }\n      }, {\n        key: \"getAttributeKeys\",\n        value: function getAttributeKeys() {\n          return this.textNode.getAttributeKeys();\n        }\n      }]);\n\n      return Bh;\n    }();\n\n    var Vh = /*#__PURE__*/function (_Symbol$iterator6) {\n      function Vh(e) {\n        _classCallCheck(this, Vh);\n\n        this._nodes = [];\n\n        if (e) {\n          this._insertNodes(0, e);\n        }\n      }\n\n      _createClass(Vh, [{\n        key: _Symbol$iterator6,\n        value: function value() {\n          return this._nodes[Symbol.iterator]();\n        }\n      }, {\n        key: \"length\",\n        get: function get() {\n          return this._nodes.length;\n        }\n      }, {\n        key: \"maxOffset\",\n        get: function get() {\n          return this._nodes.reduce(function (e, t) {\n            return e + t.offsetSize;\n          }, 0);\n        }\n      }, {\n        key: \"getNode\",\n        value: function getNode(e) {\n          return this._nodes[e] || null;\n        }\n      }, {\n        key: \"getNodeIndex\",\n        value: function getNodeIndex(e) {\n          var t = this._nodes.indexOf(e);\n\n          return t == -1 ? null : t;\n        }\n      }, {\n        key: \"getNodeStartOffset\",\n        value: function getNodeStartOffset(e) {\n          var t = this.getNodeIndex(e);\n          return t === null ? null : this._nodes.slice(0, t).reduce(function (e, t) {\n            return e + t.offsetSize;\n          }, 0);\n        }\n      }, {\n        key: \"indexToOffset\",\n        value: function indexToOffset(e) {\n          if (e == this._nodes.length) {\n            return this.maxOffset;\n          }\n\n          var t = this._nodes[e];\n\n          if (!t) {\n            throw new rr[\"b\"](\"model-nodelist-index-out-of-bounds: Given index cannot be found in the node list.\", this);\n          }\n\n          return this.getNodeStartOffset(t);\n        }\n      }, {\n        key: \"offsetToIndex\",\n        value: function offsetToIndex(e) {\n          var t = 0;\n\n          var _iterator90 = _createForOfIteratorHelper(this._nodes),\n              _step90;\n\n          try {\n            for (_iterator90.s(); !(_step90 = _iterator90.n()).done;) {\n              var _n74 = _step90.value;\n\n              if (e >= t && e < t + _n74.offsetSize) {\n                return this.getNodeIndex(_n74);\n              }\n\n              t += _n74.offsetSize;\n            }\n          } catch (err) {\n            _iterator90.e(err);\n          } finally {\n            _iterator90.f();\n          }\n\n          if (t != e) {\n            throw new rr[\"b\"](\"model-nodelist-offset-out-of-bounds: Given offset cannot be found in the node list.\", this, {\n              offset: e,\n              nodeList: this\n            });\n          }\n\n          return this.length;\n        }\n      }, {\n        key: \"_insertNodes\",\n        value: function _insertNodes(e, t) {\n          var _this$_nodes;\n\n          var _iterator91 = _createForOfIteratorHelper(t),\n              _step91;\n\n          try {\n            for (_iterator91.s(); !(_step91 = _iterator91.n()).done;) {\n              var _e78 = _step91.value;\n\n              if (!(_e78 instanceof Dh)) {\n                throw new rr[\"b\"](\"model-nodelist-insertNodes-not-node: Trying to insert an object which is not a Node instance.\", this);\n              }\n            }\n          } catch (err) {\n            _iterator91.e(err);\n          } finally {\n            _iterator91.f();\n          }\n\n          (_this$_nodes = this._nodes).splice.apply(_this$_nodes, [e, 0].concat(_toConsumableArray(t)));\n        }\n      }, {\n        key: \"_removeNodes\",\n        value: function _removeNodes(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n          return this._nodes.splice(e, t);\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          return this._nodes.map(function (e) {\n            return e.toJSON();\n          });\n        }\n      }]);\n\n      return Vh;\n    }(Symbol.iterator);\n\n    var Fh = /*#__PURE__*/function (_Dh2) {\n      _inherits(Fh, _Dh2);\n\n      var _super19 = _createSuper(Fh);\n\n      function Fh(e, t, n) {\n        var _this42;\n\n        _classCallCheck(this, Fh);\n\n        _this42 = _super19.call(this, t);\n        _this42.name = e;\n        _this42._children = new Vh();\n\n        if (n) {\n          _this42._insertChild(0, n);\n        }\n\n        return _this42;\n      }\n\n      _createClass(Fh, [{\n        key: \"childCount\",\n        get: function get() {\n          return this._children.length;\n        }\n      }, {\n        key: \"maxOffset\",\n        get: function get() {\n          return this._children.maxOffset;\n        }\n      }, {\n        key: \"isEmpty\",\n        get: function get() {\n          return this.childCount === 0;\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n          var n = e.replace(/^model:/, \"\");\n\n          if (!t) {\n            return n == \"element\" || n == this.name || _get(_getPrototypeOf(Fh.prototype), \"is\", this).call(this, e);\n          } else {\n            return n == \"element\" && t == this.name;\n          }\n        }\n      }, {\n        key: \"getChild\",\n        value: function getChild(e) {\n          return this._children.getNode(e);\n        }\n      }, {\n        key: \"getChildren\",\n        value: function getChildren() {\n          return this._children[Symbol.iterator]();\n        }\n      }, {\n        key: \"getChildIndex\",\n        value: function getChildIndex(e) {\n          return this._children.getNodeIndex(e);\n        }\n      }, {\n        key: \"getChildStartOffset\",\n        value: function getChildStartOffset(e) {\n          return this._children.getNodeStartOffset(e);\n        }\n      }, {\n        key: \"offsetToIndex\",\n        value: function offsetToIndex(e) {\n          return this._children.offsetToIndex(e);\n        }\n      }, {\n        key: \"getNodeByPath\",\n        value: function getNodeByPath(e) {\n          var t = this;\n\n          var _iterator92 = _createForOfIteratorHelper(e),\n              _step92;\n\n          try {\n            for (_iterator92.s(); !(_step92 = _iterator92.n()).done;) {\n              var _n75 = _step92.value;\n              t = t.getChild(t.offsetToIndex(_n75));\n            }\n          } catch (err) {\n            _iterator92.e(err);\n          } finally {\n            _iterator92.f();\n          }\n\n          return t;\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          var e = _get(_getPrototypeOf(Fh.prototype), \"toJSON\", this).call(this);\n\n          e.name = this.name;\n\n          if (this._children.length > 0) {\n            e.children = [];\n\n            var _iterator93 = _createForOfIteratorHelper(this._children),\n                _step93;\n\n            try {\n              for (_iterator93.s(); !(_step93 = _iterator93.n()).done;) {\n                var _t78 = _step93.value;\n                e.children.push(_t78.toJSON());\n              }\n            } catch (err) {\n              _iterator93.e(err);\n            } finally {\n              _iterator93.f();\n            }\n          }\n\n          return e;\n        }\n      }, {\n        key: \"_clone\",\n        value: function _clone() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n          var t = e ? Array.from(this._children).map(function (e) {\n            return e._clone(true);\n          }) : null;\n          return new Fh(this.name, this.getAttributes(), t);\n        }\n      }, {\n        key: \"_appendChild\",\n        value: function _appendChild(e) {\n          this._insertChild(this.childCount, e);\n        }\n      }, {\n        key: \"_insertChild\",\n        value: function _insertChild(e, t) {\n          var n = Hh(t);\n\n          var _iterator94 = _createForOfIteratorHelper(n),\n              _step94;\n\n          try {\n            for (_iterator94.s(); !(_step94 = _iterator94.n()).done;) {\n              var _e79 = _step94.value;\n\n              if (_e79.parent !== null) {\n                _e79._remove();\n              }\n\n              _e79.parent = this;\n            }\n          } catch (err) {\n            _iterator94.e(err);\n          } finally {\n            _iterator94.f();\n          }\n\n          this._children._insertNodes(e, n);\n        }\n      }, {\n        key: \"_removeChildren\",\n        value: function _removeChildren(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n          var n = this._children._removeNodes(e, t);\n\n          var _iterator95 = _createForOfIteratorHelper(n),\n              _step95;\n\n          try {\n            for (_iterator95.s(); !(_step95 = _iterator95.n()).done;) {\n              var _e80 = _step95.value;\n              _e80.parent = null;\n            }\n          } catch (err) {\n            _iterator95.e(err);\n          } finally {\n            _iterator95.f();\n          }\n\n          return n;\n        }\n      }], [{\n        key: \"fromJSON\",\n        value: function fromJSON(e) {\n          var t = null;\n\n          if (e.children) {\n            t = [];\n\n            var _iterator96 = _createForOfIteratorHelper(e.children),\n                _step96;\n\n            try {\n              for (_iterator96.s(); !(_step96 = _iterator96.n()).done;) {\n                var _n76 = _step96.value;\n\n                if (_n76.name) {\n                  t.push(Fh.fromJSON(_n76));\n                } else {\n                  t.push(zh.fromJSON(_n76));\n                }\n              }\n            } catch (err) {\n              _iterator96.e(err);\n            } finally {\n              _iterator96.f();\n            }\n          }\n\n          return new Fh(e.name, e.attributes, t);\n        }\n      }]);\n\n      return Fh;\n    }(Dh);\n\n    function Hh(e) {\n      if (typeof e == \"string\") {\n        return [new zh(e)];\n      }\n\n      if (!Fr(e)) {\n        e = [e];\n      }\n\n      return Array.from(e).map(function (e) {\n        if (typeof e == \"string\") {\n          return new zh(e);\n        }\n\n        if (e instanceof Bh) {\n          return new zh(e.data, e.getAttributes());\n        }\n\n        return e;\n      });\n    }\n\n    var Uh = /*#__PURE__*/function (_Symbol$iterator7) {\n      function Uh() {\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, Uh);\n\n        if (!e.boundaries && !e.startPosition) {\n          throw new rr[\"b\"](\"model-tree-walker-no-start-position: Neither boundaries nor starting position have been defined.\", null);\n        }\n\n        var t = e.direction || \"forward\";\n\n        if (t != \"forward\" && t != \"backward\") {\n          throw new rr[\"b\"](\"model-tree-walker-unknown-direction: Only `backward` and `forward` direction allowed.\", e, {\n            direction: t\n          });\n        }\n\n        this.direction = t;\n        this.boundaries = e.boundaries || null;\n\n        if (e.startPosition) {\n          this.position = e.startPosition.clone();\n        } else {\n          this.position = $h._createAt(this.boundaries[this.direction == \"backward\" ? \"end\" : \"start\"]);\n        }\n\n        this.position.stickiness = \"toNone\";\n        this.singleCharacters = !!e.singleCharacters;\n        this.shallow = !!e.shallow;\n        this.ignoreElementEnd = !!e.ignoreElementEnd;\n        this._boundaryStartParent = this.boundaries ? this.boundaries.start.parent : null;\n        this._boundaryEndParent = this.boundaries ? this.boundaries.end.parent : null;\n        this._visitedParent = this.position.parent;\n      }\n\n      _createClass(Uh, [{\n        key: _Symbol$iterator7,\n        value: function value() {\n          return this;\n        }\n      }, {\n        key: \"skip\",\n        value: function skip(e) {\n          var t, n, i, o;\n\n          do {\n            i = this.position;\n            o = this._visitedParent;\n\n            var _this$next2 = this.next();\n\n            t = _this$next2.done;\n            n = _this$next2.value;\n          } while (!t && e(n));\n\n          if (!t) {\n            this.position = i;\n            this._visitedParent = o;\n          }\n        }\n      }, {\n        key: \"next\",\n        value: function next() {\n          if (this.direction == \"forward\") {\n            return this._next();\n          } else {\n            return this._previous();\n          }\n        }\n      }, {\n        key: \"_next\",\n        value: function _next() {\n          var e = this.position;\n          var t = this.position.clone();\n          var n = this._visitedParent;\n\n          if (n.parent === null && t.offset === n.maxOffset) {\n            return {\n              done: true\n            };\n          }\n\n          if (n === this._boundaryEndParent && t.offset == this.boundaries.end.offset) {\n            return {\n              done: true\n            };\n          }\n\n          var i = t.textNode ? t.textNode : t.nodeAfter;\n\n          if (i instanceof Fh) {\n            if (!this.shallow) {\n              t.path.push(0);\n              this._visitedParent = i;\n            } else {\n              t.offset++;\n            }\n\n            this.position = t;\n            return Wh(\"elementStart\", i, e, t, 1);\n          } else if (i instanceof zh) {\n            var _o30;\n\n            if (this.singleCharacters) {\n              _o30 = 1;\n            } else {\n              var _e81 = i.endOffset;\n\n              if (this._boundaryEndParent == n && this.boundaries.end.offset < _e81) {\n                _e81 = this.boundaries.end.offset;\n              }\n\n              _o30 = _e81 - t.offset;\n            }\n\n            var _s13 = t.offset - i.startOffset;\n\n            var _r10 = new Bh(i, _s13, _o30);\n\n            t.offset += _o30;\n            this.position = t;\n            return Wh(\"text\", _r10, e, t, _o30);\n          } else {\n            t.path.pop();\n            t.offset++;\n            this.position = t;\n            this._visitedParent = n.parent;\n\n            if (this.ignoreElementEnd) {\n              return this._next();\n            } else {\n              return Wh(\"elementEnd\", n, e, t);\n            }\n          }\n        }\n      }, {\n        key: \"_previous\",\n        value: function _previous() {\n          var e = this.position;\n          var t = this.position.clone();\n          var n = this._visitedParent;\n\n          if (n.parent === null && t.offset === 0) {\n            return {\n              done: true\n            };\n          }\n\n          if (n == this._boundaryStartParent && t.offset == this.boundaries.start.offset) {\n            return {\n              done: true\n            };\n          }\n\n          var i = t.textNode ? t.textNode : t.nodeBefore;\n\n          if (i instanceof Fh) {\n            t.offset--;\n\n            if (!this.shallow) {\n              t.path.push(i.maxOffset);\n              this.position = t;\n              this._visitedParent = i;\n\n              if (this.ignoreElementEnd) {\n                return this._previous();\n              } else {\n                return Wh(\"elementEnd\", i, e, t);\n              }\n            } else {\n              this.position = t;\n              return Wh(\"elementStart\", i, e, t, 1);\n            }\n          } else if (i instanceof zh) {\n            var _o31;\n\n            if (this.singleCharacters) {\n              _o31 = 1;\n            } else {\n              var _e82 = i.startOffset;\n\n              if (this._boundaryStartParent == n && this.boundaries.start.offset > _e82) {\n                _e82 = this.boundaries.start.offset;\n              }\n\n              _o31 = t.offset - _e82;\n            }\n\n            var _s14 = t.offset - i.startOffset;\n\n            var _r11 = new Bh(i, _s14 - _o31, _o31);\n\n            t.offset -= _o31;\n            this.position = t;\n            return Wh(\"text\", _r11, e, t, _o31);\n          } else {\n            t.path.pop();\n            this.position = t;\n            this._visitedParent = n.parent;\n            return Wh(\"elementStart\", n, e, t, 1);\n          }\n        }\n      }]);\n\n      return Uh;\n    }(Symbol.iterator);\n\n    function Wh(e, t, n, i, o) {\n      return {\n        done: false,\n        value: {\n          type: e,\n          item: t,\n          previousPosition: n,\n          nextPosition: i,\n          length: o\n        }\n      };\n    }\n\n    var $h = /*#__PURE__*/function () {\n      function $h(e, t) {\n        var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"toNone\";\n\n        _classCallCheck(this, $h);\n\n        if (!e.is(\"element\") && !e.is(\"documentFragment\")) {\n          throw new rr[\"b\"](\"model-position-root-invalid: Position root invalid.\", e);\n        }\n\n        if (!(t instanceof Array) || t.length === 0) {\n          throw new rr[\"b\"](\"model-position-path-incorrect-format: Position path must be an array with at least one item.\", e, {\n            path: t\n          });\n        }\n\n        t = e.getPath().concat(t);\n        e = e.root;\n        this.root = e;\n        this.path = t;\n        this.stickiness = n;\n      }\n\n      _createClass($h, [{\n        key: \"offset\",\n        get: function get() {\n          return Aa(this.path);\n        },\n        set: function set(e) {\n          this.path[this.path.length - 1] = e;\n        }\n      }, {\n        key: \"parent\",\n        get: function get() {\n          var e = this.root;\n\n          for (var _t79 = 0; _t79 < this.path.length - 1; _t79++) {\n            e = e.getChild(e.offsetToIndex(this.path[_t79]));\n\n            if (!e) {\n              throw new rr[\"b\"](\"model-position-path-incorrect: The position's path is incorrect.\", this, {\n                position: this\n              });\n            }\n          }\n\n          if (e.is(\"text\")) {\n            throw new rr[\"b\"](\"model-position-path-incorrect: The position's path is incorrect.\", this, {\n              position: this\n            });\n          }\n\n          return e;\n        }\n      }, {\n        key: \"index\",\n        get: function get() {\n          return this.parent.offsetToIndex(this.offset);\n        }\n      }, {\n        key: \"textNode\",\n        get: function get() {\n          var e = this.parent.getChild(this.index);\n          return e instanceof zh && e.startOffset < this.offset ? e : null;\n        }\n      }, {\n        key: \"nodeAfter\",\n        get: function get() {\n          return this.textNode === null ? this.parent.getChild(this.index) : null;\n        }\n      }, {\n        key: \"nodeBefore\",\n        get: function get() {\n          return this.textNode === null ? this.parent.getChild(this.index - 1) : null;\n        }\n      }, {\n        key: \"isAtStart\",\n        get: function get() {\n          return this.offset === 0;\n        }\n      }, {\n        key: \"isAtEnd\",\n        get: function get() {\n          return this.offset == this.parent.maxOffset;\n        }\n      }, {\n        key: \"compareWith\",\n        value: function compareWith(e) {\n          if (this.root != e.root) {\n            return \"different\";\n          }\n\n          var t = Nr(this.path, e.path);\n\n          switch (t) {\n            case \"same\":\n              return \"same\";\n\n            case \"prefix\":\n              return \"before\";\n\n            case \"extension\":\n              return \"after\";\n\n            default:\n              return this.path[t] < e.path[t] ? \"before\" : \"after\";\n          }\n        }\n      }, {\n        key: \"getLastMatchingPosition\",\n        value: function getLastMatchingPosition(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          t.startPosition = this;\n          var n = new Uh(t);\n          n.skip(e);\n          return n.position;\n        }\n      }, {\n        key: \"getParentPath\",\n        value: function getParentPath() {\n          return this.path.slice(0, -1);\n        }\n      }, {\n        key: \"getAncestors\",\n        value: function getAncestors() {\n          if (this.parent.is(\"documentFragment\")) {\n            return [this.parent];\n          } else {\n            return this.parent.getAncestors({\n              includeSelf: true\n            });\n          }\n        }\n      }, {\n        key: \"getCommonPath\",\n        value: function getCommonPath(e) {\n          if (this.root != e.root) {\n            return [];\n          }\n\n          var t = Nr(this.path, e.path);\n          var n = typeof t == \"string\" ? Math.min(this.path.length, e.path.length) : t;\n          return this.path.slice(0, n);\n        }\n      }, {\n        key: \"getCommonAncestor\",\n        value: function getCommonAncestor(e) {\n          var t = this.getAncestors();\n          var n = e.getAncestors();\n          var i = 0;\n\n          while (t[i] == n[i] && t[i]) {\n            i++;\n          }\n\n          return i === 0 ? null : t[i - 1];\n        }\n      }, {\n        key: \"getShiftedBy\",\n        value: function getShiftedBy(e) {\n          var t = this.clone();\n          var n = t.offset + e;\n          t.offset = n < 0 ? 0 : n;\n          return t;\n        }\n      }, {\n        key: \"isAfter\",\n        value: function isAfter(e) {\n          return this.compareWith(e) == \"after\";\n        }\n      }, {\n        key: \"isBefore\",\n        value: function isBefore(e) {\n          return this.compareWith(e) == \"before\";\n        }\n      }, {\n        key: \"isEqual\",\n        value: function isEqual(e) {\n          return this.compareWith(e) == \"same\";\n        }\n      }, {\n        key: \"isTouching\",\n        value: function isTouching(e) {\n          var t = null;\n          var n = null;\n          var i = this.compareWith(e);\n\n          switch (i) {\n            case \"same\":\n              return true;\n\n            case \"before\":\n              t = $h._createAt(this);\n              n = $h._createAt(e);\n              break;\n\n            case \"after\":\n              t = $h._createAt(e);\n              n = $h._createAt(this);\n              break;\n\n            default:\n              return false;\n          }\n\n          var o = t.parent;\n\n          while (t.path.length + n.path.length) {\n            if (t.isEqual(n)) {\n              return true;\n            }\n\n            if (t.path.length > n.path.length) {\n              if (t.offset !== o.maxOffset) {\n                return false;\n              }\n\n              t.path = t.path.slice(0, -1);\n              o = o.parent;\n              t.offset++;\n            } else {\n              if (n.offset !== 0) {\n                return false;\n              }\n\n              n.path = n.path.slice(0, -1);\n            }\n          }\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          return e == \"position\" || e == \"model:position\";\n        }\n      }, {\n        key: \"hasSameParentAs\",\n        value: function hasSameParentAs(e) {\n          if (this.root !== e.root) {\n            return false;\n          }\n\n          var t = this.getParentPath();\n          var n = e.getParentPath();\n          return Nr(t, n) == \"same\";\n        }\n      }, {\n        key: \"getTransformedByOperation\",\n        value: function getTransformedByOperation(e) {\n          var t;\n\n          switch (e.type) {\n            case \"insert\":\n              t = this._getTransformedByInsertOperation(e);\n              break;\n\n            case \"move\":\n            case \"remove\":\n            case \"reinsert\":\n              t = this._getTransformedByMoveOperation(e);\n              break;\n\n            case \"split\":\n              t = this._getTransformedBySplitOperation(e);\n              break;\n\n            case \"merge\":\n              t = this._getTransformedByMergeOperation(e);\n              break;\n\n            default:\n              t = $h._createAt(this);\n              break;\n          }\n\n          return t;\n        }\n      }, {\n        key: \"_getTransformedByInsertOperation\",\n        value: function _getTransformedByInsertOperation(e) {\n          return this._getTransformedByInsertion(e.position, e.howMany);\n        }\n      }, {\n        key: \"_getTransformedByMoveOperation\",\n        value: function _getTransformedByMoveOperation(e) {\n          return this._getTransformedByMove(e.sourcePosition, e.targetPosition, e.howMany);\n        }\n      }, {\n        key: \"_getTransformedBySplitOperation\",\n        value: function _getTransformedBySplitOperation(e) {\n          var t = e.movedRange;\n          var n = t.containsPosition(this) || t.start.isEqual(this) && this.stickiness == \"toNext\";\n\n          if (n) {\n            return this._getCombined(e.splitPosition, e.moveTargetPosition);\n          } else {\n            if (e.graveyardPosition) {\n              return this._getTransformedByMove(e.graveyardPosition, e.insertionPosition, 1);\n            } else {\n              return this._getTransformedByInsertion(e.insertionPosition, 1);\n            }\n          }\n        }\n      }, {\n        key: \"_getTransformedByMergeOperation\",\n        value: function _getTransformedByMergeOperation(e) {\n          var t = e.movedRange;\n          var n = t.containsPosition(this) || t.start.isEqual(this);\n          var i;\n\n          if (n) {\n            i = this._getCombined(e.sourcePosition, e.targetPosition);\n\n            if (e.sourcePosition.isBefore(e.targetPosition)) {\n              i = i._getTransformedByDeletion(e.deletionPosition, 1);\n            }\n          } else if (this.isEqual(e.deletionPosition)) {\n            i = $h._createAt(e.deletionPosition);\n          } else {\n            i = this._getTransformedByMove(e.deletionPosition, e.graveyardPosition, 1);\n          }\n\n          return i;\n        }\n      }, {\n        key: \"_getTransformedByDeletion\",\n        value: function _getTransformedByDeletion(e, t) {\n          var n = $h._createAt(this);\n\n          if (this.root != e.root) {\n            return n;\n          }\n\n          if (Nr(e.getParentPath(), this.getParentPath()) == \"same\") {\n            if (e.offset < this.offset) {\n              if (e.offset + t > this.offset) {\n                return null;\n              } else {\n                n.offset -= t;\n              }\n            }\n          } else if (Nr(e.getParentPath(), this.getParentPath()) == \"prefix\") {\n            var _i54 = e.path.length - 1;\n\n            if (e.offset <= this.path[_i54]) {\n              if (e.offset + t > this.path[_i54]) {\n                return null;\n              } else {\n                n.path[_i54] -= t;\n              }\n            }\n          }\n\n          return n;\n        }\n      }, {\n        key: \"_getTransformedByInsertion\",\n        value: function _getTransformedByInsertion(e, t) {\n          var n = $h._createAt(this);\n\n          if (this.root != e.root) {\n            return n;\n          }\n\n          if (Nr(e.getParentPath(), this.getParentPath()) == \"same\") {\n            if (e.offset < this.offset || e.offset == this.offset && this.stickiness != \"toPrevious\") {\n              n.offset += t;\n            }\n          } else if (Nr(e.getParentPath(), this.getParentPath()) == \"prefix\") {\n            var _i55 = e.path.length - 1;\n\n            if (e.offset <= this.path[_i55]) {\n              n.path[_i55] += t;\n            }\n          }\n\n          return n;\n        }\n      }, {\n        key: \"_getTransformedByMove\",\n        value: function _getTransformedByMove(e, t, n) {\n          t = t._getTransformedByDeletion(e, n);\n\n          if (e.isEqual(t)) {\n            return $h._createAt(this);\n          }\n\n          var i = this._getTransformedByDeletion(e, n);\n\n          var o = i === null || e.isEqual(this) && this.stickiness == \"toNext\" || e.getShiftedBy(n).isEqual(this) && this.stickiness == \"toPrevious\";\n\n          if (o) {\n            return this._getCombined(e, t);\n          } else {\n            return i._getTransformedByInsertion(t, n);\n          }\n        }\n      }, {\n        key: \"_getCombined\",\n        value: function _getCombined(e, t) {\n          var n = e.path.length - 1;\n\n          var i = $h._createAt(t);\n\n          i.stickiness = this.stickiness;\n          i.offset = i.offset + this.path[n] - e.offset;\n          i.path = i.path.concat(this.path.slice(n + 1));\n          return i;\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          return {\n            root: this.root.toJSON(),\n            path: Array.from(this.path),\n            stickiness: this.stickiness\n          };\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new this.constructor(this.root, this.path, this.stickiness);\n        }\n      }], [{\n        key: \"_createAt\",\n        value: function _createAt(e, t) {\n          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"toNone\";\n\n          if (e instanceof $h) {\n            return new $h(e.root, e.path, e.stickiness);\n          } else {\n            var _i56 = e;\n\n            if (t == \"end\") {\n              t = _i56.maxOffset;\n            } else if (t == \"before\") {\n              return this._createBefore(_i56, n);\n            } else if (t == \"after\") {\n              return this._createAfter(_i56, n);\n            } else if (t !== 0 && !t) {\n              throw new rr[\"b\"](\"model-createPositionAt-offset-required: \" + \"Model#createPositionAt() requires the offset when the first parameter is a model item.\", [this, e]);\n            }\n\n            if (!_i56.is(\"element\") && !_i56.is(\"documentFragment\")) {\n              throw new rr[\"b\"](\"model-position-parent-incorrect: Position parent have to be a element or document fragment.\", [this, e]);\n            }\n\n            var _o32 = _i56.getPath();\n\n            _o32.push(t);\n\n            return new this(_i56.root, _o32, n);\n          }\n        }\n      }, {\n        key: \"_createAfter\",\n        value: function _createAfter(e, t) {\n          if (!e.parent) {\n            throw new rr[\"b\"](\"model-position-after-root: You cannot make a position after root.\", [this, e], {\n              root: e\n            });\n          }\n\n          return this._createAt(e.parent, e.endOffset, t);\n        }\n      }, {\n        key: \"_createBefore\",\n        value: function _createBefore(e, t) {\n          if (!e.parent) {\n            throw new rr[\"b\"](\"model-position-before-root: You cannot make a position before root.\", e, {\n              root: e\n            });\n          }\n\n          return this._createAt(e.parent, e.startOffset, t);\n        }\n      }, {\n        key: \"fromJSON\",\n        value: function fromJSON(e, t) {\n          if (e.root === \"$graveyard\") {\n            var _n77 = new $h(t.graveyard, e.path);\n\n            _n77.stickiness = e.stickiness;\n            return _n77;\n          }\n\n          if (!t.getRoot(e.root)) {\n            throw new rr[\"b\"](\"model-position-fromjson-no-root: Cannot create position for document. Root with specified name does not exist.\", t, {\n              rootName: e.root\n            });\n          }\n\n          return new $h(t.getRoot(e.root), e.path, e.stickiness);\n        }\n      }]);\n\n      return $h;\n    }();\n\n    var qh = /*#__PURE__*/function (_Symbol$iterator8) {\n      function qh(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n        _classCallCheck(this, qh);\n\n        this.start = $h._createAt(e);\n        this.end = t ? $h._createAt(t) : $h._createAt(e);\n        this.start.stickiness = this.isCollapsed ? \"toNone\" : \"toNext\";\n        this.end.stickiness = this.isCollapsed ? \"toNone\" : \"toPrevious\";\n      }\n\n      _createClass(qh, [{\n        key: _Symbol$iterator8,\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function value() {\n          return _regeneratorRuntime().wrap(function value$(_context13) {\n            while (1) {\n              switch (_context13.prev = _context13.next) {\n                case 0:\n                  return _context13.delegateYield(new Uh({\n                    boundaries: this,\n                    ignoreElementEnd: true\n                  }), \"t0\", 1);\n\n                case 1:\n                case \"end\":\n                  return _context13.stop();\n              }\n            }\n          }, value, this);\n        })\n      }, {\n        key: \"isCollapsed\",\n        get: function get() {\n          return this.start.isEqual(this.end);\n        }\n      }, {\n        key: \"isFlat\",\n        get: function get() {\n          var e = this.start.getParentPath();\n          var t = this.end.getParentPath();\n          return Nr(e, t) == \"same\";\n        }\n      }, {\n        key: \"root\",\n        get: function get() {\n          return this.start.root;\n        }\n      }, {\n        key: \"containsPosition\",\n        value: function containsPosition(e) {\n          return e.isAfter(this.start) && e.isBefore(this.end);\n        }\n      }, {\n        key: \"containsRange\",\n        value: function containsRange(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n          if (e.isCollapsed) {\n            t = false;\n          }\n\n          var n = this.containsPosition(e.start) || t && this.start.isEqual(e.start);\n          var i = this.containsPosition(e.end) || t && this.end.isEqual(e.end);\n          return n && i;\n        }\n      }, {\n        key: \"containsItem\",\n        value: function containsItem(e) {\n          var t = $h._createBefore(e);\n\n          return this.containsPosition(t) || this.start.isEqual(t);\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          return e == \"range\" || e == \"model:range\";\n        }\n      }, {\n        key: \"isEqual\",\n        value: function isEqual(e) {\n          return this.start.isEqual(e.start) && this.end.isEqual(e.end);\n        }\n      }, {\n        key: \"isIntersecting\",\n        value: function isIntersecting(e) {\n          return this.start.isBefore(e.end) && this.end.isAfter(e.start);\n        }\n      }, {\n        key: \"getDifference\",\n        value: function getDifference(e) {\n          var t = [];\n\n          if (this.isIntersecting(e)) {\n            if (this.containsPosition(e.start)) {\n              t.push(new qh(this.start, e.start));\n            }\n\n            if (this.containsPosition(e.end)) {\n              t.push(new qh(e.end, this.end));\n            }\n          } else {\n            t.push(new qh(this.start, this.end));\n          }\n\n          return t;\n        }\n      }, {\n        key: \"getIntersection\",\n        value: function getIntersection(e) {\n          if (this.isIntersecting(e)) {\n            var _t80 = this.start;\n            var _n78 = this.end;\n\n            if (this.containsPosition(e.start)) {\n              _t80 = e.start;\n            }\n\n            if (this.containsPosition(e.end)) {\n              _n78 = e.end;\n            }\n\n            return new qh(_t80, _n78);\n          }\n\n          return null;\n        }\n      }, {\n        key: \"getMinimalFlatRanges\",\n        value: function getMinimalFlatRanges() {\n          var e = [];\n          var t = this.start.getCommonPath(this.end).length;\n\n          var n = $h._createAt(this.start);\n\n          var i = n.parent;\n\n          while (n.path.length > t + 1) {\n            var _t81 = i.maxOffset - n.offset;\n\n            if (_t81 !== 0) {\n              e.push(new qh(n, n.getShiftedBy(_t81)));\n            }\n\n            n.path = n.path.slice(0, -1);\n            n.offset++;\n            i = i.parent;\n          }\n\n          while (n.path.length <= this.end.path.length) {\n            var _t82 = this.end.path[n.path.length - 1];\n\n            var _i57 = _t82 - n.offset;\n\n            if (_i57 !== 0) {\n              e.push(new qh(n, n.getShiftedBy(_i57)));\n            }\n\n            n.offset = _t82;\n            n.path.push(0);\n          }\n\n          return e;\n        }\n      }, {\n        key: \"getWalker\",\n        value: function getWalker() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          e.boundaries = this;\n          return new Uh(e);\n        }\n      }, {\n        key: \"getItems\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function getItems() {\n          var e,\n              t,\n              _iterator97,\n              _step97,\n              _e83,\n              _args14 = arguments;\n\n          return _regeneratorRuntime().wrap(function getItems$(_context14) {\n            while (1) {\n              switch (_context14.prev = _context14.next) {\n                case 0:\n                  e = _args14.length > 0 && _args14[0] !== undefined ? _args14[0] : {};\n                  e.boundaries = this;\n                  e.ignoreElementEnd = true;\n                  t = new Uh(e);\n                  _iterator97 = _createForOfIteratorHelper(t);\n                  _context14.prev = 5;\n\n                  _iterator97.s();\n\n                case 7:\n                  if ((_step97 = _iterator97.n()).done) {\n                    _context14.next = 13;\n                    break;\n                  }\n\n                  _e83 = _step97.value;\n                  _context14.next = 11;\n                  return _e83.item;\n\n                case 11:\n                  _context14.next = 7;\n                  break;\n\n                case 13:\n                  _context14.next = 18;\n                  break;\n\n                case 15:\n                  _context14.prev = 15;\n                  _context14.t0 = _context14[\"catch\"](5);\n\n                  _iterator97.e(_context14.t0);\n\n                case 18:\n                  _context14.prev = 18;\n\n                  _iterator97.f();\n\n                  return _context14.finish(18);\n\n                case 21:\n                case \"end\":\n                  return _context14.stop();\n              }\n            }\n          }, getItems, this, [[5, 15, 18, 21]]);\n        })\n      }, {\n        key: \"getPositions\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function getPositions() {\n          var e,\n              t,\n              _iterator98,\n              _step98,\n              _e84,\n              _args15 = arguments;\n\n          return _regeneratorRuntime().wrap(function getPositions$(_context15) {\n            while (1) {\n              switch (_context15.prev = _context15.next) {\n                case 0:\n                  e = _args15.length > 0 && _args15[0] !== undefined ? _args15[0] : {};\n                  e.boundaries = this;\n                  t = new Uh(e);\n                  _context15.next = 5;\n                  return t.position;\n\n                case 5:\n                  _iterator98 = _createForOfIteratorHelper(t);\n                  _context15.prev = 6;\n\n                  _iterator98.s();\n\n                case 8:\n                  if ((_step98 = _iterator98.n()).done) {\n                    _context15.next = 14;\n                    break;\n                  }\n\n                  _e84 = _step98.value;\n                  _context15.next = 12;\n                  return _e84.nextPosition;\n\n                case 12:\n                  _context15.next = 8;\n                  break;\n\n                case 14:\n                  _context15.next = 19;\n                  break;\n\n                case 16:\n                  _context15.prev = 16;\n                  _context15.t0 = _context15[\"catch\"](6);\n\n                  _iterator98.e(_context15.t0);\n\n                case 19:\n                  _context15.prev = 19;\n\n                  _iterator98.f();\n\n                  return _context15.finish(19);\n\n                case 22:\n                case \"end\":\n                  return _context15.stop();\n              }\n            }\n          }, getPositions, this, [[6, 16, 19, 22]]);\n        })\n      }, {\n        key: \"getTransformedByOperation\",\n        value: function getTransformedByOperation(e) {\n          switch (e.type) {\n            case \"insert\":\n              return this._getTransformedByInsertOperation(e);\n\n            case \"move\":\n            case \"remove\":\n            case \"reinsert\":\n              return this._getTransformedByMoveOperation(e);\n\n            case \"split\":\n              return [this._getTransformedBySplitOperation(e)];\n\n            case \"merge\":\n              return [this._getTransformedByMergeOperation(e)];\n          }\n\n          return [new qh(this.start, this.end)];\n        }\n      }, {\n        key: \"getTransformedByOperations\",\n        value: function getTransformedByOperations(e) {\n          var t = [new qh(this.start, this.end)];\n\n          var _iterator99 = _createForOfIteratorHelper(e),\n              _step99;\n\n          try {\n            for (_iterator99.s(); !(_step99 = _iterator99.n()).done;) {\n              var _n80 = _step99.value;\n\n              for (var _e87 = 0; _e87 < t.length; _e87++) {\n                var _i59 = t[_e87].getTransformedByOperation(_n80);\n\n                t.splice.apply(t, [_e87, 1].concat(_toConsumableArray(_i59)));\n                _e87 += _i59.length - 1;\n              }\n            }\n          } catch (err) {\n            _iterator99.e(err);\n          } finally {\n            _iterator99.f();\n          }\n\n          for (var _e85 = 0; _e85 < t.length; _e85++) {\n            var _n79 = t[_e85];\n\n            for (var _i58 = _e85 + 1; _i58 < t.length; _i58++) {\n              var _e86 = t[_i58];\n\n              if (_n79.containsRange(_e86) || _e86.containsRange(_n79) || _n79.isEqual(_e86)) {\n                t.splice(_i58, 1);\n              }\n            }\n          }\n\n          return t;\n        }\n      }, {\n        key: \"getCommonAncestor\",\n        value: function getCommonAncestor() {\n          return this.start.getCommonAncestor(this.end);\n        }\n      }, {\n        key: \"getContainedElement\",\n        value: function getContainedElement() {\n          if (this.isCollapsed) {\n            return null;\n          }\n\n          var e = this.start.nodeAfter;\n          var t = this.end.nodeBefore;\n\n          if (e && e.is(\"element\") && e === t) {\n            return e;\n          }\n\n          return null;\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          return {\n            start: this.start.toJSON(),\n            end: this.end.toJSON()\n          };\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new this.constructor(this.start, this.end);\n        }\n      }, {\n        key: \"_getTransformedByInsertOperation\",\n        value: function _getTransformedByInsertOperation(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n          return this._getTransformedByInsertion(e.position, e.howMany, t);\n        }\n      }, {\n        key: \"_getTransformedByMoveOperation\",\n        value: function _getTransformedByMoveOperation(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n          var n = e.sourcePosition;\n          var i = e.howMany;\n          var o = e.targetPosition;\n          return this._getTransformedByMove(n, o, i, t);\n        }\n      }, {\n        key: \"_getTransformedBySplitOperation\",\n        value: function _getTransformedBySplitOperation(e) {\n          var t = this.start._getTransformedBySplitOperation(e);\n\n          var n = this.end._getTransformedBySplitOperation(e);\n\n          if (this.end.isEqual(e.insertionPosition)) {\n            n = this.end.getShiftedBy(1);\n          }\n\n          if (t.root != n.root) {\n            n = this.end.getShiftedBy(-1);\n          }\n\n          return new qh(t, n);\n        }\n      }, {\n        key: \"_getTransformedByMergeOperation\",\n        value: function _getTransformedByMergeOperation(e) {\n          if (this.start.isEqual(e.targetPosition) && this.end.isEqual(e.deletionPosition)) {\n            return new qh(this.start);\n          }\n\n          var t = this.start._getTransformedByMergeOperation(e);\n\n          var n = this.end._getTransformedByMergeOperation(e);\n\n          if (t.root != n.root) {\n            n = this.end.getShiftedBy(-1);\n          }\n\n          if (t.isAfter(n)) {\n            if (e.sourcePosition.isBefore(e.targetPosition)) {\n              t = $h._createAt(n);\n              t.offset = 0;\n            } else {\n              if (!e.deletionPosition.isEqual(t)) {\n                n = e.deletionPosition;\n              }\n\n              t = e.targetPosition;\n            }\n\n            return new qh(t, n);\n          }\n\n          return new qh(t, n);\n        }\n      }, {\n        key: \"_getTransformedByInsertion\",\n        value: function _getTransformedByInsertion(e, t) {\n          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n          if (n && this.containsPosition(e)) {\n            return [new qh(this.start, e), new qh(e.getShiftedBy(t), this.end._getTransformedByInsertion(e, t))];\n          } else {\n            var _n81 = new qh(this.start, this.end);\n\n            _n81.start = _n81.start._getTransformedByInsertion(e, t);\n            _n81.end = _n81.end._getTransformedByInsertion(e, t);\n            return [_n81];\n          }\n        }\n      }, {\n        key: \"_getTransformedByMove\",\n        value: function _getTransformedByMove(e, t, n) {\n          var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n          if (this.isCollapsed) {\n            var _i60 = this.start._getTransformedByMove(e, t, n);\n\n            return [new qh(_i60)];\n          }\n\n          var o = qh._createFromPositionAndShift(e, n);\n\n          var s = t._getTransformedByDeletion(e, n);\n\n          if (this.containsPosition(t) && !i) {\n            if (o.containsPosition(this.start) || o.containsPosition(this.end)) {\n              var _i61 = this.start._getTransformedByMove(e, t, n);\n\n              var _o33 = this.end._getTransformedByMove(e, t, n);\n\n              return [new qh(_i61, _o33)];\n            }\n          }\n\n          var r;\n          var a = this.getDifference(o);\n          var c = null;\n          var l = this.getIntersection(o);\n\n          if (a.length == 1) {\n            c = new qh(a[0].start._getTransformedByDeletion(e, n), a[0].end._getTransformedByDeletion(e, n));\n          } else if (a.length == 2) {\n            c = new qh(this.start, this.end._getTransformedByDeletion(e, n));\n          }\n\n          if (c) {\n            r = c._getTransformedByInsertion(s, n, l !== null || i);\n          } else {\n            r = [];\n          }\n\n          if (l) {\n            var _e88 = new qh(l.start._getCombined(o.start, s), l.end._getCombined(o.start, s));\n\n            if (r.length == 2) {\n              r.splice(1, 0, _e88);\n            } else {\n              r.push(_e88);\n            }\n          }\n\n          return r;\n        }\n      }, {\n        key: \"_getTransformedByDeletion\",\n        value: function _getTransformedByDeletion(e, t) {\n          var n = this.start._getTransformedByDeletion(e, t);\n\n          var i = this.end._getTransformedByDeletion(e, t);\n\n          if (n == null && i == null) {\n            return null;\n          }\n\n          if (n == null) {\n            n = e;\n          }\n\n          if (i == null) {\n            i = e;\n          }\n\n          return new qh(n, i);\n        }\n      }], [{\n        key: \"_createFromPositionAndShift\",\n        value: function _createFromPositionAndShift(e, t) {\n          var n = e;\n          var i = e.getShiftedBy(t);\n          return t > 0 ? new this(n, i) : new this(i, n);\n        }\n      }, {\n        key: \"_createIn\",\n        value: function _createIn(e) {\n          return new this($h._createAt(e, 0), $h._createAt(e, e.maxOffset));\n        }\n      }, {\n        key: \"_createOn\",\n        value: function _createOn(e) {\n          return this._createFromPositionAndShift($h._createBefore(e), e.offsetSize);\n        }\n      }, {\n        key: \"_createFromRanges\",\n        value: function _createFromRanges(e) {\n          if (e.length === 0) {\n            throw new rr[\"b\"](\"range-create-from-ranges-empty-array: At least one range has to be passed.\", null);\n          } else if (e.length == 1) {\n            return e[0].clone();\n          }\n\n          var t = e[0];\n          e.sort(function (e, t) {\n            return e.start.isAfter(t.start) ? 1 : -1;\n          });\n          var n = e.indexOf(t);\n          var i = new this(t.start, t.end);\n\n          if (n > 0) {\n            for (var _t83 = n - 1; true; _t83++) {\n              if (e[_t83].end.isEqual(i.start)) {\n                i.start = $h._createAt(e[_t83].start);\n              } else {\n                break;\n              }\n            }\n          }\n\n          for (var _t84 = n + 1; _t84 < e.length; _t84++) {\n            if (e[_t84].start.isEqual(i.end)) {\n              i.end = $h._createAt(e[_t84].end);\n            } else {\n              break;\n            }\n          }\n\n          return i;\n        }\n      }, {\n        key: \"fromJSON\",\n        value: function fromJSON(e, t) {\n          return new this($h.fromJSON(e.start, t), $h.fromJSON(e.end, t));\n        }\n      }]);\n\n      return qh;\n    }(Symbol.iterator);\n\n    var Yh = /*#__PURE__*/function () {\n      function Yh() {\n        var _this43 = this;\n\n        _classCallCheck(this, Yh);\n\n        this._modelToViewMapping = new WeakMap();\n        this._viewToModelMapping = new WeakMap();\n        this._viewToModelLengthCallbacks = new Map();\n        this._markerNameToElements = new Map();\n        this._elementToMarkerNames = new Map();\n        this._unboundMarkerNames = new Set();\n        this.on(\"modelToViewPosition\", function (e, t) {\n          if (t.viewPosition) {\n            return;\n          }\n\n          var n = _this43._modelToViewMapping.get(t.modelPosition.parent);\n\n          t.viewPosition = _this43._findPositionIn(n, t.modelPosition.offset);\n        }, {\n          priority: \"low\"\n        });\n        this.on(\"viewToModelPosition\", function (e, t) {\n          if (t.modelPosition) {\n            return;\n          }\n\n          var n = _this43.findMappedViewAncestor(t.viewPosition);\n\n          var i = _this43._viewToModelMapping.get(n);\n\n          var o = _this43._toModelOffset(t.viewPosition.parent, t.viewPosition.offset, n);\n\n          t.modelPosition = $h._createAt(i, o);\n        }, {\n          priority: \"low\"\n        });\n      }\n\n      _createClass(Yh, [{\n        key: \"bindElements\",\n        value: function bindElements(e, t) {\n          this._modelToViewMapping.set(e, t);\n\n          this._viewToModelMapping.set(t, e);\n        }\n      }, {\n        key: \"unbindViewElement\",\n        value: function unbindViewElement(e) {\n          var t = this.toModelElement(e);\n\n          this._viewToModelMapping.delete(e);\n\n          if (this._elementToMarkerNames.has(e)) {\n            var _iterator100 = _createForOfIteratorHelper(this._elementToMarkerNames.get(e)),\n                _step100;\n\n            try {\n              for (_iterator100.s(); !(_step100 = _iterator100.n()).done;) {\n                var _t85 = _step100.value;\n\n                this._unboundMarkerNames.add(_t85);\n              }\n            } catch (err) {\n              _iterator100.e(err);\n            } finally {\n              _iterator100.f();\n            }\n          }\n\n          if (this._modelToViewMapping.get(t) == e) {\n            this._modelToViewMapping.delete(t);\n          }\n        }\n      }, {\n        key: \"unbindModelElement\",\n        value: function unbindModelElement(e) {\n          var t = this.toViewElement(e);\n\n          this._modelToViewMapping.delete(e);\n\n          if (this._viewToModelMapping.get(t) == e) {\n            this._viewToModelMapping.delete(t);\n          }\n        }\n      }, {\n        key: \"bindElementToMarker\",\n        value: function bindElementToMarker(e, t) {\n          var n = this._markerNameToElements.get(t) || new Set();\n          n.add(e);\n          var i = this._elementToMarkerNames.get(e) || new Set();\n          i.add(t);\n\n          this._markerNameToElements.set(t, n);\n\n          this._elementToMarkerNames.set(e, i);\n        }\n      }, {\n        key: \"unbindElementFromMarkerName\",\n        value: function unbindElementFromMarkerName(e, t) {\n          var n = this._markerNameToElements.get(t);\n\n          if (n) {\n            n.delete(e);\n\n            if (n.size == 0) {\n              this._markerNameToElements.delete(t);\n            }\n          }\n\n          var i = this._elementToMarkerNames.get(e);\n\n          if (i) {\n            i.delete(t);\n\n            if (i.size == 0) {\n              this._elementToMarkerNames.delete(e);\n            }\n          }\n        }\n      }, {\n        key: \"flushUnboundMarkerNames\",\n        value: function flushUnboundMarkerNames() {\n          var e = Array.from(this._unboundMarkerNames);\n\n          this._unboundMarkerNames.clear();\n\n          return e;\n        }\n      }, {\n        key: \"clearBindings\",\n        value: function clearBindings() {\n          this._modelToViewMapping = new WeakMap();\n          this._viewToModelMapping = new WeakMap();\n          this._markerNameToElements = new Map();\n          this._elementToMarkerNames = new Map();\n          this._unboundMarkerNames = new Set();\n        }\n      }, {\n        key: \"toModelElement\",\n        value: function toModelElement(e) {\n          return this._viewToModelMapping.get(e);\n        }\n      }, {\n        key: \"toViewElement\",\n        value: function toViewElement(e) {\n          return this._modelToViewMapping.get(e);\n        }\n      }, {\n        key: \"toModelRange\",\n        value: function toModelRange(e) {\n          return new qh(this.toModelPosition(e.start), this.toModelPosition(e.end));\n        }\n      }, {\n        key: \"toViewRange\",\n        value: function toViewRange(e) {\n          return new ul(this.toViewPosition(e.start), this.toViewPosition(e.end));\n        }\n      }, {\n        key: \"toModelPosition\",\n        value: function toModelPosition(e) {\n          var t = {\n            viewPosition: e,\n            mapper: this\n          };\n          this.fire(\"viewToModelPosition\", t);\n          return t.modelPosition;\n        }\n      }, {\n        key: \"toViewPosition\",\n        value: function toViewPosition(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n            isPhantom: false\n          };\n          var n = {\n            modelPosition: e,\n            mapper: this,\n            isPhantom: t.isPhantom\n          };\n          this.fire(\"modelToViewPosition\", n);\n          return n.viewPosition;\n        }\n      }, {\n        key: \"markerNameToElements\",\n        value: function markerNameToElements(e) {\n          var t = this._markerNameToElements.get(e);\n\n          if (!t) {\n            return null;\n          }\n\n          var n = new Set();\n\n          var _iterator101 = _createForOfIteratorHelper(t),\n              _step101;\n\n          try {\n            for (_iterator101.s(); !(_step101 = _iterator101.n()).done;) {\n              var _e89 = _step101.value;\n\n              if (_e89.is(\"attributeElement\")) {\n                var _iterator102 = _createForOfIteratorHelper(_e89.getElementsWithSameId()),\n                    _step102;\n\n                try {\n                  for (_iterator102.s(); !(_step102 = _iterator102.n()).done;) {\n                    var _t86 = _step102.value;\n                    n.add(_t86);\n                  }\n                } catch (err) {\n                  _iterator102.e(err);\n                } finally {\n                  _iterator102.f();\n                }\n              } else {\n                n.add(_e89);\n              }\n            }\n          } catch (err) {\n            _iterator101.e(err);\n          } finally {\n            _iterator101.f();\n          }\n\n          return n;\n        }\n      }, {\n        key: \"registerViewToModelLength\",\n        value: function registerViewToModelLength(e, t) {\n          this._viewToModelLengthCallbacks.set(e, t);\n        }\n      }, {\n        key: \"findMappedViewAncestor\",\n        value: function findMappedViewAncestor(e) {\n          var t = e.parent;\n\n          while (!this._viewToModelMapping.has(t)) {\n            t = t.parent;\n          }\n\n          return t;\n        }\n      }, {\n        key: \"_toModelOffset\",\n        value: function _toModelOffset(e, t, n) {\n          if (n != e) {\n            var _i62 = this._toModelOffset(e.parent, e.index, n);\n\n            var _o34 = this._toModelOffset(e, t, e);\n\n            return _i62 + _o34;\n          }\n\n          if (e.is(\"text\")) {\n            return t;\n          }\n\n          var i = 0;\n\n          for (var _n82 = 0; _n82 < t; _n82++) {\n            i += this.getModelLength(e.getChild(_n82));\n          }\n\n          return i;\n        }\n      }, {\n        key: \"getModelLength\",\n        value: function getModelLength(e) {\n          if (this._viewToModelLengthCallbacks.get(e.name)) {\n            var _t87 = this._viewToModelLengthCallbacks.get(e.name);\n\n            return _t87(e);\n          } else if (this._viewToModelMapping.has(e)) {\n            return 1;\n          } else if (e.is(\"text\")) {\n            return e.data.length;\n          } else if (e.is(\"uiElement\")) {\n            return 0;\n          } else {\n            var _t88 = 0;\n\n            var _iterator103 = _createForOfIteratorHelper(e.getChildren()),\n                _step103;\n\n            try {\n              for (_iterator103.s(); !(_step103 = _iterator103.n()).done;) {\n                var _n83 = _step103.value;\n                _t88 += this.getModelLength(_n83);\n              }\n            } catch (err) {\n              _iterator103.e(err);\n            } finally {\n              _iterator103.f();\n            }\n\n            return _t88;\n          }\n        }\n      }, {\n        key: \"_findPositionIn\",\n        value: function _findPositionIn(e, t) {\n          var n;\n          var i = 0;\n          var o = 0;\n          var s = 0;\n\n          if (e.is(\"text\")) {\n            return new dl(e, t);\n          }\n\n          while (o < t) {\n            n = e.getChild(s);\n            i = this.getModelLength(n);\n            o += i;\n            s++;\n          }\n\n          if (o == t) {\n            return this._moveViewPositionToTextNode(new dl(e, s));\n          } else {\n            return this._findPositionIn(n, t - (o - i));\n          }\n        }\n      }, {\n        key: \"_moveViewPositionToTextNode\",\n        value: function _moveViewPositionToTextNode(e) {\n          var t = e.nodeBefore;\n          var n = e.nodeAfter;\n\n          if (t instanceof zr) {\n            return new dl(t, t.data.length);\n          } else if (n instanceof zr) {\n            return new dl(n, 0);\n          }\n\n          return e;\n        }\n      }]);\n\n      return Yh;\n    }();\n\n    kr(Yh, dr);\n\n    var Jh = /*#__PURE__*/function () {\n      function Jh() {\n        _classCallCheck(this, Jh);\n\n        this._consumable = new Map();\n        this._textProxyRegistry = new Map();\n      }\n\n      _createClass(Jh, [{\n        key: \"add\",\n        value: function add(e, t) {\n          t = Qh(t);\n\n          if (e instanceof Bh) {\n            e = this._getSymbolForTextProxy(e);\n          }\n\n          if (!this._consumable.has(e)) {\n            this._consumable.set(e, new Map());\n          }\n\n          this._consumable.get(e).set(t, true);\n        }\n      }, {\n        key: \"consume\",\n        value: function consume(e, t) {\n          t = Qh(t);\n\n          if (e instanceof Bh) {\n            e = this._getSymbolForTextProxy(e);\n          }\n\n          if (this.test(e, t)) {\n            this._consumable.get(e).set(t, false);\n\n            return true;\n          } else {\n            return false;\n          }\n        }\n      }, {\n        key: \"test\",\n        value: function test(e, t) {\n          t = Qh(t);\n\n          if (e instanceof Bh) {\n            e = this._getSymbolForTextProxy(e);\n          }\n\n          var n = this._consumable.get(e);\n\n          if (n === undefined) {\n            return null;\n          }\n\n          var i = n.get(t);\n\n          if (i === undefined) {\n            return null;\n          }\n\n          return i;\n        }\n      }, {\n        key: \"revert\",\n        value: function revert(e, t) {\n          t = Qh(t);\n\n          if (e instanceof Bh) {\n            e = this._getSymbolForTextProxy(e);\n          }\n\n          var n = this.test(e, t);\n\n          if (n === false) {\n            this._consumable.get(e).set(t, true);\n\n            return true;\n          } else if (n === true) {\n            return false;\n          }\n\n          return null;\n        }\n      }, {\n        key: \"_getSymbolForTextProxy\",\n        value: function _getSymbolForTextProxy(e) {\n          var t = null;\n\n          var n = this._textProxyRegistry.get(e.startOffset);\n\n          if (n) {\n            var _i63 = n.get(e.endOffset);\n\n            if (_i63) {\n              t = _i63.get(e.parent);\n            }\n          }\n\n          if (!t) {\n            t = this._addSymbolForTextProxy(e.startOffset, e.endOffset, e.parent);\n          }\n\n          return t;\n        }\n      }, {\n        key: \"_addSymbolForTextProxy\",\n        value: function _addSymbolForTextProxy(e, t, n) {\n          var i = Symbol(\"textProxySymbol\");\n          var o, s;\n          o = this._textProxyRegistry.get(e);\n\n          if (!o) {\n            o = new Map();\n\n            this._textProxyRegistry.set(e, o);\n          }\n\n          s = o.get(t);\n\n          if (!s) {\n            s = new Map();\n            o.set(t, s);\n          }\n\n          s.set(n, i);\n          return i;\n        }\n      }]);\n\n      return Jh;\n    }();\n\n    function Qh(e) {\n      var t = e.split(\":\");\n      return t.length > 1 ? t[0] + \":\" + t[1] : t[0];\n    }\n\n    var Xh = /*#__PURE__*/function () {\n      function Xh(e) {\n        _classCallCheck(this, Xh);\n\n        this.conversionApi = Wc({\n          dispatcher: this\n        }, e);\n      }\n\n      _createClass(Xh, [{\n        key: \"convertChanges\",\n        value: function convertChanges(e, t, n) {\n          var _iterator104 = _createForOfIteratorHelper(e.getMarkersToRemove()),\n              _step104;\n\n          try {\n            for (_iterator104.s(); !(_step104 = _iterator104.n()).done;) {\n              var _t89 = _step104.value;\n              this.convertMarkerRemove(_t89.name, _t89.range, n);\n            }\n          } catch (err) {\n            _iterator104.e(err);\n          } finally {\n            _iterator104.f();\n          }\n\n          var _iterator105 = _createForOfIteratorHelper(e.getChanges()),\n              _step105;\n\n          try {\n            for (_iterator105.s(); !(_step105 = _iterator105.n()).done;) {\n              var _t90 = _step105.value;\n\n              if (_t90.type == \"insert\") {\n                this.convertInsert(qh._createFromPositionAndShift(_t90.position, _t90.length), n);\n              } else if (_t90.type == \"remove\") {\n                this.convertRemove(_t90.position, _t90.length, _t90.name, n);\n              } else {\n                this.convertAttribute(_t90.range, _t90.attributeKey, _t90.attributeOldValue, _t90.attributeNewValue, n);\n              }\n            }\n          } catch (err) {\n            _iterator105.e(err);\n          } finally {\n            _iterator105.f();\n          }\n\n          var _iterator106 = _createForOfIteratorHelper(this.conversionApi.mapper.flushUnboundMarkerNames()),\n              _step106;\n\n          try {\n            for (_iterator106.s(); !(_step106 = _iterator106.n()).done;) {\n              var _e90 = _step106.value;\n\n              var _i64 = t.get(_e90).getRange();\n\n              this.convertMarkerRemove(_e90, _i64, n);\n              this.convertMarkerAdd(_e90, _i64, n);\n            }\n          } catch (err) {\n            _iterator106.e(err);\n          } finally {\n            _iterator106.f();\n          }\n\n          var _iterator107 = _createForOfIteratorHelper(e.getMarkersToAdd()),\n              _step107;\n\n          try {\n            for (_iterator107.s(); !(_step107 = _iterator107.n()).done;) {\n              var _t91 = _step107.value;\n              this.convertMarkerAdd(_t91.name, _t91.range, n);\n            }\n          } catch (err) {\n            _iterator107.e(err);\n          } finally {\n            _iterator107.f();\n          }\n        }\n      }, {\n        key: \"convertInsert\",\n        value: function convertInsert(e, t) {\n          this.conversionApi.writer = t;\n          this.conversionApi.consumable = this._createInsertConsumable(e);\n\n          var _iterator108 = _createForOfIteratorHelper(e),\n              _step108;\n\n          try {\n            for (_iterator108.s(); !(_step108 = _iterator108.n()).done;) {\n              var _t92 = _step108.value;\n              var _e91 = _t92.item;\n\n              var _n84 = qh._createFromPositionAndShift(_t92.previousPosition, _t92.length);\n\n              var _i65 = {\n                item: _e91,\n                range: _n84\n              };\n\n              this._testAndFire(\"insert\", _i65);\n\n              var _iterator109 = _createForOfIteratorHelper(_e91.getAttributeKeys()),\n                  _step109;\n\n              try {\n                for (_iterator109.s(); !(_step109 = _iterator109.n()).done;) {\n                  var _t93 = _step109.value;\n                  _i65.attributeKey = _t93;\n                  _i65.attributeOldValue = null;\n                  _i65.attributeNewValue = _e91.getAttribute(_t93);\n\n                  this._testAndFire(\"attribute:\".concat(_t93), _i65);\n                }\n              } catch (err) {\n                _iterator109.e(err);\n              } finally {\n                _iterator109.f();\n              }\n            }\n          } catch (err) {\n            _iterator108.e(err);\n          } finally {\n            _iterator108.f();\n          }\n\n          this._clearConversionApi();\n        }\n      }, {\n        key: \"convertRemove\",\n        value: function convertRemove(e, t, n, i) {\n          this.conversionApi.writer = i;\n          this.fire(\"remove:\" + n, {\n            position: e,\n            length: t\n          }, this.conversionApi);\n\n          this._clearConversionApi();\n        }\n      }, {\n        key: \"convertAttribute\",\n        value: function convertAttribute(e, t, n, i, o) {\n          this.conversionApi.writer = o;\n          this.conversionApi.consumable = this._createConsumableForRange(e, \"attribute:\".concat(t));\n\n          var _iterator110 = _createForOfIteratorHelper(e),\n              _step110;\n\n          try {\n            for (_iterator110.s(); !(_step110 = _iterator110.n()).done;) {\n              var _o35 = _step110.value;\n              var _e92 = _o35.item;\n\n              var _s15 = qh._createFromPositionAndShift(_o35.previousPosition, _o35.length);\n\n              var _r12 = {\n                item: _e92,\n                range: _s15,\n                attributeKey: t,\n                attributeOldValue: n,\n                attributeNewValue: i\n              };\n\n              this._testAndFire(\"attribute:\".concat(t), _r12);\n            }\n          } catch (err) {\n            _iterator110.e(err);\n          } finally {\n            _iterator110.f();\n          }\n\n          this._clearConversionApi();\n        }\n      }, {\n        key: \"convertSelection\",\n        value: function convertSelection(e, t, n) {\n          var i = Array.from(t.getMarkersAtPosition(e.getFirstPosition()));\n          this.conversionApi.writer = n;\n          this.conversionApi.consumable = this._createSelectionConsumable(e, i);\n          this.fire(\"selection\", {\n            selection: e\n          }, this.conversionApi);\n\n          if (!e.isCollapsed) {\n            return;\n          }\n\n          for (var _i67 = 0, _i66 = i; _i67 < _i66.length; _i67++) {\n            var _t94 = _i66[_i67];\n\n            var _n85 = _t94.getRange();\n\n            if (!Gh(e.getFirstPosition(), _t94, this.conversionApi.mapper)) {\n              continue;\n            }\n\n            var _i68 = {\n              item: e,\n              markerName: _t94.name,\n              markerRange: _n85\n            };\n\n            if (this.conversionApi.consumable.test(e, \"addMarker:\" + _t94.name)) {\n              this.fire(\"addMarker:\" + _t94.name, _i68, this.conversionApi);\n            }\n          }\n\n          var _iterator111 = _createForOfIteratorHelper(e.getAttributeKeys()),\n              _step111;\n\n          try {\n            for (_iterator111.s(); !(_step111 = _iterator111.n()).done;) {\n              var _t95 = _step111.value;\n              var _n86 = {\n                item: e,\n                range: e.getFirstRange(),\n                attributeKey: _t95,\n                attributeOldValue: null,\n                attributeNewValue: e.getAttribute(_t95)\n              };\n\n              if (this.conversionApi.consumable.test(e, \"attribute:\" + _n86.attributeKey)) {\n                this.fire(\"attribute:\" + _n86.attributeKey + \":$text\", _n86, this.conversionApi);\n              }\n            }\n          } catch (err) {\n            _iterator111.e(err);\n          } finally {\n            _iterator111.f();\n          }\n\n          this._clearConversionApi();\n        }\n      }, {\n        key: \"convertMarkerAdd\",\n        value: function convertMarkerAdd(e, t, n) {\n          if (!t.root.document || t.root.rootName == \"$graveyard\") {\n            return;\n          }\n\n          this.conversionApi.writer = n;\n          var i = \"addMarker:\" + e;\n          var o = new Jh();\n          o.add(t, i);\n          this.conversionApi.consumable = o;\n          this.fire(i, {\n            markerName: e,\n            markerRange: t\n          }, this.conversionApi);\n\n          if (!o.test(t, i)) {\n            return;\n          }\n\n          this.conversionApi.consumable = this._createConsumableForRange(t, i);\n\n          var _iterator112 = _createForOfIteratorHelper(t.getItems()),\n              _step112;\n\n          try {\n            for (_iterator112.s(); !(_step112 = _iterator112.n()).done;) {\n              var _n87 = _step112.value;\n\n              if (!this.conversionApi.consumable.test(_n87, i)) {\n                continue;\n              }\n\n              var _o36 = {\n                item: _n87,\n                range: qh._createOn(_n87),\n                markerName: e,\n                markerRange: t\n              };\n              this.fire(i, _o36, this.conversionApi);\n            }\n          } catch (err) {\n            _iterator112.e(err);\n          } finally {\n            _iterator112.f();\n          }\n\n          this._clearConversionApi();\n        }\n      }, {\n        key: \"convertMarkerRemove\",\n        value: function convertMarkerRemove(e, t, n) {\n          if (!t.root.document || t.root.rootName == \"$graveyard\") {\n            return;\n          }\n\n          this.conversionApi.writer = n;\n          this.fire(\"removeMarker:\" + e, {\n            markerName: e,\n            markerRange: t\n          }, this.conversionApi);\n\n          this._clearConversionApi();\n        }\n      }, {\n        key: \"_createInsertConsumable\",\n        value: function _createInsertConsumable(e) {\n          var t = new Jh();\n\n          var _iterator113 = _createForOfIteratorHelper(e),\n              _step113;\n\n          try {\n            for (_iterator113.s(); !(_step113 = _iterator113.n()).done;) {\n              var _n88 = _step113.value;\n              var _e93 = _n88.item;\n              t.add(_e93, \"insert\");\n\n              var _iterator114 = _createForOfIteratorHelper(_e93.getAttributeKeys()),\n                  _step114;\n\n              try {\n                for (_iterator114.s(); !(_step114 = _iterator114.n()).done;) {\n                  var _n89 = _step114.value;\n                  t.add(_e93, \"attribute:\" + _n89);\n                }\n              } catch (err) {\n                _iterator114.e(err);\n              } finally {\n                _iterator114.f();\n              }\n            }\n          } catch (err) {\n            _iterator113.e(err);\n          } finally {\n            _iterator113.f();\n          }\n\n          return t;\n        }\n      }, {\n        key: \"_createConsumableForRange\",\n        value: function _createConsumableForRange(e, t) {\n          var n = new Jh();\n\n          var _iterator115 = _createForOfIteratorHelper(e.getItems()),\n              _step115;\n\n          try {\n            for (_iterator115.s(); !(_step115 = _iterator115.n()).done;) {\n              var _i69 = _step115.value;\n              n.add(_i69, t);\n            }\n          } catch (err) {\n            _iterator115.e(err);\n          } finally {\n            _iterator115.f();\n          }\n\n          return n;\n        }\n      }, {\n        key: \"_createSelectionConsumable\",\n        value: function _createSelectionConsumable(e, t) {\n          var n = new Jh();\n          n.add(e, \"selection\");\n\n          var _iterator116 = _createForOfIteratorHelper(t),\n              _step116;\n\n          try {\n            for (_iterator116.s(); !(_step116 = _iterator116.n()).done;) {\n              var _i70 = _step116.value;\n              n.add(e, \"addMarker:\" + _i70.name);\n            }\n          } catch (err) {\n            _iterator116.e(err);\n          } finally {\n            _iterator116.f();\n          }\n\n          var _iterator117 = _createForOfIteratorHelper(e.getAttributeKeys()),\n              _step117;\n\n          try {\n            for (_iterator117.s(); !(_step117 = _iterator117.n()).done;) {\n              var _t96 = _step117.value;\n              n.add(e, \"attribute:\" + _t96);\n            }\n          } catch (err) {\n            _iterator117.e(err);\n          } finally {\n            _iterator117.f();\n          }\n\n          return n;\n        }\n      }, {\n        key: \"_testAndFire\",\n        value: function _testAndFire(e, t) {\n          if (!this.conversionApi.consumable.test(t.item, e)) {\n            return;\n          }\n\n          var n = t.item.name || \"$text\";\n          this.fire(e + \":\" + n, t, this.conversionApi);\n        }\n      }, {\n        key: \"_clearConversionApi\",\n        value: function _clearConversionApi() {\n          delete this.conversionApi.writer;\n          delete this.conversionApi.consumable;\n        }\n      }]);\n\n      return Xh;\n    }();\n\n    kr(Xh, dr);\n\n    function Gh(e, t, n) {\n      var i = t.getRange();\n      var o = Array.from(e.getAncestors());\n      o.shift();\n      o.reverse();\n      var s = o.some(function (e) {\n        if (i.containsItem(e)) {\n          var _t97 = n.toViewElement(e);\n\n          return !!_t97.getCustomProperty(\"addHighlight\");\n        }\n      });\n      return !s;\n    }\n\n    var Kh = /*#__PURE__*/function () {\n      function Kh(e, t, n) {\n        _classCallCheck(this, Kh);\n\n        this._lastRangeBackward = false;\n        this._ranges = [];\n        this._attrs = new Map();\n\n        if (e) {\n          this.setTo(e, t, n);\n        }\n      }\n\n      _createClass(Kh, [{\n        key: \"anchor\",\n        get: function get() {\n          if (this._ranges.length > 0) {\n            var _e94 = this._ranges[this._ranges.length - 1];\n            return this._lastRangeBackward ? _e94.end : _e94.start;\n          }\n\n          return null;\n        }\n      }, {\n        key: \"focus\",\n        get: function get() {\n          if (this._ranges.length > 0) {\n            var _e95 = this._ranges[this._ranges.length - 1];\n            return this._lastRangeBackward ? _e95.start : _e95.end;\n          }\n\n          return null;\n        }\n      }, {\n        key: \"isCollapsed\",\n        get: function get() {\n          var e = this._ranges.length;\n\n          if (e === 1) {\n            return this._ranges[0].isCollapsed;\n          } else {\n            return false;\n          }\n        }\n      }, {\n        key: \"rangeCount\",\n        get: function get() {\n          return this._ranges.length;\n        }\n      }, {\n        key: \"isBackward\",\n        get: function get() {\n          return !this.isCollapsed && this._lastRangeBackward;\n        }\n      }, {\n        key: \"isEqual\",\n        value: function isEqual(e) {\n          if (this.rangeCount != e.rangeCount) {\n            return false;\n          } else if (this.rangeCount === 0) {\n            return true;\n          }\n\n          if (!this.anchor.isEqual(e.anchor) || !this.focus.isEqual(e.focus)) {\n            return false;\n          }\n\n          var _iterator118 = _createForOfIteratorHelper(this._ranges),\n              _step118;\n\n          try {\n            for (_iterator118.s(); !(_step118 = _iterator118.n()).done;) {\n              var _t98 = _step118.value;\n              var _n90 = false;\n\n              var _iterator119 = _createForOfIteratorHelper(e._ranges),\n                  _step119;\n\n              try {\n                for (_iterator119.s(); !(_step119 = _iterator119.n()).done;) {\n                  var _i71 = _step119.value;\n\n                  if (_t98.isEqual(_i71)) {\n                    _n90 = true;\n                    break;\n                  }\n                }\n              } catch (err) {\n                _iterator119.e(err);\n              } finally {\n                _iterator119.f();\n              }\n\n              if (!_n90) {\n                return false;\n              }\n            }\n          } catch (err) {\n            _iterator118.e(err);\n          } finally {\n            _iterator118.f();\n          }\n\n          return true;\n        }\n      }, {\n        key: \"getRanges\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function getRanges() {\n          var _iterator120, _step120, _e96;\n\n          return _regeneratorRuntime().wrap(function getRanges$(_context16) {\n            while (1) {\n              switch (_context16.prev = _context16.next) {\n                case 0:\n                  _iterator120 = _createForOfIteratorHelper(this._ranges);\n                  _context16.prev = 1;\n\n                  _iterator120.s();\n\n                case 3:\n                  if ((_step120 = _iterator120.n()).done) {\n                    _context16.next = 9;\n                    break;\n                  }\n\n                  _e96 = _step120.value;\n                  _context16.next = 7;\n                  return new qh(_e96.start, _e96.end);\n\n                case 7:\n                  _context16.next = 3;\n                  break;\n\n                case 9:\n                  _context16.next = 14;\n                  break;\n\n                case 11:\n                  _context16.prev = 11;\n                  _context16.t0 = _context16[\"catch\"](1);\n\n                  _iterator120.e(_context16.t0);\n\n                case 14:\n                  _context16.prev = 14;\n\n                  _iterator120.f();\n\n                  return _context16.finish(14);\n\n                case 17:\n                case \"end\":\n                  return _context16.stop();\n              }\n            }\n          }, getRanges, this, [[1, 11, 14, 17]]);\n        })\n      }, {\n        key: \"getFirstRange\",\n        value: function getFirstRange() {\n          var e = null;\n\n          var _iterator121 = _createForOfIteratorHelper(this._ranges),\n              _step121;\n\n          try {\n            for (_iterator121.s(); !(_step121 = _iterator121.n()).done;) {\n              var _t99 = _step121.value;\n\n              if (!e || _t99.start.isBefore(e.start)) {\n                e = _t99;\n              }\n            }\n          } catch (err) {\n            _iterator121.e(err);\n          } finally {\n            _iterator121.f();\n          }\n\n          return e ? new qh(e.start, e.end) : null;\n        }\n      }, {\n        key: \"getLastRange\",\n        value: function getLastRange() {\n          var e = null;\n\n          var _iterator122 = _createForOfIteratorHelper(this._ranges),\n              _step122;\n\n          try {\n            for (_iterator122.s(); !(_step122 = _iterator122.n()).done;) {\n              var _t100 = _step122.value;\n\n              if (!e || _t100.end.isAfter(e.end)) {\n                e = _t100;\n              }\n            }\n          } catch (err) {\n            _iterator122.e(err);\n          } finally {\n            _iterator122.f();\n          }\n\n          return e ? new qh(e.start, e.end) : null;\n        }\n      }, {\n        key: \"getFirstPosition\",\n        value: function getFirstPosition() {\n          var e = this.getFirstRange();\n          return e ? e.start.clone() : null;\n        }\n      }, {\n        key: \"getLastPosition\",\n        value: function getLastPosition() {\n          var e = this.getLastRange();\n          return e ? e.end.clone() : null;\n        }\n      }, {\n        key: \"setTo\",\n        value: function setTo(e, t, n) {\n          if (e === null) {\n            this._setRanges([]);\n          } else if (e instanceof Kh) {\n            this._setRanges(e.getRanges(), e.isBackward);\n          } else if (e && typeof e.getRanges == \"function\") {\n            this._setRanges(e.getRanges(), e.isBackward);\n          } else if (e instanceof qh) {\n            this._setRanges([e], !!t && !!t.backward);\n          } else if (e instanceof $h) {\n            this._setRanges([new qh(e)]);\n          } else if (e instanceof Dh) {\n            var _i72 = !!n && !!n.backward;\n\n            var _o37;\n\n            if (t == \"in\") {\n              _o37 = qh._createIn(e);\n            } else if (t == \"on\") {\n              _o37 = qh._createOn(e);\n            } else if (t !== undefined) {\n              _o37 = new qh($h._createAt(e, t));\n            } else {\n              throw new rr[\"b\"](\"model-selection-setTo-required-second-parameter: \" + \"selection.setTo requires the second parameter when the first parameter is a node.\", [this, e]);\n            }\n\n            this._setRanges([_o37], _i72);\n          } else if (Fr(e)) {\n            this._setRanges(e, t && !!t.backward);\n          } else {\n            throw new rr[\"b\"](\"model-selection-setTo-not-selectable: Cannot set the selection to the given place.\", [this, e]);\n          }\n        }\n      }, {\n        key: \"_setRanges\",\n        value: function _setRanges(e) {\n          var _this44 = this;\n\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n          e = Array.from(e);\n          var n = e.some(function (t) {\n            if (!(t instanceof qh)) {\n              throw new rr[\"b\"](\"model-selection-set-ranges-not-range: \" + \"Selection range set to an object that is not an instance of model.Range.\", [_this44, e]);\n            }\n\n            return _this44._ranges.every(function (e) {\n              return !e.isEqual(t);\n            });\n          });\n\n          if (e.length === this._ranges.length && !n) {\n            return;\n          }\n\n          this._removeAllRanges();\n\n          var _iterator123 = _createForOfIteratorHelper(e),\n              _step123;\n\n          try {\n            for (_iterator123.s(); !(_step123 = _iterator123.n()).done;) {\n              var _t101 = _step123.value;\n\n              this._pushRange(_t101);\n            }\n          } catch (err) {\n            _iterator123.e(err);\n          } finally {\n            _iterator123.f();\n          }\n\n          this._lastRangeBackward = !!t;\n          this.fire(\"change:range\", {\n            directChange: true\n          });\n        }\n      }, {\n        key: \"setFocus\",\n        value: function setFocus(e, t) {\n          if (this.anchor === null) {\n            throw new rr[\"b\"](\"model-selection-setFocus-no-ranges: Cannot set selection focus if there are no ranges in selection.\", [this, e]);\n          }\n\n          var n = $h._createAt(e, t);\n\n          if (n.compareWith(this.focus) == \"same\") {\n            return;\n          }\n\n          var i = this.anchor;\n\n          if (this._ranges.length) {\n            this._popRange();\n          }\n\n          if (n.compareWith(i) == \"before\") {\n            this._pushRange(new qh(n, i));\n\n            this._lastRangeBackward = true;\n          } else {\n            this._pushRange(new qh(i, n));\n\n            this._lastRangeBackward = false;\n          }\n\n          this.fire(\"change:range\", {\n            directChange: true\n          });\n        }\n      }, {\n        key: \"getAttribute\",\n        value: function getAttribute(e) {\n          return this._attrs.get(e);\n        }\n      }, {\n        key: \"getAttributes\",\n        value: function getAttributes() {\n          return this._attrs.entries();\n        }\n      }, {\n        key: \"getAttributeKeys\",\n        value: function getAttributeKeys() {\n          return this._attrs.keys();\n        }\n      }, {\n        key: \"hasAttribute\",\n        value: function hasAttribute(e) {\n          return this._attrs.has(e);\n        }\n      }, {\n        key: \"removeAttribute\",\n        value: function removeAttribute(e) {\n          if (this.hasAttribute(e)) {\n            this._attrs.delete(e);\n\n            this.fire(\"change:attribute\", {\n              attributeKeys: [e],\n              directChange: true\n            });\n          }\n        }\n      }, {\n        key: \"setAttribute\",\n        value: function setAttribute(e, t) {\n          if (this.getAttribute(e) !== t) {\n            this._attrs.set(e, t);\n\n            this.fire(\"change:attribute\", {\n              attributeKeys: [e],\n              directChange: true\n            });\n          }\n        }\n      }, {\n        key: \"getSelectedElement\",\n        value: function getSelectedElement() {\n          if (this.rangeCount !== 1) {\n            return null;\n          }\n\n          return this.getFirstRange().getContainedElement();\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          return e == \"selection\" || e == \"model:selection\";\n        }\n      }, {\n        key: \"getSelectedBlocks\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function getSelectedBlocks() {\n          var e, _iterator124, _step124, _t102, _n91, _iterator125, _step125, _n92, _i74, _i73;\n\n          return _regeneratorRuntime().wrap(function getSelectedBlocks$(_context17) {\n            while (1) {\n              switch (_context17.prev = _context17.next) {\n                case 0:\n                  e = new WeakSet();\n                  _iterator124 = _createForOfIteratorHelper(this.getRanges());\n                  _context17.prev = 2;\n\n                  _iterator124.s();\n\n                case 4:\n                  if ((_step124 = _iterator124.n()).done) {\n                    _context17.next = 35;\n                    break;\n                  }\n\n                  _t102 = _step124.value;\n                  _n91 = tf(_t102.start, e);\n\n                  if (!(_n91 && nf(_n91, _t102))) {\n                    _context17.next = 10;\n                    break;\n                  }\n\n                  _context17.next = 10;\n                  return _n91;\n\n                case 10:\n                  _iterator125 = _createForOfIteratorHelper(_t102.getWalker());\n                  _context17.prev = 11;\n\n                  _iterator125.s();\n\n                case 13:\n                  if ((_step125 = _iterator125.n()).done) {\n                    _context17.next = 21;\n                    break;\n                  }\n\n                  _n92 = _step125.value;\n                  _i74 = _n92.item;\n\n                  if (!(_n92.type == \"elementEnd\" && ef(_i74, e, _t102))) {\n                    _context17.next = 19;\n                    break;\n                  }\n\n                  _context17.next = 19;\n                  return _i74;\n\n                case 19:\n                  _context17.next = 13;\n                  break;\n\n                case 21:\n                  _context17.next = 26;\n                  break;\n\n                case 23:\n                  _context17.prev = 23;\n                  _context17.t0 = _context17[\"catch\"](11);\n\n                  _iterator125.e(_context17.t0);\n\n                case 26:\n                  _context17.prev = 26;\n\n                  _iterator125.f();\n\n                  return _context17.finish(26);\n\n                case 29:\n                  _i73 = tf(_t102.end, e);\n\n                  if (!(_i73 && !_t102.end.isTouching($h._createAt(_i73, 0)) && nf(_i73, _t102))) {\n                    _context17.next = 33;\n                    break;\n                  }\n\n                  _context17.next = 33;\n                  return _i73;\n\n                case 33:\n                  _context17.next = 4;\n                  break;\n\n                case 35:\n                  _context17.next = 40;\n                  break;\n\n                case 37:\n                  _context17.prev = 37;\n                  _context17.t1 = _context17[\"catch\"](2);\n\n                  _iterator124.e(_context17.t1);\n\n                case 40:\n                  _context17.prev = 40;\n\n                  _iterator124.f();\n\n                  return _context17.finish(40);\n\n                case 43:\n                case \"end\":\n                  return _context17.stop();\n              }\n            }\n          }, getSelectedBlocks, this, [[2, 37, 40, 43], [11, 23, 26, 29]]);\n        })\n      }, {\n        key: \"containsEntireContent\",\n        value: function containsEntireContent() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.anchor.root;\n\n          var t = $h._createAt(e, 0);\n\n          var n = $h._createAt(e, \"end\");\n\n          return t.isTouching(this.getFirstPosition()) && n.isTouching(this.getLastPosition());\n        }\n      }, {\n        key: \"_pushRange\",\n        value: function _pushRange(e) {\n          this._checkRange(e);\n\n          this._ranges.push(new qh(e.start, e.end));\n        }\n      }, {\n        key: \"_checkRange\",\n        value: function _checkRange(e) {\n          for (var _t103 = 0; _t103 < this._ranges.length; _t103++) {\n            if (e.isIntersecting(this._ranges[_t103])) {\n              throw new rr[\"b\"](\"model-selection-range-intersects: Trying to add a range that intersects with another range in the selection.\", [this, e], {\n                addedRange: e,\n                intersectingRange: this._ranges[_t103]\n              });\n            }\n          }\n        }\n      }, {\n        key: \"_removeAllRanges\",\n        value: function _removeAllRanges() {\n          while (this._ranges.length > 0) {\n            this._popRange();\n          }\n        }\n      }, {\n        key: \"_popRange\",\n        value: function _popRange() {\n          this._ranges.pop();\n        }\n      }]);\n\n      return Kh;\n    }();\n\n    kr(Kh, dr);\n\n    function Zh(e, t) {\n      if (t.has(e)) {\n        return false;\n      }\n\n      t.add(e);\n      return e.root.document.model.schema.isBlock(e) && e.parent;\n    }\n\n    function ef(e, t, n) {\n      return Zh(e, t) && nf(e, n);\n    }\n\n    function tf(e, t) {\n      var n = e.parent;\n      var i = n.root.document.model.schema;\n      var o = e.parent.getAncestors({\n        parentFirst: true,\n        includeSelf: true\n      });\n      var s = false;\n      var r = o.find(function (e) {\n        if (s) {\n          return false;\n        }\n\n        s = i.isLimit(e);\n        return !s && Zh(e, t);\n      });\n      o.forEach(function (e) {\n        return t.add(e);\n      });\n      return r;\n    }\n\n    function nf(e, t) {\n      var n = of(e);\n\n      if (!n) {\n        return true;\n      }\n\n      var i = t.containsRange(qh._createOn(n), true);\n      return !i;\n    }\n\n    function of(e) {\n      var t = e.root.document.model.schema;\n      var n = e.parent;\n\n      while (n) {\n        if (t.isBlock(n)) {\n          return n;\n        }\n\n        n = n.parent;\n      }\n    }\n\n    var sf = /*#__PURE__*/function (_qh) {\n      _inherits(sf, _qh);\n\n      var _super20 = _createSuper(sf);\n\n      function sf(e, t) {\n        var _this45;\n\n        _classCallCheck(this, sf);\n\n        _this45 = _super20.call(this, e, t);\n        rf.call(_assertThisInitialized(_this45));\n        return _this45;\n      }\n\n      _createClass(sf, [{\n        key: \"detach\",\n        value: function detach() {\n          this.stopListening();\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          return e == \"liveRange\" || e == \"model:liveRange\" || _get(_getPrototypeOf(sf.prototype), \"is\", this).call(this, e);\n        }\n      }, {\n        key: \"toRange\",\n        value: function toRange() {\n          return new qh(this.start, this.end);\n        }\n      }], [{\n        key: \"fromRange\",\n        value: function fromRange(e) {\n          return new sf(e.start, e.end);\n        }\n      }]);\n\n      return sf;\n    }(qh);\n\n    function rf() {\n      var _this46 = this;\n\n      this.listenTo(this.root.document.model, \"applyOperation\", function (e, t) {\n        var n = t[0];\n\n        if (!n.isDocumentOperation) {\n          return;\n        }\n\n        af.call(_this46, n);\n      }, {\n        priority: \"low\"\n      });\n    }\n\n    function af(e) {\n      var t = this.getTransformedByOperation(e);\n\n      var n = qh._createFromRanges(t);\n\n      var i = !n.isEqual(this);\n      var o = cf(this, e);\n      var s = null;\n\n      if (i) {\n        if (n.root.rootName == \"$graveyard\") {\n          if (e.type == \"remove\") {\n            s = e.sourcePosition;\n          } else {\n            s = e.deletionPosition;\n          }\n        }\n\n        var _t104 = this.toRange();\n\n        this.start = n.start;\n        this.end = n.end;\n        this.fire(\"change:range\", _t104, {\n          deletionPosition: s\n        });\n      } else if (o) {\n        this.fire(\"change:content\", this.toRange(), {\n          deletionPosition: s\n        });\n      }\n    }\n\n    function cf(e, t) {\n      switch (t.type) {\n        case \"insert\":\n          return e.containsPosition(t.position);\n\n        case \"move\":\n        case \"remove\":\n        case \"reinsert\":\n        case \"merge\":\n          return e.containsPosition(t.sourcePosition) || e.start.isEqual(t.sourcePosition) || e.containsPosition(t.targetPosition);\n\n        case \"split\":\n          return e.containsPosition(t.splitPosition) || e.containsPosition(t.insertionPosition);\n      }\n\n      return false;\n    }\n\n    kr(sf, dr);\n    var lf = \"selection:\";\n\n    var df = /*#__PURE__*/function () {\n      function df(e) {\n        _classCallCheck(this, df);\n\n        this._selection = new uf(e);\n\n        this._selection.delegate(\"change:range\").to(this);\n\n        this._selection.delegate(\"change:attribute\").to(this);\n\n        this._selection.delegate(\"change:marker\").to(this);\n      }\n\n      _createClass(df, [{\n        key: \"isCollapsed\",\n        get: function get() {\n          return this._selection.isCollapsed;\n        }\n      }, {\n        key: \"anchor\",\n        get: function get() {\n          return this._selection.anchor;\n        }\n      }, {\n        key: \"focus\",\n        get: function get() {\n          return this._selection.focus;\n        }\n      }, {\n        key: \"rangeCount\",\n        get: function get() {\n          return this._selection.rangeCount;\n        }\n      }, {\n        key: \"hasOwnRange\",\n        get: function get() {\n          return this._selection.hasOwnRange;\n        }\n      }, {\n        key: \"isBackward\",\n        get: function get() {\n          return this._selection.isBackward;\n        }\n      }, {\n        key: \"isGravityOverridden\",\n        get: function get() {\n          return this._selection.isGravityOverridden;\n        }\n      }, {\n        key: \"markers\",\n        get: function get() {\n          return this._selection.markers;\n        }\n      }, {\n        key: \"_ranges\",\n        get: function get() {\n          return this._selection._ranges;\n        }\n      }, {\n        key: \"getRanges\",\n        value: function getRanges() {\n          return this._selection.getRanges();\n        }\n      }, {\n        key: \"getFirstPosition\",\n        value: function getFirstPosition() {\n          return this._selection.getFirstPosition();\n        }\n      }, {\n        key: \"getLastPosition\",\n        value: function getLastPosition() {\n          return this._selection.getLastPosition();\n        }\n      }, {\n        key: \"getFirstRange\",\n        value: function getFirstRange() {\n          return this._selection.getFirstRange();\n        }\n      }, {\n        key: \"getLastRange\",\n        value: function getLastRange() {\n          return this._selection.getLastRange();\n        }\n      }, {\n        key: \"getSelectedBlocks\",\n        value: function getSelectedBlocks() {\n          return this._selection.getSelectedBlocks();\n        }\n      }, {\n        key: \"getSelectedElement\",\n        value: function getSelectedElement() {\n          return this._selection.getSelectedElement();\n        }\n      }, {\n        key: \"containsEntireContent\",\n        value: function containsEntireContent(e) {\n          return this._selection.containsEntireContent(e);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this._selection.destroy();\n        }\n      }, {\n        key: \"getAttributeKeys\",\n        value: function getAttributeKeys() {\n          return this._selection.getAttributeKeys();\n        }\n      }, {\n        key: \"getAttributes\",\n        value: function getAttributes() {\n          return this._selection.getAttributes();\n        }\n      }, {\n        key: \"getAttribute\",\n        value: function getAttribute(e) {\n          return this._selection.getAttribute(e);\n        }\n      }, {\n        key: \"hasAttribute\",\n        value: function hasAttribute(e) {\n          return this._selection.hasAttribute(e);\n        }\n      }, {\n        key: \"refresh\",\n        value: function refresh() {\n          this._selection._updateMarkers();\n\n          this._selection._updateAttributes(false);\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          return e == \"selection\" || e == \"model:selection\" || e == \"documentSelection\" || e == \"model:documentSelection\";\n        }\n      }, {\n        key: \"_setFocus\",\n        value: function _setFocus(e, t) {\n          this._selection.setFocus(e, t);\n        }\n      }, {\n        key: \"_setTo\",\n        value: function _setTo(e, t, n) {\n          this._selection.setTo(e, t, n);\n        }\n      }, {\n        key: \"_setAttribute\",\n        value: function _setAttribute(e, t) {\n          this._selection.setAttribute(e, t);\n        }\n      }, {\n        key: \"_removeAttribute\",\n        value: function _removeAttribute(e) {\n          this._selection.removeAttribute(e);\n        }\n      }, {\n        key: \"_getStoredAttributes\",\n        value: function _getStoredAttributes() {\n          return this._selection._getStoredAttributes();\n        }\n      }, {\n        key: \"_overrideGravity\",\n        value: function _overrideGravity() {\n          return this._selection.overrideGravity();\n        }\n      }, {\n        key: \"_restoreGravity\",\n        value: function _restoreGravity(e) {\n          this._selection.restoreGravity(e);\n        }\n      }], [{\n        key: \"_getStoreAttributeKey\",\n        value: function _getStoreAttributeKey(e) {\n          return lf + e;\n        }\n      }, {\n        key: \"_isStoreAttributeKey\",\n        value: function _isStoreAttributeKey(e) {\n          return e.startsWith(lf);\n        }\n      }]);\n\n      return df;\n    }();\n\n    kr(df, dr);\n\n    var uf = /*#__PURE__*/function (_Kh) {\n      _inherits(uf, _Kh);\n\n      var _super21 = _createSuper(uf);\n\n      function uf(e) {\n        var _this47;\n\n        _classCallCheck(this, uf);\n\n        _this47 = _super21.call(this);\n        _this47.markers = new yr({\n          idProperty: \"name\"\n        });\n        _this47._model = e.model;\n        _this47._document = e;\n        _this47._attributePriority = new Map();\n        _this47._fixGraveyardRangesData = [];\n        _this47._hasChangedRange = false;\n        _this47._overriddenGravityRegister = new Set();\n\n        _this47.listenTo(_this47._model, \"applyOperation\", function (e, t) {\n          var n = t[0];\n\n          if (!n.isDocumentOperation || n.type == \"marker\" || n.type == \"rename\" || n.type == \"noop\") {\n            return;\n          }\n\n          while (_this47._fixGraveyardRangesData.length) {\n            var _this47$_fixGraveyard = _this47._fixGraveyardRangesData.shift(),\n                _e97 = _this47$_fixGraveyard.liveRange,\n                _t105 = _this47$_fixGraveyard.sourcePosition;\n\n            _this47._fixGraveyardSelection(_e97, _t105);\n          }\n\n          if (_this47._hasChangedRange) {\n            _this47._hasChangedRange = false;\n\n            _this47.fire(\"change:range\", {\n              directChange: false\n            });\n          }\n        }, {\n          priority: \"lowest\"\n        });\n\n        _this47.on(\"change:range\", function () {\n          var _iterator126 = _createForOfIteratorHelper(_this47.getRanges()),\n              _step126;\n\n          try {\n            for (_iterator126.s(); !(_step126 = _iterator126.n()).done;) {\n              var _e98 = _step126.value;\n\n              if (!_this47._document._validateSelectionRange(_e98)) {\n                throw new rr[\"b\"](\"document-selection-wrong-position: Range from document selection starts or ends at incorrect position.\", _assertThisInitialized(_this47), {\n                  range: _e98\n                });\n              }\n            }\n          } catch (err) {\n            _iterator126.e(err);\n          } finally {\n            _iterator126.f();\n          }\n        });\n\n        _this47.listenTo(_this47._model.markers, \"update\", function () {\n          return _this47._updateMarkers();\n        });\n\n        _this47.listenTo(_this47._document, \"change\", function (e, t) {\n          ff(_this47._model, t);\n        });\n\n        return _this47;\n      }\n\n      _createClass(uf, [{\n        key: \"isCollapsed\",\n        get: function get() {\n          var e = this._ranges.length;\n          return e === 0 ? this._document._getDefaultRange().isCollapsed : _get(_getPrototypeOf(uf.prototype), \"isCollapsed\", this);\n        }\n      }, {\n        key: \"anchor\",\n        get: function get() {\n          return _get(_getPrototypeOf(uf.prototype), \"anchor\", this) || this._document._getDefaultRange().start;\n        }\n      }, {\n        key: \"focus\",\n        get: function get() {\n          return _get(_getPrototypeOf(uf.prototype), \"focus\", this) || this._document._getDefaultRange().end;\n        }\n      }, {\n        key: \"rangeCount\",\n        get: function get() {\n          return this._ranges.length ? this._ranges.length : 1;\n        }\n      }, {\n        key: \"hasOwnRange\",\n        get: function get() {\n          return this._ranges.length > 0;\n        }\n      }, {\n        key: \"isGravityOverridden\",\n        get: function get() {\n          return !!this._overriddenGravityRegister.size;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          for (var _e99 = 0; _e99 < this._ranges.length; _e99++) {\n            this._ranges[_e99].detach();\n          }\n\n          this.stopListening();\n        }\n      }, {\n        key: \"getRanges\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function getRanges() {\n          return _regeneratorRuntime().wrap(function getRanges$(_context18) {\n            while (1) {\n              switch (_context18.prev = _context18.next) {\n                case 0:\n                  if (!this._ranges.length) {\n                    _context18.next = 4;\n                    break;\n                  }\n\n                  return _context18.delegateYield(_get(_getPrototypeOf(uf.prototype), \"getRanges\", this).call(this), \"t0\", 2);\n\n                case 2:\n                  _context18.next = 6;\n                  break;\n\n                case 4:\n                  _context18.next = 6;\n                  return this._document._getDefaultRange();\n\n                case 6:\n                case \"end\":\n                  return _context18.stop();\n              }\n            }\n          }, getRanges, this);\n        })\n      }, {\n        key: \"getFirstRange\",\n        value: function getFirstRange() {\n          return _get(_getPrototypeOf(uf.prototype), \"getFirstRange\", this).call(this) || this._document._getDefaultRange();\n        }\n      }, {\n        key: \"getLastRange\",\n        value: function getLastRange() {\n          return _get(_getPrototypeOf(uf.prototype), \"getLastRange\", this).call(this) || this._document._getDefaultRange();\n        }\n      }, {\n        key: \"setTo\",\n        value: function setTo(e, t, n) {\n          _get(_getPrototypeOf(uf.prototype), \"setTo\", this).call(this, e, t, n);\n\n          this._updateAttributes(true);\n\n          this._updateMarkers();\n        }\n      }, {\n        key: \"setFocus\",\n        value: function setFocus(e, t) {\n          _get(_getPrototypeOf(uf.prototype), \"setFocus\", this).call(this, e, t);\n\n          this._updateAttributes(true);\n\n          this._updateMarkers();\n        }\n      }, {\n        key: \"setAttribute\",\n        value: function setAttribute(e, t) {\n          if (this._setAttribute(e, t)) {\n            var _t106 = [e];\n            this.fire(\"change:attribute\", {\n              attributeKeys: _t106,\n              directChange: true\n            });\n          }\n        }\n      }, {\n        key: \"removeAttribute\",\n        value: function removeAttribute(e) {\n          if (this._removeAttribute(e)) {\n            var _t107 = [e];\n            this.fire(\"change:attribute\", {\n              attributeKeys: _t107,\n              directChange: true\n            });\n          }\n        }\n      }, {\n        key: \"overrideGravity\",\n        value: function overrideGravity() {\n          var e = nr();\n\n          this._overriddenGravityRegister.add(e);\n\n          if (this._overriddenGravityRegister.size === 1) {\n            this._updateAttributes(true);\n          }\n\n          return e;\n        }\n      }, {\n        key: \"restoreGravity\",\n        value: function restoreGravity(e) {\n          if (!this._overriddenGravityRegister.has(e)) {\n            throw new rr[\"b\"](\"document-selection-gravity-wrong-restore: Attempting to restore the selection gravity for an unknown UID.\", this, {\n              uid: e\n            });\n          }\n\n          this._overriddenGravityRegister.delete(e);\n\n          if (!this.isGravityOverridden) {\n            this._updateAttributes(true);\n          }\n        }\n      }, {\n        key: \"_popRange\",\n        value: function _popRange() {\n          this._ranges.pop().detach();\n        }\n      }, {\n        key: \"_pushRange\",\n        value: function _pushRange(e) {\n          var t = this._prepareRange(e);\n\n          if (t) {\n            this._ranges.push(t);\n          }\n        }\n      }, {\n        key: \"_prepareRange\",\n        value: function _prepareRange(e) {\n          var _this48 = this;\n\n          this._checkRange(e);\n\n          if (e.root == this._document.graveyard) {\n            return;\n          }\n\n          var t = sf.fromRange(e);\n          t.on(\"change:range\", function (e, n, i) {\n            _this48._hasChangedRange = true;\n\n            if (t.root == _this48._document.graveyard) {\n              _this48._fixGraveyardRangesData.push({\n                liveRange: t,\n                sourcePosition: i.deletionPosition\n              });\n            }\n          });\n          return t;\n        }\n      }, {\n        key: \"_updateMarkers\",\n        value: function _updateMarkers() {\n          var e = [];\n          var t = false;\n\n          var _iterator127 = _createForOfIteratorHelper(this._model.markers),\n              _step127;\n\n          try {\n            for (_iterator127.s(); !(_step127 = _iterator127.n()).done;) {\n              var _t108 = _step127.value;\n\n              var _n95 = _t108.getRange();\n\n              var _iterator128 = _createForOfIteratorHelper(this.getRanges()),\n                  _step128;\n\n              try {\n                for (_iterator128.s(); !(_step128 = _iterator128.n()).done;) {\n                  var _i77 = _step128.value;\n\n                  if (_n95.containsRange(_i77, !_i77.isCollapsed)) {\n                    e.push(_t108);\n                  }\n                }\n              } catch (err) {\n                _iterator128.e(err);\n              } finally {\n                _iterator128.f();\n              }\n            }\n          } catch (err) {\n            _iterator127.e(err);\n          } finally {\n            _iterator127.f();\n          }\n\n          var n = Array.from(this.markers);\n\n          for (var _i75 = 0, _e100 = e; _i75 < _e100.length; _i75++) {\n            var _n93 = _e100[_i75];\n\n            if (!this.markers.has(_n93)) {\n              this.markers.add(_n93);\n              t = true;\n            }\n          }\n\n          for (var _i76 = 0, _Array$from3 = Array.from(this.markers); _i76 < _Array$from3.length; _i76++) {\n            var _n94 = _Array$from3[_i76];\n\n            if (!e.includes(_n94)) {\n              this.markers.remove(_n94);\n              t = true;\n            }\n          }\n\n          if (t) {\n            this.fire(\"change:marker\", {\n              oldMarkers: n,\n              directChange: false\n            });\n          }\n        }\n      }, {\n        key: \"_updateAttributes\",\n        value: function _updateAttributes(e) {\n          var t = Hr(this._getSurroundingAttributes());\n          var n = Hr(this.getAttributes());\n\n          if (e) {\n            this._attributePriority = new Map();\n            this._attrs = new Map();\n          } else {\n            var _iterator129 = _createForOfIteratorHelper(this._attributePriority),\n                _step129;\n\n            try {\n              for (_iterator129.s(); !(_step129 = _iterator129.n()).done;) {\n                var _step129$value = _slicedToArray(_step129.value, 2),\n                    _e101 = _step129$value[0],\n                    _t109 = _step129$value[1];\n\n                if (_t109 == \"low\") {\n                  this._attrs.delete(_e101);\n\n                  this._attributePriority.delete(_e101);\n                }\n              }\n            } catch (err) {\n              _iterator129.e(err);\n            } finally {\n              _iterator129.f();\n            }\n          }\n\n          this._setAttributesTo(t);\n\n          var i = [];\n\n          var _iterator130 = _createForOfIteratorHelper(this.getAttributes()),\n              _step130;\n\n          try {\n            for (_iterator130.s(); !(_step130 = _iterator130.n()).done;) {\n              var _step130$value = _slicedToArray(_step130.value, 2),\n                  _e102 = _step130$value[0],\n                  _t110 = _step130$value[1];\n\n              if (!n.has(_e102) || n.get(_e102) !== _t110) {\n                i.push(_e102);\n              }\n            }\n          } catch (err) {\n            _iterator130.e(err);\n          } finally {\n            _iterator130.f();\n          }\n\n          var _iterator131 = _createForOfIteratorHelper(n),\n              _step131;\n\n          try {\n            for (_iterator131.s(); !(_step131 = _iterator131.n()).done;) {\n              var _step131$value = _slicedToArray(_step131.value, 1),\n                  _e103 = _step131$value[0];\n\n              if (!this.hasAttribute(_e103)) {\n                i.push(_e103);\n              }\n            }\n          } catch (err) {\n            _iterator131.e(err);\n          } finally {\n            _iterator131.f();\n          }\n\n          if (i.length > 0) {\n            this.fire(\"change:attribute\", {\n              attributeKeys: i,\n              directChange: false\n            });\n          }\n        }\n      }, {\n        key: \"_setAttribute\",\n        value: function _setAttribute(e, t) {\n          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n          var i = n ? \"normal\" : \"low\";\n\n          if (i == \"low\" && this._attributePriority.get(e) == \"normal\") {\n            return false;\n          }\n\n          var o = _get(_getPrototypeOf(uf.prototype), \"getAttribute\", this).call(this, e);\n\n          if (o === t) {\n            return false;\n          }\n\n          this._attrs.set(e, t);\n\n          this._attributePriority.set(e, i);\n\n          return true;\n        }\n      }, {\n        key: \"_removeAttribute\",\n        value: function _removeAttribute(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n          var n = t ? \"normal\" : \"low\";\n\n          if (n == \"low\" && this._attributePriority.get(e) == \"normal\") {\n            return false;\n          }\n\n          this._attributePriority.set(e, n);\n\n          if (!_get(_getPrototypeOf(uf.prototype), \"hasAttribute\", this).call(this, e)) {\n            return false;\n          }\n\n          this._attrs.delete(e);\n\n          return true;\n        }\n      }, {\n        key: \"_setAttributesTo\",\n        value: function _setAttributesTo(e) {\n          var t = new Set();\n\n          var _iterator132 = _createForOfIteratorHelper(this.getAttributes()),\n              _step132;\n\n          try {\n            for (_iterator132.s(); !(_step132 = _iterator132.n()).done;) {\n              var _step132$value = _slicedToArray(_step132.value, 2),\n                  _t111 = _step132$value[0],\n                  _n96 = _step132$value[1];\n\n              if (e.get(_t111) === _n96) {\n                continue;\n              }\n\n              this._removeAttribute(_t111, false);\n            }\n          } catch (err) {\n            _iterator132.e(err);\n          } finally {\n            _iterator132.f();\n          }\n\n          var _iterator133 = _createForOfIteratorHelper(e),\n              _step133;\n\n          try {\n            for (_iterator133.s(); !(_step133 = _iterator133.n()).done;) {\n              var _step133$value = _slicedToArray(_step133.value, 2),\n                  _n97 = _step133$value[0],\n                  _i78 = _step133$value[1];\n\n              var _e104 = this._setAttribute(_n97, _i78, false);\n\n              if (_e104) {\n                t.add(_n97);\n              }\n            }\n          } catch (err) {\n            _iterator133.e(err);\n          } finally {\n            _iterator133.f();\n          }\n\n          return t;\n        }\n      }, {\n        key: \"_getStoredAttributes\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function _getStoredAttributes() {\n          var e, _iterator134, _step134, _t112, _n98;\n\n          return _regeneratorRuntime().wrap(function _getStoredAttributes$(_context19) {\n            while (1) {\n              switch (_context19.prev = _context19.next) {\n                case 0:\n                  e = this.getFirstPosition().parent;\n\n                  if (!(this.isCollapsed && e.isEmpty)) {\n                    _context19.next = 21;\n                    break;\n                  }\n\n                  _iterator134 = _createForOfIteratorHelper(e.getAttributeKeys());\n                  _context19.prev = 3;\n\n                  _iterator134.s();\n\n                case 5:\n                  if ((_step134 = _iterator134.n()).done) {\n                    _context19.next = 13;\n                    break;\n                  }\n\n                  _t112 = _step134.value;\n\n                  if (!_t112.startsWith(lf)) {\n                    _context19.next = 11;\n                    break;\n                  }\n\n                  _n98 = _t112.substr(lf.length);\n                  _context19.next = 11;\n                  return [_n98, e.getAttribute(_t112)];\n\n                case 11:\n                  _context19.next = 5;\n                  break;\n\n                case 13:\n                  _context19.next = 18;\n                  break;\n\n                case 15:\n                  _context19.prev = 15;\n                  _context19.t0 = _context19[\"catch\"](3);\n\n                  _iterator134.e(_context19.t0);\n\n                case 18:\n                  _context19.prev = 18;\n\n                  _iterator134.f();\n\n                  return _context19.finish(18);\n\n                case 21:\n                case \"end\":\n                  return _context19.stop();\n              }\n            }\n          }, _getStoredAttributes, this, [[3, 15, 18, 21]]);\n        })\n      }, {\n        key: \"_getSurroundingAttributes\",\n        value: function _getSurroundingAttributes() {\n          var e = this.getFirstPosition();\n          var t = this._model.schema;\n          var n = null;\n\n          if (!this.isCollapsed) {\n            var _e105 = this.getFirstRange();\n\n            var _iterator135 = _createForOfIteratorHelper(_e105),\n                _step135;\n\n            try {\n              for (_iterator135.s(); !(_step135 = _iterator135.n()).done;) {\n                var _i79 = _step135.value;\n\n                if (_i79.item.is(\"element\") && t.isObject(_i79.item)) {\n                  break;\n                }\n\n                if (_i79.type == \"text\") {\n                  n = _i79.item.getAttributes();\n                  break;\n                }\n              }\n            } catch (err) {\n              _iterator135.e(err);\n            } finally {\n              _iterator135.f();\n            }\n          } else {\n            var _t113 = e.textNode ? e.textNode : e.nodeBefore;\n\n            var _i80 = e.textNode ? e.textNode : e.nodeAfter;\n\n            if (!this.isGravityOverridden) {\n              n = hf(_t113);\n            }\n\n            if (!n) {\n              n = hf(_i80);\n            }\n\n            if (!this.isGravityOverridden && !n) {\n              var _e106 = _t113;\n\n              while (_e106 && !n) {\n                _e106 = _e106.previousSibling;\n                n = hf(_e106);\n              }\n            }\n\n            if (!n) {\n              var _e107 = _i80;\n\n              while (_e107 && !n) {\n                _e107 = _e107.nextSibling;\n                n = hf(_e107);\n              }\n            }\n\n            if (!n) {\n              n = this._getStoredAttributes();\n            }\n          }\n\n          return n;\n        }\n      }, {\n        key: \"_fixGraveyardSelection\",\n        value: function _fixGraveyardSelection(e, t) {\n          var n = t.clone();\n\n          var i = this._model.schema.getNearestSelectionRange(n);\n\n          var o = this._ranges.indexOf(e);\n\n          this._ranges.splice(o, 1);\n\n          e.detach();\n\n          if (i) {\n            var _e108 = this._prepareRange(i);\n\n            this._ranges.splice(o, 0, _e108);\n          }\n        }\n      }]);\n\n      return uf;\n    }(Kh);\n\n    function hf(e) {\n      if (e instanceof Bh || e instanceof zh) {\n        return e.getAttributes();\n      }\n\n      return null;\n    }\n\n    function ff(e, t) {\n      var n = e.document.differ;\n\n      var _iterator136 = _createForOfIteratorHelper(n.getChanges()),\n          _step136;\n\n      try {\n        var _loop2 = function _loop2() {\n          var i = _step136.value;\n\n          if (i.type != \"insert\") {\n            return \"continue\";\n          }\n\n          var n = i.position.parent;\n          var o = i.length === n.maxOffset;\n\n          if (o) {\n            e.enqueueChange(t, function (e) {\n              var t = Array.from(n.getAttributeKeys()).filter(function (e) {\n                return e.startsWith(lf);\n              });\n\n              var _iterator137 = _createForOfIteratorHelper(t),\n                  _step137;\n\n              try {\n                for (_iterator137.s(); !(_step137 = _iterator137.n()).done;) {\n                  var _i81 = _step137.value;\n                  e.removeAttribute(_i81, n);\n                }\n              } catch (err) {\n                _iterator137.e(err);\n              } finally {\n                _iterator137.f();\n              }\n            });\n          }\n        };\n\n        for (_iterator136.s(); !(_step136 = _iterator136.n()).done;) {\n          var _ret = _loop2();\n\n          if (_ret === \"continue\") continue;\n        }\n      } catch (err) {\n        _iterator136.e(err);\n      } finally {\n        _iterator136.f();\n      }\n    }\n\n    var mf = /*#__PURE__*/function () {\n      function mf(e) {\n        _classCallCheck(this, mf);\n\n        this._dispatchers = e;\n      }\n\n      _createClass(mf, [{\n        key: \"add\",\n        value: function add(e) {\n          var _iterator138 = _createForOfIteratorHelper(this._dispatchers),\n              _step138;\n\n          try {\n            for (_iterator138.s(); !(_step138 = _iterator138.n()).done;) {\n              var _t114 = _step138.value;\n              e(_t114);\n            }\n          } catch (err) {\n            _iterator138.e(err);\n          } finally {\n            _iterator138.f();\n          }\n\n          return this;\n        }\n      }]);\n\n      return mf;\n    }();\n\n    var gf = 1,\n        pf = 4;\n\n    function bf(e) {\n      return Hs(e, gf | pf);\n    }\n\n    var wf = bf;\n\n    var _f = /*#__PURE__*/function (_mf) {\n      _inherits(_f, _mf);\n\n      var _super22 = _createSuper(_f);\n\n      function _f() {\n        _classCallCheck(this, _f);\n\n        return _super22.apply(this, arguments);\n      }\n\n      _createClass(_f, [{\n        key: \"elementToElement\",\n        value: function elementToElement(e) {\n          return this.add(Rf(e));\n        }\n      }, {\n        key: \"attributeToElement\",\n        value: function attributeToElement(e) {\n          return this.add(Lf(e));\n        }\n      }, {\n        key: \"attributeToAttribute\",\n        value: function attributeToAttribute(e) {\n          return this.add(jf(e));\n        }\n      }, {\n        key: \"markerToElement\",\n        value: function markerToElement(e) {\n          return this.add(Df(e));\n        }\n      }, {\n        key: \"markerToHighlight\",\n        value: function markerToHighlight(e) {\n          return this.add(zf(e));\n        }\n      }]);\n\n      return _f;\n    }(mf);\n\n    function vf() {\n      return function (e, t, n) {\n        if (!n.consumable.consume(t.item, \"insert\")) {\n          return;\n        }\n\n        var i = n.writer;\n        var o = n.mapper.toViewPosition(t.range.start);\n        var s = i.createText(t.item.data);\n        i.insert(o, s);\n      };\n    }\n\n    function kf() {\n      return function (e, t, n) {\n        var i = n.mapper.toViewPosition(t.position);\n        var o = t.position.getShiftedBy(t.length);\n        var s = n.mapper.toViewPosition(o, {\n          isPhantom: true\n        });\n        var r = n.writer.createRange(i, s);\n        var a = n.writer.remove(r.getTrimmed());\n\n        var _iterator139 = _createForOfIteratorHelper(n.writer.createRangeIn(a).getItems()),\n            _step139;\n\n        try {\n          for (_iterator139.s(); !(_step139 = _iterator139.n()).done;) {\n            var _e109 = _step139.value;\n            n.mapper.unbindViewElement(_e109);\n          }\n        } catch (err) {\n          _iterator139.e(err);\n        } finally {\n          _iterator139.f();\n        }\n      };\n    }\n\n    function yf(e, t) {\n      var n = e.createAttributeElement(\"span\", t.attributes);\n\n      if (t.classes) {\n        n._addClass(t.classes);\n      }\n\n      if (t.priority) {\n        n._priority = t.priority;\n      }\n\n      n._id = t.id;\n      return n;\n    }\n\n    function xf() {\n      return function (e, t, n) {\n        var i = t.selection;\n\n        if (i.isCollapsed) {\n          return;\n        }\n\n        if (!n.consumable.consume(i, \"selection\")) {\n          return;\n        }\n\n        var o = [];\n\n        var _iterator140 = _createForOfIteratorHelper(i.getRanges()),\n            _step140;\n\n        try {\n          for (_iterator140.s(); !(_step140 = _iterator140.n()).done;) {\n            var _e110 = _step140.value;\n\n            var _t115 = n.mapper.toViewRange(_e110);\n\n            o.push(_t115);\n          }\n        } catch (err) {\n          _iterator140.e(err);\n        } finally {\n          _iterator140.f();\n        }\n\n        n.writer.setSelection(o, {\n          backward: i.isBackward\n        });\n      };\n    }\n\n    function Af() {\n      return function (e, t, n) {\n        var i = t.selection;\n\n        if (!i.isCollapsed) {\n          return;\n        }\n\n        if (!n.consumable.consume(i, \"selection\")) {\n          return;\n        }\n\n        var o = n.writer;\n        var s = i.getFirstPosition();\n        var r = n.mapper.toViewPosition(s);\n        var a = o.breakAttributes(r);\n        o.setSelection(a);\n      };\n    }\n\n    function Cf() {\n      return function (e, t, n) {\n        var i = n.writer;\n        var o = i.document.selection;\n\n        var _iterator141 = _createForOfIteratorHelper(o.getRanges()),\n            _step141;\n\n        try {\n          for (_iterator141.s(); !(_step141 = _iterator141.n()).done;) {\n            var _e111 = _step141.value;\n\n            if (_e111.isCollapsed) {\n              if (_e111.end.parent.isAttached()) {\n                n.writer.mergeAttributes(_e111.start);\n              }\n            }\n          }\n        } catch (err) {\n          _iterator141.e(err);\n        } finally {\n          _iterator141.f();\n        }\n\n        i.setSelection(null);\n      };\n    }\n\n    function Tf(e) {\n      return function (t, n, i) {\n        var o = e(n.attributeOldValue, i.writer);\n        var s = e(n.attributeNewValue, i.writer);\n\n        if (!o && !s) {\n          return;\n        }\n\n        if (!i.consumable.consume(n.item, t.name)) {\n          return;\n        }\n\n        var r = i.writer;\n        var a = r.document.selection;\n\n        if (n.item instanceof Kh || n.item instanceof df) {\n          r.wrap(a.getFirstRange(), s);\n        } else {\n          var _e112 = i.mapper.toViewRange(n.range);\n\n          if (n.attributeOldValue !== null && o) {\n            _e112 = r.unwrap(_e112, o);\n          }\n\n          if (n.attributeNewValue !== null && s) {\n            r.wrap(_e112, s);\n          }\n        }\n      };\n    }\n\n    function Mf(e) {\n      return function (t, n, i) {\n        var o = e(n.item, i.writer);\n\n        if (!o) {\n          return;\n        }\n\n        if (!i.consumable.consume(n.item, \"insert\")) {\n          return;\n        }\n\n        var s = i.mapper.toViewPosition(n.range.start);\n        i.mapper.bindElements(n.item, o);\n        i.writer.insert(s, o);\n      };\n    }\n\n    function Pf(e) {\n      return function (t, n, i) {\n        n.isOpening = true;\n        var o = e(n, i.writer);\n        n.isOpening = false;\n        var s = e(n, i.writer);\n\n        if (!o || !s) {\n          return;\n        }\n\n        var r = n.markerRange;\n\n        if (r.isCollapsed && !i.consumable.consume(r, t.name)) {\n          return;\n        }\n\n        var _iterator142 = _createForOfIteratorHelper(r),\n            _step142;\n\n        try {\n          for (_iterator142.s(); !(_step142 = _iterator142.n()).done;) {\n            var _e113 = _step142.value;\n\n            if (!i.consumable.consume(_e113.item, t.name)) {\n              return;\n            }\n          }\n        } catch (err) {\n          _iterator142.e(err);\n        } finally {\n          _iterator142.f();\n        }\n\n        var a = i.mapper;\n        var c = i.writer;\n        c.insert(a.toViewPosition(r.start), o);\n        i.mapper.bindElementToMarker(o, n.markerName);\n\n        if (!r.isCollapsed) {\n          c.insert(a.toViewPosition(r.end), s);\n          i.mapper.bindElementToMarker(s, n.markerName);\n        }\n\n        t.stop();\n      };\n    }\n\n    function Ef() {\n      return function (e, t, n) {\n        var i = n.mapper.markerNameToElements(t.markerName);\n\n        if (!i) {\n          return;\n        }\n\n        var _iterator143 = _createForOfIteratorHelper(i),\n            _step143;\n\n        try {\n          for (_iterator143.s(); !(_step143 = _iterator143.n()).done;) {\n            var _e114 = _step143.value;\n            n.mapper.unbindElementFromMarkerName(_e114, t.markerName);\n            n.writer.clear(n.writer.createRangeOn(_e114), _e114);\n          }\n        } catch (err) {\n          _iterator143.e(err);\n        } finally {\n          _iterator143.f();\n        }\n\n        n.writer.clearClonedElementsGroup(t.markerName);\n        e.stop();\n      };\n    }\n\n    function Sf(e) {\n      return function (t, n, i) {\n        var o = e(n.attributeOldValue, n);\n        var s = e(n.attributeNewValue, n);\n\n        if (!o && !s) {\n          return;\n        }\n\n        if (!i.consumable.consume(n.item, t.name)) {\n          return;\n        }\n\n        var r = i.mapper.toViewElement(n.item);\n        var a = i.writer;\n\n        if (!r) {\n          throw new rr[\"b\"](\"conversion-attribute-to-attribute-on-text: \" + \"Trying to convert text node's attribute with attribute-to-attribute converter.\", [n, i]);\n        }\n\n        if (n.attributeOldValue !== null && o) {\n          if (o.key == \"class\") {\n            var _e115 = Array.isArray(o.value) ? o.value : [o.value];\n\n            var _iterator144 = _createForOfIteratorHelper(_e115),\n                _step144;\n\n            try {\n              for (_iterator144.s(); !(_step144 = _iterator144.n()).done;) {\n                var _t116 = _step144.value;\n                a.removeClass(_t116, r);\n              }\n            } catch (err) {\n              _iterator144.e(err);\n            } finally {\n              _iterator144.f();\n            }\n          } else if (o.key == \"style\") {\n            var _e116 = Object.keys(o.value);\n\n            for (var _i82 = 0, _e117 = _e116; _i82 < _e117.length; _i82++) {\n              var _t117 = _e117[_i82];\n              a.removeStyle(_t117, r);\n            }\n          } else {\n            a.removeAttribute(o.key, r);\n          }\n        }\n\n        if (n.attributeNewValue !== null && s) {\n          if (s.key == \"class\") {\n            var _e118 = Array.isArray(s.value) ? s.value : [s.value];\n\n            var _iterator145 = _createForOfIteratorHelper(_e118),\n                _step145;\n\n            try {\n              for (_iterator145.s(); !(_step145 = _iterator145.n()).done;) {\n                var _t118 = _step145.value;\n                a.addClass(_t118, r);\n              }\n            } catch (err) {\n              _iterator145.e(err);\n            } finally {\n              _iterator145.f();\n            }\n          } else if (s.key == \"style\") {\n            var _e119 = Object.keys(s.value);\n\n            for (var _i83 = 0, _e120 = _e119; _i83 < _e120.length; _i83++) {\n              var _t119 = _e120[_i83];\n              a.setStyle(_t119, s.value[_t119], r);\n            }\n          } else {\n            a.setAttribute(s.key, s.value, r);\n          }\n        }\n      };\n    }\n\n    function If(e) {\n      return function (t, n, i) {\n        if (!n.item) {\n          return;\n        }\n\n        if (!(n.item instanceof Kh || n.item instanceof df) && !n.item.is(\"textProxy\")) {\n          return;\n        }\n\n        var o = Uf(e, n, i);\n\n        if (!o) {\n          return;\n        }\n\n        if (!i.consumable.consume(n.item, t.name)) {\n          return;\n        }\n\n        var s = i.writer;\n        var r = yf(s, o);\n        var a = s.document.selection;\n\n        if (n.item instanceof Kh || n.item instanceof df) {\n          s.wrap(a.getFirstRange(), r, a);\n        } else {\n          var _e121 = i.mapper.toViewRange(n.range);\n\n          var _t120 = s.wrap(_e121, r);\n\n          var _iterator146 = _createForOfIteratorHelper(_t120.getItems()),\n              _step146;\n\n          try {\n            for (_iterator146.s(); !(_step146 = _iterator146.n()).done;) {\n              var _e122 = _step146.value;\n\n              if (_e122.is(\"attributeElement\") && _e122.isSimilar(r)) {\n                i.mapper.bindElementToMarker(_e122, n.markerName);\n                break;\n              }\n            }\n          } catch (err) {\n            _iterator146.e(err);\n          } finally {\n            _iterator146.f();\n          }\n        }\n      };\n    }\n\n    function Of(e) {\n      return function (t, n, i) {\n        if (!n.item) {\n          return;\n        }\n\n        if (!(n.item instanceof Fh)) {\n          return;\n        }\n\n        var o = Uf(e, n, i);\n\n        if (!o) {\n          return;\n        }\n\n        if (!i.consumable.test(n.item, t.name)) {\n          return;\n        }\n\n        var s = i.mapper.toViewElement(n.item);\n\n        if (s && s.getCustomProperty(\"addHighlight\")) {\n          i.consumable.consume(n.item, t.name);\n\n          var _iterator147 = _createForOfIteratorHelper(qh._createIn(n.item)),\n              _step147;\n\n          try {\n            for (_iterator147.s(); !(_step147 = _iterator147.n()).done;) {\n              var _e123 = _step147.value;\n              i.consumable.consume(_e123.item, t.name);\n            }\n          } catch (err) {\n            _iterator147.e(err);\n          } finally {\n            _iterator147.f();\n          }\n\n          s.getCustomProperty(\"addHighlight\")(s, o, i.writer);\n          i.mapper.bindElementToMarker(s, n.markerName);\n        }\n      };\n    }\n\n    function Nf(e) {\n      return function (t, n, i) {\n        if (n.markerRange.isCollapsed) {\n          return;\n        }\n\n        var o = Uf(e, n, i);\n\n        if (!o) {\n          return;\n        }\n\n        var s = yf(i.writer, o);\n        var r = i.mapper.markerNameToElements(n.markerName);\n\n        if (!r) {\n          return;\n        }\n\n        var _iterator148 = _createForOfIteratorHelper(r),\n            _step148;\n\n        try {\n          for (_iterator148.s(); !(_step148 = _iterator148.n()).done;) {\n            var _e124 = _step148.value;\n            i.mapper.unbindElementFromMarkerName(_e124, n.markerName);\n\n            if (_e124.is(\"attributeElement\")) {\n              i.writer.unwrap(i.writer.createRangeOn(_e124), s);\n            } else {\n              _e124.getCustomProperty(\"removeHighlight\")(_e124, o.id, i.writer);\n            }\n          }\n        } catch (err) {\n          _iterator148.e(err);\n        } finally {\n          _iterator148.f();\n        }\n\n        i.writer.clearClonedElementsGroup(n.markerName);\n        t.stop();\n      };\n    }\n\n    function Rf(e) {\n      e = wf(e);\n      e.view = Bf(e.view, \"container\");\n      return function (t) {\n        t.on(\"insert:\" + e.model, Mf(e.view), {\n          priority: e.converterPriority || \"normal\"\n        });\n      };\n    }\n\n    function Lf(e) {\n      e = wf(e);\n      var t = e.model.key ? e.model.key : e.model;\n      var n = \"attribute:\" + t;\n\n      if (e.model.name) {\n        n += \":\" + e.model.name;\n      }\n\n      if (e.model.values) {\n        var _iterator149 = _createForOfIteratorHelper(e.model.values),\n            _step149;\n\n        try {\n          for (_iterator149.s(); !(_step149 = _iterator149.n()).done;) {\n            var _t121 = _step149.value;\n            e.view[_t121] = Bf(e.view[_t121], \"attribute\");\n          }\n        } catch (err) {\n          _iterator149.e(err);\n        } finally {\n          _iterator149.f();\n        }\n      } else {\n        e.view = Bf(e.view, \"attribute\");\n      }\n\n      var i = Ff(e);\n      return function (t) {\n        t.on(n, Tf(i), {\n          priority: e.converterPriority || \"normal\"\n        });\n      };\n    }\n\n    function jf(e) {\n      e = wf(e);\n      var t = e.model.key ? e.model.key : e.model;\n      var n = \"attribute:\" + t;\n\n      if (e.model.name) {\n        n += \":\" + e.model.name;\n      }\n\n      if (e.model.values) {\n        var _iterator150 = _createForOfIteratorHelper(e.model.values),\n            _step150;\n\n        try {\n          for (_iterator150.s(); !(_step150 = _iterator150.n()).done;) {\n            var _t122 = _step150.value;\n            e.view[_t122] = Hf(e.view[_t122]);\n          }\n        } catch (err) {\n          _iterator150.e(err);\n        } finally {\n          _iterator150.f();\n        }\n      } else {\n        e.view = Hf(e.view);\n      }\n\n      var i = Ff(e);\n      return function (t) {\n        t.on(n, Sf(i), {\n          priority: e.converterPriority || \"normal\"\n        });\n      };\n    }\n\n    function Df(e) {\n      e = wf(e);\n      e.view = Bf(e.view, \"ui\");\n      return function (t) {\n        t.on(\"addMarker:\" + e.model, Pf(e.view), {\n          priority: e.converterPriority || \"normal\"\n        });\n        t.on(\"removeMarker:\" + e.model, Ef(e.view), {\n          priority: e.converterPriority || \"normal\"\n        });\n      };\n    }\n\n    function zf(e) {\n      return function (t) {\n        t.on(\"addMarker:\" + e.model, If(e.view), {\n          priority: e.converterPriority || \"normal\"\n        });\n        t.on(\"addMarker:\" + e.model, Of(e.view), {\n          priority: e.converterPriority || \"normal\"\n        });\n        t.on(\"removeMarker:\" + e.model, Nf(e.view), {\n          priority: e.converterPriority || \"normal\"\n        });\n      };\n    }\n\n    function Bf(e, t) {\n      if (typeof e == \"function\") {\n        return e;\n      }\n\n      return function (n, i) {\n        return Vf(e, i, t);\n      };\n    }\n\n    function Vf(e, t, n) {\n      if (typeof e == \"string\") {\n        e = {\n          name: e\n        };\n      }\n\n      var i;\n      var o = Object.assign({}, e.attributes);\n\n      if (n == \"container\") {\n        i = t.createContainerElement(e.name, o);\n      } else if (n == \"attribute\") {\n        var _n99 = {\n          priority: e.priority || wl.DEFAULT_PRIORITY\n        };\n        i = t.createAttributeElement(e.name, o, _n99);\n      } else {\n        i = t.createUIElement(e.name, o);\n      }\n\n      if (e.styles) {\n        var _n100 = Object.keys(e.styles);\n\n        for (var _i84 = 0, _n101 = _n100; _i84 < _n101.length; _i84++) {\n          var _o38 = _n101[_i84];\n          t.setStyle(_o38, e.styles[_o38], i);\n        }\n      }\n\n      if (e.classes) {\n        var _n102 = e.classes;\n\n        if (typeof _n102 == \"string\") {\n          t.addClass(_n102, i);\n        } else {\n          var _iterator151 = _createForOfIteratorHelper(_n102),\n              _step151;\n\n          try {\n            for (_iterator151.s(); !(_step151 = _iterator151.n()).done;) {\n              var _e125 = _step151.value;\n              t.addClass(_e125, i);\n            }\n          } catch (err) {\n            _iterator151.e(err);\n          } finally {\n            _iterator151.f();\n          }\n        }\n      }\n\n      return i;\n    }\n\n    function Ff(e) {\n      if (e.model.values) {\n        return function (t, n) {\n          var i = e.view[t];\n\n          if (i) {\n            return i(t, n);\n          }\n\n          return null;\n        };\n      } else {\n        return e.view;\n      }\n    }\n\n    function Hf(e) {\n      if (typeof e == \"string\") {\n        return function (t) {\n          return {\n            key: e,\n            value: t\n          };\n        };\n      } else if (typeof e == \"object\") {\n        if (e.value) {\n          return function () {\n            return e;\n          };\n        } else {\n          return function (t) {\n            return {\n              key: e.key,\n              value: t\n            };\n          };\n        }\n      } else {\n        return e;\n      }\n    }\n\n    function Uf(e, t, n) {\n      var i = typeof e == \"function\" ? e(t, n) : e;\n\n      if (!i) {\n        return null;\n      }\n\n      if (!i.priority) {\n        i.priority = 10;\n      }\n\n      if (!i.id) {\n        i.id = t.markerName;\n      }\n\n      return i;\n    }\n\n    var Wf = /*#__PURE__*/function (_mf2) {\n      _inherits(Wf, _mf2);\n\n      var _super23 = _createSuper(Wf);\n\n      function Wf() {\n        _classCallCheck(this, Wf);\n\n        return _super23.apply(this, arguments);\n      }\n\n      _createClass(Wf, [{\n        key: \"elementToElement\",\n        value: function elementToElement(e) {\n          return this.add(Jf(e));\n        }\n      }, {\n        key: \"elementToAttribute\",\n        value: function elementToAttribute(e) {\n          return this.add(Qf(e));\n        }\n      }, {\n        key: \"attributeToAttribute\",\n        value: function attributeToAttribute(e) {\n          return this.add(Xf(e));\n        }\n      }, {\n        key: \"elementToMarker\",\n        value: function elementToMarker(e) {\n          return this.add(Gf(e));\n        }\n      }]);\n\n      return Wf;\n    }(mf);\n\n    function $f() {\n      return function (e, t, n) {\n        if (!t.modelRange && n.consumable.consume(t.viewItem, {\n          name: true\n        })) {\n          var _n$convertChildren = n.convertChildren(t.viewItem, t.modelCursor),\n              _e126 = _n$convertChildren.modelRange,\n              _i85 = _n$convertChildren.modelCursor;\n\n          t.modelRange = _e126;\n          t.modelCursor = _i85;\n        }\n      };\n    }\n\n    function qf() {\n      return function (e, t, n) {\n        if (n.schema.checkChild(t.modelCursor, \"$text\")) {\n          if (n.consumable.consume(t.viewItem)) {\n            var _e127 = n.writer.createText(t.viewItem.data);\n\n            n.writer.insert(_e127, t.modelCursor);\n            t.modelRange = qh._createFromPositionAndShift(t.modelCursor, _e127.offsetSize);\n            t.modelCursor = t.modelRange.end;\n          }\n        }\n      };\n    }\n\n    function Yf(e, t) {\n      return function (n, i) {\n        var o = i.newSelection;\n        var s = new Kh();\n        var r = [];\n\n        var _iterator152 = _createForOfIteratorHelper(o.getRanges()),\n            _step152;\n\n        try {\n          for (_iterator152.s(); !(_step152 = _iterator152.n()).done;) {\n            var _e128 = _step152.value;\n            r.push(t.toModelRange(_e128));\n          }\n        } catch (err) {\n          _iterator152.e(err);\n        } finally {\n          _iterator152.f();\n        }\n\n        s.setTo(r, {\n          backward: o.isBackward\n        });\n\n        if (!s.isEqual(e.document.selection)) {\n          e.change(function (e) {\n            e.setSelection(s);\n          });\n        }\n      };\n    }\n\n    function Jf(e) {\n      e = wf(e);\n      var t = Zf(e);\n      var n = Kf(e.view);\n      var i = n ? \"element:\" + n : \"element\";\n      return function (n) {\n        n.on(i, t, {\n          priority: e.converterPriority || \"normal\"\n        });\n      };\n    }\n\n    function Qf(e) {\n      e = wf(e);\n      nm(e);\n      var t = im(e, false);\n      var n = Kf(e.view);\n      var i = n ? \"element:\" + n : \"element\";\n      return function (n) {\n        n.on(i, t, {\n          priority: e.converterPriority || \"low\"\n        });\n      };\n    }\n\n    function Xf(e) {\n      e = wf(e);\n      var t = null;\n\n      if (typeof e.view == \"string\" || e.view.key) {\n        t = tm(e);\n      }\n\n      nm(e, t);\n      var n = im(e, true);\n      return function (t) {\n        t.on(\"element\", n, {\n          priority: e.converterPriority || \"low\"\n        });\n      };\n    }\n\n    function Gf(e) {\n      e = wf(e);\n      rm(e);\n      return Jf(e);\n    }\n\n    function Kf(e) {\n      if (typeof e == \"string\") {\n        return e;\n      }\n\n      if (typeof e == \"object\" && typeof e.name == \"string\") {\n        return e.name;\n      }\n\n      return null;\n    }\n\n    function Zf(e) {\n      var t = e.view ? new Ur(e.view) : null;\n      return function (n, i, o) {\n        var s = {};\n\n        if (t) {\n          var _e129 = t.match(i.viewItem);\n\n          if (!_e129) {\n            return;\n          }\n\n          s = _e129.match;\n        }\n\n        s.name = true;\n        var r = em(e.model, i.viewItem, o.writer);\n\n        if (!r) {\n          return;\n        }\n\n        if (!o.consumable.test(i.viewItem, s)) {\n          return;\n        }\n\n        var a = o.splitToAllowedParent(r, i.modelCursor);\n\n        if (!a) {\n          return;\n        }\n\n        o.writer.insert(r, a.position);\n        o.convertChildren(i.viewItem, o.writer.createPositionAt(r, 0));\n        o.consumable.consume(i.viewItem, s);\n        var c = o.getSplitParts(r);\n        i.modelRange = new qh(o.writer.createPositionBefore(r), o.writer.createPositionAfter(c[c.length - 1]));\n\n        if (a.cursorParent) {\n          i.modelCursor = o.writer.createPositionAt(a.cursorParent, 0);\n        } else {\n          i.modelCursor = i.modelRange.end;\n        }\n      };\n    }\n\n    function em(e, t, n) {\n      if (e instanceof Function) {\n        return e(t, n);\n      } else {\n        return n.createElement(e);\n      }\n    }\n\n    function tm(e) {\n      if (typeof e.view == \"string\") {\n        e.view = {\n          key: e.view\n        };\n      }\n\n      var t = e.view.key;\n      var n;\n\n      if (t == \"class\" || t == \"style\") {\n        var _i86 = t == \"class\" ? \"classes\" : \"styles\";\n\n        n = _defineProperty({}, _i86, e.view.value);\n      } else {\n        var _i87 = typeof e.view.value == \"undefined\" ? /[\\s\\S]*/ : e.view.value;\n\n        n = {\n          attributes: _defineProperty({}, t, _i87)\n        };\n      }\n\n      if (e.view.name) {\n        n.name = e.view.name;\n      }\n\n      e.view = n;\n      return t;\n    }\n\n    function nm(e) {\n      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var n = t === null ? true : function (e) {\n        return e.getAttribute(t);\n      };\n      var i = typeof e.model != \"object\" ? e.model : e.model.key;\n      var o = typeof e.model != \"object\" || typeof e.model.value == \"undefined\" ? n : e.model.value;\n      e.model = {\n        key: i,\n        value: o\n      };\n    }\n\n    function im(e, t) {\n      var n = new Ur(e.view);\n      return function (i, o, s) {\n        var r = n.match(o.viewItem);\n\n        if (!r) {\n          return;\n        }\n\n        var a = e.model.key;\n        var c = typeof e.model.value == \"function\" ? e.model.value(o.viewItem) : e.model.value;\n\n        if (c === null) {\n          return;\n        }\n\n        if (om(e.view, o.viewItem)) {\n          r.match.name = true;\n        } else {\n          delete r.match.name;\n        }\n\n        if (!s.consumable.test(o.viewItem, r.match)) {\n          return;\n        }\n\n        if (!o.modelRange) {\n          o = Object.assign(o, s.convertChildren(o.viewItem, o.modelCursor));\n        }\n\n        var l = sm(o.modelRange, {\n          key: a,\n          value: c\n        }, t, s);\n\n        if (l) {\n          s.consumable.consume(o.viewItem, r.match);\n        }\n      };\n    }\n\n    function om(e, t) {\n      var n = typeof e == \"function\" ? e(t) : e;\n\n      if (typeof n == \"object\" && !Kf(n)) {\n        return false;\n      }\n\n      return !n.classes && !n.attributes && !n.styles;\n    }\n\n    function sm(e, t, n, i) {\n      var o = false;\n\n      for (var _i88 = 0, _Array$from4 = Array.from(e.getItems({\n        shallow: n\n      })); _i88 < _Array$from4.length; _i88++) {\n        var _s16 = _Array$from4[_i88];\n\n        if (i.schema.checkAttribute(_s16, t.key)) {\n          i.writer.setAttribute(t.key, t.value, _s16);\n          o = true;\n        }\n      }\n\n      return o;\n    }\n\n    function rm(e) {\n      var t = e.model;\n\n      e.model = function (e, n) {\n        var i = typeof t == \"string\" ? t : t(e);\n        return n.createElement(\"$marker\", {\n          \"data-name\": i\n        });\n      };\n    }\n\n    var am = /*#__PURE__*/function () {\n      function am(e, t) {\n        var _this49 = this;\n\n        _classCallCheck(this, am);\n\n        this.model = e;\n        this.view = new jh(t);\n        this.mapper = new Yh();\n        this.downcastDispatcher = new Xh({\n          mapper: this.mapper\n        });\n        var n = this.model.document;\n        var i = n.selection;\n        var o = this.model.markers;\n        this.listenTo(this.model, \"_beforeChanges\", function () {\n          _this49.view._disableRendering(true);\n        }, {\n          priority: \"highest\"\n        });\n        this.listenTo(this.model, \"_afterChanges\", function () {\n          _this49.view._disableRendering(false);\n        }, {\n          priority: \"lowest\"\n        });\n        this.listenTo(n, \"change\", function () {\n          _this49.view.change(function (e) {\n            _this49.downcastDispatcher.convertChanges(n.differ, o, e);\n\n            _this49.downcastDispatcher.convertSelection(i, o, e);\n          });\n        }, {\n          priority: \"low\"\n        });\n        this.listenTo(this.view.document, \"selectionChange\", Yf(this.model, this.mapper));\n        this.downcastDispatcher.on(\"insert:$text\", vf(), {\n          priority: \"lowest\"\n        });\n        this.downcastDispatcher.on(\"remove\", kf(), {\n          priority: \"low\"\n        });\n        this.downcastDispatcher.on(\"selection\", Cf(), {\n          priority: \"low\"\n        });\n        this.downcastDispatcher.on(\"selection\", xf(), {\n          priority: \"low\"\n        });\n        this.downcastDispatcher.on(\"selection\", Af(), {\n          priority: \"low\"\n        });\n        this.view.document.roots.bindTo(this.model.document.roots).using(function (e) {\n          if (e.rootName == \"$graveyard\") {\n            return null;\n          }\n\n          var t = new cl(_this49.view.document, e.name);\n          t.rootName = e.rootName;\n\n          _this49.mapper.bindElements(e, t);\n\n          return t;\n        });\n      }\n\n      _createClass(am, [{\n        key: \"destroy\",\n        value: function destroy() {\n          this.view.destroy();\n          this.stopListening();\n        }\n      }]);\n\n      return am;\n    }();\n\n    kr(am, Qc);\n\n    var cm = /*#__PURE__*/function (_Symbol$iterator9) {\n      function cm() {\n        _classCallCheck(this, cm);\n\n        this._commands = new Map();\n      }\n\n      _createClass(cm, [{\n        key: \"add\",\n        value: function add(e, t) {\n          this._commands.set(e, t);\n        }\n      }, {\n        key: \"get\",\n        value: function get(e) {\n          return this._commands.get(e);\n        }\n      }, {\n        key: \"execute\",\n        value: function execute(e) {\n          var n = this.get(e);\n\n          if (!n) {\n            throw new rr[\"b\"](\"commandcollection-command-not-found: Command does not exist.\", this, {\n              commandName: e\n            });\n          }\n\n          for (var _len16 = arguments.length, t = new Array(_len16 > 1 ? _len16 - 1 : 0), _key16 = 1; _key16 < _len16; _key16++) {\n            t[_key16 - 1] = arguments[_key16];\n          }\n\n          n.execute.apply(n, t);\n        }\n      }, {\n        key: \"names\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function names() {\n          return _regeneratorRuntime().wrap(function names$(_context20) {\n            while (1) {\n              switch (_context20.prev = _context20.next) {\n                case 0:\n                  return _context20.delegateYield(this._commands.keys(), \"t0\", 1);\n\n                case 1:\n                case \"end\":\n                  return _context20.stop();\n              }\n            }\n          }, names, this);\n        })\n      }, {\n        key: \"commands\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function commands() {\n          return _regeneratorRuntime().wrap(function commands$(_context21) {\n            while (1) {\n              switch (_context21.prev = _context21.next) {\n                case 0:\n                  return _context21.delegateYield(this._commands.values(), \"t0\", 1);\n\n                case 1:\n                case \"end\":\n                  return _context21.stop();\n              }\n            }\n          }, commands, this);\n        })\n      }, {\n        key: _Symbol$iterator9,\n        value: function value() {\n          return this._commands[Symbol.iterator]();\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          var _iterator153 = _createForOfIteratorHelper(this.commands()),\n              _step153;\n\n          try {\n            for (_iterator153.s(); !(_step153 = _iterator153.n()).done;) {\n              var _e130 = _step153.value;\n\n              _e130.destroy();\n            }\n          } catch (err) {\n            _iterator153.e(err);\n          } finally {\n            _iterator153.f();\n          }\n        }\n      }]);\n\n      return cm;\n    }(Symbol.iterator);\n\n    var lm = /*#__PURE__*/function () {\n      function lm() {\n        _classCallCheck(this, lm);\n\n        this._consumables = new Map();\n      }\n\n      _createClass(lm, [{\n        key: \"add\",\n        value: function add(e, t) {\n          var n;\n\n          if (e.is(\"text\") || e.is(\"documentFragment\")) {\n            this._consumables.set(e, true);\n\n            return;\n          }\n\n          if (!this._consumables.has(e)) {\n            n = new dm(e);\n\n            this._consumables.set(e, n);\n          } else {\n            n = this._consumables.get(e);\n          }\n\n          n.add(t);\n        }\n      }, {\n        key: \"test\",\n        value: function test(e, t) {\n          var n = this._consumables.get(e);\n\n          if (n === undefined) {\n            return null;\n          }\n\n          if (e.is(\"text\") || e.is(\"documentFragment\")) {\n            return n;\n          }\n\n          return n.test(t);\n        }\n      }, {\n        key: \"consume\",\n        value: function consume(e, t) {\n          if (this.test(e, t)) {\n            if (e.is(\"text\") || e.is(\"documentFragment\")) {\n              this._consumables.set(e, false);\n            } else {\n              this._consumables.get(e).consume(t);\n            }\n\n            return true;\n          }\n\n          return false;\n        }\n      }, {\n        key: \"revert\",\n        value: function revert(e, t) {\n          var n = this._consumables.get(e);\n\n          if (n !== undefined) {\n            if (e.is(\"text\") || e.is(\"documentFragment\")) {\n              this._consumables.set(e, true);\n            } else {\n              n.revert(t);\n            }\n          }\n        }\n      }], [{\n        key: \"consumablesFromElement\",\n        value: function consumablesFromElement(e) {\n          var t = {\n            element: e,\n            name: true,\n            attributes: [],\n            classes: [],\n            styles: []\n          };\n          var n = e.getAttributeKeys();\n\n          var _iterator154 = _createForOfIteratorHelper(n),\n              _step154;\n\n          try {\n            for (_iterator154.s(); !(_step154 = _iterator154.n()).done;) {\n              var _e131 = _step154.value;\n\n              if (_e131 == \"style\" || _e131 == \"class\") {\n                continue;\n              }\n\n              t.attributes.push(_e131);\n            }\n          } catch (err) {\n            _iterator154.e(err);\n          } finally {\n            _iterator154.f();\n          }\n\n          var i = e.getClassNames();\n\n          var _iterator155 = _createForOfIteratorHelper(i),\n              _step155;\n\n          try {\n            for (_iterator155.s(); !(_step155 = _iterator155.n()).done;) {\n              var _e132 = _step155.value;\n              t.classes.push(_e132);\n            }\n          } catch (err) {\n            _iterator155.e(err);\n          } finally {\n            _iterator155.f();\n          }\n\n          var o = e.getStyleNames();\n\n          var _iterator156 = _createForOfIteratorHelper(o),\n              _step156;\n\n          try {\n            for (_iterator156.s(); !(_step156 = _iterator156.n()).done;) {\n              var _e133 = _step156.value;\n              t.styles.push(_e133);\n            }\n          } catch (err) {\n            _iterator156.e(err);\n          } finally {\n            _iterator156.f();\n          }\n\n          return t;\n        }\n      }, {\n        key: \"createFrom\",\n        value: function createFrom(e, t) {\n          if (!t) {\n            t = new lm(e);\n          }\n\n          if (e.is(\"text\")) {\n            t.add(e);\n            return t;\n          }\n\n          if (e.is(\"element\")) {\n            t.add(e, lm.consumablesFromElement(e));\n          }\n\n          if (e.is(\"documentFragment\")) {\n            t.add(e);\n          }\n\n          var _iterator157 = _createForOfIteratorHelper(e.getChildren()),\n              _step157;\n\n          try {\n            for (_iterator157.s(); !(_step157 = _iterator157.n()).done;) {\n              var _n104 = _step157.value;\n              t = lm.createFrom(_n104, t);\n            }\n          } catch (err) {\n            _iterator157.e(err);\n          } finally {\n            _iterator157.f();\n          }\n\n          return t;\n        }\n      }]);\n\n      return lm;\n    }();\n\n    var dm = /*#__PURE__*/function () {\n      function dm(e) {\n        _classCallCheck(this, dm);\n\n        this.element = e;\n        this._canConsumeName = null;\n        this._consumables = {\n          attributes: new Map(),\n          styles: new Map(),\n          classes: new Map()\n        };\n      }\n\n      _createClass(dm, [{\n        key: \"add\",\n        value: function add(e) {\n          if (e.name) {\n            this._canConsumeName = true;\n          }\n\n          for (var _t123 in this._consumables) {\n            if (_t123 in e) {\n              this._add(_t123, e[_t123]);\n            }\n          }\n        }\n      }, {\n        key: \"test\",\n        value: function test(e) {\n          if (e.name && !this._canConsumeName) {\n            return this._canConsumeName;\n          }\n\n          for (var _t124 in this._consumables) {\n            if (_t124 in e) {\n              var _n105 = this._test(_t124, e[_t124]);\n\n              if (_n105 !== true) {\n                return _n105;\n              }\n            }\n          }\n\n          return true;\n        }\n      }, {\n        key: \"consume\",\n        value: function consume(e) {\n          if (e.name) {\n            this._canConsumeName = false;\n          }\n\n          for (var _t125 in this._consumables) {\n            if (_t125 in e) {\n              this._consume(_t125, e[_t125]);\n            }\n          }\n        }\n      }, {\n        key: \"revert\",\n        value: function revert(e) {\n          if (e.name) {\n            this._canConsumeName = true;\n          }\n\n          for (var _t126 in this._consumables) {\n            if (_t126 in e) {\n              this._revert(_t126, e[_t126]);\n            }\n          }\n        }\n      }, {\n        key: \"_add\",\n        value: function _add(e, t) {\n          var n = Qt(t) ? t : [t];\n          var i = this._consumables[e];\n\n          var _iterator158 = _createForOfIteratorHelper(n),\n              _step158;\n\n          try {\n            for (_iterator158.s(); !(_step158 = _iterator158.n()).done;) {\n              var _t127 = _step158.value;\n\n              if (e === \"attributes\" && (_t127 === \"class\" || _t127 === \"style\")) {\n                throw new rr[\"b\"](\"viewconsumable-invalid-attribute: Classes and styles should be handled separately.\", this);\n              }\n\n              i.set(_t127, true);\n\n              if (e === \"styles\") {\n                var _iterator159 = _createForOfIteratorHelper(this.element.document.stylesProcessor.getRelatedStyles(_t127)),\n                    _step159;\n\n                try {\n                  for (_iterator159.s(); !(_step159 = _iterator159.n()).done;) {\n                    var _e134 = _step159.value;\n                    i.set(_e134, true);\n                  }\n                } catch (err) {\n                  _iterator159.e(err);\n                } finally {\n                  _iterator159.f();\n                }\n              }\n            }\n          } catch (err) {\n            _iterator158.e(err);\n          } finally {\n            _iterator158.f();\n          }\n        }\n      }, {\n        key: \"_test\",\n        value: function _test(e, t) {\n          var n = Qt(t) ? t : [t];\n          var i = this._consumables[e];\n\n          var _iterator160 = _createForOfIteratorHelper(n),\n              _step160;\n\n          try {\n            for (_iterator160.s(); !(_step160 = _iterator160.n()).done;) {\n              var _t128 = _step160.value;\n\n              if (e === \"attributes\" && (_t128 === \"class\" || _t128 === \"style\")) {\n                var _e135 = _t128 == \"class\" ? \"classes\" : \"styles\";\n\n                var _n106 = this._test(_e135, _toConsumableArray(this._consumables[_e135].keys()));\n\n                if (_n106 !== true) {\n                  return _n106;\n                }\n              } else {\n                var _e136 = i.get(_t128);\n\n                if (_e136 === undefined) {\n                  return null;\n                }\n\n                if (!_e136) {\n                  return false;\n                }\n              }\n            }\n          } catch (err) {\n            _iterator160.e(err);\n          } finally {\n            _iterator160.f();\n          }\n\n          return true;\n        }\n      }, {\n        key: \"_consume\",\n        value: function _consume(e, t) {\n          var n = Qt(t) ? t : [t];\n          var i = this._consumables[e];\n\n          var _iterator161 = _createForOfIteratorHelper(n),\n              _step161;\n\n          try {\n            for (_iterator161.s(); !(_step161 = _iterator161.n()).done;) {\n              var _t129 = _step161.value;\n\n              if (e === \"attributes\" && (_t129 === \"class\" || _t129 === \"style\")) {\n                var _e137 = _t129 == \"class\" ? \"classes\" : \"styles\";\n\n                this._consume(_e137, _toConsumableArray(this._consumables[_e137].keys()));\n              } else {\n                i.set(_t129, false);\n\n                if (e == \"styles\") {\n                  var _iterator162 = _createForOfIteratorHelper(this.element.document.stylesProcessor.getRelatedStyles(_t129)),\n                      _step162;\n\n                  try {\n                    for (_iterator162.s(); !(_step162 = _iterator162.n()).done;) {\n                      var _e138 = _step162.value;\n                      i.set(_e138, false);\n                    }\n                  } catch (err) {\n                    _iterator162.e(err);\n                  } finally {\n                    _iterator162.f();\n                  }\n                }\n              }\n            }\n          } catch (err) {\n            _iterator161.e(err);\n          } finally {\n            _iterator161.f();\n          }\n        }\n      }, {\n        key: \"_revert\",\n        value: function _revert(e, t) {\n          var n = Qt(t) ? t : [t];\n          var i = this._consumables[e];\n\n          var _iterator163 = _createForOfIteratorHelper(n),\n              _step163;\n\n          try {\n            for (_iterator163.s(); !(_step163 = _iterator163.n()).done;) {\n              var _t130 = _step163.value;\n\n              if (e === \"attributes\" && (_t130 === \"class\" || _t130 === \"style\")) {\n                var _e139 = _t130 == \"class\" ? \"classes\" : \"styles\";\n\n                this._revert(_e139, _toConsumableArray(this._consumables[_e139].keys()));\n              } else {\n                var _e140 = i.get(_t130);\n\n                if (_e140 === false) {\n                  i.set(_t130, true);\n                }\n              }\n            }\n          } catch (err) {\n            _iterator163.e(err);\n          } finally {\n            _iterator163.f();\n          }\n        }\n      }]);\n\n      return dm;\n    }();\n\n    var um = /*#__PURE__*/function () {\n      function um() {\n        var _this50 = this;\n\n        _classCallCheck(this, um);\n\n        this._sourceDefinitions = {};\n        this._attributeProperties = {};\n        this.decorate(\"checkChild\");\n        this.decorate(\"checkAttribute\");\n        this.on(\"checkAttribute\", function (e, t) {\n          t[0] = new hm(t[0]);\n        }, {\n          priority: \"highest\"\n        });\n        this.on(\"checkChild\", function (e, t) {\n          t[0] = new hm(t[0]);\n          t[1] = _this50.getDefinition(t[1]);\n        }, {\n          priority: \"highest\"\n        });\n      }\n\n      _createClass(um, [{\n        key: \"register\",\n        value: function register(e, t) {\n          if (this._sourceDefinitions[e]) {\n            throw new rr[\"b\"](\"schema-cannot-register-item-twice: A single item cannot be registered twice in the schema.\", this, {\n              itemName: e\n            });\n          }\n\n          this._sourceDefinitions[e] = [Object.assign({}, t)];\n\n          this._clearCache();\n        }\n      }, {\n        key: \"extend\",\n        value: function extend(e, t) {\n          if (!this._sourceDefinitions[e]) {\n            throw new rr[\"b\"](\"schema-cannot-extend-missing-item: Cannot extend an item which was not registered yet.\", this, {\n              itemName: e\n            });\n          }\n\n          this._sourceDefinitions[e].push(Object.assign({}, t));\n\n          this._clearCache();\n        }\n      }, {\n        key: \"getDefinitions\",\n        value: function getDefinitions() {\n          if (!this._compiledDefinitions) {\n            this._compile();\n          }\n\n          return this._compiledDefinitions;\n        }\n      }, {\n        key: \"getDefinition\",\n        value: function getDefinition(e) {\n          var t;\n\n          if (typeof e == \"string\") {\n            t = e;\n          } else if (e.is && (e.is(\"text\") || e.is(\"textProxy\"))) {\n            t = \"$text\";\n          } else {\n            t = e.name;\n          }\n\n          return this.getDefinitions()[t];\n        }\n      }, {\n        key: \"isRegistered\",\n        value: function isRegistered(e) {\n          return !!this.getDefinition(e);\n        }\n      }, {\n        key: \"isBlock\",\n        value: function isBlock(e) {\n          var t = this.getDefinition(e);\n          return !!(t && t.isBlock);\n        }\n      }, {\n        key: \"isLimit\",\n        value: function isLimit(e) {\n          var t = this.getDefinition(e);\n\n          if (!t) {\n            return false;\n          }\n\n          return !!(t.isLimit || t.isObject);\n        }\n      }, {\n        key: \"isObject\",\n        value: function isObject(e) {\n          var t = this.getDefinition(e);\n          return !!(t && t.isObject);\n        }\n      }, {\n        key: \"isInline\",\n        value: function isInline(e) {\n          var t = this.getDefinition(e);\n          return !!(t && t.isInline);\n        }\n      }, {\n        key: \"checkChild\",\n        value: function checkChild(e, t) {\n          if (!t) {\n            return false;\n          }\n\n          return this._checkContextMatch(t, e);\n        }\n      }, {\n        key: \"checkAttribute\",\n        value: function checkAttribute(e, t) {\n          var n = this.getDefinition(e.last);\n\n          if (!n) {\n            return false;\n          }\n\n          return n.allowAttributes.includes(t);\n        }\n      }, {\n        key: \"checkMerge\",\n        value: function checkMerge(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n          if (e instanceof $h) {\n            var _t131 = e.nodeBefore;\n            var _n107 = e.nodeAfter;\n\n            if (!(_t131 instanceof Fh)) {\n              throw new rr[\"b\"](\"schema-check-merge-no-element-before: The node before the merge position must be an element.\", this);\n            }\n\n            if (!(_n107 instanceof Fh)) {\n              throw new rr[\"b\"](\"schema-check-merge-no-element-after: The node after the merge position must be an element.\", this);\n            }\n\n            return this.checkMerge(_t131, _n107);\n          }\n\n          var _iterator164 = _createForOfIteratorHelper(t.getChildren()),\n              _step164;\n\n          try {\n            for (_iterator164.s(); !(_step164 = _iterator164.n()).done;) {\n              var _n108 = _step164.value;\n\n              if (!this.checkChild(e, _n108)) {\n                return false;\n              }\n            }\n          } catch (err) {\n            _iterator164.e(err);\n          } finally {\n            _iterator164.f();\n          }\n\n          return true;\n        }\n      }, {\n        key: \"addChildCheck\",\n        value: function addChildCheck(e) {\n          this.on(\"checkChild\", function (t, _ref9) {\n            var _ref10 = _slicedToArray(_ref9, 2),\n                n = _ref10[0],\n                i = _ref10[1];\n\n            if (!i) {\n              return;\n            }\n\n            var o = e(n, i);\n\n            if (typeof o == \"boolean\") {\n              t.stop();\n              t.return = o;\n            }\n          }, {\n            priority: \"high\"\n          });\n        }\n      }, {\n        key: \"addAttributeCheck\",\n        value: function addAttributeCheck(e) {\n          this.on(\"checkAttribute\", function (t, _ref11) {\n            var _ref12 = _slicedToArray(_ref11, 2),\n                n = _ref12[0],\n                i = _ref12[1];\n\n            var o = e(n, i);\n\n            if (typeof o == \"boolean\") {\n              t.stop();\n              t.return = o;\n            }\n          }, {\n            priority: \"high\"\n          });\n        }\n      }, {\n        key: \"setAttributeProperties\",\n        value: function setAttributeProperties(e, t) {\n          this._attributeProperties[e] = Object.assign(this.getAttributeProperties(e), t);\n        }\n      }, {\n        key: \"getAttributeProperties\",\n        value: function getAttributeProperties(e) {\n          return this._attributeProperties[e] || {};\n        }\n      }, {\n        key: \"getLimitElement\",\n        value: function getLimitElement(e) {\n          var t;\n\n          if (e instanceof $h) {\n            t = e.parent;\n          } else {\n            var _n109 = e instanceof qh ? [e] : Array.from(e.getRanges());\n\n            t = _n109.reduce(function (e, t) {\n              var n = t.getCommonAncestor();\n\n              if (!e) {\n                return n;\n              }\n\n              return e.getCommonAncestor(n, {\n                includeSelf: true\n              });\n            }, null);\n          }\n\n          while (!this.isLimit(t)) {\n            if (t.parent) {\n              t = t.parent;\n            } else {\n              break;\n            }\n          }\n\n          return t;\n        }\n      }, {\n        key: \"checkAttributeInSelection\",\n        value: function checkAttributeInSelection(e, t) {\n          if (e.isCollapsed) {\n            var _n110 = e.getFirstPosition();\n\n            var _i89 = [].concat(_toConsumableArray(_n110.getAncestors()), [new zh(\"\", e.getAttributes())]);\n\n            return this.checkAttribute(_i89, t);\n          } else {\n            var _n111 = e.getRanges();\n\n            var _iterator165 = _createForOfIteratorHelper(_n111),\n                _step165;\n\n            try {\n              for (_iterator165.s(); !(_step165 = _iterator165.n()).done;) {\n                var _e141 = _step165.value;\n\n                var _iterator166 = _createForOfIteratorHelper(_e141),\n                    _step166;\n\n                try {\n                  for (_iterator166.s(); !(_step166 = _iterator166.n()).done;) {\n                    var _n112 = _step166.value;\n\n                    if (this.checkAttribute(_n112.item, t)) {\n                      return true;\n                    }\n                  }\n                } catch (err) {\n                  _iterator166.e(err);\n                } finally {\n                  _iterator166.f();\n                }\n              }\n            } catch (err) {\n              _iterator165.e(err);\n            } finally {\n              _iterator165.f();\n            }\n          }\n\n          return false;\n        }\n      }, {\n        key: \"getValidRanges\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function getValidRanges(e, t) {\n          var _iterator167, _step167, _n113;\n\n          return _regeneratorRuntime().wrap(function getValidRanges$(_context22) {\n            while (1) {\n              switch (_context22.prev = _context22.next) {\n                case 0:\n                  e = Mm(e);\n                  _iterator167 = _createForOfIteratorHelper(e);\n                  _context22.prev = 2;\n\n                  _iterator167.s();\n\n                case 4:\n                  if ((_step167 = _iterator167.n()).done) {\n                    _context22.next = 9;\n                    break;\n                  }\n\n                  _n113 = _step167.value;\n                  return _context22.delegateYield(this._getValidRangesForRange(_n113, t), \"t0\", 7);\n\n                case 7:\n                  _context22.next = 4;\n                  break;\n\n                case 9:\n                  _context22.next = 14;\n                  break;\n\n                case 11:\n                  _context22.prev = 11;\n                  _context22.t1 = _context22[\"catch\"](2);\n\n                  _iterator167.e(_context22.t1);\n\n                case 14:\n                  _context22.prev = 14;\n\n                  _iterator167.f();\n\n                  return _context22.finish(14);\n\n                case 17:\n                case \"end\":\n                  return _context22.stop();\n              }\n            }\n          }, getValidRanges, this, [[2, 11, 14, 17]]);\n        })\n      }, {\n        key: \"getNearestSelectionRange\",\n        value: function getNearestSelectionRange(e) {\n          var _this51 = this;\n\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"both\";\n\n          if (this.checkChild(e, \"$text\")) {\n            return new qh(e);\n          }\n\n          var n, i;\n          var o = e.getAncestors().reverse().find(function (e) {\n            return _this51.isLimit(e);\n          }) || e.root;\n\n          if (t == \"both\" || t == \"backward\") {\n            n = new Uh({\n              boundaries: qh._createIn(o),\n              startPosition: e,\n              direction: \"backward\"\n            });\n          }\n\n          if (t == \"both\" || t == \"forward\") {\n            i = new Uh({\n              boundaries: qh._createIn(o),\n              startPosition: e\n            });\n          }\n\n          var _iterator168 = _createForOfIteratorHelper(Tm(n, i)),\n              _step168;\n\n          try {\n            for (_iterator168.s(); !(_step168 = _iterator168.n()).done;) {\n              var _e142 = _step168.value;\n\n              var _t132 = _e142.walker == n ? \"elementEnd\" : \"elementStart\";\n\n              var _i90 = _e142.value;\n\n              if (_i90.type == _t132 && this.isObject(_i90.item)) {\n                return qh._createOn(_i90.item);\n              }\n\n              if (this.checkChild(_i90.nextPosition, \"$text\")) {\n                return new qh(_i90.nextPosition);\n              }\n            }\n          } catch (err) {\n            _iterator168.e(err);\n          } finally {\n            _iterator168.f();\n          }\n\n          return null;\n        }\n      }, {\n        key: \"findAllowedParent\",\n        value: function findAllowedParent(e, t) {\n          var n = e.parent;\n\n          while (n) {\n            if (this.checkChild(n, t)) {\n              return n;\n            }\n\n            if (this.isLimit(n)) {\n              return null;\n            }\n\n            n = n.parent;\n          }\n\n          return null;\n        }\n      }, {\n        key: \"removeDisallowedAttributes\",\n        value: function removeDisallowedAttributes(e, t) {\n          var _iterator169 = _createForOfIteratorHelper(e),\n              _step169;\n\n          try {\n            for (_iterator169.s(); !(_step169 = _iterator169.n()).done;) {\n              var _n114 = _step169.value;\n\n              if (_n114.is(\"text\")) {\n                Pm(this, _n114, t);\n              } else {\n                var _e143 = qh._createIn(_n114);\n\n                var _i91 = _e143.getPositions();\n\n                var _iterator170 = _createForOfIteratorHelper(_i91),\n                    _step170;\n\n                try {\n                  for (_iterator170.s(); !(_step170 = _iterator170.n()).done;) {\n                    var _e144 = _step170.value;\n\n                    var _n115 = _e144.nodeBefore || _e144.parent;\n\n                    Pm(this, _n115, t);\n                  }\n                } catch (err) {\n                  _iterator170.e(err);\n                } finally {\n                  _iterator170.f();\n                }\n              }\n            }\n          } catch (err) {\n            _iterator169.e(err);\n          } finally {\n            _iterator169.f();\n          }\n        }\n      }, {\n        key: \"createContext\",\n        value: function createContext(e) {\n          return new hm(e);\n        }\n      }, {\n        key: \"_clearCache\",\n        value: function _clearCache() {\n          this._compiledDefinitions = null;\n        }\n      }, {\n        key: \"_compile\",\n        value: function _compile() {\n          var e = {};\n          var t = this._sourceDefinitions;\n          var n = Object.keys(t);\n\n          for (var _i92 = 0, _n116 = n; _i92 < _n116.length; _i92++) {\n            var _i93 = _n116[_i92];\n            e[_i93] = fm(t[_i93], _i93);\n          }\n\n          for (var _i94 = 0, _n117 = n; _i94 < _n117.length; _i94++) {\n            var _t133 = _n117[_i94];\n            mm(e, _t133);\n          }\n\n          for (var _i95 = 0, _n118 = n; _i95 < _n118.length; _i95++) {\n            var _t134 = _n118[_i95];\n            gm(e, _t134);\n          }\n\n          for (var _i96 = 0, _n119 = n; _i96 < _n119.length; _i96++) {\n            var _t135 = _n119[_i96];\n            pm(e, _t135);\n            bm(e, _t135);\n          }\n\n          for (var _i97 = 0, _n120 = n; _i97 < _n120.length; _i97++) {\n            var _t136 = _n120[_i97];\n            wm(e, _t136);\n\n            _m(e, _t136);\n          }\n\n          this._compiledDefinitions = e;\n        }\n      }, {\n        key: \"_checkContextMatch\",\n        value: function _checkContextMatch(e, t) {\n          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : t.length - 1;\n          var i = t.getItem(n);\n\n          if (e.allowIn.includes(i.name)) {\n            if (n == 0) {\n              return true;\n            } else {\n              var _e145 = this.getDefinition(i);\n\n              return this._checkContextMatch(_e145, t, n - 1);\n            }\n          } else {\n            return false;\n          }\n        }\n      }, {\n        key: \"_getValidRangesForRange\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function _getValidRangesForRange(e, t) {\n          var n, i, _iterator171, _step171, _o39;\n\n          return _regeneratorRuntime().wrap(function _getValidRangesForRange$(_context23) {\n            while (1) {\n              switch (_context23.prev = _context23.next) {\n                case 0:\n                  n = e.start;\n                  i = e.start;\n                  _iterator171 = _createForOfIteratorHelper(e.getItems({\n                    shallow: true\n                  }));\n                  _context23.prev = 3;\n\n                  _iterator171.s();\n\n                case 5:\n                  if ((_step171 = _iterator171.n()).done) {\n                    _context23.next = 17;\n                    break;\n                  }\n\n                  _o39 = _step171.value;\n\n                  if (!_o39.is(\"element\")) {\n                    _context23.next = 9;\n                    break;\n                  }\n\n                  return _context23.delegateYield(this._getValidRangesForRange(qh._createIn(_o39), t), \"t0\", 9);\n\n                case 9:\n                  if (this.checkAttribute(_o39, t)) {\n                    _context23.next = 14;\n                    break;\n                  }\n\n                  if (n.isEqual(i)) {\n                    _context23.next = 13;\n                    break;\n                  }\n\n                  _context23.next = 13;\n                  return new qh(n, i);\n\n                case 13:\n                  n = $h._createAfter(_o39);\n\n                case 14:\n                  i = $h._createAfter(_o39);\n\n                case 15:\n                  _context23.next = 5;\n                  break;\n\n                case 17:\n                  _context23.next = 22;\n                  break;\n\n                case 19:\n                  _context23.prev = 19;\n                  _context23.t1 = _context23[\"catch\"](3);\n\n                  _iterator171.e(_context23.t1);\n\n                case 22:\n                  _context23.prev = 22;\n\n                  _iterator171.f();\n\n                  return _context23.finish(22);\n\n                case 25:\n                  if (n.isEqual(i)) {\n                    _context23.next = 28;\n                    break;\n                  }\n\n                  _context23.next = 28;\n                  return new qh(n, i);\n\n                case 28:\n                case \"end\":\n                  return _context23.stop();\n              }\n            }\n          }, _getValidRangesForRange, this, [[3, 19, 22, 25]]);\n        })\n      }]);\n\n      return um;\n    }();\n\n    kr(um, Qc);\n\n    var hm = /*#__PURE__*/function (_Symbol$iterator10) {\n      function hm(e) {\n        _classCallCheck(this, hm);\n\n        if (e instanceof hm) {\n          return e;\n        }\n\n        if (typeof e == \"string\") {\n          e = [e];\n        } else if (!Array.isArray(e)) {\n          e = e.getAncestors({\n            includeSelf: true\n          });\n        }\n\n        if (e[0] && typeof e[0] != \"string\" && e[0].is(\"documentFragment\")) {\n          e.shift();\n        }\n\n        this._items = e.map(Cm);\n      }\n\n      _createClass(hm, [{\n        key: \"length\",\n        get: function get() {\n          return this._items.length;\n        }\n      }, {\n        key: \"last\",\n        get: function get() {\n          return this._items[this._items.length - 1];\n        }\n      }, {\n        key: _Symbol$iterator10,\n        value: function value() {\n          return this._items[Symbol.iterator]();\n        }\n      }, {\n        key: \"push\",\n        value: function push(e) {\n          var t = new hm([e]);\n          t._items = [].concat(_toConsumableArray(this._items), _toConsumableArray(t._items));\n          return t;\n        }\n      }, {\n        key: \"getItem\",\n        value: function getItem(e) {\n          return this._items[e];\n        }\n      }, {\n        key: \"getNames\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function getNames() {\n          return _regeneratorRuntime().wrap(function getNames$(_context24) {\n            while (1) {\n              switch (_context24.prev = _context24.next) {\n                case 0:\n                  return _context24.delegateYield(this._items.map(function (e) {\n                    return e.name;\n                  }), \"t0\", 1);\n\n                case 1:\n                case \"end\":\n                  return _context24.stop();\n              }\n            }\n          }, getNames, this);\n        })\n      }, {\n        key: \"endsWith\",\n        value: function endsWith(e) {\n          return Array.from(this.getNames()).join(\" \").endsWith(e);\n        }\n      }, {\n        key: \"startsWith\",\n        value: function startsWith(e) {\n          return Array.from(this.getNames()).join(\" \").startsWith(e);\n        }\n      }]);\n\n      return hm;\n    }(Symbol.iterator);\n\n    function fm(e, t) {\n      var n = {\n        name: t,\n        allowIn: [],\n        allowContentOf: [],\n        allowWhere: [],\n        allowAttributes: [],\n        allowAttributesOf: [],\n        inheritTypesFrom: []\n      };\n      vm(e, n);\n      km(e, n, \"allowIn\");\n      km(e, n, \"allowContentOf\");\n      km(e, n, \"allowWhere\");\n      km(e, n, \"allowAttributes\");\n      km(e, n, \"allowAttributesOf\");\n      km(e, n, \"inheritTypesFrom\");\n      ym(e, n);\n      return n;\n    }\n\n    function mm(e, t) {\n      var _iterator172 = _createForOfIteratorHelper(e[t].allowContentOf),\n          _step172;\n\n      try {\n        for (_iterator172.s(); !(_step172 = _iterator172.n()).done;) {\n          var _n121 = _step172.value;\n\n          if (e[_n121]) {\n            var _i98 = xm(e, _n121);\n\n            _i98.forEach(function (e) {\n              e.allowIn.push(t);\n            });\n          }\n        }\n      } catch (err) {\n        _iterator172.e(err);\n      } finally {\n        _iterator172.f();\n      }\n\n      delete e[t].allowContentOf;\n    }\n\n    function gm(e, t) {\n      var _iterator173 = _createForOfIteratorHelper(e[t].allowWhere),\n          _step173;\n\n      try {\n        for (_iterator173.s(); !(_step173 = _iterator173.n()).done;) {\n          var _n122 = _step173.value;\n          var _i99 = e[_n122];\n\n          if (_i99) {\n            var _e$t$allowIn;\n\n            var _n123 = _i99.allowIn;\n\n            (_e$t$allowIn = e[t].allowIn).push.apply(_e$t$allowIn, _toConsumableArray(_n123));\n          }\n        }\n      } catch (err) {\n        _iterator173.e(err);\n      } finally {\n        _iterator173.f();\n      }\n\n      delete e[t].allowWhere;\n    }\n\n    function pm(e, t) {\n      var _iterator174 = _createForOfIteratorHelper(e[t].allowAttributesOf),\n          _step174;\n\n      try {\n        for (_iterator174.s(); !(_step174 = _iterator174.n()).done;) {\n          var _n124 = _step174.value;\n          var _i100 = e[_n124];\n\n          if (_i100) {\n            var _e$t$allowAttributes;\n\n            var _n125 = _i100.allowAttributes;\n\n            (_e$t$allowAttributes = e[t].allowAttributes).push.apply(_e$t$allowAttributes, _toConsumableArray(_n125));\n          }\n        }\n      } catch (err) {\n        _iterator174.e(err);\n      } finally {\n        _iterator174.f();\n      }\n\n      delete e[t].allowAttributesOf;\n    }\n\n    function bm(e, t) {\n      var n = e[t];\n\n      var _iterator175 = _createForOfIteratorHelper(n.inheritTypesFrom),\n          _step175;\n\n      try {\n        for (_iterator175.s(); !(_step175 = _iterator175.n()).done;) {\n          var _t137 = _step175.value;\n          var _i101 = e[_t137];\n\n          if (_i101) {\n            var _e146 = Object.keys(_i101).filter(function (e) {\n              return e.startsWith(\"is\");\n            });\n\n            var _iterator176 = _createForOfIteratorHelper(_e146),\n                _step176;\n\n            try {\n              for (_iterator176.s(); !(_step176 = _iterator176.n()).done;) {\n                var _t138 = _step176.value;\n\n                if (!(_t138 in n)) {\n                  n[_t138] = _i101[_t138];\n                }\n              }\n            } catch (err) {\n              _iterator176.e(err);\n            } finally {\n              _iterator176.f();\n            }\n          }\n        }\n      } catch (err) {\n        _iterator175.e(err);\n      } finally {\n        _iterator175.f();\n      }\n\n      delete n.inheritTypesFrom;\n    }\n\n    function wm(e, t) {\n      var n = e[t];\n      var i = n.allowIn.filter(function (t) {\n        return e[t];\n      });\n      n.allowIn = Array.from(new Set(i));\n    }\n\n    function _m(e, t) {\n      var n = e[t];\n      n.allowAttributes = Array.from(new Set(n.allowAttributes));\n    }\n\n    function vm(e, t) {\n      var _iterator177 = _createForOfIteratorHelper(e),\n          _step177;\n\n      try {\n        for (_iterator177.s(); !(_step177 = _iterator177.n()).done;) {\n          var _n126 = _step177.value;\n\n          var _e147 = Object.keys(_n126).filter(function (e) {\n            return e.startsWith(\"is\");\n          });\n\n          var _iterator178 = _createForOfIteratorHelper(_e147),\n              _step178;\n\n          try {\n            for (_iterator178.s(); !(_step178 = _iterator178.n()).done;) {\n              var _i102 = _step178.value;\n              t[_i102] = _n126[_i102];\n            }\n          } catch (err) {\n            _iterator178.e(err);\n          } finally {\n            _iterator178.f();\n          }\n        }\n      } catch (err) {\n        _iterator177.e(err);\n      } finally {\n        _iterator177.f();\n      }\n    }\n\n    function km(e, t, n) {\n      var _iterator179 = _createForOfIteratorHelper(e),\n          _step179;\n\n      try {\n        for (_iterator179.s(); !(_step179 = _iterator179.n()).done;) {\n          var _i103 = _step179.value;\n\n          if (typeof _i103[n] == \"string\") {\n            t[n].push(_i103[n]);\n          } else if (Array.isArray(_i103[n])) {\n            var _t$n;\n\n            (_t$n = t[n]).push.apply(_t$n, _toConsumableArray(_i103[n]));\n          }\n        }\n      } catch (err) {\n        _iterator179.e(err);\n      } finally {\n        _iterator179.f();\n      }\n    }\n\n    function ym(e, t) {\n      var _iterator180 = _createForOfIteratorHelper(e),\n          _step180;\n\n      try {\n        for (_iterator180.s(); !(_step180 = _iterator180.n()).done;) {\n          var _n127 = _step180.value;\n          var _e148 = _n127.inheritAllFrom;\n\n          if (_e148) {\n            t.allowContentOf.push(_e148);\n            t.allowWhere.push(_e148);\n            t.allowAttributesOf.push(_e148);\n            t.inheritTypesFrom.push(_e148);\n          }\n        }\n      } catch (err) {\n        _iterator180.e(err);\n      } finally {\n        _iterator180.f();\n      }\n    }\n\n    function xm(e, t) {\n      var n = e[t];\n      return Am(e).filter(function (e) {\n        return e.allowIn.includes(n.name);\n      });\n    }\n\n    function Am(e) {\n      return Object.keys(e).map(function (t) {\n        return e[t];\n      });\n    }\n\n    function Cm(e) {\n      if (typeof e == \"string\") {\n        return {\n          name: e,\n          getAttributeKeys: /*#__PURE__*/_regeneratorRuntime().mark(function getAttributeKeys() {\n            return _regeneratorRuntime().wrap(function getAttributeKeys$(_context25) {\n              while (1) {\n                switch (_context25.prev = _context25.next) {\n                  case 0:\n                  case \"end\":\n                    return _context25.stop();\n                }\n              }\n            }, getAttributeKeys);\n          }),\n          getAttribute: function getAttribute() {}\n        };\n      } else {\n        return {\n          name: e.is(\"element\") ? e.name : \"$text\",\n          getAttributeKeys: /*#__PURE__*/_regeneratorRuntime().mark(function getAttributeKeys() {\n            return _regeneratorRuntime().wrap(function getAttributeKeys$(_context26) {\n              while (1) {\n                switch (_context26.prev = _context26.next) {\n                  case 0:\n                    return _context26.delegateYield(e.getAttributeKeys(), \"t0\", 1);\n\n                  case 1:\n                  case \"end\":\n                    return _context26.stop();\n                }\n              }\n            }, getAttributeKeys);\n          }),\n          getAttribute: function getAttribute(t) {\n            return e.getAttribute(t);\n          }\n        };\n      }\n    }\n\n    function Tm(e, t) {\n      var n, _t139, _e149;\n\n      return _regeneratorRuntime().wrap(function Tm$(_context27) {\n        while (1) {\n          switch (_context27.prev = _context27.next) {\n            case 0:\n              n = false;\n\n            case 1:\n              if (n) {\n                _context27.next = 17;\n                break;\n              }\n\n              n = true;\n\n              if (!e) {\n                _context27.next = 9;\n                break;\n              }\n\n              _t139 = e.next();\n\n              if (_t139.done) {\n                _context27.next = 9;\n                break;\n              }\n\n              n = false;\n              _context27.next = 9;\n              return {\n                walker: e,\n                value: _t139.value\n              };\n\n            case 9:\n              if (!t) {\n                _context27.next = 15;\n                break;\n              }\n\n              _e149 = t.next();\n\n              if (_e149.done) {\n                _context27.next = 15;\n                break;\n              }\n\n              n = false;\n              _context27.next = 15;\n              return {\n                walker: t,\n                value: _e149.value\n              };\n\n            case 15:\n              _context27.next = 1;\n              break;\n\n            case 17:\n            case \"end\":\n              return _context27.stop();\n          }\n        }\n      }, _marked);\n    }\n\n    function Mm(e) {\n      var _iterator181, _step181, _t140;\n\n      return _regeneratorRuntime().wrap(function Mm$(_context28) {\n        while (1) {\n          switch (_context28.prev = _context28.next) {\n            case 0:\n              _iterator181 = _createForOfIteratorHelper(e);\n              _context28.prev = 1;\n\n              _iterator181.s();\n\n            case 3:\n              if ((_step181 = _iterator181.n()).done) {\n                _context28.next = 8;\n                break;\n              }\n\n              _t140 = _step181.value;\n              return _context28.delegateYield(_t140.getMinimalFlatRanges(), \"t0\", 6);\n\n            case 6:\n              _context28.next = 3;\n              break;\n\n            case 8:\n              _context28.next = 13;\n              break;\n\n            case 10:\n              _context28.prev = 10;\n              _context28.t1 = _context28[\"catch\"](1);\n\n              _iterator181.e(_context28.t1);\n\n            case 13:\n              _context28.prev = 13;\n\n              _iterator181.f();\n\n              return _context28.finish(13);\n\n            case 16:\n            case \"end\":\n              return _context28.stop();\n          }\n        }\n      }, _marked2, null, [[1, 10, 13, 16]]);\n    }\n\n    function Pm(e, t, n) {\n      var _iterator182 = _createForOfIteratorHelper(t.getAttributeKeys()),\n          _step182;\n\n      try {\n        for (_iterator182.s(); !(_step182 = _iterator182.n()).done;) {\n          var _i104 = _step182.value;\n\n          if (!e.checkAttribute(t, _i104)) {\n            n.removeAttribute(_i104, t);\n          }\n        }\n      } catch (err) {\n        _iterator182.e(err);\n      } finally {\n        _iterator182.f();\n      }\n    }\n\n    var Em = /*#__PURE__*/function () {\n      function Em() {\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, Em);\n\n        this._splitParts = new Map();\n        this._modelCursor = null;\n        this.conversionApi = Object.assign({}, e);\n        this.conversionApi.convertItem = this._convertItem.bind(this);\n        this.conversionApi.convertChildren = this._convertChildren.bind(this);\n        this.conversionApi.splitToAllowedParent = this._splitToAllowedParent.bind(this);\n        this.conversionApi.getSplitParts = this._getSplitParts.bind(this);\n      }\n\n      _createClass(Em, [{\n        key: \"convert\",\n        value: function convert(e, t) {\n          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [\"$root\"];\n          this.fire(\"viewCleanup\", e);\n          this._modelCursor = Im(n, t);\n          this.conversionApi.writer = t;\n          this.conversionApi.consumable = lm.createFrom(e);\n          this.conversionApi.store = {};\n\n          var _this$_convertItem = this._convertItem(e, this._modelCursor),\n              i = _this$_convertItem.modelRange;\n\n          var o = t.createDocumentFragment();\n\n          if (i) {\n            this._removeEmptyElements();\n\n            for (var _i105 = 0, _Array$from5 = Array.from(this._modelCursor.parent.getChildren()); _i105 < _Array$from5.length; _i105++) {\n              var _e150 = _Array$from5[_i105];\n              t.append(_e150, o);\n            }\n\n            o.markers = Sm(o, t);\n          }\n\n          this._modelCursor = null;\n\n          this._splitParts.clear();\n\n          this.conversionApi.writer = null;\n          this.conversionApi.store = null;\n          return o;\n        }\n      }, {\n        key: \"_convertItem\",\n        value: function _convertItem(e, t) {\n          var n = Object.assign({\n            viewItem: e,\n            modelCursor: t,\n            modelRange: null\n          });\n\n          if (e.is(\"element\")) {\n            this.fire(\"element:\" + e.name, n, this.conversionApi);\n          } else if (e.is(\"text\")) {\n            this.fire(\"text\", n, this.conversionApi);\n          } else {\n            this.fire(\"documentFragment\", n, this.conversionApi);\n          }\n\n          if (n.modelRange && !(n.modelRange instanceof qh)) {\n            throw new rr[\"b\"](\"view-conversion-dispatcher-incorrect-result: Incorrect conversion result was dropped.\", this);\n          }\n\n          return {\n            modelRange: n.modelRange,\n            modelCursor: n.modelCursor\n          };\n        }\n      }, {\n        key: \"_convertChildren\",\n        value: function _convertChildren(e, t) {\n          var n = new qh(t);\n          var i = t;\n\n          for (var _i106 = 0, _Array$from6 = Array.from(e.getChildren()); _i106 < _Array$from6.length; _i106++) {\n            var _t141 = _Array$from6[_i106];\n\n            var _e151 = this._convertItem(_t141, i);\n\n            if (_e151.modelRange instanceof qh) {\n              n.end = _e151.modelRange.end;\n              i = _e151.modelCursor;\n            }\n          }\n\n          return {\n            modelRange: n,\n            modelCursor: i\n          };\n        }\n      }, {\n        key: \"_splitToAllowedParent\",\n        value: function _splitToAllowedParent(e, t) {\n          var n = this.conversionApi.schema.findAllowedParent(t, e);\n\n          if (!n) {\n            return null;\n          }\n\n          if (n === t.parent) {\n            return {\n              position: t\n            };\n          }\n\n          if (this._modelCursor.parent.getAncestors().includes(n)) {\n            return null;\n          }\n\n          var i = this.conversionApi.writer.split(t, n);\n          var o = [];\n\n          var _iterator183 = _createForOfIteratorHelper(i.range.getWalker()),\n              _step183;\n\n          try {\n            for (_iterator183.s(); !(_step183 = _iterator183.n()).done;) {\n              var _e152 = _step183.value;\n\n              if (_e152.type == \"elementEnd\") {\n                o.push(_e152.item);\n              } else {\n                var _t142 = o.pop();\n\n                var _n128 = _e152.item;\n\n                this._registerSplitPair(_t142, _n128);\n              }\n            }\n          } catch (err) {\n            _iterator183.e(err);\n          } finally {\n            _iterator183.f();\n          }\n\n          return {\n            position: i.position,\n            cursorParent: i.range.end.parent\n          };\n        }\n      }, {\n        key: \"_registerSplitPair\",\n        value: function _registerSplitPair(e, t) {\n          if (!this._splitParts.has(e)) {\n            this._splitParts.set(e, [e]);\n          }\n\n          var n = this._splitParts.get(e);\n\n          this._splitParts.set(t, n);\n\n          n.push(t);\n        }\n      }, {\n        key: \"_getSplitParts\",\n        value: function _getSplitParts(e) {\n          var t;\n\n          if (!this._splitParts.has(e)) {\n            t = [e];\n          } else {\n            t = this._splitParts.get(e);\n          }\n\n          return t;\n        }\n      }, {\n        key: \"_removeEmptyElements\",\n        value: function _removeEmptyElements() {\n          var e = false;\n\n          var _iterator184 = _createForOfIteratorHelper(this._splitParts.keys()),\n              _step184;\n\n          try {\n            for (_iterator184.s(); !(_step184 = _iterator184.n()).done;) {\n              var _t143 = _step184.value;\n\n              if (_t143.isEmpty) {\n                this.conversionApi.writer.remove(_t143);\n\n                this._splitParts.delete(_t143);\n\n                e = true;\n              }\n            }\n          } catch (err) {\n            _iterator184.e(err);\n          } finally {\n            _iterator184.f();\n          }\n\n          if (e) {\n            this._removeEmptyElements();\n          }\n        }\n      }]);\n\n      return Em;\n    }();\n\n    kr(Em, dr);\n\n    function Sm(e, t) {\n      var n = new Set();\n      var i = new Map();\n\n      var o = qh._createIn(e).getItems();\n\n      var _iterator185 = _createForOfIteratorHelper(o),\n          _step185;\n\n      try {\n        for (_iterator185.s(); !(_step185 = _iterator185.n()).done;) {\n          var _e153 = _step185.value;\n\n          if (_e153.name == \"$marker\") {\n            n.add(_e153);\n          }\n        }\n      } catch (err) {\n        _iterator185.e(err);\n      } finally {\n        _iterator185.f();\n      }\n\n      var _iterator186 = _createForOfIteratorHelper(n),\n          _step186;\n\n      try {\n        for (_iterator186.s(); !(_step186 = _iterator186.n()).done;) {\n          var _e154 = _step186.value;\n\n          var _n129 = _e154.getAttribute(\"data-name\");\n\n          var _o40 = t.createPositionBefore(_e154);\n\n          if (!i.has(_n129)) {\n            i.set(_n129, new qh(_o40.clone()));\n          } else {\n            i.get(_n129).end = _o40.clone();\n          }\n\n          t.remove(_e154);\n        }\n      } catch (err) {\n        _iterator186.e(err);\n      } finally {\n        _iterator186.f();\n      }\n\n      return i;\n    }\n\n    function Im(e, t) {\n      var n;\n\n      var _iterator187 = _createForOfIteratorHelper(new hm(e)),\n          _step187;\n\n      try {\n        for (_iterator187.s(); !(_step187 = _iterator187.n()).done;) {\n          var _i107 = _step187.value;\n          var _e155 = {};\n\n          var _iterator188 = _createForOfIteratorHelper(_i107.getAttributeKeys()),\n              _step188;\n\n          try {\n            for (_iterator188.s(); !(_step188 = _iterator188.n()).done;) {\n              var _t144 = _step188.value;\n              _e155[_t144] = _i107.getAttribute(_t144);\n            }\n          } catch (err) {\n            _iterator188.e(err);\n          } finally {\n            _iterator188.f();\n          }\n\n          var _o41 = t.createElement(_i107.name, _e155);\n\n          if (n) {\n            t.append(_o41, n);\n          }\n\n          n = $h._createAt(_o41, 0);\n        }\n      } catch (err) {\n        _iterator187.e(err);\n      } finally {\n        _iterator187.f();\n      }\n\n      return n;\n    }\n\n    var Om = /*#__PURE__*/function () {\n      function Om(e, t) {\n        var _this52 = this;\n\n        _classCallCheck(this, Om);\n\n        this.model = e;\n        this.stylesProcessor = t;\n        this.processor;\n        this.mapper = new Yh();\n        this.downcastDispatcher = new Xh({\n          mapper: this.mapper\n        });\n        this.downcastDispatcher.on(\"insert:$text\", vf(), {\n          priority: \"lowest\"\n        });\n        this.upcastDispatcher = new Em({\n          schema: e.schema\n        });\n        this.viewDocument = new pl(t);\n        this._viewWriter = new ql(this.viewDocument);\n        this.upcastDispatcher.on(\"text\", qf(), {\n          priority: \"lowest\"\n        });\n        this.upcastDispatcher.on(\"element\", $f(), {\n          priority: \"lowest\"\n        });\n        this.upcastDispatcher.on(\"documentFragment\", $f(), {\n          priority: \"lowest\"\n        });\n        this.decorate(\"init\");\n        this.on(\"init\", function () {\n          _this52.fire(\"ready\");\n        }, {\n          priority: \"lowest\"\n        });\n      }\n\n      _createClass(Om, [{\n        key: \"get\",\n        value: function get(e) {\n          var _ref13 = e || {},\n              _ref13$rootName = _ref13.rootName,\n              t = _ref13$rootName === void 0 ? \"main\" : _ref13$rootName,\n              _ref13$trim = _ref13.trim,\n              n = _ref13$trim === void 0 ? \"empty\" : _ref13$trim;\n\n          if (!this._checkIfRootsExists([t])) {\n            throw new rr[\"b\"](\"datacontroller-get-non-existent-root: Attempting to get data from a non-existing root.\", this);\n          }\n\n          var i = this.model.document.getRoot(t);\n\n          if (n === \"empty\" && !this.model.hasContent(i, {\n            ignoreWhitespaces: true\n          })) {\n            return \"\";\n          }\n\n          return this.stringify(i);\n        }\n      }, {\n        key: \"stringify\",\n        value: function stringify(e) {\n          var t = this.toView(e);\n          return this.processor.toData(t);\n        }\n      }, {\n        key: \"toView\",\n        value: function toView(e) {\n          var t = this.viewDocument;\n          var n = this._viewWriter;\n          this.mapper.clearBindings();\n\n          var i = qh._createIn(e);\n\n          var o = new Wl(t);\n          this.mapper.bindElements(e, o);\n          this.downcastDispatcher.convertInsert(i, n);\n\n          if (!e.is(\"documentFragment\")) {\n            var _t145 = Nm(e);\n\n            var _iterator189 = _createForOfIteratorHelper(_t145),\n                _step189;\n\n            try {\n              for (_iterator189.s(); !(_step189 = _iterator189.n()).done;) {\n                var _step189$value = _slicedToArray(_step189.value, 2),\n                    _e156 = _step189$value[0],\n                    _i108 = _step189$value[1];\n\n                this.downcastDispatcher.convertMarkerAdd(_e156, _i108, n);\n              }\n            } catch (err) {\n              _iterator189.e(err);\n            } finally {\n              _iterator189.f();\n            }\n          }\n\n          return o;\n        }\n      }, {\n        key: \"init\",\n        value: function init(e) {\n          var _this53 = this;\n\n          if (this.model.document.version) {\n            throw new rr[\"b\"](\"datacontroller-init-document-not-empty: Trying to set initial data to not empty document.\", this);\n          }\n\n          var t = {};\n\n          if (typeof e === \"string\") {\n            t.main = e;\n          } else {\n            t = e;\n          }\n\n          if (!this._checkIfRootsExists(Object.keys(t))) {\n            throw new rr[\"b\"](\"datacontroller-init-non-existent-root: Attempting to init data on a non-existing root.\", this);\n          }\n\n          this.model.enqueueChange(\"transparent\", function (e) {\n            for (var _i109 = 0, _Object$keys2 = Object.keys(t); _i109 < _Object$keys2.length; _i109++) {\n              var _n130 = _Object$keys2[_i109];\n\n              var _i110 = _this53.model.document.getRoot(_n130);\n\n              e.insert(_this53.parse(t[_n130], _i110), _i110, 0);\n            }\n          });\n          return Promise.resolve();\n        }\n      }, {\n        key: \"set\",\n        value: function set(e) {\n          var _this54 = this;\n\n          var t = {};\n\n          if (typeof e === \"string\") {\n            t.main = e;\n          } else {\n            t = e;\n          }\n\n          if (!this._checkIfRootsExists(Object.keys(t))) {\n            throw new rr[\"b\"](\"datacontroller-set-non-existent-root: Attempting to set data on a non-existing root.\", this);\n          }\n\n          this.model.enqueueChange(\"transparent\", function (e) {\n            e.setSelection(null);\n            e.removeSelectionAttribute(_this54.model.document.selection.getAttributeKeys());\n\n            for (var _i111 = 0, _Object$keys3 = Object.keys(t); _i111 < _Object$keys3.length; _i111++) {\n              var _n131 = _Object$keys3[_i111];\n\n              var _i112 = _this54.model.document.getRoot(_n131);\n\n              e.remove(e.createRangeIn(_i112));\n              e.insert(_this54.parse(t[_n131], _i112), _i112, 0);\n            }\n          });\n        }\n      }, {\n        key: \"parse\",\n        value: function parse(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"$root\";\n          var n = this.processor.toView(e);\n          return this.toModel(n, t);\n        }\n      }, {\n        key: \"toModel\",\n        value: function toModel(e) {\n          var _this55 = this;\n\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"$root\";\n          return this.model.change(function (n) {\n            return _this55.upcastDispatcher.convert(e, n, t);\n          });\n        }\n      }, {\n        key: \"addStyleProcessorRules\",\n        value: function addStyleProcessorRules(e) {\n          e(this.stylesProcessor);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.stopListening();\n        }\n      }, {\n        key: \"_checkIfRootsExists\",\n        value: function _checkIfRootsExists(e) {\n          var _iterator190 = _createForOfIteratorHelper(e),\n              _step190;\n\n          try {\n            for (_iterator190.s(); !(_step190 = _iterator190.n()).done;) {\n              var _t146 = _step190.value;\n\n              if (!this.model.document.getRootNames().includes(_t146)) {\n                return false;\n              }\n            }\n          } catch (err) {\n            _iterator190.e(err);\n          } finally {\n            _iterator190.f();\n          }\n\n          return true;\n        }\n      }]);\n\n      return Om;\n    }();\n\n    kr(Om, Qc);\n\n    function Nm(e) {\n      var t = [];\n      var n = e.root.document;\n\n      if (!n) {\n        return [];\n      }\n\n      var i = qh._createIn(e);\n\n      var _iterator191 = _createForOfIteratorHelper(n.model.markers),\n          _step191;\n\n      try {\n        for (_iterator191.s(); !(_step191 = _iterator191.n()).done;) {\n          var _e157 = _step191.value;\n\n          var _n132 = i.getIntersection(_e157.getRange());\n\n          if (_n132) {\n            t.push([_e157.name, _n132]);\n          }\n        }\n      } catch (err) {\n        _iterator191.e(err);\n      } finally {\n        _iterator191.f();\n      }\n\n      return t;\n    }\n\n    var Rm = /*#__PURE__*/function () {\n      function Rm(e, t) {\n        _classCallCheck(this, Rm);\n\n        this._helpers = new Map();\n        this._downcast = Array.isArray(e) ? e : [e];\n\n        this._createConversionHelpers({\n          name: \"downcast\",\n          dispatchers: this._downcast,\n          isDowncast: true\n        });\n\n        this._upcast = Array.isArray(t) ? t : [t];\n\n        this._createConversionHelpers({\n          name: \"upcast\",\n          dispatchers: this._upcast,\n          isDowncast: false\n        });\n      }\n\n      _createClass(Rm, [{\n        key: \"addAlias\",\n        value: function addAlias(e, t) {\n          var n = this._downcast.includes(t);\n\n          var i = this._upcast.includes(t);\n\n          if (!i && !n) {\n            throw new rr[\"b\"](\"conversion-add-alias-dispatcher-not-registered: \" + \"Trying to register and alias for a dispatcher that nas not been registered.\", this);\n          }\n\n          this._createConversionHelpers({\n            name: e,\n            dispatchers: [t],\n            isDowncast: n\n          });\n        }\n      }, {\n        key: \"for\",\n        value: function _for(e) {\n          if (!this._helpers.has(e)) {\n            throw new rr[\"b\"](\"conversion-for-unknown-group: Trying to add a converter to an unknown dispatchers group.\", this);\n          }\n\n          return this._helpers.get(e);\n        }\n      }, {\n        key: \"elementToElement\",\n        value: function elementToElement(e) {\n          this.for(\"downcast\").elementToElement(e);\n\n          var _iterator192 = _createForOfIteratorHelper(Lm(e)),\n              _step192;\n\n          try {\n            for (_iterator192.s(); !(_step192 = _iterator192.n()).done;) {\n              var _step192$value = _step192.value,\n                  _t147 = _step192$value.model,\n                  _n133 = _step192$value.view;\n              this.for(\"upcast\").elementToElement({\n                model: _t147,\n                view: _n133,\n                converterPriority: e.converterPriority\n              });\n            }\n          } catch (err) {\n            _iterator192.e(err);\n          } finally {\n            _iterator192.f();\n          }\n        }\n      }, {\n        key: \"attributeToElement\",\n        value: function attributeToElement(e) {\n          this.for(\"downcast\").attributeToElement(e);\n\n          var _iterator193 = _createForOfIteratorHelper(Lm(e)),\n              _step193;\n\n          try {\n            for (_iterator193.s(); !(_step193 = _iterator193.n()).done;) {\n              var _step193$value = _step193.value,\n                  _t148 = _step193$value.model,\n                  _n134 = _step193$value.view;\n              this.for(\"upcast\").elementToAttribute({\n                view: _n134,\n                model: _t148,\n                converterPriority: e.converterPriority\n              });\n            }\n          } catch (err) {\n            _iterator193.e(err);\n          } finally {\n            _iterator193.f();\n          }\n        }\n      }, {\n        key: \"attributeToAttribute\",\n        value: function attributeToAttribute(e) {\n          this.for(\"downcast\").attributeToAttribute(e);\n\n          var _iterator194 = _createForOfIteratorHelper(Lm(e)),\n              _step194;\n\n          try {\n            for (_iterator194.s(); !(_step194 = _iterator194.n()).done;) {\n              var _step194$value = _step194.value,\n                  _t149 = _step194$value.model,\n                  _n135 = _step194$value.view;\n              this.for(\"upcast\").attributeToAttribute({\n                view: _n135,\n                model: _t149\n              });\n            }\n          } catch (err) {\n            _iterator194.e(err);\n          } finally {\n            _iterator194.f();\n          }\n        }\n      }, {\n        key: \"_createConversionHelpers\",\n        value: function _createConversionHelpers(_ref14) {\n          var e = _ref14.name,\n              t = _ref14.dispatchers,\n              n = _ref14.isDowncast;\n\n          if (this._helpers.has(e)) {\n            throw new rr[\"b\"](\"conversion-group-exists: Trying to register a group name that has already been registered.\", this);\n          }\n\n          var i = n ? new _f(t) : new Wf(t);\n\n          this._helpers.set(e, i);\n        }\n      }]);\n\n      return Rm;\n    }();\n\n    function Lm(e) {\n      var _iterator195, _step195, _t150, _n136, _i113, _o42;\n\n      return _regeneratorRuntime().wrap(function Lm$(_context29) {\n        while (1) {\n          switch (_context29.prev = _context29.next) {\n            case 0:\n              if (!e.model.values) {\n                _context29.next = 22;\n                break;\n              }\n\n              _iterator195 = _createForOfIteratorHelper(e.model.values);\n              _context29.prev = 2;\n\n              _iterator195.s();\n\n            case 4:\n              if ((_step195 = _iterator195.n()).done) {\n                _context29.next = 12;\n                break;\n              }\n\n              _t150 = _step195.value;\n              _n136 = {\n                key: e.model.key,\n                value: _t150\n              };\n              _i113 = e.view[_t150];\n              _o42 = e.upcastAlso ? e.upcastAlso[_t150] : undefined;\n              return _context29.delegateYield(jm(_n136, _i113, _o42), \"t0\", 10);\n\n            case 10:\n              _context29.next = 4;\n              break;\n\n            case 12:\n              _context29.next = 17;\n              break;\n\n            case 14:\n              _context29.prev = 14;\n              _context29.t1 = _context29[\"catch\"](2);\n\n              _iterator195.e(_context29.t1);\n\n            case 17:\n              _context29.prev = 17;\n\n              _iterator195.f();\n\n              return _context29.finish(17);\n\n            case 20:\n              _context29.next = 23;\n              break;\n\n            case 22:\n              return _context29.delegateYield(jm(e.model, e.view, e.upcastAlso), \"t2\", 23);\n\n            case 23:\n            case \"end\":\n              return _context29.stop();\n          }\n        }\n      }, _marked3, null, [[2, 14, 17, 20]]);\n    }\n\n    function jm(e, t, n) {\n      var _iterator196, _step196, _t151;\n\n      return _regeneratorRuntime().wrap(function jm$(_context30) {\n        while (1) {\n          switch (_context30.prev = _context30.next) {\n            case 0:\n              _context30.next = 2;\n              return {\n                model: e,\n                view: t\n              };\n\n            case 2:\n              if (!n) {\n                _context30.next = 21;\n                break;\n              }\n\n              n = Array.isArray(n) ? n : [n];\n              _iterator196 = _createForOfIteratorHelper(n);\n              _context30.prev = 5;\n\n              _iterator196.s();\n\n            case 7:\n              if ((_step196 = _iterator196.n()).done) {\n                _context30.next = 13;\n                break;\n              }\n\n              _t151 = _step196.value;\n              _context30.next = 11;\n              return {\n                model: e,\n                view: _t151\n              };\n\n            case 11:\n              _context30.next = 7;\n              break;\n\n            case 13:\n              _context30.next = 18;\n              break;\n\n            case 15:\n              _context30.prev = 15;\n              _context30.t0 = _context30[\"catch\"](5);\n\n              _iterator196.e(_context30.t0);\n\n            case 18:\n              _context30.prev = 18;\n\n              _iterator196.f();\n\n              return _context30.finish(18);\n\n            case 21:\n            case \"end\":\n              return _context30.stop();\n          }\n        }\n      }, _marked4, null, [[5, 15, 18, 21]]);\n    }\n\n    var Dm = /*#__PURE__*/function () {\n      function Dm() {\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"default\";\n\n        _classCallCheck(this, Dm);\n\n        this.operations = [];\n        this.type = e;\n      }\n\n      _createClass(Dm, [{\n        key: \"baseVersion\",\n        get: function get() {\n          var _iterator197 = _createForOfIteratorHelper(this.operations),\n              _step197;\n\n          try {\n            for (_iterator197.s(); !(_step197 = _iterator197.n()).done;) {\n              var _e158 = _step197.value;\n\n              if (_e158.baseVersion !== null) {\n                return _e158.baseVersion;\n              }\n            }\n          } catch (err) {\n            _iterator197.e(err);\n          } finally {\n            _iterator197.f();\n          }\n\n          return null;\n        }\n      }, {\n        key: \"addOperation\",\n        value: function addOperation(e) {\n          e.batch = this;\n          this.operations.push(e);\n          return e;\n        }\n      }]);\n\n      return Dm;\n    }();\n\n    var zm = /*#__PURE__*/function () {\n      function zm(e) {\n        _classCallCheck(this, zm);\n\n        this.baseVersion = e;\n        this.isDocumentOperation = this.baseVersion !== null;\n        this.batch = null;\n      }\n\n      _createClass(zm, [{\n        key: \"_validate\",\n        value: function _validate() {}\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          var e = Object.assign({}, this);\n          e.__className = this.constructor.className;\n          delete e.batch;\n          delete e.isDocumentOperation;\n          return e;\n        }\n      }], [{\n        key: \"className\",\n        get: function get() {\n          return \"Operation\";\n        }\n      }, {\n        key: \"fromJSON\",\n        value: function fromJSON(e) {\n          return new this(e.baseVersion);\n        }\n      }]);\n\n      return zm;\n    }();\n\n    var Bm = /*#__PURE__*/function (_Symbol$iterator11) {\n      function Bm(e) {\n        _classCallCheck(this, Bm);\n\n        this.markers = new Map();\n        this._children = new Vh();\n\n        if (e) {\n          this._insertChild(0, e);\n        }\n      }\n\n      _createClass(Bm, [{\n        key: _Symbol$iterator11,\n        value: function value() {\n          return this.getChildren();\n        }\n      }, {\n        key: \"childCount\",\n        get: function get() {\n          return this._children.length;\n        }\n      }, {\n        key: \"maxOffset\",\n        get: function get() {\n          return this._children.maxOffset;\n        }\n      }, {\n        key: \"isEmpty\",\n        get: function get() {\n          return this.childCount === 0;\n        }\n      }, {\n        key: \"root\",\n        get: function get() {\n          return this;\n        }\n      }, {\n        key: \"parent\",\n        get: function get() {\n          return null;\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          return e == \"documentFragment\" || e == \"model:documentFragment\";\n        }\n      }, {\n        key: \"getChild\",\n        value: function getChild(e) {\n          return this._children.getNode(e);\n        }\n      }, {\n        key: \"getChildren\",\n        value: function getChildren() {\n          return this._children[Symbol.iterator]();\n        }\n      }, {\n        key: \"getChildIndex\",\n        value: function getChildIndex(e) {\n          return this._children.getNodeIndex(e);\n        }\n      }, {\n        key: \"getChildStartOffset\",\n        value: function getChildStartOffset(e) {\n          return this._children.getNodeStartOffset(e);\n        }\n      }, {\n        key: \"getPath\",\n        value: function getPath() {\n          return [];\n        }\n      }, {\n        key: \"getNodeByPath\",\n        value: function getNodeByPath(e) {\n          var t = this;\n\n          var _iterator198 = _createForOfIteratorHelper(e),\n              _step198;\n\n          try {\n            for (_iterator198.s(); !(_step198 = _iterator198.n()).done;) {\n              var _n137 = _step198.value;\n              t = t.getChild(t.offsetToIndex(_n137));\n            }\n          } catch (err) {\n            _iterator198.e(err);\n          } finally {\n            _iterator198.f();\n          }\n\n          return t;\n        }\n      }, {\n        key: \"offsetToIndex\",\n        value: function offsetToIndex(e) {\n          return this._children.offsetToIndex(e);\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          var e = [];\n\n          var _iterator199 = _createForOfIteratorHelper(this._children),\n              _step199;\n\n          try {\n            for (_iterator199.s(); !(_step199 = _iterator199.n()).done;) {\n              var _t152 = _step199.value;\n              e.push(_t152.toJSON());\n            }\n          } catch (err) {\n            _iterator199.e(err);\n          } finally {\n            _iterator199.f();\n          }\n\n          return e;\n        }\n      }, {\n        key: \"_appendChild\",\n        value: function _appendChild(e) {\n          this._insertChild(this.childCount, e);\n        }\n      }, {\n        key: \"_insertChild\",\n        value: function _insertChild(e, t) {\n          var n = Vm(t);\n\n          var _iterator200 = _createForOfIteratorHelper(n),\n              _step200;\n\n          try {\n            for (_iterator200.s(); !(_step200 = _iterator200.n()).done;) {\n              var _e159 = _step200.value;\n\n              if (_e159.parent !== null) {\n                _e159._remove();\n              }\n\n              _e159.parent = this;\n            }\n          } catch (err) {\n            _iterator200.e(err);\n          } finally {\n            _iterator200.f();\n          }\n\n          this._children._insertNodes(e, n);\n        }\n      }, {\n        key: \"_removeChildren\",\n        value: function _removeChildren(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n          var n = this._children._removeNodes(e, t);\n\n          var _iterator201 = _createForOfIteratorHelper(n),\n              _step201;\n\n          try {\n            for (_iterator201.s(); !(_step201 = _iterator201.n()).done;) {\n              var _e160 = _step201.value;\n              _e160.parent = null;\n            }\n          } catch (err) {\n            _iterator201.e(err);\n          } finally {\n            _iterator201.f();\n          }\n\n          return n;\n        }\n      }], [{\n        key: \"fromJSON\",\n        value: function fromJSON(e) {\n          var t = [];\n\n          var _iterator202 = _createForOfIteratorHelper(e),\n              _step202;\n\n          try {\n            for (_iterator202.s(); !(_step202 = _iterator202.n()).done;) {\n              var _n138 = _step202.value;\n\n              if (_n138.name) {\n                t.push(Fh.fromJSON(_n138));\n              } else {\n                t.push(zh.fromJSON(_n138));\n              }\n            }\n          } catch (err) {\n            _iterator202.e(err);\n          } finally {\n            _iterator202.f();\n          }\n\n          return new Bm(t);\n        }\n      }]);\n\n      return Bm;\n    }(Symbol.iterator);\n\n    function Vm(e) {\n      if (typeof e == \"string\") {\n        return [new zh(e)];\n      }\n\n      if (!Fr(e)) {\n        e = [e];\n      }\n\n      return Array.from(e).map(function (e) {\n        if (typeof e == \"string\") {\n          return new zh(e);\n        }\n\n        if (e instanceof Bh) {\n          return new zh(e.data, e.getAttributes());\n        }\n\n        return e;\n      });\n    }\n\n    function Fm(e, t) {\n      t = $m(t);\n      var n = t.reduce(function (e, t) {\n        return e + t.offsetSize;\n      }, 0);\n      var i = e.parent;\n      Ym(e);\n      var o = e.index;\n\n      i._insertChild(o, t);\n\n      qm(i, o + t.length);\n      qm(i, o);\n      return new qh(e, e.getShiftedBy(n));\n    }\n\n    function Hm(e) {\n      if (!e.isFlat) {\n        throw new rr[\"b\"](\"operation-utils-remove-range-not-flat: \" + \"Trying to remove a range which starts and ends in different element.\", this);\n      }\n\n      var t = e.start.parent;\n      Ym(e.start);\n      Ym(e.end);\n\n      var n = t._removeChildren(e.start.index, e.end.index - e.start.index);\n\n      qm(t, e.start.index);\n      return n;\n    }\n\n    function Um(e, t) {\n      if (!e.isFlat) {\n        throw new rr[\"b\"](\"operation-utils-move-range-not-flat: \" + \"Trying to move a range which starts and ends in different element.\", this);\n      }\n\n      var n = Hm(e);\n      t = t._getTransformedByDeletion(e.start, e.end.offset - e.start.offset);\n      return Fm(t, n);\n    }\n\n    function Wm(e, t, n) {\n      Ym(e.start);\n      Ym(e.end);\n\n      var _iterator203 = _createForOfIteratorHelper(e.getItems({\n        shallow: true\n      })),\n          _step203;\n\n      try {\n        for (_iterator203.s(); !(_step203 = _iterator203.n()).done;) {\n          var _i114 = _step203.value;\n\n          var _e161 = _i114.is(\"textProxy\") ? _i114.textNode : _i114;\n\n          if (n !== null) {\n            _e161._setAttribute(t, n);\n          } else {\n            _e161._removeAttribute(t);\n          }\n\n          qm(_e161.parent, _e161.index);\n        }\n      } catch (err) {\n        _iterator203.e(err);\n      } finally {\n        _iterator203.f();\n      }\n\n      qm(e.end.parent, e.end.index);\n    }\n\n    function $m(e) {\n      var t = [];\n\n      if (!(e instanceof Array)) {\n        e = [e];\n      }\n\n      for (var _n139 = 0; _n139 < e.length; _n139++) {\n        if (typeof e[_n139] == \"string\") {\n          t.push(new zh(e[_n139]));\n        } else if (e[_n139] instanceof Bh) {\n          t.push(new zh(e[_n139].data, e[_n139].getAttributes()));\n        } else if (e[_n139] instanceof Bm || e[_n139] instanceof Vh) {\n          var _iterator204 = _createForOfIteratorHelper(e[_n139]),\n              _step204;\n\n          try {\n            for (_iterator204.s(); !(_step204 = _iterator204.n()).done;) {\n              var _i115 = _step204.value;\n              t.push(_i115);\n            }\n          } catch (err) {\n            _iterator204.e(err);\n          } finally {\n            _iterator204.f();\n          }\n        } else if (e[_n139] instanceof Dh) {\n          t.push(e[_n139]);\n        }\n      }\n\n      for (var _e162 = 1; _e162 < t.length; _e162++) {\n        var _n140 = t[_e162];\n        var _i116 = t[_e162 - 1];\n\n        if (_n140 instanceof zh && _i116 instanceof zh && Jm(_n140, _i116)) {\n          t.splice(_e162 - 1, 2, new zh(_i116.data + _n140.data, _i116.getAttributes()));\n          _e162--;\n        }\n      }\n\n      return t;\n    }\n\n    function qm(e, t) {\n      var n = e.getChild(t - 1);\n      var i = e.getChild(t);\n\n      if (n && i && n.is(\"text\") && i.is(\"text\") && Jm(n, i)) {\n        var _o43 = new zh(n.data + i.data, n.getAttributes());\n\n        e._removeChildren(t - 1, 2);\n\n        e._insertChild(t - 1, _o43);\n      }\n    }\n\n    function Ym(e) {\n      var t = e.textNode;\n      var n = e.parent;\n\n      if (t) {\n        var _i117 = e.offset - t.startOffset;\n\n        var _o44 = t.index;\n\n        n._removeChildren(_o44, 1);\n\n        var _s17 = new zh(t.data.substr(0, _i117), t.getAttributes());\n\n        var _r13 = new zh(t.data.substr(_i117), t.getAttributes());\n\n        n._insertChild(_o44, [_s17, _r13]);\n      }\n    }\n\n    function Jm(e, t) {\n      var n = e.getAttributes();\n      var i = t.getAttributes();\n\n      var _iterator205 = _createForOfIteratorHelper(n),\n          _step205;\n\n      try {\n        for (_iterator205.s(); !(_step205 = _iterator205.n()).done;) {\n          var _e163 = _step205.value;\n\n          if (_e163[1] !== t.getAttribute(_e163[0])) {\n            return false;\n          }\n\n          i.next();\n        }\n      } catch (err) {\n        _iterator205.e(err);\n      } finally {\n        _iterator205.f();\n      }\n\n      return i.next().done;\n    }\n\n    function Qm(e, t) {\n      return Wu(e, t);\n    }\n\n    var Xm = Qm;\n\n    var Gm = /*#__PURE__*/function (_zm) {\n      _inherits(Gm, _zm);\n\n      var _super24 = _createSuper(Gm);\n\n      function Gm(e, t, n, i, o) {\n        var _this56;\n\n        _classCallCheck(this, Gm);\n\n        _this56 = _super24.call(this, o);\n        _this56.range = e.clone();\n        _this56.key = t;\n        _this56.oldValue = n === undefined ? null : n;\n        _this56.newValue = i === undefined ? null : i;\n        return _this56;\n      }\n\n      _createClass(Gm, [{\n        key: \"type\",\n        get: function get() {\n          if (this.oldValue === null) {\n            return \"addAttribute\";\n          } else if (this.newValue === null) {\n            return \"removeAttribute\";\n          } else {\n            return \"changeAttribute\";\n          }\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new Gm(this.range, this.key, this.oldValue, this.newValue, this.baseVersion);\n        }\n      }, {\n        key: \"getReversed\",\n        value: function getReversed() {\n          return new Gm(this.range, this.key, this.newValue, this.oldValue, this.baseVersion + 1);\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          var e = _get(_getPrototypeOf(Gm.prototype), \"toJSON\", this).call(this);\n\n          e.range = this.range.toJSON();\n          return e;\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate() {\n          if (!this.range.isFlat) {\n            throw new rr[\"b\"](\"attribute-operation-range-not-flat: The range to change is not flat.\", this);\n          }\n\n          var _iterator206 = _createForOfIteratorHelper(this.range.getItems({\n            shallow: true\n          })),\n              _step206;\n\n          try {\n            for (_iterator206.s(); !(_step206 = _iterator206.n()).done;) {\n              var _e164 = _step206.value;\n\n              if (this.oldValue !== null && !Xm(_e164.getAttribute(this.key), this.oldValue)) {\n                throw new rr[\"b\"](\"attribute-operation-wrong-old-value: Changed node has different attribute value than operation's \" + \"old attribute value.\", this, {\n                  item: _e164,\n                  key: this.key,\n                  value: this.oldValue\n                });\n              }\n\n              if (this.oldValue === null && this.newValue !== null && _e164.hasAttribute(this.key)) {\n                throw new rr[\"b\"](\"attribute-operation-attribute-exists: The attribute with given key already exists.\", this, {\n                  node: _e164,\n                  key: this.key\n                });\n              }\n            }\n          } catch (err) {\n            _iterator206.e(err);\n          } finally {\n            _iterator206.f();\n          }\n        }\n      }, {\n        key: \"_execute\",\n        value: function _execute() {\n          if (!Xm(this.oldValue, this.newValue)) {\n            Wm(this.range, this.key, this.newValue);\n          }\n        }\n      }], [{\n        key: \"className\",\n        get: function get() {\n          return \"AttributeOperation\";\n        }\n      }, {\n        key: \"fromJSON\",\n        value: function fromJSON(e, t) {\n          return new Gm(qh.fromJSON(e.range, t), e.key, e.oldValue, e.newValue, e.baseVersion);\n        }\n      }]);\n\n      return Gm;\n    }(zm);\n\n    var Km = /*#__PURE__*/function (_zm2) {\n      _inherits(Km, _zm2);\n\n      var _super25 = _createSuper(Km);\n\n      function Km(e, t) {\n        var _this57;\n\n        _classCallCheck(this, Km);\n\n        _this57 = _super25.call(this, null);\n        _this57.sourcePosition = e.clone();\n        _this57.howMany = t;\n        return _this57;\n      }\n\n      _createClass(Km, [{\n        key: \"type\",\n        get: function get() {\n          return \"detach\";\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          var e = _get(_getPrototypeOf(Km.prototype), \"toJSON\", this).call(this);\n\n          e.sourcePosition = this.sourcePosition.toJSON();\n          return e;\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate() {\n          if (this.sourcePosition.root.document) {\n            throw new rr[\"b\"](\"detach-operation-on-document-node: Cannot detach document node.\", this);\n          }\n        }\n      }, {\n        key: \"_execute\",\n        value: function _execute() {\n          Hm(qh._createFromPositionAndShift(this.sourcePosition, this.howMany));\n        }\n      }], [{\n        key: \"className\",\n        get: function get() {\n          return \"DetachOperation\";\n        }\n      }]);\n\n      return Km;\n    }(zm);\n\n    var Zm = /*#__PURE__*/function (_zm3) {\n      _inherits(Zm, _zm3);\n\n      var _super26 = _createSuper(Zm);\n\n      function Zm(e, t, n, i) {\n        var _this58;\n\n        _classCallCheck(this, Zm);\n\n        _this58 = _super26.call(this, i);\n        _this58.sourcePosition = e.clone();\n        _this58.sourcePosition.stickiness = \"toNext\";\n        _this58.howMany = t;\n        _this58.targetPosition = n.clone();\n        _this58.targetPosition.stickiness = \"toNone\";\n        return _this58;\n      }\n\n      _createClass(Zm, [{\n        key: \"type\",\n        get: function get() {\n          if (this.targetPosition.root.rootName == \"$graveyard\") {\n            return \"remove\";\n          } else if (this.sourcePosition.root.rootName == \"$graveyard\") {\n            return \"reinsert\";\n          }\n\n          return \"move\";\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new this.constructor(this.sourcePosition, this.howMany, this.targetPosition, this.baseVersion);\n        }\n      }, {\n        key: \"getMovedRangeStart\",\n        value: function getMovedRangeStart() {\n          return this.targetPosition._getTransformedByDeletion(this.sourcePosition, this.howMany);\n        }\n      }, {\n        key: \"getReversed\",\n        value: function getReversed() {\n          var e = this.sourcePosition._getTransformedByInsertion(this.targetPosition, this.howMany);\n\n          return new this.constructor(this.getMovedRangeStart(), this.howMany, e, this.baseVersion + 1);\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate() {\n          var e = this.sourcePosition.parent;\n          var t = this.targetPosition.parent;\n          var n = this.sourcePosition.offset;\n          var i = this.targetPosition.offset;\n\n          if (n + this.howMany > e.maxOffset) {\n            throw new rr[\"b\"](\"move-operation-nodes-do-not-exist: The nodes which should be moved do not exist.\", this);\n          } else if (e === t && n < i && i < n + this.howMany) {\n            throw new rr[\"b\"](\"move-operation-range-into-itself: Trying to move a range of nodes to the inside of that range.\", this);\n          } else if (this.sourcePosition.root == this.targetPosition.root) {\n            if (Nr(this.sourcePosition.getParentPath(), this.targetPosition.getParentPath()) == \"prefix\") {\n              var _e165 = this.sourcePosition.path.length - 1;\n\n              if (this.targetPosition.path[_e165] >= n && this.targetPosition.path[_e165] < n + this.howMany) {\n                throw new rr[\"b\"](\"move-operation-node-into-itself: Trying to move a range of nodes into one of nodes from that range.\", this);\n              }\n            }\n          }\n        }\n      }, {\n        key: \"_execute\",\n        value: function _execute() {\n          Um(qh._createFromPositionAndShift(this.sourcePosition, this.howMany), this.targetPosition);\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          var e = _get(_getPrototypeOf(Zm.prototype), \"toJSON\", this).call(this);\n\n          e.sourcePosition = this.sourcePosition.toJSON();\n          e.targetPosition = this.targetPosition.toJSON();\n          return e;\n        }\n      }], [{\n        key: \"className\",\n        get: function get() {\n          return \"MoveOperation\";\n        }\n      }, {\n        key: \"fromJSON\",\n        value: function fromJSON(e, t) {\n          var n = $h.fromJSON(e.sourcePosition, t);\n          var i = $h.fromJSON(e.targetPosition, t);\n          return new this(n, e.howMany, i, e.baseVersion);\n        }\n      }]);\n\n      return Zm;\n    }(zm);\n\n    var eg = /*#__PURE__*/function (_zm4) {\n      _inherits(eg, _zm4);\n\n      var _super27 = _createSuper(eg);\n\n      function eg(e, t, n) {\n        var _this59;\n\n        _classCallCheck(this, eg);\n\n        _this59 = _super27.call(this, n);\n        _this59.position = e.clone();\n        _this59.position.stickiness = \"toNone\";\n        _this59.nodes = new Vh($m(t));\n        _this59.shouldReceiveAttributes = false;\n        return _this59;\n      }\n\n      _createClass(eg, [{\n        key: \"type\",\n        get: function get() {\n          return \"insert\";\n        }\n      }, {\n        key: \"howMany\",\n        get: function get() {\n          return this.nodes.maxOffset;\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          var e = new Vh(_toConsumableArray(this.nodes).map(function (e) {\n            return e._clone(true);\n          }));\n          var t = new eg(this.position, e, this.baseVersion);\n          t.shouldReceiveAttributes = this.shouldReceiveAttributes;\n          return t;\n        }\n      }, {\n        key: \"getReversed\",\n        value: function getReversed() {\n          var e = this.position.root.document.graveyard;\n          var t = new $h(e, [0]);\n          return new Zm(this.position, this.nodes.maxOffset, t, this.baseVersion + 1);\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate() {\n          var e = this.position.parent;\n\n          if (!e || e.maxOffset < this.position.offset) {\n            throw new rr[\"b\"](\"insert-operation-position-invalid: Insertion position is invalid.\", this);\n          }\n        }\n      }, {\n        key: \"_execute\",\n        value: function _execute() {\n          var e = this.nodes;\n          this.nodes = new Vh(_toConsumableArray(e).map(function (e) {\n            return e._clone(true);\n          }));\n          Fm(this.position, e);\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          var e = _get(_getPrototypeOf(eg.prototype), \"toJSON\", this).call(this);\n\n          e.position = this.position.toJSON();\n          e.nodes = this.nodes.toJSON();\n          return e;\n        }\n      }], [{\n        key: \"className\",\n        get: function get() {\n          return \"InsertOperation\";\n        }\n      }, {\n        key: \"fromJSON\",\n        value: function fromJSON(e, t) {\n          var n = [];\n\n          var _iterator207 = _createForOfIteratorHelper(e.nodes),\n              _step207;\n\n          try {\n            for (_iterator207.s(); !(_step207 = _iterator207.n()).done;) {\n              var _t153 = _step207.value;\n\n              if (_t153.name) {\n                n.push(Fh.fromJSON(_t153));\n              } else {\n                n.push(zh.fromJSON(_t153));\n              }\n            }\n          } catch (err) {\n            _iterator207.e(err);\n          } finally {\n            _iterator207.f();\n          }\n\n          var i = new eg($h.fromJSON(e.position, t), n, e.baseVersion);\n          i.shouldReceiveAttributes = e.shouldReceiveAttributes;\n          return i;\n        }\n      }]);\n\n      return eg;\n    }(zm);\n\n    var tg = /*#__PURE__*/function (_zm5) {\n      _inherits(tg, _zm5);\n\n      var _super28 = _createSuper(tg);\n\n      function tg(e, t, n, i, o, s) {\n        var _this60;\n\n        _classCallCheck(this, tg);\n\n        _this60 = _super28.call(this, s);\n        _this60.name = e;\n        _this60.oldRange = t ? t.clone() : null;\n        _this60.newRange = n ? n.clone() : null;\n        _this60.affectsData = o;\n        _this60._markers = i;\n        return _this60;\n      }\n\n      _createClass(tg, [{\n        key: \"type\",\n        get: function get() {\n          return \"marker\";\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new tg(this.name, this.oldRange, this.newRange, this._markers, this.affectsData, this.baseVersion);\n        }\n      }, {\n        key: \"getReversed\",\n        value: function getReversed() {\n          return new tg(this.name, this.newRange, this.oldRange, this._markers, this.affectsData, this.baseVersion + 1);\n        }\n      }, {\n        key: \"_execute\",\n        value: function _execute() {\n          var e = this.newRange ? \"_set\" : \"_remove\";\n\n          this._markers[e](this.name, this.newRange, true, this.affectsData);\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          var e = _get(_getPrototypeOf(tg.prototype), \"toJSON\", this).call(this);\n\n          if (this.oldRange) {\n            e.oldRange = this.oldRange.toJSON();\n          }\n\n          if (this.newRange) {\n            e.newRange = this.newRange.toJSON();\n          }\n\n          delete e._markers;\n          return e;\n        }\n      }], [{\n        key: \"className\",\n        get: function get() {\n          return \"MarkerOperation\";\n        }\n      }, {\n        key: \"fromJSON\",\n        value: function fromJSON(e, t) {\n          return new tg(e.name, e.oldRange ? qh.fromJSON(e.oldRange, t) : null, e.newRange ? qh.fromJSON(e.newRange, t) : null, t.model.markers, e.affectsData, e.baseVersion);\n        }\n      }]);\n\n      return tg;\n    }(zm);\n\n    var ng = /*#__PURE__*/function (_zm6) {\n      _inherits(ng, _zm6);\n\n      var _super29 = _createSuper(ng);\n\n      function ng(e, t, n, i) {\n        var _this61;\n\n        _classCallCheck(this, ng);\n\n        _this61 = _super29.call(this, i);\n        _this61.position = e;\n        _this61.position.stickiness = \"toNext\";\n        _this61.oldName = t;\n        _this61.newName = n;\n        return _this61;\n      }\n\n      _createClass(ng, [{\n        key: \"type\",\n        get: function get() {\n          return \"rename\";\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new ng(this.position.clone(), this.oldName, this.newName, this.baseVersion);\n        }\n      }, {\n        key: \"getReversed\",\n        value: function getReversed() {\n          return new ng(this.position.clone(), this.newName, this.oldName, this.baseVersion + 1);\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate() {\n          var e = this.position.nodeAfter;\n\n          if (!(e instanceof Fh)) {\n            throw new rr[\"b\"](\"rename-operation-wrong-position: Given position is invalid or node after it is not an instance of Element.\", this);\n          } else if (e.name !== this.oldName) {\n            throw new rr[\"b\"](\"rename-operation-wrong-name: Element to change has different name than operation's old name.\", this);\n          }\n        }\n      }, {\n        key: \"_execute\",\n        value: function _execute() {\n          var e = this.position.nodeAfter;\n          e.name = this.newName;\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          var e = _get(_getPrototypeOf(ng.prototype), \"toJSON\", this).call(this);\n\n          e.position = this.position.toJSON();\n          return e;\n        }\n      }], [{\n        key: \"className\",\n        get: function get() {\n          return \"RenameOperation\";\n        }\n      }, {\n        key: \"fromJSON\",\n        value: function fromJSON(e, t) {\n          return new ng($h.fromJSON(e.position, t), e.oldName, e.newName, e.baseVersion);\n        }\n      }]);\n\n      return ng;\n    }(zm);\n\n    var ig = /*#__PURE__*/function (_zm7) {\n      _inherits(ig, _zm7);\n\n      var _super30 = _createSuper(ig);\n\n      function ig(e, t, n, i, o) {\n        var _this62;\n\n        _classCallCheck(this, ig);\n\n        _this62 = _super30.call(this, o);\n        _this62.root = e;\n        _this62.key = t;\n        _this62.oldValue = n;\n        _this62.newValue = i;\n        return _this62;\n      }\n\n      _createClass(ig, [{\n        key: \"type\",\n        get: function get() {\n          if (this.oldValue === null) {\n            return \"addRootAttribute\";\n          } else if (this.newValue === null) {\n            return \"removeRootAttribute\";\n          } else {\n            return \"changeRootAttribute\";\n          }\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new ig(this.root, this.key, this.oldValue, this.newValue, this.baseVersion);\n        }\n      }, {\n        key: \"getReversed\",\n        value: function getReversed() {\n          return new ig(this.root, this.key, this.newValue, this.oldValue, this.baseVersion + 1);\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate() {\n          if (this.root != this.root.root || this.root.is(\"documentFragment\")) {\n            throw new rr[\"b\"](\"rootattribute-operation-not-a-root: The element to change is not a root element.\", this, {\n              root: this.root,\n              key: this.key\n            });\n          }\n\n          if (this.oldValue !== null && this.root.getAttribute(this.key) !== this.oldValue) {\n            throw new rr[\"b\"](\"rootattribute-operation-wrong-old-value: Changed node has different attribute value than operation's \" + \"old attribute value.\", this, {\n              root: this.root,\n              key: this.key\n            });\n          }\n\n          if (this.oldValue === null && this.newValue !== null && this.root.hasAttribute(this.key)) {\n            throw new rr[\"b\"](\"rootattribute-operation-attribute-exists: The attribute with given key already exists.\", this, {\n              root: this.root,\n              key: this.key\n            });\n          }\n        }\n      }, {\n        key: \"_execute\",\n        value: function _execute() {\n          if (this.newValue !== null) {\n            this.root._setAttribute(this.key, this.newValue);\n          } else {\n            this.root._removeAttribute(this.key);\n          }\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          var e = _get(_getPrototypeOf(ig.prototype), \"toJSON\", this).call(this);\n\n          e.root = this.root.toJSON();\n          return e;\n        }\n      }], [{\n        key: \"className\",\n        get: function get() {\n          return \"RootAttributeOperation\";\n        }\n      }, {\n        key: \"fromJSON\",\n        value: function fromJSON(e, t) {\n          if (!t.getRoot(e.root)) {\n            throw new rr[\"b\"](\"rootattribute-operation-fromjson-no-root: Cannot create RootAttributeOperation. Root with specified name does not exist.\", this, {\n              rootName: e.root\n            });\n          }\n\n          return new ig(t.getRoot(e.root), e.key, e.oldValue, e.newValue, e.baseVersion);\n        }\n      }]);\n\n      return ig;\n    }(zm);\n\n    var og = /*#__PURE__*/function (_zm8) {\n      _inherits(og, _zm8);\n\n      var _super31 = _createSuper(og);\n\n      function og(e, t, n, i, o) {\n        var _this63;\n\n        _classCallCheck(this, og);\n\n        _this63 = _super31.call(this, o);\n        _this63.sourcePosition = e.clone();\n        _this63.sourcePosition.stickiness = \"toPrevious\";\n        _this63.howMany = t;\n        _this63.targetPosition = n.clone();\n        _this63.targetPosition.stickiness = \"toNext\";\n        _this63.graveyardPosition = i.clone();\n        return _this63;\n      }\n\n      _createClass(og, [{\n        key: \"type\",\n        get: function get() {\n          return \"merge\";\n        }\n      }, {\n        key: \"deletionPosition\",\n        get: function get() {\n          return new $h(this.sourcePosition.root, this.sourcePosition.path.slice(0, -1));\n        }\n      }, {\n        key: \"movedRange\",\n        get: function get() {\n          var e = this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);\n          return new qh(this.sourcePosition, e);\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new this.constructor(this.sourcePosition, this.howMany, this.targetPosition, this.graveyardPosition, this.baseVersion);\n        }\n      }, {\n        key: \"getReversed\",\n        value: function getReversed() {\n          var e = this.targetPosition._getTransformedByMergeOperation(this);\n\n          var t = this.sourcePosition.path.slice(0, -1);\n\n          var n = new $h(this.sourcePosition.root, t)._getTransformedByMergeOperation(this);\n\n          var i = new sg(e, this.howMany, this.graveyardPosition, this.baseVersion + 1);\n          i.insertionPosition = n;\n          return i;\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate() {\n          var e = this.sourcePosition.parent;\n          var t = this.targetPosition.parent;\n\n          if (!e.parent) {\n            throw new rr[\"b\"](\"merge-operation-source-position-invalid: Merge source position is invalid.\", this);\n          } else if (!t.parent) {\n            throw new rr[\"b\"](\"merge-operation-target-position-invalid: Merge target position is invalid.\", this);\n          } else if (this.howMany != e.maxOffset) {\n            throw new rr[\"b\"](\"merge-operation-how-many-invalid: Merge operation specifies wrong number of nodes to move.\", this);\n          }\n        }\n      }, {\n        key: \"_execute\",\n        value: function _execute() {\n          var e = this.sourcePosition.parent;\n\n          var t = qh._createIn(e);\n\n          Um(t, this.targetPosition);\n          Um(qh._createOn(e), this.graveyardPosition);\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          var e = _get(_getPrototypeOf(og.prototype), \"toJSON\", this).call(this);\n\n          e.sourcePosition = e.sourcePosition.toJSON();\n          e.targetPosition = e.targetPosition.toJSON();\n          e.graveyardPosition = e.graveyardPosition.toJSON();\n          return e;\n        }\n      }], [{\n        key: \"className\",\n        get: function get() {\n          return \"MergeOperation\";\n        }\n      }, {\n        key: \"fromJSON\",\n        value: function fromJSON(e, t) {\n          var n = $h.fromJSON(e.sourcePosition, t);\n          var i = $h.fromJSON(e.targetPosition, t);\n          var o = $h.fromJSON(e.graveyardPosition, t);\n          return new this(n, e.howMany, i, o, e.baseVersion);\n        }\n      }]);\n\n      return og;\n    }(zm);\n\n    var sg = /*#__PURE__*/function (_zm9) {\n      _inherits(sg, _zm9);\n\n      var _super32 = _createSuper(sg);\n\n      function sg(e, t, n, i) {\n        var _this64;\n\n        _classCallCheck(this, sg);\n\n        _this64 = _super32.call(this, i);\n        _this64.splitPosition = e.clone();\n        _this64.splitPosition.stickiness = \"toNext\";\n        _this64.howMany = t;\n        _this64.insertionPosition = sg.getInsertionPosition(e);\n        _this64.insertionPosition.stickiness = \"toNone\";\n        _this64.graveyardPosition = n ? n.clone() : null;\n\n        if (_this64.graveyardPosition) {\n          _this64.graveyardPosition.stickiness = \"toNext\";\n        }\n\n        return _this64;\n      }\n\n      _createClass(sg, [{\n        key: \"type\",\n        get: function get() {\n          return \"split\";\n        }\n      }, {\n        key: \"moveTargetPosition\",\n        get: function get() {\n          var e = this.insertionPosition.path.slice();\n          e.push(0);\n          return new $h(this.insertionPosition.root, e);\n        }\n      }, {\n        key: \"movedRange\",\n        get: function get() {\n          var e = this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);\n          return new qh(this.splitPosition, e);\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          var e = new this.constructor(this.splitPosition, this.howMany, this.graveyardPosition, this.baseVersion);\n          e.insertionPosition = this.insertionPosition;\n          return e;\n        }\n      }, {\n        key: \"getReversed\",\n        value: function getReversed() {\n          var e = this.splitPosition.root.document.graveyard;\n          var t = new $h(e, [0]);\n          return new og(this.moveTargetPosition, this.howMany, this.splitPosition, t, this.baseVersion + 1);\n        }\n      }, {\n        key: \"_validate\",\n        value: function _validate() {\n          var e = this.splitPosition.parent;\n          var t = this.splitPosition.offset;\n\n          if (!e || e.maxOffset < t) {\n            throw new rr[\"b\"](\"split-operation-position-invalid: Split position is invalid.\", this);\n          } else if (!e.parent) {\n            throw new rr[\"b\"](\"split-operation-split-in-root: Cannot split root element.\", this);\n          } else if (this.howMany != e.maxOffset - this.splitPosition.offset) {\n            throw new rr[\"b\"](\"split-operation-how-many-invalid: Split operation specifies wrong number of nodes to move.\", this);\n          } else if (this.graveyardPosition && !this.graveyardPosition.nodeAfter) {\n            throw new rr[\"b\"](\"split-operation-graveyard-position-invalid: Graveyard position invalid.\", this);\n          }\n        }\n      }, {\n        key: \"_execute\",\n        value: function _execute() {\n          var e = this.splitPosition.parent;\n\n          if (this.graveyardPosition) {\n            Um(qh._createFromPositionAndShift(this.graveyardPosition, 1), this.insertionPosition);\n          } else {\n            var _t154 = e._clone();\n\n            Fm(this.insertionPosition, _t154);\n          }\n\n          var t = new qh($h._createAt(e, this.splitPosition.offset), $h._createAt(e, e.maxOffset));\n          Um(t, this.moveTargetPosition);\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          var e = _get(_getPrototypeOf(sg.prototype), \"toJSON\", this).call(this);\n\n          e.splitPosition = this.splitPosition.toJSON();\n          e.insertionPosition = this.insertionPosition.toJSON();\n\n          if (this.graveyardPosition) {\n            e.graveyardPosition = this.graveyardPosition.toJSON();\n          }\n\n          return e;\n        }\n      }], [{\n        key: \"className\",\n        get: function get() {\n          return \"SplitOperation\";\n        }\n      }, {\n        key: \"getInsertionPosition\",\n        value: function getInsertionPosition(e) {\n          var t = e.path.slice(0, -1);\n          t[t.length - 1]++;\n          return new $h(e.root, t);\n        }\n      }, {\n        key: \"fromJSON\",\n        value: function fromJSON(e, t) {\n          var n = $h.fromJSON(e.splitPosition, t);\n          var i = $h.fromJSON(e.insertionPosition, t);\n          var o = e.graveyardPosition ? $h.fromJSON(e.graveyardPosition, t) : null;\n          var s = new this(n, e.howMany, o, e.baseVersion);\n          s.insertionPosition = i;\n          return s;\n        }\n      }]);\n\n      return sg;\n    }(zm);\n\n    var rg = /*#__PURE__*/function (_Fh) {\n      _inherits(rg, _Fh);\n\n      var _super33 = _createSuper(rg);\n\n      function rg(e, t) {\n        var _this65;\n\n        var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"main\";\n\n        _classCallCheck(this, rg);\n\n        _this65 = _super33.call(this, t);\n        _this65._document = e;\n        _this65.rootName = n;\n        return _this65;\n      }\n\n      _createClass(rg, [{\n        key: \"document\",\n        get: function get() {\n          return this._document;\n        }\n      }, {\n        key: \"is\",\n        value: function is(e, t) {\n          var n = e.replace(\"model:\", \"\");\n\n          if (!t) {\n            return n == \"rootElement\" || _get(_getPrototypeOf(rg.prototype), \"is\", this).call(this, e);\n          } else {\n            return n == \"rootElement\" && t == this.name || _get(_getPrototypeOf(rg.prototype), \"is\", this).call(this, e, t);\n          }\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          return this.rootName;\n        }\n      }]);\n\n      return rg;\n    }(Fh);\n\n    var ag = /*#__PURE__*/function () {\n      function ag(e, t) {\n        _classCallCheck(this, ag);\n\n        this.model = e;\n        this.batch = t;\n      }\n\n      _createClass(ag, [{\n        key: \"createText\",\n        value: function createText(e, t) {\n          return new zh(e, t);\n        }\n      }, {\n        key: \"createElement\",\n        value: function createElement(e, t) {\n          return new Fh(e, t);\n        }\n      }, {\n        key: \"createDocumentFragment\",\n        value: function createDocumentFragment() {\n          return new Bm();\n        }\n      }, {\n        key: \"insert\",\n        value: function insert(e, t) {\n          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n\n          this._assertWriterUsedCorrectly();\n\n          if (e instanceof zh && e.data == \"\") {\n            return;\n          }\n\n          var i = $h._createAt(t, n);\n\n          if (e.parent) {\n            if (hg(e.root, i.root)) {\n              this.move(qh._createOn(e), i);\n              return;\n            } else {\n              if (e.root.document) {\n                throw new rr[\"b\"](\"model-writer-insert-forbidden-move: \" + \"Cannot move a node from a document to a different tree. \" + \"It is forbidden to move a node that was already in a document outside of it.\", this);\n              } else {\n                this.remove(e);\n              }\n            }\n          }\n\n          var o = i.root.document ? i.root.document.version : null;\n          var s = new eg(i, e, o);\n\n          if (e instanceof zh) {\n            s.shouldReceiveAttributes = true;\n          }\n\n          this.batch.addOperation(s);\n          this.model.applyOperation(s);\n\n          if (e instanceof Bm) {\n            var _iterator208 = _createForOfIteratorHelper(e.markers),\n                _step208;\n\n            try {\n              for (_iterator208.s(); !(_step208 = _iterator208.n()).done;) {\n                var _step208$value = _slicedToArray(_step208.value, 2),\n                    _t155 = _step208$value[0],\n                    _n141 = _step208$value[1];\n\n                var _e166 = $h._createAt(_n141.root, 0);\n\n                var _o45 = new qh(_n141.start._getCombined(_e166, i), _n141.end._getCombined(_e166, i));\n\n                var _s18 = {\n                  range: _o45,\n                  usingOperation: true,\n                  affectsData: true\n                };\n\n                if (this.model.markers.has(_t155)) {\n                  this.updateMarker(_t155, _s18);\n                } else {\n                  this.addMarker(_t155, _s18);\n                }\n              }\n            } catch (err) {\n              _iterator208.e(err);\n            } finally {\n              _iterator208.f();\n            }\n          }\n        }\n      }, {\n        key: \"insertText\",\n        value: function insertText(e, t, n, i) {\n          if (t instanceof Bm || t instanceof Fh || t instanceof $h) {\n            this.insert(this.createText(e), t, n);\n          } else {\n            this.insert(this.createText(e, t), n, i);\n          }\n        }\n      }, {\n        key: \"insertElement\",\n        value: function insertElement(e, t, n, i) {\n          if (t instanceof Bm || t instanceof Fh || t instanceof $h) {\n            this.insert(this.createElement(e), t, n);\n          } else {\n            this.insert(this.createElement(e, t), n, i);\n          }\n        }\n      }, {\n        key: \"append\",\n        value: function append(e, t) {\n          this.insert(e, t, \"end\");\n        }\n      }, {\n        key: \"appendText\",\n        value: function appendText(e, t, n) {\n          if (t instanceof Bm || t instanceof Fh) {\n            this.insert(this.createText(e), t, \"end\");\n          } else {\n            this.insert(this.createText(e, t), n, \"end\");\n          }\n        }\n      }, {\n        key: \"appendElement\",\n        value: function appendElement(e, t, n) {\n          if (t instanceof Bm || t instanceof Fh) {\n            this.insert(this.createElement(e), t, \"end\");\n          } else {\n            this.insert(this.createElement(e, t), n, \"end\");\n          }\n        }\n      }, {\n        key: \"setAttribute\",\n        value: function setAttribute(e, t, n) {\n          this._assertWriterUsedCorrectly();\n\n          if (n instanceof qh) {\n            var _i118 = n.getMinimalFlatRanges();\n\n            var _iterator209 = _createForOfIteratorHelper(_i118),\n                _step209;\n\n            try {\n              for (_iterator209.s(); !(_step209 = _iterator209.n()).done;) {\n                var _n142 = _step209.value;\n                cg(this, e, t, _n142);\n              }\n            } catch (err) {\n              _iterator209.e(err);\n            } finally {\n              _iterator209.f();\n            }\n          } else {\n            lg(this, e, t, n);\n          }\n        }\n      }, {\n        key: \"setAttributes\",\n        value: function setAttributes(e, t) {\n          var _iterator210 = _createForOfIteratorHelper(Hr(e)),\n              _step210;\n\n          try {\n            for (_iterator210.s(); !(_step210 = _iterator210.n()).done;) {\n              var _step210$value = _slicedToArray(_step210.value, 2),\n                  _n143 = _step210$value[0],\n                  _i119 = _step210$value[1];\n\n              this.setAttribute(_n143, _i119, t);\n            }\n          } catch (err) {\n            _iterator210.e(err);\n          } finally {\n            _iterator210.f();\n          }\n        }\n      }, {\n        key: \"removeAttribute\",\n        value: function removeAttribute(e, t) {\n          this._assertWriterUsedCorrectly();\n\n          if (t instanceof qh) {\n            var _n144 = t.getMinimalFlatRanges();\n\n            var _iterator211 = _createForOfIteratorHelper(_n144),\n                _step211;\n\n            try {\n              for (_iterator211.s(); !(_step211 = _iterator211.n()).done;) {\n                var _t156 = _step211.value;\n                cg(this, e, null, _t156);\n              }\n            } catch (err) {\n              _iterator211.e(err);\n            } finally {\n              _iterator211.f();\n            }\n          } else {\n            lg(this, e, null, t);\n          }\n        }\n      }, {\n        key: \"clearAttributes\",\n        value: function clearAttributes(e) {\n          var _this66 = this;\n\n          this._assertWriterUsedCorrectly();\n\n          var t = function t(e) {\n            var _iterator212 = _createForOfIteratorHelper(e.getAttributeKeys()),\n                _step212;\n\n            try {\n              for (_iterator212.s(); !(_step212 = _iterator212.n()).done;) {\n                var _t157 = _step212.value;\n\n                _this66.removeAttribute(_t157, e);\n              }\n            } catch (err) {\n              _iterator212.e(err);\n            } finally {\n              _iterator212.f();\n            }\n          };\n\n          if (!(e instanceof qh)) {\n            t(e);\n          } else {\n            var _iterator213 = _createForOfIteratorHelper(e.getItems()),\n                _step213;\n\n            try {\n              for (_iterator213.s(); !(_step213 = _iterator213.n()).done;) {\n                var _n145 = _step213.value;\n                t(_n145);\n              }\n            } catch (err) {\n              _iterator213.e(err);\n            } finally {\n              _iterator213.f();\n            }\n          }\n        }\n      }, {\n        key: \"move\",\n        value: function move(e, t, n) {\n          this._assertWriterUsedCorrectly();\n\n          if (!(e instanceof qh)) {\n            throw new rr[\"b\"](\"writer-move-invalid-range: Invalid range to move.\", this);\n          }\n\n          if (!e.isFlat) {\n            throw new rr[\"b\"](\"writer-move-range-not-flat: Range to move is not flat.\", this);\n          }\n\n          var i = $h._createAt(t, n);\n\n          if (i.isEqual(e.start)) {\n            return;\n          }\n\n          this._addOperationForAffectedMarkers(\"move\", e);\n\n          if (!hg(e.root, i.root)) {\n            throw new rr[\"b\"](\"writer-move-different-document: Range is going to be moved between different documents.\", this);\n          }\n\n          var o = e.root.document ? e.root.document.version : null;\n          var s = new Zm(e.start, e.end.offset - e.start.offset, i, o);\n          this.batch.addOperation(s);\n          this.model.applyOperation(s);\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(e) {\n          this._assertWriterUsedCorrectly();\n\n          var t = e instanceof qh ? e : qh._createOn(e);\n          var n = t.getMinimalFlatRanges().reverse();\n\n          var _iterator214 = _createForOfIteratorHelper(n),\n              _step214;\n\n          try {\n            for (_iterator214.s(); !(_step214 = _iterator214.n()).done;) {\n              var _e167 = _step214.value;\n\n              this._addOperationForAffectedMarkers(\"move\", _e167);\n\n              ug(_e167.start, _e167.end.offset - _e167.start.offset, this.batch, this.model);\n            }\n          } catch (err) {\n            _iterator214.e(err);\n          } finally {\n            _iterator214.f();\n          }\n        }\n      }, {\n        key: \"merge\",\n        value: function merge(e) {\n          this._assertWriterUsedCorrectly();\n\n          var t = e.nodeBefore;\n          var n = e.nodeAfter;\n\n          this._addOperationForAffectedMarkers(\"merge\", e);\n\n          if (!(t instanceof Fh)) {\n            throw new rr[\"b\"](\"writer-merge-no-element-before: Node before merge position must be an element.\", this);\n          }\n\n          if (!(n instanceof Fh)) {\n            throw new rr[\"b\"](\"writer-merge-no-element-after: Node after merge position must be an element.\", this);\n          }\n\n          if (!e.root.document) {\n            this._mergeDetached(e);\n          } else {\n            this._merge(e);\n          }\n        }\n      }, {\n        key: \"createPositionFromPath\",\n        value: function createPositionFromPath(e, t, n) {\n          return this.model.createPositionFromPath(e, t, n);\n        }\n      }, {\n        key: \"createPositionAt\",\n        value: function createPositionAt(e, t) {\n          return this.model.createPositionAt(e, t);\n        }\n      }, {\n        key: \"createPositionAfter\",\n        value: function createPositionAfter(e) {\n          return this.model.createPositionAfter(e);\n        }\n      }, {\n        key: \"createPositionBefore\",\n        value: function createPositionBefore(e) {\n          return this.model.createPositionBefore(e);\n        }\n      }, {\n        key: \"createRange\",\n        value: function createRange(e, t) {\n          return this.model.createRange(e, t);\n        }\n      }, {\n        key: \"createRangeIn\",\n        value: function createRangeIn(e) {\n          return this.model.createRangeIn(e);\n        }\n      }, {\n        key: \"createRangeOn\",\n        value: function createRangeOn(e) {\n          return this.model.createRangeOn(e);\n        }\n      }, {\n        key: \"createSelection\",\n        value: function createSelection(e, t, n) {\n          return this.model.createSelection(e, t, n);\n        }\n      }, {\n        key: \"_mergeDetached\",\n        value: function _mergeDetached(e) {\n          var t = e.nodeBefore;\n          var n = e.nodeAfter;\n          this.move(qh._createIn(n), $h._createAt(t, \"end\"));\n          this.remove(n);\n        }\n      }, {\n        key: \"_merge\",\n        value: function _merge(e) {\n          var t = $h._createAt(e.nodeBefore, \"end\");\n\n          var n = $h._createAt(e.nodeAfter, 0);\n\n          var i = e.root.document.graveyard;\n          var o = new $h(i, [0]);\n          var s = e.root.document.version;\n          var r = new og(n, e.nodeAfter.maxOffset, t, o, s);\n          this.batch.addOperation(r);\n          this.model.applyOperation(r);\n        }\n      }, {\n        key: \"rename\",\n        value: function rename(e, t) {\n          this._assertWriterUsedCorrectly();\n\n          if (!(e instanceof Fh)) {\n            throw new rr[\"b\"](\"writer-rename-not-element-instance: Trying to rename an object which is not an instance of Element.\", this);\n          }\n\n          var n = e.root.document ? e.root.document.version : null;\n          var i = new ng($h._createBefore(e), e.name, t, n);\n          this.batch.addOperation(i);\n          this.model.applyOperation(i);\n        }\n      }, {\n        key: \"split\",\n        value: function split(e, t) {\n          this._assertWriterUsedCorrectly();\n\n          var n = e.parent;\n\n          if (!n.parent) {\n            throw new rr[\"b\"](\"writer-split-element-no-parent: Element with no parent can not be split.\", this);\n          }\n\n          if (!t) {\n            t = n.parent;\n          }\n\n          if (!e.parent.getAncestors({\n            includeSelf: true\n          }).includes(t)) {\n            throw new rr[\"b\"](\"writer-split-invalid-limit-element: Limit element is not a position ancestor.\", this);\n          }\n\n          var i, o;\n\n          do {\n            var _t158 = n.root.document ? n.root.document.version : null;\n\n            var _s19 = n.maxOffset - e.offset;\n\n            var _r14 = new sg(e, _s19, null, _t158);\n\n            this.batch.addOperation(_r14);\n            this.model.applyOperation(_r14);\n\n            if (!i && !o) {\n              i = n;\n              o = e.parent.nextSibling;\n            }\n\n            e = this.createPositionAfter(e.parent);\n            n = e.parent;\n          } while (n !== t);\n\n          return {\n            position: e,\n            range: new qh($h._createAt(i, \"end\"), $h._createAt(o, 0))\n          };\n        }\n      }, {\n        key: \"wrap\",\n        value: function wrap(e, t) {\n          this._assertWriterUsedCorrectly();\n\n          if (!e.isFlat) {\n            throw new rr[\"b\"](\"writer-wrap-range-not-flat: Range to wrap is not flat.\", this);\n          }\n\n          var n = t instanceof Fh ? t : new Fh(t);\n\n          if (n.childCount > 0) {\n            throw new rr[\"b\"](\"writer-wrap-element-not-empty: Element to wrap with is not empty.\", this);\n          }\n\n          if (n.parent !== null) {\n            throw new rr[\"b\"](\"writer-wrap-element-attached: Element to wrap with is already attached to tree model.\", this);\n          }\n\n          this.insert(n, e.start);\n          var i = new qh(e.start.getShiftedBy(1), e.end.getShiftedBy(1));\n          this.move(i, $h._createAt(n, 0));\n        }\n      }, {\n        key: \"unwrap\",\n        value: function unwrap(e) {\n          this._assertWriterUsedCorrectly();\n\n          if (e.parent === null) {\n            throw new rr[\"b\"](\"writer-unwrap-element-no-parent: Trying to unwrap an element which has no parent.\", this);\n          }\n\n          this.move(qh._createIn(e), this.createPositionAfter(e));\n          this.remove(e);\n        }\n      }, {\n        key: \"addMarker\",\n        value: function addMarker(e, t) {\n          this._assertWriterUsedCorrectly();\n\n          if (!t || typeof t.usingOperation != \"boolean\") {\n            throw new rr[\"b\"](\"writer-addMarker-no-usingOperation: The options.usingOperation parameter is required when adding a new marker.\", this);\n          }\n\n          var n = t.usingOperation;\n          var i = t.range;\n          var o = t.affectsData === undefined ? false : t.affectsData;\n\n          if (this.model.markers.has(e)) {\n            throw new rr[\"b\"](\"writer-addMarker-marker-exists: Marker with provided name already exists.\", this);\n          }\n\n          if (!i) {\n            throw new rr[\"b\"](\"writer-addMarker-no-range: Range parameter is required when adding a new marker.\", this);\n          }\n\n          if (!n) {\n            return this.model.markers._set(e, i, n, o);\n          }\n\n          dg(this, e, null, i, o);\n          return this.model.markers.get(e);\n        }\n      }, {\n        key: \"updateMarker\",\n        value: function updateMarker(e, t) {\n          this._assertWriterUsedCorrectly();\n\n          var n = typeof e == \"string\" ? e : e.name;\n          var i = this.model.markers.get(n);\n\n          if (!i) {\n            throw new rr[\"b\"](\"writer-updateMarker-marker-not-exists: Marker with provided name does not exists.\", this);\n          }\n\n          if (!t) {\n            this.model.markers._refresh(i);\n\n            return;\n          }\n\n          var o = typeof t.usingOperation == \"boolean\";\n          var s = typeof t.affectsData == \"boolean\";\n          var r = s ? t.affectsData : i.affectsData;\n\n          if (!o && !t.range && !s) {\n            throw new rr[\"b\"](\"writer-updateMarker-wrong-options: One of the options is required - provide range, usingOperations or affectsData.\", this);\n          }\n\n          var a = i.getRange();\n          var c = t.range ? t.range : a;\n\n          if (o && t.usingOperation !== i.managedUsingOperations) {\n            if (t.usingOperation) {\n              dg(this, n, null, c, r);\n            } else {\n              dg(this, n, a, null, r);\n\n              this.model.markers._set(n, c, undefined, r);\n            }\n\n            return;\n          }\n\n          if (i.managedUsingOperations) {\n            dg(this, n, a, c, r);\n          } else {\n            this.model.markers._set(n, c, undefined, r);\n          }\n        }\n      }, {\n        key: \"removeMarker\",\n        value: function removeMarker(e) {\n          this._assertWriterUsedCorrectly();\n\n          var t = typeof e == \"string\" ? e : e.name;\n\n          if (!this.model.markers.has(t)) {\n            throw new rr[\"b\"](\"writer-removeMarker-no-marker: Trying to remove marker which does not exist.\", this);\n          }\n\n          var n = this.model.markers.get(t);\n\n          if (!n.managedUsingOperations) {\n            this.model.markers._remove(t);\n\n            return;\n          }\n\n          var i = n.getRange();\n          dg(this, t, i, null, n.affectsData);\n        }\n      }, {\n        key: \"setSelection\",\n        value: function setSelection(e, t, n) {\n          this._assertWriterUsedCorrectly();\n\n          this.model.document.selection._setTo(e, t, n);\n        }\n      }, {\n        key: \"setSelectionFocus\",\n        value: function setSelectionFocus(e, t) {\n          this._assertWriterUsedCorrectly();\n\n          this.model.document.selection._setFocus(e, t);\n        }\n      }, {\n        key: \"setSelectionAttribute\",\n        value: function setSelectionAttribute(e, t) {\n          this._assertWriterUsedCorrectly();\n\n          if (typeof e === \"string\") {\n            this._setSelectionAttribute(e, t);\n          } else {\n            var _iterator215 = _createForOfIteratorHelper(Hr(e)),\n                _step215;\n\n            try {\n              for (_iterator215.s(); !(_step215 = _iterator215.n()).done;) {\n                var _step215$value = _slicedToArray(_step215.value, 2),\n                    _t159 = _step215$value[0],\n                    _n146 = _step215$value[1];\n\n                this._setSelectionAttribute(_t159, _n146);\n              }\n            } catch (err) {\n              _iterator215.e(err);\n            } finally {\n              _iterator215.f();\n            }\n          }\n        }\n      }, {\n        key: \"removeSelectionAttribute\",\n        value: function removeSelectionAttribute(e) {\n          this._assertWriterUsedCorrectly();\n\n          if (typeof e === \"string\") {\n            this._removeSelectionAttribute(e);\n          } else {\n            var _iterator216 = _createForOfIteratorHelper(e),\n                _step216;\n\n            try {\n              for (_iterator216.s(); !(_step216 = _iterator216.n()).done;) {\n                var _t160 = _step216.value;\n\n                this._removeSelectionAttribute(_t160);\n              }\n            } catch (err) {\n              _iterator216.e(err);\n            } finally {\n              _iterator216.f();\n            }\n          }\n        }\n      }, {\n        key: \"overrideSelectionGravity\",\n        value: function overrideSelectionGravity() {\n          return this.model.document.selection._overrideGravity();\n        }\n      }, {\n        key: \"restoreSelectionGravity\",\n        value: function restoreSelectionGravity(e) {\n          this.model.document.selection._restoreGravity(e);\n        }\n      }, {\n        key: \"_setSelectionAttribute\",\n        value: function _setSelectionAttribute(e, t) {\n          var n = this.model.document.selection;\n\n          if (n.isCollapsed && n.anchor.parent.isEmpty) {\n            var _i120 = df._getStoreAttributeKey(e);\n\n            this.setAttribute(_i120, t, n.anchor.parent);\n          }\n\n          n._setAttribute(e, t);\n        }\n      }, {\n        key: \"_removeSelectionAttribute\",\n        value: function _removeSelectionAttribute(e) {\n          var t = this.model.document.selection;\n\n          if (t.isCollapsed && t.anchor.parent.isEmpty) {\n            var _n147 = df._getStoreAttributeKey(e);\n\n            this.removeAttribute(_n147, t.anchor.parent);\n          }\n\n          t._removeAttribute(e);\n        }\n      }, {\n        key: \"_assertWriterUsedCorrectly\",\n        value: function _assertWriterUsedCorrectly() {\n          if (this.model._currentWriter !== this) {\n            throw new rr[\"b\"](\"writer-incorrect-use: Trying to use a writer outside the change() block.\", this);\n          }\n        }\n      }, {\n        key: \"_addOperationForAffectedMarkers\",\n        value: function _addOperationForAffectedMarkers(e, t) {\n          var _iterator217 = _createForOfIteratorHelper(this.model.markers),\n              _step217;\n\n          try {\n            for (_iterator217.s(); !(_step217 = _iterator217.n()).done;) {\n              var _n148 = _step217.value;\n\n              if (!_n148.managedUsingOperations) {\n                continue;\n              }\n\n              var _i121 = _n148.getRange();\n\n              var _o46 = false;\n\n              if (e == \"move\") {\n                _o46 = t.containsPosition(_i121.start) || t.start.isEqual(_i121.start) || t.containsPosition(_i121.end) || t.end.isEqual(_i121.end);\n              } else {\n                var _e168 = t.nodeBefore;\n                var _n149 = t.nodeAfter;\n\n                var _s20 = _i121.start.parent == _e168 && _i121.start.isAtEnd;\n\n                var _r15 = _i121.end.parent == _n149 && _i121.end.offset == 0;\n\n                var _a8 = _i121.end.nodeAfter == _n149;\n\n                var _c3 = _i121.start.nodeAfter == _n149;\n\n                _o46 = _s20 || _r15 || _a8 || _c3;\n              }\n\n              if (_o46) {\n                this.updateMarker(_n148.name, {\n                  range: _i121\n                });\n              }\n            }\n          } catch (err) {\n            _iterator217.e(err);\n          } finally {\n            _iterator217.f();\n          }\n        }\n      }]);\n\n      return ag;\n    }();\n\n    function cg(e, t, n, i) {\n      var o = e.model;\n      var s = o.document;\n      var r = i.start;\n      var a;\n      var c;\n      var l;\n\n      var _iterator218 = _createForOfIteratorHelper(i.getWalker({\n        shallow: true\n      })),\n          _step218;\n\n      try {\n        for (_iterator218.s(); !(_step218 = _iterator218.n()).done;) {\n          var _e169 = _step218.value;\n          l = _e169.item.getAttribute(t);\n\n          if (a && c != l) {\n            if (c != n) {\n              d();\n            }\n\n            r = a;\n          }\n\n          a = _e169.nextPosition;\n          c = l;\n        }\n      } catch (err) {\n        _iterator218.e(err);\n      } finally {\n        _iterator218.f();\n      }\n\n      if (a instanceof $h && a != r && c != n) {\n        d();\n      }\n\n      function d() {\n        var i = new qh(r, a);\n        var l = i.root.document ? s.version : null;\n        var d = new Gm(i, t, c, n, l);\n        e.batch.addOperation(d);\n        o.applyOperation(d);\n      }\n    }\n\n    function lg(e, t, n, i) {\n      var o = e.model;\n      var s = o.document;\n      var r = i.getAttribute(t);\n      var a, c;\n\n      if (r != n) {\n        var _l2 = i.root === i;\n\n        if (_l2) {\n          var _e170 = i.document ? s.version : null;\n\n          c = new ig(i, t, r, n, _e170);\n        } else {\n          a = new qh($h._createBefore(i), e.createPositionAfter(i));\n\n          var _o47 = a.root.document ? s.version : null;\n\n          c = new Gm(a, t, r, n, _o47);\n        }\n\n        e.batch.addOperation(c);\n        o.applyOperation(c);\n      }\n    }\n\n    function dg(e, t, n, i, o) {\n      var s = e.model;\n      var r = s.document;\n      var a = new tg(t, n, i, s.markers, o, r.version);\n      e.batch.addOperation(a);\n      s.applyOperation(a);\n    }\n\n    function ug(e, t, n, i) {\n      var o;\n\n      if (e.root.document) {\n        var _n150 = i.document;\n\n        var _s21 = new $h(_n150.graveyard, [0]);\n\n        o = new Zm(e, t, _s21, _n150.version);\n      } else {\n        o = new Km(e, t);\n      }\n\n      n.addOperation(o);\n      i.applyOperation(o);\n    }\n\n    function hg(e, t) {\n      if (e === t) {\n        return true;\n      }\n\n      if (e instanceof rg && t instanceof rg) {\n        return true;\n      }\n\n      return false;\n    }\n\n    var fg = /*#__PURE__*/function () {\n      function fg(e) {\n        _classCallCheck(this, fg);\n\n        this._markerCollection = e;\n        this._changesInElement = new Map();\n        this._elementSnapshots = new Map();\n        this._changedMarkers = new Map();\n        this._changeCount = 0;\n        this._cachedChanges = null;\n        this._cachedChangesWithGraveyard = null;\n      }\n\n      _createClass(fg, [{\n        key: \"isEmpty\",\n        get: function get() {\n          return this._changesInElement.size == 0 && this._changedMarkers.size == 0;\n        }\n      }, {\n        key: \"refreshItem\",\n        value: function refreshItem(e) {\n          if (this._isInInsertedElement(e.parent)) {\n            return;\n          }\n\n          this._markRemove(e.parent, e.startOffset, e.offsetSize);\n\n          this._markInsert(e.parent, e.startOffset, e.offsetSize);\n\n          var t = qh._createOn(e);\n\n          var _iterator219 = _createForOfIteratorHelper(this._markerCollection.getMarkersIntersectingRange(t)),\n              _step219;\n\n          try {\n            for (_iterator219.s(); !(_step219 = _iterator219.n()).done;) {\n              var _e171 = _step219.value;\n\n              var _t161 = _e171.getRange();\n\n              this.bufferMarkerChange(_e171.name, _t161, _t161, _e171.affectsData);\n            }\n          } catch (err) {\n            _iterator219.e(err);\n          } finally {\n            _iterator219.f();\n          }\n\n          this._cachedChanges = null;\n        }\n      }, {\n        key: \"bufferOperation\",\n        value: function bufferOperation(e) {\n          switch (e.type) {\n            case \"insert\":\n              {\n                if (this._isInInsertedElement(e.position.parent)) {\n                  return;\n                }\n\n                this._markInsert(e.position.parent, e.position.offset, e.nodes.maxOffset);\n\n                break;\n              }\n\n            case \"addAttribute\":\n            case \"removeAttribute\":\n            case \"changeAttribute\":\n              {\n                var _iterator220 = _createForOfIteratorHelper(e.range.getItems({\n                  shallow: true\n                })),\n                    _step220;\n\n                try {\n                  for (_iterator220.s(); !(_step220 = _iterator220.n()).done;) {\n                    var _t162 = _step220.value;\n\n                    if (this._isInInsertedElement(_t162.parent)) {\n                      continue;\n                    }\n\n                    this._markAttribute(_t162);\n                  }\n                } catch (err) {\n                  _iterator220.e(err);\n                } finally {\n                  _iterator220.f();\n                }\n\n                break;\n              }\n\n            case \"remove\":\n            case \"move\":\n            case \"reinsert\":\n              {\n                if (e.sourcePosition.isEqual(e.targetPosition) || e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition)) {\n                  return;\n                }\n\n                var _t163 = this._isInInsertedElement(e.sourcePosition.parent);\n\n                var _n151 = this._isInInsertedElement(e.targetPosition.parent);\n\n                if (!_t163) {\n                  this._markRemove(e.sourcePosition.parent, e.sourcePosition.offset, e.howMany);\n                }\n\n                if (!_n151) {\n                  this._markInsert(e.targetPosition.parent, e.getMovedRangeStart().offset, e.howMany);\n                }\n\n                break;\n              }\n\n            case \"rename\":\n              {\n                if (this._isInInsertedElement(e.position.parent)) {\n                  return;\n                }\n\n                this._markRemove(e.position.parent, e.position.offset, 1);\n\n                this._markInsert(e.position.parent, e.position.offset, 1);\n\n                var _t164 = qh._createFromPositionAndShift(e.position, 1);\n\n                var _iterator221 = _createForOfIteratorHelper(this._markerCollection.getMarkersIntersectingRange(_t164)),\n                    _step221;\n\n                try {\n                  for (_iterator221.s(); !(_step221 = _iterator221.n()).done;) {\n                    var _e172 = _step221.value;\n\n                    var _t165 = _e172.getRange();\n\n                    this.bufferMarkerChange(_e172.name, _t165, _t165, _e172.affectsData);\n                  }\n                } catch (err) {\n                  _iterator221.e(err);\n                } finally {\n                  _iterator221.f();\n                }\n\n                break;\n              }\n\n            case \"split\":\n              {\n                var _t166 = e.splitPosition.parent;\n\n                if (!this._isInInsertedElement(_t166)) {\n                  this._markRemove(_t166, e.splitPosition.offset, e.howMany);\n                }\n\n                if (!this._isInInsertedElement(e.insertionPosition.parent)) {\n                  this._markInsert(e.insertionPosition.parent, e.insertionPosition.offset, 1);\n                }\n\n                if (e.graveyardPosition) {\n                  this._markRemove(e.graveyardPosition.parent, e.graveyardPosition.offset, 1);\n                }\n\n                break;\n              }\n\n            case \"merge\":\n              {\n                var _t167 = e.sourcePosition.parent;\n\n                if (!this._isInInsertedElement(_t167.parent)) {\n                  this._markRemove(_t167.parent, _t167.startOffset, 1);\n                }\n\n                var _n152 = e.graveyardPosition.parent;\n\n                this._markInsert(_n152, e.graveyardPosition.offset, 1);\n\n                var _i122 = e.targetPosition.parent;\n\n                if (!this._isInInsertedElement(_i122)) {\n                  this._markInsert(_i122, e.targetPosition.offset, _t167.maxOffset);\n                }\n\n                break;\n              }\n          }\n\n          this._cachedChanges = null;\n        }\n      }, {\n        key: \"bufferMarkerChange\",\n        value: function bufferMarkerChange(e, t, n, i) {\n          var o = this._changedMarkers.get(e);\n\n          if (!o) {\n            this._changedMarkers.set(e, {\n              oldRange: t,\n              newRange: n,\n              affectsData: i\n            });\n          } else {\n            o.newRange = n;\n            o.affectsData = i;\n\n            if (o.oldRange == null && o.newRange == null) {\n              this._changedMarkers.delete(e);\n            }\n          }\n        }\n      }, {\n        key: \"getMarkersToRemove\",\n        value: function getMarkersToRemove() {\n          var e = [];\n\n          var _iterator222 = _createForOfIteratorHelper(this._changedMarkers),\n              _step222;\n\n          try {\n            for (_iterator222.s(); !(_step222 = _iterator222.n()).done;) {\n              var _step222$value = _slicedToArray(_step222.value, 2),\n                  _t168 = _step222$value[0],\n                  _n153 = _step222$value[1];\n\n              if (_n153.oldRange != null) {\n                e.push({\n                  name: _t168,\n                  range: _n153.oldRange\n                });\n              }\n            }\n          } catch (err) {\n            _iterator222.e(err);\n          } finally {\n            _iterator222.f();\n          }\n\n          return e;\n        }\n      }, {\n        key: \"getMarkersToAdd\",\n        value: function getMarkersToAdd() {\n          var e = [];\n\n          var _iterator223 = _createForOfIteratorHelper(this._changedMarkers),\n              _step223;\n\n          try {\n            for (_iterator223.s(); !(_step223 = _iterator223.n()).done;) {\n              var _step223$value = _slicedToArray(_step223.value, 2),\n                  _t169 = _step223$value[0],\n                  _n154 = _step223$value[1];\n\n              if (_n154.newRange != null) {\n                e.push({\n                  name: _t169,\n                  range: _n154.newRange\n                });\n              }\n            }\n          } catch (err) {\n            _iterator223.e(err);\n          } finally {\n            _iterator223.f();\n          }\n\n          return e;\n        }\n      }, {\n        key: \"getChangedMarkers\",\n        value: function getChangedMarkers() {\n          return Array.from(this._changedMarkers).map(function (e) {\n            return {\n              name: e[0],\n              data: {\n                oldRange: e[1].oldRange,\n                newRange: e[1].newRange\n              }\n            };\n          });\n        }\n      }, {\n        key: \"hasDataChanges\",\n        value: function hasDataChanges() {\n          var _iterator224 = _createForOfIteratorHelper(this._changedMarkers),\n              _step224;\n\n          try {\n            for (_iterator224.s(); !(_step224 = _iterator224.n()).done;) {\n              var _step224$value = _slicedToArray(_step224.value, 2),\n                  _e173 = _step224$value[1];\n\n              if (_e173.affectsData) {\n                return true;\n              }\n            }\n          } catch (err) {\n            _iterator224.e(err);\n          } finally {\n            _iterator224.f();\n          }\n\n          return this._changesInElement.size > 0;\n        }\n      }, {\n        key: \"getChanges\",\n        value: function getChanges() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {\n            includeChangesInGraveyard: false\n          };\n\n          if (this._cachedChanges) {\n            if (e.includeChangesInGraveyard) {\n              return this._cachedChangesWithGraveyard.slice();\n            } else {\n              return this._cachedChanges.slice();\n            }\n          }\n\n          var t = [];\n\n          var _iterator225 = _createForOfIteratorHelper(this._changesInElement.keys()),\n              _step225;\n\n          try {\n            for (_iterator225.s(); !(_step225 = _iterator225.n()).done;) {\n              var _e176 = _step225.value;\n\n              var _n156 = this._changesInElement.get(_e176).sort(function (e, t) {\n                if (e.offset === t.offset) {\n                  if (e.type != t.type) {\n                    return e.type == \"remove\" ? -1 : 1;\n                  }\n\n                  return 0;\n                }\n\n                return e.offset < t.offset ? -1 : 1;\n              });\n\n              var _i125 = this._elementSnapshots.get(_e176);\n\n              var _o49 = mg(_e176.getChildren());\n\n              var _s23 = gg(_i125.length, _n156);\n\n              var _r17 = 0;\n              var _a9 = 0;\n\n              var _iterator226 = _createForOfIteratorHelper(_s23),\n                  _step226;\n\n              try {\n                for (_iterator226.s(); !(_step226 = _iterator226.n()).done;) {\n                  var _n157 = _step226.value;\n\n                  if (_n157 === \"i\") {\n                    t.push(this._getInsertDiff(_e176, _r17, _o49[_r17].name));\n                    _r17++;\n                  } else if (_n157 === \"r\") {\n                    t.push(this._getRemoveDiff(_e176, _r17, _i125[_a9].name));\n                    _a9++;\n                  } else if (_n157 === \"a\") {\n                    var _n158 = _o49[_r17].attributes;\n                    var _s24 = _i125[_a9].attributes;\n\n                    var _c4 = void 0;\n\n                    if (_o49[_r17].name == \"$text\") {\n                      _c4 = new qh($h._createAt(_e176, _r17), $h._createAt(_e176, _r17 + 1));\n                    } else {\n                      var _t171 = _e176.offsetToIndex(_r17);\n\n                      _c4 = new qh($h._createAt(_e176, _r17), $h._createAt(_e176.getChild(_t171), 0));\n                    }\n\n                    t.push.apply(t, _toConsumableArray(this._getAttributesDiff(_c4, _s24, _n158)));\n                    _r17++;\n                    _a9++;\n                  } else {\n                    _r17++;\n                    _a9++;\n                  }\n                }\n              } catch (err) {\n                _iterator226.e(err);\n              } finally {\n                _iterator226.f();\n              }\n            }\n          } catch (err) {\n            _iterator225.e(err);\n          } finally {\n            _iterator225.f();\n          }\n\n          t.sort(function (e, t) {\n            if (e.position.root != t.position.root) {\n              return e.position.root.rootName < t.position.root.rootName ? -1 : 1;\n            }\n\n            if (e.position.isEqual(t.position)) {\n              return e.changeCount - t.changeCount;\n            }\n\n            return e.position.isBefore(t.position) ? -1 : 1;\n          });\n\n          for (var _e174 = 1; _e174 < t.length; _e174++) {\n            var _n155 = t[_e174 - 1];\n            var _i123 = t[_e174];\n\n            var _o48 = _n155.type == \"remove\" && _i123.type == \"remove\" && _n155.name == \"$text\" && _i123.name == \"$text\" && _n155.position.isEqual(_i123.position);\n\n            var _s22 = _n155.type == \"insert\" && _i123.type == \"insert\" && _n155.name == \"$text\" && _i123.name == \"$text\" && _n155.position.parent == _i123.position.parent && _n155.position.offset + _n155.length == _i123.position.offset;\n\n            var _r16 = _n155.type == \"attribute\" && _i123.type == \"attribute\" && _n155.position.parent == _i123.position.parent && _n155.range.isFlat && _i123.range.isFlat && _n155.position.offset + _n155.length == _i123.position.offset && _n155.attributeKey == _i123.attributeKey && _n155.attributeOldValue == _i123.attributeOldValue && _n155.attributeNewValue == _i123.attributeNewValue;\n\n            if (_o48 || _s22 || _r16) {\n              t[_e174 - 1].length++;\n\n              if (_r16) {\n                t[_e174 - 1].range.end = t[_e174 - 1].range.end.getShiftedBy(1);\n              }\n\n              t.splice(_e174, 1);\n              _e174--;\n            }\n          }\n\n          for (var _i124 = 0, _t170 = t; _i124 < _t170.length; _i124++) {\n            var _e175 = _t170[_i124];\n            delete _e175.changeCount;\n\n            if (_e175.type == \"attribute\") {\n              delete _e175.position;\n              delete _e175.length;\n            }\n          }\n\n          this._changeCount = 0;\n          this._cachedChangesWithGraveyard = t.slice();\n          this._cachedChanges = t.slice().filter(pg);\n\n          if (e.includeChangesInGraveyard) {\n            return this._cachedChangesWithGraveyard;\n          } else {\n            return this._cachedChanges;\n          }\n        }\n      }, {\n        key: \"reset\",\n        value: function reset() {\n          this._changesInElement.clear();\n\n          this._elementSnapshots.clear();\n\n          this._changedMarkers.clear();\n\n          this._cachedChanges = null;\n        }\n      }, {\n        key: \"_markInsert\",\n        value: function _markInsert(e, t, n) {\n          var i = {\n            type: \"insert\",\n            offset: t,\n            howMany: n,\n            count: this._changeCount++\n          };\n\n          this._markChange(e, i);\n        }\n      }, {\n        key: \"_markRemove\",\n        value: function _markRemove(e, t, n) {\n          var i = {\n            type: \"remove\",\n            offset: t,\n            howMany: n,\n            count: this._changeCount++\n          };\n\n          this._markChange(e, i);\n\n          this._removeAllNestedChanges(e, t, n);\n        }\n      }, {\n        key: \"_markAttribute\",\n        value: function _markAttribute(e) {\n          var t = {\n            type: \"attribute\",\n            offset: e.startOffset,\n            howMany: e.offsetSize,\n            count: this._changeCount++\n          };\n\n          this._markChange(e.parent, t);\n        }\n      }, {\n        key: \"_markChange\",\n        value: function _markChange(e, t) {\n          this._makeSnapshot(e);\n\n          var n = this._getChangesForElement(e);\n\n          this._handleChange(t, n);\n\n          n.push(t);\n\n          for (var _e177 = 0; _e177 < n.length; _e177++) {\n            if (n[_e177].howMany < 1) {\n              n.splice(_e177, 1);\n              _e177--;\n            }\n          }\n        }\n      }, {\n        key: \"_getChangesForElement\",\n        value: function _getChangesForElement(e) {\n          var t;\n\n          if (this._changesInElement.has(e)) {\n            t = this._changesInElement.get(e);\n          } else {\n            t = [];\n\n            this._changesInElement.set(e, t);\n          }\n\n          return t;\n        }\n      }, {\n        key: \"_makeSnapshot\",\n        value: function _makeSnapshot(e) {\n          if (!this._elementSnapshots.has(e)) {\n            this._elementSnapshots.set(e, mg(e.getChildren()));\n          }\n        }\n      }, {\n        key: \"_handleChange\",\n        value: function _handleChange(e, t) {\n          e.nodesToHandle = e.howMany;\n\n          var _iterator227 = _createForOfIteratorHelper(t),\n              _step227;\n\n          try {\n            for (_iterator227.s(); !(_step227 = _iterator227.n()).done;) {\n              var _n159 = _step227.value;\n\n              var _i126 = e.offset + e.howMany;\n\n              var _o50 = _n159.offset + _n159.howMany;\n\n              if (e.type == \"insert\") {\n                if (_n159.type == \"insert\") {\n                  if (e.offset <= _n159.offset) {\n                    _n159.offset += e.howMany;\n                  } else if (e.offset < _o50) {\n                    _n159.howMany += e.nodesToHandle;\n                    e.nodesToHandle = 0;\n                  }\n                }\n\n                if (_n159.type == \"remove\") {\n                  if (e.offset < _n159.offset) {\n                    _n159.offset += e.howMany;\n                  }\n                }\n\n                if (_n159.type == \"attribute\") {\n                  if (e.offset <= _n159.offset) {\n                    _n159.offset += e.howMany;\n                  } else if (e.offset < _o50) {\n                    var _o51 = _n159.howMany;\n                    _n159.howMany = e.offset - _n159.offset;\n                    t.unshift({\n                      type: \"attribute\",\n                      offset: _i126,\n                      howMany: _o51 - _n159.howMany,\n                      count: this._changeCount++\n                    });\n                  }\n                }\n              }\n\n              if (e.type == \"remove\") {\n                if (_n159.type == \"insert\") {\n                  if (_i126 <= _n159.offset) {\n                    _n159.offset -= e.howMany;\n                  } else if (_i126 <= _o50) {\n                    if (e.offset < _n159.offset) {\n                      var _t172 = _i126 - _n159.offset;\n\n                      _n159.offset = e.offset;\n                      _n159.howMany -= _t172;\n                      e.nodesToHandle -= _t172;\n                    } else {\n                      _n159.howMany -= e.nodesToHandle;\n                      e.nodesToHandle = 0;\n                    }\n                  } else {\n                    if (e.offset <= _n159.offset) {\n                      e.nodesToHandle -= _n159.howMany;\n                      _n159.howMany = 0;\n                    } else if (e.offset < _o50) {\n                      var _t173 = _o50 - e.offset;\n\n                      _n159.howMany -= _t173;\n                      e.nodesToHandle -= _t173;\n                    }\n                  }\n                }\n\n                if (_n159.type == \"remove\") {\n                  if (_i126 <= _n159.offset) {\n                    _n159.offset -= e.howMany;\n                  } else if (e.offset < _n159.offset) {\n                    e.nodesToHandle += _n159.howMany;\n                    _n159.howMany = 0;\n                  }\n                }\n\n                if (_n159.type == \"attribute\") {\n                  if (_i126 <= _n159.offset) {\n                    _n159.offset -= e.howMany;\n                  } else if (e.offset < _n159.offset) {\n                    var _t174 = _i126 - _n159.offset;\n\n                    _n159.offset = e.offset;\n                    _n159.howMany -= _t174;\n                  } else if (e.offset < _o50) {\n                    if (_i126 <= _o50) {\n                      var _i127 = _n159.howMany;\n                      _n159.howMany = e.offset - _n159.offset;\n\n                      var _o52 = _i127 - _n159.howMany - e.nodesToHandle;\n\n                      t.unshift({\n                        type: \"attribute\",\n                        offset: e.offset,\n                        howMany: _o52,\n                        count: this._changeCount++\n                      });\n                    } else {\n                      _n159.howMany -= _o50 - e.offset;\n                    }\n                  }\n                }\n              }\n\n              if (e.type == \"attribute\") {\n                if (_n159.type == \"insert\") {\n                  if (e.offset < _n159.offset && _i126 > _n159.offset) {\n                    if (_i126 > _o50) {\n                      var _e178 = {\n                        type: \"attribute\",\n                        offset: _o50,\n                        howMany: _i126 - _o50,\n                        count: this._changeCount++\n                      };\n\n                      this._handleChange(_e178, t);\n\n                      t.push(_e178);\n                    }\n\n                    e.nodesToHandle = _n159.offset - e.offset;\n                    e.howMany = e.nodesToHandle;\n                  } else if (e.offset >= _n159.offset && e.offset < _o50) {\n                    if (_i126 > _o50) {\n                      e.nodesToHandle = _i126 - _o50;\n                      e.offset = _o50;\n                    } else {\n                      e.nodesToHandle = 0;\n                    }\n                  }\n                }\n\n                if (_n159.type == \"remove\") {\n                  if (e.offset < _n159.offset && _i126 > _n159.offset) {\n                    var _o53 = {\n                      type: \"attribute\",\n                      offset: _n159.offset,\n                      howMany: _i126 - _n159.offset,\n                      count: this._changeCount++\n                    };\n\n                    this._handleChange(_o53, t);\n\n                    t.push(_o53);\n                    e.nodesToHandle = _n159.offset - e.offset;\n                    e.howMany = e.nodesToHandle;\n                  }\n                }\n\n                if (_n159.type == \"attribute\") {\n                  if (e.offset >= _n159.offset && _i126 <= _o50) {\n                    e.nodesToHandle = 0;\n                    e.howMany = 0;\n                    e.offset = 0;\n                  } else if (e.offset <= _n159.offset && _i126 >= _o50) {\n                    _n159.howMany = 0;\n                  }\n                }\n              }\n            }\n          } catch (err) {\n            _iterator227.e(err);\n          } finally {\n            _iterator227.f();\n          }\n\n          e.howMany = e.nodesToHandle;\n          delete e.nodesToHandle;\n        }\n      }, {\n        key: \"_getInsertDiff\",\n        value: function _getInsertDiff(e, t, n) {\n          return {\n            type: \"insert\",\n            position: $h._createAt(e, t),\n            name: n,\n            length: 1,\n            changeCount: this._changeCount++\n          };\n        }\n      }, {\n        key: \"_getRemoveDiff\",\n        value: function _getRemoveDiff(e, t, n) {\n          return {\n            type: \"remove\",\n            position: $h._createAt(e, t),\n            name: n,\n            length: 1,\n            changeCount: this._changeCount++\n          };\n        }\n      }, {\n        key: \"_getAttributesDiff\",\n        value: function _getAttributesDiff(e, t, n) {\n          var i = [];\n          n = new Map(n);\n\n          var _iterator228 = _createForOfIteratorHelper(t),\n              _step228;\n\n          try {\n            for (_iterator228.s(); !(_step228 = _iterator228.n()).done;) {\n              var _step228$value = _slicedToArray(_step228.value, 2),\n                  _o54 = _step228$value[0],\n                  _s25 = _step228$value[1];\n\n              var _t175 = n.has(_o54) ? n.get(_o54) : null;\n\n              if (_t175 !== _s25) {\n                i.push({\n                  type: \"attribute\",\n                  position: e.start,\n                  range: e.clone(),\n                  length: 1,\n                  attributeKey: _o54,\n                  attributeOldValue: _s25,\n                  attributeNewValue: _t175,\n                  changeCount: this._changeCount++\n                });\n              }\n\n              n.delete(_o54);\n            }\n          } catch (err) {\n            _iterator228.e(err);\n          } finally {\n            _iterator228.f();\n          }\n\n          var _iterator229 = _createForOfIteratorHelper(n),\n              _step229;\n\n          try {\n            for (_iterator229.s(); !(_step229 = _iterator229.n()).done;) {\n              var _step229$value = _slicedToArray(_step229.value, 2),\n                  _t176 = _step229$value[0],\n                  _o55 = _step229$value[1];\n\n              i.push({\n                type: \"attribute\",\n                position: e.start,\n                range: e.clone(),\n                length: 1,\n                attributeKey: _t176,\n                attributeOldValue: null,\n                attributeNewValue: _o55,\n                changeCount: this._changeCount++\n              });\n            }\n          } catch (err) {\n            _iterator229.e(err);\n          } finally {\n            _iterator229.f();\n          }\n\n          return i;\n        }\n      }, {\n        key: \"_isInInsertedElement\",\n        value: function _isInInsertedElement(e) {\n          var t = e.parent;\n\n          if (!t) {\n            return false;\n          }\n\n          var n = this._changesInElement.get(t);\n\n          var i = e.startOffset;\n\n          if (n) {\n            var _iterator230 = _createForOfIteratorHelper(n),\n                _step230;\n\n            try {\n              for (_iterator230.s(); !(_step230 = _iterator230.n()).done;) {\n                var _e179 = _step230.value;\n\n                if (_e179.type == \"insert\" && i >= _e179.offset && i < _e179.offset + _e179.howMany) {\n                  return true;\n                }\n              }\n            } catch (err) {\n              _iterator230.e(err);\n            } finally {\n              _iterator230.f();\n            }\n          }\n\n          return this._isInInsertedElement(t);\n        }\n      }, {\n        key: \"_removeAllNestedChanges\",\n        value: function _removeAllNestedChanges(e, t, n) {\n          var i = new qh($h._createAt(e, t), $h._createAt(e, t + n));\n\n          var _iterator231 = _createForOfIteratorHelper(i.getItems({\n            shallow: true\n          })),\n              _step231;\n\n          try {\n            for (_iterator231.s(); !(_step231 = _iterator231.n()).done;) {\n              var _e180 = _step231.value;\n\n              if (_e180.is(\"element\")) {\n                this._elementSnapshots.delete(_e180);\n\n                this._changesInElement.delete(_e180);\n\n                this._removeAllNestedChanges(_e180, 0, _e180.maxOffset);\n              }\n            }\n          } catch (err) {\n            _iterator231.e(err);\n          } finally {\n            _iterator231.f();\n          }\n        }\n      }]);\n\n      return fg;\n    }();\n\n    function mg(e) {\n      var t = [];\n\n      var _iterator232 = _createForOfIteratorHelper(e),\n          _step232;\n\n      try {\n        for (_iterator232.s(); !(_step232 = _iterator232.n()).done;) {\n          var _n160 = _step232.value;\n\n          if (_n160.is(\"text\")) {\n            for (var _e181 = 0; _e181 < _n160.data.length; _e181++) {\n              t.push({\n                name: \"$text\",\n                attributes: new Map(_n160.getAttributes())\n              });\n            }\n          } else {\n            t.push({\n              name: _n160.name,\n              attributes: new Map(_n160.getAttributes())\n            });\n          }\n        }\n      } catch (err) {\n        _iterator232.e(err);\n      } finally {\n        _iterator232.f();\n      }\n\n      return t;\n    }\n\n    function gg(e, t) {\n      var n = [];\n      var i = 0;\n      var o = 0;\n\n      var _iterator233 = _createForOfIteratorHelper(t),\n          _step233;\n\n      try {\n        for (_iterator233.s(); !(_step233 = _iterator233.n()).done;) {\n          var _e182 = _step233.value;\n\n          if (_e182.offset > i) {\n            for (var _t178 = 0; _t178 < _e182.offset - i; _t178++) {\n              n.push(\"e\");\n            }\n\n            o += _e182.offset - i;\n          }\n\n          if (_e182.type == \"insert\") {\n            for (var _t179 = 0; _t179 < _e182.howMany; _t179++) {\n              n.push(\"i\");\n            }\n\n            i = _e182.offset + _e182.howMany;\n          } else if (_e182.type == \"remove\") {\n            for (var _t180 = 0; _t180 < _e182.howMany; _t180++) {\n              n.push(\"r\");\n            }\n\n            i = _e182.offset;\n            o += _e182.howMany;\n          } else {\n            n.push.apply(n, _toConsumableArray(\"a\".repeat(_e182.howMany).split(\"\")));\n            i = _e182.offset + _e182.howMany;\n            o += _e182.howMany;\n          }\n        }\n      } catch (err) {\n        _iterator233.e(err);\n      } finally {\n        _iterator233.f();\n      }\n\n      if (o < e) {\n        for (var _t177 = 0; _t177 < e - o - i; _t177++) {\n          n.push(\"e\");\n        }\n      }\n\n      return n;\n    }\n\n    function pg(e) {\n      var t = e.position && e.position.root.rootName == \"$graveyard\";\n      var n = e.range && e.range.root.rootName == \"$graveyard\";\n      return !t && !n;\n    }\n\n    var bg = /*#__PURE__*/function () {\n      function bg() {\n        _classCallCheck(this, bg);\n\n        this._operations = [];\n        this._undoPairs = new Map();\n        this._undoneOperations = new Set();\n      }\n\n      _createClass(bg, [{\n        key: \"addOperation\",\n        value: function addOperation(e) {\n          if (this._operations.includes(e)) {\n            return;\n          }\n\n          this._operations.push(e);\n        }\n      }, {\n        key: \"getOperations\",\n        value: function getOperations() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.POSITIVE_INFINITY;\n\n          if (e < 0) {\n            return [];\n          }\n\n          return this._operations.slice(e, t);\n        }\n      }, {\n        key: \"getOperation\",\n        value: function getOperation(e) {\n          return this._operations[e];\n        }\n      }, {\n        key: \"setOperationAsUndone\",\n        value: function setOperationAsUndone(e, t) {\n          this._undoPairs.set(t, e);\n\n          this._undoneOperations.add(e);\n        }\n      }, {\n        key: \"isUndoingOperation\",\n        value: function isUndoingOperation(e) {\n          return this._undoPairs.has(e);\n        }\n      }, {\n        key: \"isUndoneOperation\",\n        value: function isUndoneOperation(e) {\n          return this._undoneOperations.has(e);\n        }\n      }, {\n        key: \"getUndoneOperation\",\n        value: function getUndoneOperation(e) {\n          return this._undoPairs.get(e);\n        }\n      }]);\n\n      return bg;\n    }();\n\n    function wg(e) {\n      return !!e && e.length == 1 && /[\\u0300-\\u036f\\u1ab0-\\u1aff\\u1dc0-\\u1dff\\u20d0-\\u20ff\\ufe20-\\ufe2f]/.test(e);\n    }\n\n    function _g(e) {\n      return !!e && e.length == 1 && /[\\ud800-\\udbff]/.test(e);\n    }\n\n    function vg(e) {\n      return !!e && e.length == 1 && /[\\udc00-\\udfff]/.test(e);\n    }\n\n    function kg(e, t) {\n      return _g(e.charAt(t - 1)) && vg(e.charAt(t));\n    }\n\n    function yg(e, t) {\n      return wg(e.charAt(t));\n    }\n\n    var xg = \"$graveyard\";\n\n    var Ag = /*#__PURE__*/function () {\n      function Ag(e) {\n        var _this67 = this;\n\n        _classCallCheck(this, Ag);\n\n        this.model = e;\n        this.version = 0;\n        this.history = new bg(this);\n        this.selection = new df(this);\n        this.roots = new yr({\n          idProperty: \"rootName\"\n        });\n        this.differ = new fg(e.markers);\n        this._postFixers = new Set();\n        this._hasSelectionChangedFromTheLastChangeBlock = false;\n        this.createRoot(\"$root\", xg);\n        this.listenTo(e, \"applyOperation\", function (e, t) {\n          var n = t[0];\n\n          if (n.isDocumentOperation && n.baseVersion !== _this67.version) {\n            throw new rr[\"b\"](\"model-document-applyOperation-wrong-version: Only operations with matching versions can be applied.\", _this67, {\n              operation: n\n            });\n          }\n        }, {\n          priority: \"highest\"\n        });\n        this.listenTo(e, \"applyOperation\", function (e, t) {\n          var n = t[0];\n\n          if (n.isDocumentOperation) {\n            _this67.differ.bufferOperation(n);\n          }\n        }, {\n          priority: \"high\"\n        });\n        this.listenTo(e, \"applyOperation\", function (e, t) {\n          var n = t[0];\n\n          if (n.isDocumentOperation) {\n            _this67.version++;\n\n            _this67.history.addOperation(n);\n          }\n        }, {\n          priority: \"low\"\n        });\n        this.listenTo(this.selection, \"change\", function () {\n          _this67._hasSelectionChangedFromTheLastChangeBlock = true;\n        });\n        this.listenTo(e.markers, \"update\", function (e, t, n, i) {\n          _this67.differ.bufferMarkerChange(t.name, n, i, t.affectsData);\n\n          if (n === null) {\n            t.on(\"change\", function (e, n) {\n              _this67.differ.bufferMarkerChange(t.name, n, t.getRange(), t.affectsData);\n            });\n          }\n        });\n      }\n\n      _createClass(Ag, [{\n        key: \"graveyard\",\n        get: function get() {\n          return this.getRoot(xg);\n        }\n      }, {\n        key: \"createRoot\",\n        value: function createRoot() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"$root\";\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"main\";\n\n          if (this.roots.get(t)) {\n            throw new rr[\"b\"](\"model-document-createRoot-name-exists: Root with specified name already exists.\", this, {\n              name: t\n            });\n          }\n\n          var n = new rg(this, e, t);\n          this.roots.add(n);\n          return n;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.selection.destroy();\n          this.stopListening();\n        }\n      }, {\n        key: \"getRoot\",\n        value: function getRoot() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"main\";\n          return this.roots.get(e);\n        }\n      }, {\n        key: \"getRootNames\",\n        value: function getRootNames() {\n          return Array.from(this.roots, function (e) {\n            return e.rootName;\n          }).filter(function (e) {\n            return e != xg;\n          });\n        }\n      }, {\n        key: \"registerPostFixer\",\n        value: function registerPostFixer(e) {\n          this._postFixers.add(e);\n        }\n      }, {\n        key: \"toJSON\",\n        value: function toJSON() {\n          var e = jr(this);\n          e.selection = \"[engine.model.DocumentSelection]\";\n          e.model = \"[engine.model.Model]\";\n          return e;\n        }\n      }, {\n        key: \"_handleChangeBlock\",\n        value: function _handleChangeBlock(e) {\n          if (this._hasDocumentChangedFromTheLastChangeBlock()) {\n            this._callPostFixers(e);\n\n            this.selection.refresh();\n\n            if (this.differ.hasDataChanges()) {\n              this.fire(\"change:data\", e.batch);\n            } else {\n              this.fire(\"change\", e.batch);\n            }\n\n            this.selection.refresh();\n            this.differ.reset();\n          }\n\n          this._hasSelectionChangedFromTheLastChangeBlock = false;\n        }\n      }, {\n        key: \"_hasDocumentChangedFromTheLastChangeBlock\",\n        value: function _hasDocumentChangedFromTheLastChangeBlock() {\n          return !this.differ.isEmpty || this._hasSelectionChangedFromTheLastChangeBlock;\n        }\n      }, {\n        key: \"_getDefaultRoot\",\n        value: function _getDefaultRoot() {\n          var _iterator234 = _createForOfIteratorHelper(this.roots),\n              _step234;\n\n          try {\n            for (_iterator234.s(); !(_step234 = _iterator234.n()).done;) {\n              var _e183 = _step234.value;\n\n              if (_e183 !== this.graveyard) {\n                return _e183;\n              }\n            }\n          } catch (err) {\n            _iterator234.e(err);\n          } finally {\n            _iterator234.f();\n          }\n\n          return this.graveyard;\n        }\n      }, {\n        key: \"_getDefaultRange\",\n        value: function _getDefaultRange() {\n          var e = this._getDefaultRoot();\n\n          var t = this.model;\n          var n = t.schema;\n          var i = t.createPositionFromPath(e, [0]);\n          var o = n.getNearestSelectionRange(i);\n          return o || t.createRange(i);\n        }\n      }, {\n        key: \"_validateSelectionRange\",\n        value: function _validateSelectionRange(e) {\n          return Cg(e.start) && Cg(e.end);\n        }\n      }, {\n        key: \"_callPostFixers\",\n        value: function _callPostFixers(e) {\n          var t = false;\n\n          do {\n            var _iterator235 = _createForOfIteratorHelper(this._postFixers),\n                _step235;\n\n            try {\n              for (_iterator235.s(); !(_step235 = _iterator235.n()).done;) {\n                var _n161 = _step235.value;\n                this.selection.refresh();\n                t = _n161(e);\n\n                if (t) {\n                  break;\n                }\n              }\n            } catch (err) {\n              _iterator235.e(err);\n            } finally {\n              _iterator235.f();\n            }\n          } while (t);\n        }\n      }]);\n\n      return Ag;\n    }();\n\n    kr(Ag, dr);\n\n    function Cg(e) {\n      var t = e.textNode;\n\n      if (t) {\n        var _n162 = t.data;\n\n        var _i128 = e.offset - t.startOffset;\n\n        return !kg(_n162, _i128) && !yg(_n162, _i128);\n      }\n\n      return true;\n    }\n\n    var Tg = /*#__PURE__*/function (_Symbol$iterator12) {\n      function Tg() {\n        _classCallCheck(this, Tg);\n\n        this._markers = new Map();\n      }\n\n      _createClass(Tg, [{\n        key: _Symbol$iterator12,\n        value: function value() {\n          return this._markers.values();\n        }\n      }, {\n        key: \"has\",\n        value: function has(e) {\n          return this._markers.has(e);\n        }\n      }, {\n        key: \"get\",\n        value: function get(e) {\n          return this._markers.get(e) || null;\n        }\n      }, {\n        key: \"_set\",\n        value: function _set(e, t) {\n          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n          var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n          var o = e instanceof Mg ? e.name : e;\n\n          var s = this._markers.get(o);\n\n          if (s) {\n            var _e184 = s.getRange();\n\n            var _r18 = false;\n\n            if (!_e184.isEqual(t)) {\n              s._attachLiveRange(sf.fromRange(t));\n\n              _r18 = true;\n            }\n\n            if (n != s.managedUsingOperations) {\n              s._managedUsingOperations = n;\n              _r18 = true;\n            }\n\n            if (typeof i === \"boolean\" && i != s.affectsData) {\n              s._affectsData = i;\n              _r18 = true;\n            }\n\n            if (_r18) {\n              this.fire(\"update:\" + o, s, _e184, t);\n            }\n\n            return s;\n          }\n\n          var r = sf.fromRange(t);\n          var a = new Mg(o, r, n, i);\n\n          this._markers.set(o, a);\n\n          this.fire(\"update:\" + o, a, null, t);\n          return a;\n        }\n      }, {\n        key: \"_remove\",\n        value: function _remove(e) {\n          var t = e instanceof Mg ? e.name : e;\n\n          var n = this._markers.get(t);\n\n          if (n) {\n            this._markers.delete(t);\n\n            this.fire(\"update:\" + t, n, n.getRange(), null);\n\n            this._destroyMarker(n);\n\n            return true;\n          }\n\n          return false;\n        }\n      }, {\n        key: \"_refresh\",\n        value: function _refresh(e) {\n          var t = e instanceof Mg ? e.name : e;\n\n          var n = this._markers.get(t);\n\n          if (!n) {\n            throw new rr[\"b\"](\"markercollection-refresh-marker-not-exists: Marker with provided name does not exists.\", this);\n          }\n\n          var i = n.getRange();\n          this.fire(\"update:\" + t, n, i, i, n.managedUsingOperations, n.affectsData);\n        }\n      }, {\n        key: \"getMarkersAtPosition\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function getMarkersAtPosition(e) {\n          var _iterator236, _step236, _t181;\n\n          return _regeneratorRuntime().wrap(function getMarkersAtPosition$(_context31) {\n            while (1) {\n              switch (_context31.prev = _context31.next) {\n                case 0:\n                  _iterator236 = _createForOfIteratorHelper(this);\n                  _context31.prev = 1;\n\n                  _iterator236.s();\n\n                case 3:\n                  if ((_step236 = _iterator236.n()).done) {\n                    _context31.next = 10;\n                    break;\n                  }\n\n                  _t181 = _step236.value;\n\n                  if (!_t181.getRange().containsPosition(e)) {\n                    _context31.next = 8;\n                    break;\n                  }\n\n                  _context31.next = 8;\n                  return _t181;\n\n                case 8:\n                  _context31.next = 3;\n                  break;\n\n                case 10:\n                  _context31.next = 15;\n                  break;\n\n                case 12:\n                  _context31.prev = 12;\n                  _context31.t0 = _context31[\"catch\"](1);\n\n                  _iterator236.e(_context31.t0);\n\n                case 15:\n                  _context31.prev = 15;\n\n                  _iterator236.f();\n\n                  return _context31.finish(15);\n\n                case 18:\n                case \"end\":\n                  return _context31.stop();\n              }\n            }\n          }, getMarkersAtPosition, this, [[1, 12, 15, 18]]);\n        })\n      }, {\n        key: \"getMarkersIntersectingRange\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function getMarkersIntersectingRange(e) {\n          var _iterator237, _step237, _t182;\n\n          return _regeneratorRuntime().wrap(function getMarkersIntersectingRange$(_context32) {\n            while (1) {\n              switch (_context32.prev = _context32.next) {\n                case 0:\n                  _iterator237 = _createForOfIteratorHelper(this);\n                  _context32.prev = 1;\n\n                  _iterator237.s();\n\n                case 3:\n                  if ((_step237 = _iterator237.n()).done) {\n                    _context32.next = 10;\n                    break;\n                  }\n\n                  _t182 = _step237.value;\n\n                  if (!(_t182.getRange().getIntersection(e) !== null)) {\n                    _context32.next = 8;\n                    break;\n                  }\n\n                  _context32.next = 8;\n                  return _t182;\n\n                case 8:\n                  _context32.next = 3;\n                  break;\n\n                case 10:\n                  _context32.next = 15;\n                  break;\n\n                case 12:\n                  _context32.prev = 12;\n                  _context32.t0 = _context32[\"catch\"](1);\n\n                  _iterator237.e(_context32.t0);\n\n                case 15:\n                  _context32.prev = 15;\n\n                  _iterator237.f();\n\n                  return _context32.finish(15);\n\n                case 18:\n                case \"end\":\n                  return _context32.stop();\n              }\n            }\n          }, getMarkersIntersectingRange, this, [[1, 12, 15, 18]]);\n        })\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          var _iterator238 = _createForOfIteratorHelper(this._markers.values()),\n              _step238;\n\n          try {\n            for (_iterator238.s(); !(_step238 = _iterator238.n()).done;) {\n              var _e185 = _step238.value;\n\n              this._destroyMarker(_e185);\n            }\n          } catch (err) {\n            _iterator238.e(err);\n          } finally {\n            _iterator238.f();\n          }\n\n          this._markers = null;\n          this.stopListening();\n        }\n      }, {\n        key: \"getMarkersGroup\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function getMarkersGroup(e) {\n          var _iterator239, _step239, _t183;\n\n          return _regeneratorRuntime().wrap(function getMarkersGroup$(_context33) {\n            while (1) {\n              switch (_context33.prev = _context33.next) {\n                case 0:\n                  _iterator239 = _createForOfIteratorHelper(this._markers.values());\n                  _context33.prev = 1;\n\n                  _iterator239.s();\n\n                case 3:\n                  if ((_step239 = _iterator239.n()).done) {\n                    _context33.next = 10;\n                    break;\n                  }\n\n                  _t183 = _step239.value;\n\n                  if (!_t183.name.startsWith(e + \":\")) {\n                    _context33.next = 8;\n                    break;\n                  }\n\n                  _context33.next = 8;\n                  return _t183;\n\n                case 8:\n                  _context33.next = 3;\n                  break;\n\n                case 10:\n                  _context33.next = 15;\n                  break;\n\n                case 12:\n                  _context33.prev = 12;\n                  _context33.t0 = _context33[\"catch\"](1);\n\n                  _iterator239.e(_context33.t0);\n\n                case 15:\n                  _context33.prev = 15;\n\n                  _iterator239.f();\n\n                  return _context33.finish(15);\n\n                case 18:\n                case \"end\":\n                  return _context33.stop();\n              }\n            }\n          }, getMarkersGroup, this, [[1, 12, 15, 18]]);\n        })\n      }, {\n        key: \"_destroyMarker\",\n        value: function _destroyMarker(e) {\n          e.stopListening();\n\n          e._detachLiveRange();\n        }\n      }]);\n\n      return Tg;\n    }(Symbol.iterator);\n\n    kr(Tg, dr);\n\n    var Mg = /*#__PURE__*/function () {\n      function Mg(e, t, n, i) {\n        _classCallCheck(this, Mg);\n\n        this.name = e;\n        this._liveRange = this._attachLiveRange(t);\n        this._managedUsingOperations = n;\n        this._affectsData = i;\n      }\n\n      _createClass(Mg, [{\n        key: \"managedUsingOperations\",\n        get: function get() {\n          if (!this._liveRange) {\n            throw new rr[\"b\"](\"marker-destroyed: Cannot use a destroyed marker instance.\", this);\n          }\n\n          return this._managedUsingOperations;\n        }\n      }, {\n        key: \"affectsData\",\n        get: function get() {\n          if (!this._liveRange) {\n            throw new rr[\"b\"](\"marker-destroyed: Cannot use a destroyed marker instance.\", this);\n          }\n\n          return this._affectsData;\n        }\n      }, {\n        key: \"getStart\",\n        value: function getStart() {\n          if (!this._liveRange) {\n            throw new rr[\"b\"](\"marker-destroyed: Cannot use a destroyed marker instance.\", this);\n          }\n\n          return this._liveRange.start.clone();\n        }\n      }, {\n        key: \"getEnd\",\n        value: function getEnd() {\n          if (!this._liveRange) {\n            throw new rr[\"b\"](\"marker-destroyed: Cannot use a destroyed marker instance.\", this);\n          }\n\n          return this._liveRange.end.clone();\n        }\n      }, {\n        key: \"getRange\",\n        value: function getRange() {\n          if (!this._liveRange) {\n            throw new rr[\"b\"](\"marker-destroyed: Cannot use a destroyed marker instance.\", this);\n          }\n\n          return this._liveRange.toRange();\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          return e == \"marker\" || e == \"model:marker\";\n        }\n      }, {\n        key: \"_attachLiveRange\",\n        value: function _attachLiveRange(e) {\n          if (this._liveRange) {\n            this._detachLiveRange();\n          }\n\n          e.delegate(\"change:range\").to(this);\n          e.delegate(\"change:content\").to(this);\n          this._liveRange = e;\n          return e;\n        }\n      }, {\n        key: \"_detachLiveRange\",\n        value: function _detachLiveRange() {\n          this._liveRange.stopDelegating(\"change:range\", this);\n\n          this._liveRange.stopDelegating(\"change:content\", this);\n\n          this._liveRange.detach();\n\n          this._liveRange = null;\n        }\n      }]);\n\n      return Mg;\n    }();\n\n    kr(Mg, dr);\n\n    var Pg = /*#__PURE__*/function (_zm10) {\n      _inherits(Pg, _zm10);\n\n      var _super34 = _createSuper(Pg);\n\n      function Pg() {\n        _classCallCheck(this, Pg);\n\n        return _super34.apply(this, arguments);\n      }\n\n      _createClass(Pg, [{\n        key: \"type\",\n        get: function get() {\n          return \"noop\";\n        }\n      }, {\n        key: \"clone\",\n        value: function clone() {\n          return new Pg(this.baseVersion);\n        }\n      }, {\n        key: \"getReversed\",\n        value: function getReversed() {\n          return new Pg(this.baseVersion + 1);\n        }\n      }, {\n        key: \"_execute\",\n        value: function _execute() {}\n      }], [{\n        key: \"className\",\n        get: function get() {\n          return \"NoOperation\";\n        }\n      }]);\n\n      return Pg;\n    }(zm);\n\n    var Eg = {};\n    Eg[Gm.className] = Gm;\n    Eg[eg.className] = eg;\n    Eg[tg.className] = tg;\n    Eg[Zm.className] = Zm;\n    Eg[Pg.className] = Pg;\n    Eg[zm.className] = zm;\n    Eg[ng.className] = ng;\n    Eg[ig.className] = ig;\n    Eg[sg.className] = sg;\n    Eg[og.className] = og;\n\n    var Sg = /*#__PURE__*/function () {\n      function Sg() {\n        _classCallCheck(this, Sg);\n      }\n\n      _createClass(Sg, null, [{\n        key: \"fromJSON\",\n        value: function fromJSON(e, t) {\n          return Eg[e.__className].fromJSON(e, t);\n        }\n      }]);\n\n      return Sg;\n    }();\n\n    var Ig = /*#__PURE__*/function (_$h) {\n      _inherits(Ig, _$h);\n\n      var _super35 = _createSuper(Ig);\n\n      function Ig(e, t) {\n        var _this68;\n\n        var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"toNone\";\n\n        _classCallCheck(this, Ig);\n\n        _this68 = _super35.call(this, e, t, n);\n\n        if (!_this68.root.is(\"rootElement\")) {\n          throw new rr[\"b\"](\"model-liveposition-root-not-rootelement: LivePosition's root has to be an instance of RootElement.\", e);\n        }\n\n        Og.call(_assertThisInitialized(_this68));\n        return _this68;\n      }\n\n      _createClass(Ig, [{\n        key: \"detach\",\n        value: function detach() {\n          this.stopListening();\n        }\n      }, {\n        key: \"is\",\n        value: function is(e) {\n          return e == \"livePosition\" || e == \"model:livePosition\" || _get(_getPrototypeOf(Ig.prototype), \"is\", this).call(this, e);\n        }\n      }, {\n        key: \"toPosition\",\n        value: function toPosition() {\n          return new $h(this.root, this.path.slice(), this.stickiness);\n        }\n      }], [{\n        key: \"fromPosition\",\n        value: function fromPosition(e, t) {\n          return new this(e.root, e.path.slice(), t ? t : e.stickiness);\n        }\n      }]);\n\n      return Ig;\n    }($h);\n\n    function Og() {\n      var _this69 = this;\n\n      this.listenTo(this.root.document.model, \"applyOperation\", function (e, t) {\n        var n = t[0];\n\n        if (!n.isDocumentOperation) {\n          return;\n        }\n\n        Ng.call(_this69, n);\n      }, {\n        priority: \"low\"\n      });\n    }\n\n    function Ng(e) {\n      var t = this.getTransformedByOperation(e);\n\n      if (!this.isEqual(t)) {\n        var _e186 = this.toPosition();\n\n        this.path = t.path;\n        this.root = t.root;\n        this.fire(\"change\", _e186);\n      }\n    }\n\n    kr(Ig, dr);\n\n    function Rg(e, t, n, i) {\n      return e.change(function (o) {\n        var s;\n\n        if (!n) {\n          s = e.document.selection;\n        } else if (n instanceof Kh || n instanceof df) {\n          s = n;\n        } else {\n          s = o.createSelection(n, i);\n        }\n\n        if (!s.isCollapsed) {\n          e.deleteContent(s, {\n            doNotAutoparagraph: true\n          });\n        }\n\n        var r = new Lg(e, o, s.anchor);\n        var a;\n\n        if (t.is(\"documentFragment\")) {\n          a = t.getChildren();\n        } else {\n          a = [t];\n        }\n\n        r.handleNodes(a, {\n          isFirst: true,\n          isLast: true\n        });\n        var c = r.getSelectionRange();\n\n        if (c) {\n          if (s instanceof df) {\n            o.setSelection(c);\n          } else {\n            s.setTo(c);\n          }\n        } else {}\n\n        var l = r.getAffectedRange() || e.createRange(s.anchor);\n        r.destroy();\n        return l;\n      });\n    }\n\n    var Lg = /*#__PURE__*/function () {\n      function Lg(e, t, n) {\n        _classCallCheck(this, Lg);\n\n        this.model = e;\n        this.writer = t;\n        this.position = n;\n        this.canMergeWith = new Set([this.position.parent]);\n        this.schema = e.schema;\n        this._filterAttributesOf = [];\n        this._affectedStart = null;\n        this._affectedEnd = null;\n      }\n\n      _createClass(Lg, [{\n        key: \"handleNodes\",\n        value: function handleNodes(e, t) {\n          e = Array.from(e);\n\n          for (var _n163 = 0; _n163 < e.length; _n163++) {\n            var _i129 = e[_n163];\n\n            this._handleNode(_i129, {\n              isFirst: _n163 === 0 && t.isFirst,\n              isLast: _n163 === e.length - 1 && t.isLast\n            });\n          }\n\n          this.schema.removeDisallowedAttributes(this._filterAttributesOf, this.writer);\n          this._filterAttributesOf = [];\n        }\n      }, {\n        key: \"getSelectionRange\",\n        value: function getSelectionRange() {\n          if (this.nodeToSelect) {\n            return qh._createOn(this.nodeToSelect);\n          }\n\n          return this.model.schema.getNearestSelectionRange(this.position);\n        }\n      }, {\n        key: \"getAffectedRange\",\n        value: function getAffectedRange() {\n          if (!this._affectedStart) {\n            return null;\n          }\n\n          return new qh(this._affectedStart, this._affectedEnd);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          if (this._affectedStart) {\n            this._affectedStart.detach();\n          }\n\n          if (this._affectedEnd) {\n            this._affectedEnd.detach();\n          }\n        }\n      }, {\n        key: \"_handleNode\",\n        value: function _handleNode(e, t) {\n          if (this.schema.isObject(e)) {\n            this._handleObject(e, t);\n\n            return;\n          }\n\n          var n = this._checkAndSplitToAllowedPosition(e, t);\n\n          if (!n) {\n            this._handleDisallowedNode(e, t);\n\n            return;\n          }\n\n          this._insert(e);\n\n          this._mergeSiblingsOf(e, t);\n        }\n      }, {\n        key: \"_handleObject\",\n        value: function _handleObject(e, t) {\n          if (this._checkAndSplitToAllowedPosition(e)) {\n            this._insert(e);\n          } else {\n            this._tryAutoparagraphing(e, t);\n          }\n        }\n      }, {\n        key: \"_handleDisallowedNode\",\n        value: function _handleDisallowedNode(e, t) {\n          if (e.is(\"element\")) {\n            this.handleNodes(e.getChildren(), t);\n          } else {\n            this._tryAutoparagraphing(e, t);\n          }\n        }\n      }, {\n        key: \"_insert\",\n        value: function _insert(e) {\n          if (!this.schema.checkChild(this.position, e)) {\n            throw new rr[\"b\"](\"insertcontent-wrong-position: Given node cannot be inserted on the given position.\", this, {\n              node: e,\n              position: this.position\n            });\n          }\n\n          var t = Ig.fromPosition(this.position, \"toNext\");\n\n          this._setAffectedBoundaries(this.position);\n\n          this.writer.insert(e, this.position);\n          this.position = t.toPosition();\n          t.detach();\n\n          if (this.schema.isObject(e) && !this.schema.checkChild(this.position, \"$text\")) {\n            this.nodeToSelect = e;\n          } else {\n            this.nodeToSelect = null;\n          }\n\n          this._filterAttributesOf.push(e);\n        }\n      }, {\n        key: \"_setAffectedBoundaries\",\n        value: function _setAffectedBoundaries(e) {\n          if (!this._affectedStart) {\n            this._affectedStart = Ig.fromPosition(e, \"toPrevious\");\n          }\n\n          if (!this._affectedEnd || this._affectedEnd.isBefore(e)) {\n            if (this._affectedEnd) {\n              this._affectedEnd.detach();\n            }\n\n            this._affectedEnd = Ig.fromPosition(e, \"toNext\");\n          }\n        }\n      }, {\n        key: \"_mergeSiblingsOf\",\n        value: function _mergeSiblingsOf(e, t) {\n          if (!(e instanceof Fh)) {\n            return;\n          }\n\n          var n = this._canMergeLeft(e, t);\n\n          var i = this._canMergeRight(e, t);\n\n          var o = Ig._createBefore(e);\n\n          o.stickiness = \"toNext\";\n\n          var s = Ig._createAfter(e);\n\n          s.stickiness = \"toNext\";\n\n          if (n) {\n            var _e187 = Ig.fromPosition(this.position);\n\n            _e187.stickiness = \"toNext\";\n\n            if (this._affectedStart.isEqual(o)) {\n              this._affectedStart.detach();\n\n              this._affectedStart = Ig._createAt(o.nodeBefore, \"end\", \"toPrevious\");\n            }\n\n            this.writer.merge(o);\n\n            if (o.isEqual(this._affectedEnd) && t.isLast) {\n              this._affectedEnd.detach();\n\n              this._affectedEnd = Ig._createAt(o.nodeBefore, \"end\", \"toNext\");\n            }\n\n            this.position = _e187.toPosition();\n\n            _e187.detach();\n          }\n\n          if (i) {\n            if (!this.position.isEqual(s)) {\n              throw new rr[\"b\"](\"insertcontent-invalid-insertion-position\", this);\n            }\n\n            this.position = $h._createAt(s.nodeBefore, \"end\");\n\n            var _e188 = Ig.fromPosition(this.position, \"toPrevious\");\n\n            if (this._affectedEnd.isEqual(s)) {\n              this._affectedEnd.detach();\n\n              this._affectedEnd = Ig._createAt(s.nodeBefore, \"end\", \"toNext\");\n            }\n\n            this.writer.merge(s);\n\n            if (s.getShiftedBy(-1).isEqual(this._affectedStart) && t.isFirst) {\n              this._affectedStart.detach();\n\n              this._affectedStart = Ig._createAt(s.nodeBefore, 0, \"toPrevious\");\n            }\n\n            this.position = _e188.toPosition();\n\n            _e188.detach();\n          }\n\n          if (n || i) {\n            this._filterAttributesOf.push(this.position.parent);\n          }\n\n          o.detach();\n          s.detach();\n        }\n      }, {\n        key: \"_canMergeLeft\",\n        value: function _canMergeLeft(e, t) {\n          var n = e.previousSibling;\n          return t.isFirst && n instanceof Fh && this.canMergeWith.has(n) && this.model.schema.checkMerge(n, e);\n        }\n      }, {\n        key: \"_canMergeRight\",\n        value: function _canMergeRight(e, t) {\n          var n = e.nextSibling;\n          return t.isLast && n instanceof Fh && this.canMergeWith.has(n) && this.model.schema.checkMerge(e, n);\n        }\n      }, {\n        key: \"_tryAutoparagraphing\",\n        value: function _tryAutoparagraphing(e, t) {\n          var n = this.writer.createElement(\"paragraph\");\n\n          if (this._getAllowedIn(n, this.position.parent) && this.schema.checkChild(n, e)) {\n            n._appendChild(e);\n\n            this._handleNode(n, t);\n          }\n        }\n      }, {\n        key: \"_checkAndSplitToAllowedPosition\",\n        value: function _checkAndSplitToAllowedPosition(e) {\n          var t = this._getAllowedIn(e, this.position.parent);\n\n          if (!t) {\n            return false;\n          }\n\n          while (t != this.position.parent) {\n            if (this.schema.isLimit(this.position.parent)) {\n              return false;\n            }\n\n            if (this.position.isAtStart) {\n              var _e189 = this.position.parent;\n              this.position = this.writer.createPositionBefore(_e189);\n\n              if (_e189.isEmpty && _e189.parent === t) {\n                this.writer.remove(_e189);\n              }\n            } else if (this.position.isAtEnd) {\n              this.position = this.writer.createPositionAfter(this.position.parent);\n            } else {\n              var _e190 = this.writer.createPositionAfter(this.position.parent);\n\n              this._setAffectedBoundaries(this.position);\n\n              this.writer.split(this.position);\n              this.position = _e190;\n              this.canMergeWith.add(this.position.nodeAfter);\n            }\n          }\n\n          return true;\n        }\n      }, {\n        key: \"_getAllowedIn\",\n        value: function _getAllowedIn(e, t) {\n          if (this.schema.checkChild(t, e)) {\n            return t;\n          }\n\n          if (t.parent) {\n            return this._getAllowedIn(e, t.parent);\n          }\n\n          return null;\n        }\n      }]);\n\n      return Lg;\n    }();\n\n    function jg(e, t) {\n      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (t.isCollapsed) {\n        return;\n      }\n\n      var i = t.getFirstRange();\n\n      if (i.root.rootName == \"$graveyard\") {\n        return;\n      }\n\n      var o = e.schema;\n      e.change(function (e) {\n        if (!n.doNotResetEntireContent && Hg(o, t)) {\n          Fg(e, t, o);\n          return;\n        }\n\n        var s = i.start;\n        var r = Ig.fromPosition(i.end, \"toNext\");\n\n        if (!i.start.isTouching(i.end)) {\n          e.remove(i);\n        }\n\n        if (!n.leaveUnmerged) {\n          Dg(e, s, r);\n          o.removeDisallowedAttributes(s.parent.getChildren(), e);\n        }\n\n        Ug(e, t, s);\n\n        if (!n.doNotAutoparagraph && zg(o, s)) {\n          Vg(e, s, t);\n        }\n\n        r.detach();\n      });\n    }\n\n    function Dg(e, t, n) {\n      var i = t.parent;\n      var o = n.parent;\n\n      if (i == o) {\n        return;\n      }\n\n      if (e.model.schema.isLimit(i) || e.model.schema.isLimit(o)) {\n        return;\n      }\n\n      if (!Bg(t, n, e.model.schema)) {\n        return;\n      }\n\n      t = e.createPositionAfter(i);\n      n = e.createPositionBefore(o);\n\n      if (!n.isEqual(t)) {\n        e.insert(o, t);\n      }\n\n      e.merge(t);\n\n      while (n.parent.isEmpty) {\n        var _t184 = n.parent;\n        n = e.createPositionBefore(_t184);\n        e.remove(_t184);\n      }\n\n      Dg(e, t, n);\n    }\n\n    function zg(e, t) {\n      var n = e.checkChild(t, \"$text\");\n      var i = e.checkChild(t, \"paragraph\");\n      return !n && i;\n    }\n\n    function Bg(e, t, n) {\n      var i = new qh(e, t);\n\n      var _iterator240 = _createForOfIteratorHelper(i.getWalker()),\n          _step240;\n\n      try {\n        for (_iterator240.s(); !(_step240 = _iterator240.n()).done;) {\n          var _e191 = _step240.value;\n\n          if (n.isLimit(_e191.item)) {\n            return false;\n          }\n        }\n      } catch (err) {\n        _iterator240.e(err);\n      } finally {\n        _iterator240.f();\n      }\n\n      return true;\n    }\n\n    function Vg(e, t, n) {\n      var i = e.createElement(\"paragraph\");\n      e.insert(i, t);\n      Ug(e, n, e.createPositionAt(i, 0));\n    }\n\n    function Fg(e, t) {\n      var n = e.model.schema.getLimitElement(t);\n      e.remove(e.createRangeIn(n));\n      Vg(e, e.createPositionAt(n, 0), t);\n    }\n\n    function Hg(e, t) {\n      var n = e.getLimitElement(t);\n\n      if (!t.containsEntireContent(n)) {\n        return false;\n      }\n\n      var i = t.getFirstRange();\n\n      if (i.start.parent == i.end.parent) {\n        return false;\n      }\n\n      return e.checkChild(n, \"paragraph\");\n    }\n\n    function Ug(e, t, n) {\n      if (t instanceof df) {\n        e.setSelection(n);\n      } else {\n        t.setTo(n);\n      }\n    }\n\n    var Wg = ' ,.?!:;\"-()';\n\n    function $g(e, t) {\n      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var i = e.schema;\n      var o = n.direction != \"backward\";\n      var s = n.unit ? n.unit : \"character\";\n      var r = t.focus;\n      var a = new Uh({\n        boundaries: Qg(r, o),\n        singleCharacters: true,\n        direction: o ? \"forward\" : \"backward\"\n      });\n      var c = {\n        walker: a,\n        schema: i,\n        isForward: o,\n        unit: s\n      };\n      var l;\n\n      var _loop3 = function _loop3() {\n        if (l.done) {\n          return {\n            v: void 0\n          };\n        }\n\n        var n = qg(c, l.value);\n\n        if (n) {\n          if (t instanceof df) {\n            e.change(function (e) {\n              e.setSelectionFocus(n);\n            });\n          } else {\n            t.setFocus(n);\n          }\n\n          return {\n            v: void 0\n          };\n        }\n      };\n\n      while (l = a.next()) {\n        var _ret2 = _loop3();\n\n        if (typeof _ret2 === \"object\") return _ret2.v;\n      }\n    }\n\n    function qg(e, t) {\n      if (t.type == \"text\") {\n        if (e.unit === \"word\") {\n          return Jg(e.walker, e.isForward);\n        }\n\n        return Yg(e.walker, e.unit, e.isForward);\n      }\n\n      if (t.type == (e.isForward ? \"elementStart\" : \"elementEnd\")) {\n        if (e.schema.isObject(t.item)) {\n          return $h._createAt(t.item, e.isForward ? \"after\" : \"before\");\n        }\n\n        if (e.schema.checkChild(t.nextPosition, \"$text\")) {\n          return t.nextPosition;\n        }\n      } else {\n        if (e.schema.isLimit(t.item)) {\n          e.walker.skip(function () {\n            return true;\n          });\n          return;\n        }\n\n        if (e.schema.checkChild(t.nextPosition, \"$text\")) {\n          return t.nextPosition;\n        }\n      }\n    }\n\n    function Yg(e, t) {\n      var n = e.position.textNode;\n\n      if (n) {\n        var _i130 = n.data;\n\n        var _o56 = e.position.offset - n.startOffset;\n\n        while (kg(_i130, _o56) || t == \"character\" && yg(_i130, _o56)) {\n          e.next();\n          _o56 = e.position.offset - n.startOffset;\n        }\n      }\n\n      return e.position;\n    }\n\n    function Jg(e, t) {\n      var n = e.position.textNode;\n\n      if (n) {\n        var _i131 = e.position.offset - n.startOffset;\n\n        while (!Xg(n.data, _i131, t) && !Gg(n, _i131, t)) {\n          e.next();\n\n          var _o57 = t ? e.position.nodeAfter : e.position.nodeBefore;\n\n          if (_o57 && _o57.is(\"text\")) {\n            var _i132 = _o57.data.charAt(t ? 0 : _o57.data.length - 1);\n\n            if (!Wg.includes(_i132)) {\n              e.next();\n              n = e.position.textNode;\n            }\n          }\n\n          _i131 = e.position.offset - n.startOffset;\n        }\n      }\n\n      return e.position;\n    }\n\n    function Qg(e, t) {\n      var n = e.root;\n\n      var i = $h._createAt(n, t ? \"end\" : 0);\n\n      if (t) {\n        return new qh(e, i);\n      } else {\n        return new qh(i, e);\n      }\n    }\n\n    function Xg(e, t, n) {\n      var i = t + (n ? 0 : -1);\n      return Wg.includes(e.charAt(i));\n    }\n\n    function Gg(e, t, n) {\n      return t === (n ? e.endOffset : 0);\n    }\n\n    function Kg(e, t) {\n      return e.change(function (e) {\n        var n = e.createDocumentFragment();\n        var i = t.getFirstRange();\n\n        if (!i || i.isCollapsed) {\n          return n;\n        }\n\n        var o = i.start.root;\n        var s = i.start.getCommonPath(i.end);\n        var r = o.getNodeByPath(s);\n        var a;\n\n        if (i.start.parent == i.end.parent) {\n          a = i;\n        } else {\n          a = e.createRange(e.createPositionAt(r, i.start.path[s.length]), e.createPositionAt(r, i.end.path[s.length] + 1));\n        }\n\n        var c = a.end.offset - a.start.offset;\n\n        var _iterator241 = _createForOfIteratorHelper(a.getItems({\n          shallow: true\n        })),\n            _step241;\n\n        try {\n          for (_iterator241.s(); !(_step241 = _iterator241.n()).done;) {\n            var _t186 = _step241.value;\n\n            if (_t186.is(\"textProxy\")) {\n              e.appendText(_t186.data, _t186.getAttributes(), n);\n            } else {\n              e.append(_t186._clone(true), n);\n            }\n          }\n        } catch (err) {\n          _iterator241.e(err);\n        } finally {\n          _iterator241.f();\n        }\n\n        if (a != i) {\n          var _t185 = i._getTransformedByMove(a.start, e.createPositionAt(n, 0), c)[0];\n\n          var _o58 = e.createRange(e.createPositionAt(n, 0), _t185.start);\n\n          var _s26 = e.createRange(_t185.end, e.createPositionAt(n, \"end\"));\n\n          Zg(_s26, e);\n          Zg(_o58, e);\n        }\n\n        return n;\n      });\n    }\n\n    function Zg(e, t) {\n      var n = [];\n      Array.from(e.getItems({\n        direction: \"backward\"\n      })).map(function (e) {\n        return t.createRangeOn(e);\n      }).filter(function (t) {\n        var n = (t.start.isAfter(e.start) || t.start.isEqual(e.start)) && (t.end.isBefore(e.end) || t.end.isEqual(e.end));\n        return n;\n      }).forEach(function (e) {\n        n.push(e.start.parent);\n        t.remove(e);\n      });\n      n.forEach(function (e) {\n        var n = e;\n\n        while (n.parent && n.isEmpty) {\n          var _e192 = t.createRangeOn(n);\n\n          n = n.parent;\n          t.remove(_e192);\n        }\n      });\n    }\n\n    function ep(e) {\n      e.document.registerPostFixer(function (t) {\n        return tp(t, e);\n      });\n    }\n\n    function tp(e, t) {\n      var n = t.document.selection;\n      var i = t.schema;\n      var o = [];\n      var s = false;\n\n      var _iterator242 = _createForOfIteratorHelper(n.getRanges()),\n          _step242;\n\n      try {\n        for (_iterator242.s(); !(_step242 = _iterator242.n()).done;) {\n          var _e193 = _step242.value;\n\n          var _t187 = np(_e193, i);\n\n          if (_t187) {\n            o.push(_t187);\n            s = true;\n          } else {\n            o.push(_e193);\n          }\n        }\n      } catch (err) {\n        _iterator242.e(err);\n      } finally {\n        _iterator242.f();\n      }\n\n      if (s) {\n        e.setSelection(ap(o), {\n          backward: n.isBackward\n        });\n      }\n    }\n\n    function np(e, t) {\n      if (e.isCollapsed) {\n        return ip(e, t);\n      }\n\n      return op(e, t);\n    }\n\n    function ip(e, t) {\n      var n = e.start;\n      var i = t.getNearestSelectionRange(n);\n\n      if (!i) {\n        return null;\n      }\n\n      if (!i.isCollapsed) {\n        return i;\n      }\n\n      var o = i.start;\n\n      if (n.isEqual(o)) {\n        return null;\n      }\n\n      return new qh(o);\n    }\n\n    function op(e, t) {\n      var n = e.start;\n      var i = e.end;\n      var o = t.checkChild(n, \"$text\");\n      var s = t.checkChild(i, \"$text\");\n      var r = t.getLimitElement(n);\n      var a = t.getLimitElement(i);\n\n      if (r === a) {\n        if (o && s) {\n          return null;\n        }\n\n        if (rp(n, i, t)) {\n          var _e194 = n.nodeAfter && t.isObject(n.nodeAfter);\n\n          var _o59 = _e194 ? null : t.getNearestSelectionRange(n, \"forward\");\n\n          var _s27 = i.nodeBefore && t.isObject(i.nodeBefore);\n\n          var _r19 = _s27 ? null : t.getNearestSelectionRange(i, \"backward\");\n\n          var _a10 = _o59 ? _o59.start : n;\n\n          var _c5 = _r19 ? _r19.start : i;\n\n          return new qh(_a10, _c5);\n        }\n      }\n\n      var c = r && !r.is(\"rootElement\");\n      var l = a && !a.is(\"rootElement\");\n\n      if (c || l) {\n        var _e195 = n.nodeAfter && i.nodeBefore && n.nodeAfter.parent === i.nodeBefore.parent;\n\n        var _o60 = c && (!_e195 || !cp(n.nodeAfter, t));\n\n        var _s28 = l && (!_e195 || !cp(i.nodeBefore, t));\n\n        var _d2 = n;\n        var _u2 = i;\n\n        if (_o60) {\n          _d2 = $h._createBefore(sp(r, t));\n        }\n\n        if (_s28) {\n          _u2 = $h._createAfter(sp(a, t));\n        }\n\n        return new qh(_d2, _u2);\n      }\n\n      return null;\n    }\n\n    function sp(e, t) {\n      var n = e;\n      var i = n;\n\n      while (t.isLimit(i) && i.parent) {\n        n = i;\n        i = i.parent;\n      }\n\n      return n;\n    }\n\n    function rp(e, t, n) {\n      var i = e.nodeAfter && !n.isLimit(e.nodeAfter) || n.checkChild(e, \"$text\");\n      var o = t.nodeBefore && !n.isLimit(t.nodeBefore) || n.checkChild(t, \"$text\");\n      return i || o;\n    }\n\n    function ap(e) {\n      var t = [];\n      t.push(e.shift());\n\n      var _iterator243 = _createForOfIteratorHelper(e),\n          _step243;\n\n      try {\n        for (_iterator243.s(); !(_step243 = _iterator243.n()).done;) {\n          var _n164 = _step243.value;\n\n          var _e196 = t.pop();\n\n          if (_n164.isIntersecting(_e196)) {\n            var _i133 = _e196.start.isAfter(_n164.start) ? _n164.start : _e196.start;\n\n            var _o61 = _e196.end.isAfter(_n164.end) ? _e196.end : _n164.end;\n\n            var _s29 = new qh(_i133, _o61);\n\n            t.push(_s29);\n          } else {\n            t.push(_e196);\n            t.push(_n164);\n          }\n        }\n      } catch (err) {\n        _iterator243.e(err);\n      } finally {\n        _iterator243.f();\n      }\n\n      return t;\n    }\n\n    function cp(e, t) {\n      return e && t.isObject(e);\n    }\n\n    var lp = /*#__PURE__*/function () {\n      function lp() {\n        var _this70 = this;\n\n        _classCallCheck(this, lp);\n\n        this.markers = new Tg();\n        this.document = new Ag(this);\n        this.schema = new um();\n        this._pendingChanges = [];\n        this._currentWriter = null;\n        [\"insertContent\", \"deleteContent\", \"modifySelection\", \"getSelectedContent\", \"applyOperation\"].forEach(function (e) {\n          return _this70.decorate(e);\n        });\n        this.on(\"applyOperation\", function (e, t) {\n          var n = t[0];\n\n          n._validate();\n        }, {\n          priority: \"highest\"\n        });\n        this.schema.register(\"$root\", {\n          isLimit: true\n        });\n        this.schema.register(\"$block\", {\n          allowIn: \"$root\",\n          isBlock: true\n        });\n        this.schema.register(\"$text\", {\n          allowIn: \"$block\",\n          isInline: true\n        });\n        this.schema.register(\"$clipboardHolder\", {\n          allowContentOf: \"$root\",\n          isLimit: true\n        });\n        this.schema.extend(\"$text\", {\n          allowIn: \"$clipboardHolder\"\n        });\n        this.schema.register(\"$marker\");\n        this.schema.addChildCheck(function (e, t) {\n          if (t.name === \"$marker\") {\n            return true;\n          }\n        });\n        ep(this);\n      }\n\n      _createClass(lp, [{\n        key: \"change\",\n        value: function change(e) {\n          try {\n            if (this._pendingChanges.length === 0) {\n              this._pendingChanges.push({\n                batch: new Dm(),\n                callback: e\n              });\n\n              return this._runPendingChanges()[0];\n            } else {\n              return e(this._currentWriter);\n            }\n          } catch (e) {\n            rr[\"b\"].rethrowUnexpectedError(e, this);\n          }\n        }\n      }, {\n        key: \"enqueueChange\",\n        value: function enqueueChange(e, t) {\n          try {\n            if (typeof e === \"string\") {\n              e = new Dm(e);\n            } else if (typeof e == \"function\") {\n              t = e;\n              e = new Dm();\n            }\n\n            this._pendingChanges.push({\n              batch: e,\n              callback: t\n            });\n\n            if (this._pendingChanges.length == 1) {\n              this._runPendingChanges();\n            }\n          } catch (e) {\n            rr[\"b\"].rethrowUnexpectedError(e, this);\n          }\n        }\n      }, {\n        key: \"applyOperation\",\n        value: function applyOperation(e) {\n          e._execute();\n        }\n      }, {\n        key: \"insertContent\",\n        value: function insertContent(e, t, n) {\n          return Rg(this, e, t, n);\n        }\n      }, {\n        key: \"deleteContent\",\n        value: function deleteContent(e, t) {\n          jg(this, e, t);\n        }\n      }, {\n        key: \"modifySelection\",\n        value: function modifySelection(e, t) {\n          $g(this, e, t);\n        }\n      }, {\n        key: \"getSelectedContent\",\n        value: function getSelectedContent(e) {\n          return Kg(this, e);\n        }\n      }, {\n        key: \"hasContent\",\n        value: function hasContent(e, t) {\n          var n = e instanceof Fh ? qh._createIn(e) : e;\n\n          if (n.isCollapsed) {\n            return false;\n          }\n\n          var _iterator244 = _createForOfIteratorHelper(this.markers.getMarkersIntersectingRange(n)),\n              _step244;\n\n          try {\n            for (_iterator244.s(); !(_step244 = _iterator244.n()).done;) {\n              var _e197 = _step244.value;\n\n              if (_e197.affectsData) {\n                return true;\n              }\n            }\n          } catch (err) {\n            _iterator244.e(err);\n          } finally {\n            _iterator244.f();\n          }\n\n          var _ref15 = t || {},\n              _ref15$ignoreWhitespa = _ref15.ignoreWhitespaces,\n              i = _ref15$ignoreWhitespa === void 0 ? false : _ref15$ignoreWhitespa;\n\n          var _iterator245 = _createForOfIteratorHelper(n.getItems()),\n              _step245;\n\n          try {\n            for (_iterator245.s(); !(_step245 = _iterator245.n()).done;) {\n              var _e198 = _step245.value;\n\n              if (_e198.is(\"textProxy\")) {\n                if (!i) {\n                  return true;\n                } else if (_e198.data.search(/\\S/) !== -1) {\n                  return true;\n                }\n              } else if (this.schema.isObject(_e198)) {\n                return true;\n              }\n            }\n          } catch (err) {\n            _iterator245.e(err);\n          } finally {\n            _iterator245.f();\n          }\n\n          return false;\n        }\n      }, {\n        key: \"createPositionFromPath\",\n        value: function createPositionFromPath(e, t, n) {\n          return new $h(e, t, n);\n        }\n      }, {\n        key: \"createPositionAt\",\n        value: function createPositionAt(e, t) {\n          return $h._createAt(e, t);\n        }\n      }, {\n        key: \"createPositionAfter\",\n        value: function createPositionAfter(e) {\n          return $h._createAfter(e);\n        }\n      }, {\n        key: \"createPositionBefore\",\n        value: function createPositionBefore(e) {\n          return $h._createBefore(e);\n        }\n      }, {\n        key: \"createRange\",\n        value: function createRange(e, t) {\n          return new qh(e, t);\n        }\n      }, {\n        key: \"createRangeIn\",\n        value: function createRangeIn(e) {\n          return qh._createIn(e);\n        }\n      }, {\n        key: \"createRangeOn\",\n        value: function createRangeOn(e) {\n          return qh._createOn(e);\n        }\n      }, {\n        key: \"createSelection\",\n        value: function createSelection(e, t, n) {\n          return new Kh(e, t, n);\n        }\n      }, {\n        key: \"createBatch\",\n        value: function createBatch(e) {\n          return new Dm(e);\n        }\n      }, {\n        key: \"createOperationFromJSON\",\n        value: function createOperationFromJSON(e) {\n          return Sg.fromJSON(e, this.document);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.document.destroy();\n          this.stopListening();\n        }\n      }, {\n        key: \"_runPendingChanges\",\n        value: function _runPendingChanges() {\n          var e = [];\n          this.fire(\"_beforeChanges\");\n\n          while (this._pendingChanges.length) {\n            var _t188 = this._pendingChanges[0].batch;\n            this._currentWriter = new ag(this, _t188);\n\n            var _n165 = this._pendingChanges[0].callback(this._currentWriter);\n\n            e.push(_n165);\n\n            this.document._handleChangeBlock(this._currentWriter);\n\n            this._pendingChanges.shift();\n\n            this._currentWriter = null;\n          }\n\n          this.fire(\"_afterChanges\");\n          return e;\n        }\n      }]);\n\n      return lp;\n    }();\n\n    kr(lp, Qc);\n\n    var dp = /*#__PURE__*/function () {\n      function dp() {\n        _classCallCheck(this, dp);\n\n        this._listener = Object.create(Wd);\n      }\n\n      _createClass(dp, [{\n        key: \"listenTo\",\n        value: function listenTo(e) {\n          var _this71 = this;\n\n          this._listener.listenTo(e, \"keydown\", function (e, t) {\n            _this71._listener.fire(\"_keydown:\" + Ll(t), t);\n          });\n        }\n      }, {\n        key: \"set\",\n        value: function set(e, t) {\n          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n          var i = jl(e);\n          var o = n.priority;\n\n          this._listener.listenTo(this._listener, \"_keydown:\" + i, function (e, n) {\n            t(n, function () {\n              n.preventDefault();\n              n.stopPropagation();\n              e.stop();\n            });\n            e.return = true;\n          }, {\n            priority: o\n          });\n        }\n      }, {\n        key: \"press\",\n        value: function press(e) {\n          return !!this._listener.fire(\"_keydown:\" + Ll(e), e);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this._listener.stopListening();\n        }\n      }]);\n\n      return dp;\n    }();\n\n    var up = /*#__PURE__*/function (_dp) {\n      _inherits(up, _dp);\n\n      var _super36 = _createSuper(up);\n\n      function up(e) {\n        var _this72;\n\n        _classCallCheck(this, up);\n\n        _this72 = _super36.call(this);\n        _this72.editor = e;\n        return _this72;\n      }\n\n      _createClass(up, [{\n        key: \"set\",\n        value: function set(e, t) {\n          var _this73 = this;\n\n          var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n          if (typeof t == \"string\") {\n            var _e199 = t;\n\n            t = function t(_t189, n) {\n              _this73.editor.execute(_e199);\n\n              n();\n            };\n          }\n\n          _get(_getPrototypeOf(up.prototype), \"set\", this).call(this, e, t, n);\n        }\n      }]);\n\n      return up;\n    }(dp);\n\n    var hp = /*#__PURE__*/function () {\n      function hp() {\n        var _this74 = this;\n\n        var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n        _classCallCheck(this, hp);\n\n        this._context = e.context || new Or({\n          language: e.language\n        });\n\n        this._context._addEditor(this, !e.context);\n\n        var t = Array.from(this.constructor.builtinPlugins || []);\n        this.config = new Qs(e, this.constructor.defaultConfig);\n        this.config.define(\"plugins\", t);\n        this.config.define(this._context._getEditorConfig());\n        this.plugins = new xr(this, t, this._context.plugins);\n        this.locale = this._context.locale;\n        this.t = this.locale.t;\n        this.commands = new cm();\n        this.set(\"state\", \"initializing\");\n        this.once(\"ready\", function () {\n          return _this74.state = \"ready\";\n        }, {\n          priority: \"high\"\n        });\n        this.once(\"destroy\", function () {\n          return _this74.state = \"destroyed\";\n        }, {\n          priority: \"high\"\n        });\n        this.set(\"isReadOnly\", false);\n        this.model = new lp();\n        var n = new Nc();\n        this.data = new Om(this.model, n);\n        this.editing = new am(this.model, n);\n        this.editing.view.document.bind(\"isReadOnly\").to(this);\n        this.conversion = new Rm([this.editing.downcastDispatcher, this.data.downcastDispatcher], this.data.upcastDispatcher);\n        this.conversion.addAlias(\"dataDowncast\", this.data.downcastDispatcher);\n        this.conversion.addAlias(\"editingDowncast\", this.editing.downcastDispatcher);\n        this.keystrokes = new up(this);\n        this.keystrokes.listenTo(this.editing.view.document);\n      }\n\n      _createClass(hp, [{\n        key: \"initPlugins\",\n        value: function initPlugins() {\n          var e = this.config;\n          var t = e.get(\"plugins\");\n          var n = e.get(\"removePlugins\") || [];\n          var i = e.get(\"extraPlugins\") || [];\n          return this.plugins.init(t.concat(i), n);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          var _this75 = this;\n\n          var e = Promise.resolve();\n\n          if (this.state == \"initializing\") {\n            e = new Promise(function (e) {\n              return _this75.once(\"ready\", e);\n            });\n          }\n\n          return e.then(function () {\n            _this75.fire(\"destroy\");\n\n            _this75.stopListening();\n\n            _this75.commands.destroy();\n          }).then(function () {\n            return _this75.plugins.destroy();\n          }).then(function () {\n            _this75.model.destroy();\n\n            _this75.data.destroy();\n\n            _this75.editing.destroy();\n\n            _this75.keystrokes.destroy();\n          }).then(function () {\n            return _this75._context._removeEditor(_this75);\n          });\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          try {\n            var _this$commands;\n\n            (_this$commands = this.commands).execute.apply(_this$commands, arguments);\n          } catch (e) {\n            rr[\"b\"].rethrowUnexpectedError(e, this);\n          }\n        }\n      }]);\n\n      return hp;\n    }();\n\n    kr(hp, Qc);\n    var fp = {\n      setData: function setData(e) {\n        this.data.set(e);\n      },\n      getData: function getData(e) {\n        return this.data.get(e);\n      }\n    };\n    var mp = fp;\n\n    function gp(e, t) {\n      if (e instanceof HTMLTextAreaElement) {\n        e.value = t;\n      }\n\n      e.innerHTML = t;\n    }\n\n    var pp = {\n      updateSourceElement: function updateSourceElement() {\n        if (!this.sourceElement) {\n          throw new rr[\"b\"](\"editor-missing-sourceelement: Cannot update the source element of a detached editor.\", this);\n        }\n\n        gp(this.sourceElement, this.data.get());\n      }\n    };\n    var bp = pp;\n\n    function wp(e) {\n      if (!me(e.updateSourceElement)) {\n        throw new rr[\"b\"](\"attachtoform-missing-elementapi-interface: Editor passed to attachToForm() must implement ElementApi.\", e);\n      }\n\n      var t = e.sourceElement;\n\n      if (t && t.tagName.toLowerCase() === \"textarea\" && t.form) {\n        var _n166;\n\n        var _i134 = t.form;\n\n        var _o62 = function _o62() {\n          return e.updateSourceElement();\n        };\n\n        if (me(_i134.submit)) {\n          _n166 = _i134.submit;\n\n          _i134.submit = function () {\n            _o62();\n\n            _n166.apply(_i134);\n          };\n        }\n\n        _i134.addEventListener(\"submit\", _o62);\n\n        e.on(\"destroy\", function () {\n          _i134.removeEventListener(\"submit\", _o62);\n\n          if (_n166) {\n            _i134.submit = _n166;\n          }\n        });\n      }\n    }\n\n    var _p = /*#__PURE__*/function () {\n      function _p() {\n        _classCallCheck(this, _p);\n      }\n\n      _createClass(_p, [{\n        key: \"getHtml\",\n        value: function getHtml(e) {\n          var t = document.implementation.createHTMLDocument(\"\");\n          var n = t.createElement(\"div\");\n          n.appendChild(e);\n          return n.innerHTML;\n        }\n      }]);\n\n      return _p;\n    }();\n\n    var vp = /*#__PURE__*/function () {\n      function vp(e) {\n        _classCallCheck(this, vp);\n\n        this._domParser = new DOMParser();\n        this._domConverter = new Dd(e, {\n          blockFillerMode: \"nbsp\"\n        });\n        this._htmlWriter = new _p();\n      }\n\n      _createClass(vp, [{\n        key: \"toData\",\n        value: function toData(e) {\n          var t = this._domConverter.viewToDom(e, document);\n\n          return this._htmlWriter.getHtml(t);\n        }\n      }, {\n        key: \"toView\",\n        value: function toView(e) {\n          var t = this._toDom(e);\n\n          return this._domConverter.domToView(t);\n        }\n      }, {\n        key: \"_toDom\",\n        value: function _toDom(e) {\n          var t = this._domParser.parseFromString(e, \"text/html\");\n\n          var n = t.createDocumentFragment();\n          var i = t.body.childNodes;\n\n          while (i.length > 0) {\n            n.appendChild(i[0]);\n          }\n\n          return n;\n        }\n      }]);\n\n      return vp;\n    }();\n\n    var kp = /*#__PURE__*/function () {\n      function kp(e) {\n        _classCallCheck(this, kp);\n\n        this.editor = e;\n        this._components = new Map();\n      }\n\n      _createClass(kp, [{\n        key: \"names\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function names() {\n          var _iterator246, _step246, _e200;\n\n          return _regeneratorRuntime().wrap(function names$(_context34) {\n            while (1) {\n              switch (_context34.prev = _context34.next) {\n                case 0:\n                  _iterator246 = _createForOfIteratorHelper(this._components.values());\n                  _context34.prev = 1;\n\n                  _iterator246.s();\n\n                case 3:\n                  if ((_step246 = _iterator246.n()).done) {\n                    _context34.next = 9;\n                    break;\n                  }\n\n                  _e200 = _step246.value;\n                  _context34.next = 7;\n                  return _e200.originalName;\n\n                case 7:\n                  _context34.next = 3;\n                  break;\n\n                case 9:\n                  _context34.next = 14;\n                  break;\n\n                case 11:\n                  _context34.prev = 11;\n                  _context34.t0 = _context34[\"catch\"](1);\n\n                  _iterator246.e(_context34.t0);\n\n                case 14:\n                  _context34.prev = 14;\n\n                  _iterator246.f();\n\n                  return _context34.finish(14);\n\n                case 17:\n                case \"end\":\n                  return _context34.stop();\n              }\n            }\n          }, names, this, [[1, 11, 14, 17]]);\n        })\n      }, {\n        key: \"add\",\n        value: function add(e, t) {\n          if (this.has(e)) {\n            throw new rr[\"b\"](\"componentfactory-item-exists: The item already exists in the component factory.\", this, {\n              name: e\n            });\n          }\n\n          this._components.set(yp(e), {\n            callback: t,\n            originalName: e\n          });\n        }\n      }, {\n        key: \"create\",\n        value: function create(e) {\n          if (!this.has(e)) {\n            throw new rr[\"b\"](\"componentfactory-item-missing: The required component is not registered in the factory.\", this, {\n              name: e\n            });\n          }\n\n          return this._components.get(yp(e)).callback(this.editor.locale);\n        }\n      }, {\n        key: \"has\",\n        value: function has(e) {\n          return this._components.has(yp(e));\n        }\n      }]);\n\n      return kp;\n    }();\n\n    function yp(e) {\n      return String(e).toLowerCase();\n    }\n\n    var xp = /*#__PURE__*/function () {\n      function xp() {\n        _classCallCheck(this, xp);\n\n        this.set(\"isFocused\", false);\n        this.set(\"focusedElement\", null);\n        this._elements = new Set();\n        this._nextEventLoopTimeout = null;\n      }\n\n      _createClass(xp, [{\n        key: \"add\",\n        value: function add(e) {\n          var _this76 = this;\n\n          if (this._elements.has(e)) {\n            throw new rr[\"b\"](\"focusTracker-add-element-already-exist\", this);\n          }\n\n          this.listenTo(e, \"focus\", function () {\n            return _this76._focus(e);\n          }, {\n            useCapture: true\n          });\n          this.listenTo(e, \"blur\", function () {\n            return _this76._blur();\n          }, {\n            useCapture: true\n          });\n\n          this._elements.add(e);\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(e) {\n          if (e === this.focusedElement) {\n            this._blur(e);\n          }\n\n          if (this._elements.has(e)) {\n            this.stopListening(e);\n\n            this._elements.delete(e);\n          }\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.stopListening();\n        }\n      }, {\n        key: \"_focus\",\n        value: function _focus(e) {\n          clearTimeout(this._nextEventLoopTimeout);\n          this.focusedElement = e;\n          this.isFocused = true;\n        }\n      }, {\n        key: \"_blur\",\n        value: function _blur() {\n          var _this77 = this;\n\n          clearTimeout(this._nextEventLoopTimeout);\n          this._nextEventLoopTimeout = setTimeout(function () {\n            _this77.focusedElement = null;\n            _this77.isFocused = false;\n          }, 0);\n        }\n      }]);\n\n      return xp;\n    }();\n\n    kr(xp, Wd);\n    kr(xp, Qc);\n\n    var Ap = /*#__PURE__*/function () {\n      function Ap(e) {\n        var _this78 = this;\n\n        _classCallCheck(this, Ap);\n\n        this.editor = e;\n        this.componentFactory = new kp(e);\n        this.focusTracker = new xp();\n        this._editableElementsMap = new Map();\n        this.listenTo(e.editing.view.document, \"layoutChanged\", function () {\n          return _this78.update();\n        });\n      }\n\n      _createClass(Ap, [{\n        key: \"element\",\n        get: function get() {\n          return null;\n        }\n      }, {\n        key: \"update\",\n        value: function update() {\n          this.fire(\"update\");\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.stopListening();\n          this.focusTracker.destroy();\n\n          var _iterator247 = _createForOfIteratorHelper(this._editableElementsMap.values()),\n              _step247;\n\n          try {\n            for (_iterator247.s(); !(_step247 = _iterator247.n()).done;) {\n              var _e201 = _step247.value;\n              _e201.ckeditorInstance = null;\n            }\n          } catch (err) {\n            _iterator247.e(err);\n          } finally {\n            _iterator247.f();\n          }\n\n          this._editableElementsMap = new Map();\n        }\n      }, {\n        key: \"setEditableElement\",\n        value: function setEditableElement(e, t) {\n          this._editableElementsMap.set(e, t);\n\n          if (!t.ckeditorInstance) {\n            t.ckeditorInstance = this.editor;\n          }\n        }\n      }, {\n        key: \"getEditableElement\",\n        value: function getEditableElement() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"main\";\n          return this._editableElementsMap.get(e);\n        }\n      }, {\n        key: \"getEditableElementsNames\",\n        value: function getEditableElementsNames() {\n          return this._editableElementsMap.keys();\n        }\n      }, {\n        key: \"_editableElements\",\n        get: function get() {\n          console.warn(\"editor-ui-deprecated-editable-elements: \" + \"The EditorUI#_editableElements property has been deprecated and will be removed in the near future.\", {\n            editorUI: this\n          });\n          return this._editableElementsMap;\n        }\n      }]);\n\n      return Ap;\n    }();\n\n    kr(Ap, dr);\n\n    function Cp(_ref16) {\n      var e = _ref16.origin,\n          t = _ref16.originKeystrokeHandler,\n          n = _ref16.originFocusTracker,\n          i = _ref16.toolbar,\n          o = _ref16.beforeFocus,\n          s = _ref16.afterBlur;\n      n.add(i.element);\n      t.set(\"Alt+F10\", function (e, t) {\n        if (n.isFocused && !i.focusTracker.isFocused) {\n          if (o) {\n            o();\n          }\n\n          i.focus();\n          t();\n        }\n      });\n      i.keystrokes.set(\"Esc\", function (t, n) {\n        if (i.focusTracker.isFocused) {\n          e.focus();\n\n          if (s) {\n            s();\n          }\n\n          n();\n        }\n      });\n    }\n\n    function Tp(e) {\n      if (Array.isArray(e)) {\n        return {\n          items: e\n        };\n      }\n\n      if (!e) {\n        return {\n          items: []\n        };\n      }\n\n      return Object.assign({\n        items: []\n      }, e);\n    }\n\n    var Mp = n(14);\n    var Pp = new WeakMap();\n\n    function Ep(e) {\n      var t = e.view,\n          n = e.element,\n          i = e.text,\n          _e$isDirectHost = e.isDirectHost,\n          o = _e$isDirectHost === void 0 ? true : _e$isDirectHost;\n      var s = t.document;\n\n      if (!Pp.has(s)) {\n        Pp.set(s, new Map());\n        s.registerPostFixer(function (e) {\n          return Rp(s, e);\n        });\n      }\n\n      Pp.get(s).set(n, {\n        text: i,\n        isDirectHost: o\n      });\n      t.change(function (e) {\n        return Rp(s, e);\n      });\n    }\n\n    function Sp(e, t) {\n      var n = t.document;\n      e.change(function (e) {\n        if (!Pp.has(n)) {\n          return;\n        }\n\n        var i = Pp.get(n);\n        var o = i.get(t);\n        e.removeAttribute(\"data-placeholder\", o.hostElement);\n        Op(e, o.hostElement);\n        i.delete(t);\n      });\n    }\n\n    function Ip(e, t) {\n      if (!t.hasClass(\"ck-placeholder\")) {\n        e.addClass(\"ck-placeholder\", t);\n        return true;\n      }\n\n      return false;\n    }\n\n    function Op(e, t) {\n      if (t.hasClass(\"ck-placeholder\")) {\n        e.removeClass(\"ck-placeholder\", t);\n        return true;\n      }\n\n      return false;\n    }\n\n    function Np(e) {\n      if (!e.isAttached()) {\n        return false;\n      }\n\n      var t = !Array.from(e.getChildren()).some(function (e) {\n        return !e.is(\"uiElement\");\n      });\n      var n = e.document;\n\n      if (!n.isFocused && t) {\n        return true;\n      }\n\n      var i = n.selection;\n      var o = i.anchor;\n\n      if (t && o && o.parent !== e) {\n        return true;\n      }\n\n      return false;\n    }\n\n    function Rp(e, t) {\n      var n = Pp.get(e);\n      var i = false;\n\n      var _iterator248 = _createForOfIteratorHelper(n),\n          _step248;\n\n      try {\n        for (_iterator248.s(); !(_step248 = _iterator248.n()).done;) {\n          var _step248$value = _slicedToArray(_step248.value, 2),\n              _e202 = _step248$value[0],\n              _o63 = _step248$value[1];\n\n          if (Lp(t, _e202, _o63)) {\n            i = true;\n          }\n        }\n      } catch (err) {\n        _iterator248.e(err);\n      } finally {\n        _iterator248.f();\n      }\n\n      return i;\n    }\n\n    function Lp(e, t, n) {\n      var i = n.text,\n          o = n.isDirectHost;\n      var s = o ? t : jp(t);\n      var r = false;\n\n      if (!s) {\n        return false;\n      }\n\n      n.hostElement = s;\n\n      if (s.getAttribute(\"data-placeholder\") !== i) {\n        e.setAttribute(\"data-placeholder\", i, s);\n        r = true;\n      }\n\n      if (Np(s)) {\n        if (Ip(e, s)) {\n          r = true;\n        }\n      } else if (Op(e, s)) {\n        r = true;\n      }\n\n      return r;\n    }\n\n    function jp(e) {\n      if (e.childCount === 1) {\n        var _t190 = e.getChild(0);\n\n        if (_t190.is(\"element\") && !_t190.is(\"uiElement\")) {\n          return _t190;\n        }\n      }\n\n      return null;\n    }\n\n    var Dp = /*#__PURE__*/function () {\n      function Dp() {\n        _classCallCheck(this, Dp);\n\n        this._replacedElements = [];\n      }\n\n      _createClass(Dp, [{\n        key: \"replace\",\n        value: function replace(e, t) {\n          this._replacedElements.push({\n            element: e,\n            newElement: t\n          });\n\n          e.style.display = \"none\";\n\n          if (t) {\n            e.parentNode.insertBefore(t, e.nextSibling);\n          }\n        }\n      }, {\n        key: \"restore\",\n        value: function restore() {\n          this._replacedElements.forEach(function (_ref17) {\n            var e = _ref17.element,\n                t = _ref17.newElement;\n            e.style.display = \"\";\n\n            if (t) {\n              t.remove();\n            }\n          });\n\n          this._replacedElements = [];\n        }\n      }]);\n\n      return Dp;\n    }();\n\n    var zp = /*#__PURE__*/function (_Ap) {\n      _inherits(zp, _Ap);\n\n      var _super37 = _createSuper(zp);\n\n      function zp(e, t) {\n        var _this79;\n\n        _classCallCheck(this, zp);\n\n        _this79 = _super37.call(this, e);\n        _this79.view = t;\n        _this79._toolbarConfig = Tp(e.config.get(\"toolbar\"));\n        _this79._elementReplacer = new Dp();\n        return _this79;\n      }\n\n      _createClass(zp, [{\n        key: \"element\",\n        get: function get() {\n          return this.view.element;\n        }\n      }, {\n        key: \"init\",\n        value: function init(e) {\n          var t = this.editor;\n          var n = this.view;\n          var i = t.editing.view;\n          var o = n.editable;\n          var s = i.document.getRoot();\n          o.name = s.rootName;\n          n.render();\n          var r = o.element;\n          this.setEditableElement(o.name, r);\n          this.focusTracker.add(r);\n          n.editable.bind(\"isFocused\").to(this.focusTracker);\n          i.attachDomRoot(r);\n\n          if (e) {\n            this._elementReplacer.replace(e, this.element);\n          }\n\n          this._initPlaceholder();\n\n          this._initToolbar();\n\n          this.fire(\"ready\");\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          var e = this.view;\n          var t = this.editor.editing.view;\n\n          this._elementReplacer.restore();\n\n          t.detachDomRoot(e.editable.name);\n          e.destroy();\n\n          _get(_getPrototypeOf(zp.prototype), \"destroy\", this).call(this);\n        }\n      }, {\n        key: \"_initToolbar\",\n        value: function _initToolbar() {\n          var e = this.editor;\n          var t = this.view;\n          var n = e.editing.view;\n          t.stickyPanel.bind(\"isActive\").to(this.focusTracker, \"isFocused\");\n          t.stickyPanel.limiterElement = t.element;\n\n          if (this._toolbarConfig.viewportTopOffset) {\n            t.stickyPanel.viewportTopOffset = this._toolbarConfig.viewportTopOffset;\n          }\n\n          t.toolbar.fillFromConfig(this._toolbarConfig.items, this.componentFactory);\n          Cp({\n            origin: n,\n            originFocusTracker: this.focusTracker,\n            originKeystrokeHandler: e.keystrokes,\n            toolbar: t.toolbar\n          });\n        }\n      }, {\n        key: \"_initPlaceholder\",\n        value: function _initPlaceholder() {\n          var e = this.editor;\n          var t = e.editing.view;\n          var n = t.document.getRoot();\n          var i = e.sourceElement;\n          var o = e.config.get(\"placeholder\") || i && i.tagName.toLowerCase() === \"textarea\" && i.getAttribute(\"placeholder\");\n\n          if (o) {\n            Ep({\n              view: t,\n              element: n,\n              text: o,\n              isDirectHost: false\n            });\n          }\n        }\n      }]);\n\n      return zp;\n    }(Ap);\n\n    var Bp = /*#__PURE__*/function (_yr) {\n      _inherits(Bp, _yr);\n\n      var _super38 = _createSuper(Bp);\n\n      function Bp(e) {\n        var _this80;\n\n        _classCallCheck(this, Bp);\n\n        _this80 = _super38.call(this, {\n          idProperty: \"viewUid\"\n        });\n\n        _this80.on(\"add\", function (e, t, n) {\n          if (!t.isRendered) {\n            t.render();\n          }\n\n          if (t.element && _this80._parentElement) {\n            _this80._parentElement.insertBefore(t.element, _this80._parentElement.children[n]);\n          }\n        });\n\n        _this80.on(\"remove\", function (e, t) {\n          if (t.element && _this80._parentElement) {\n            t.element.remove();\n          }\n        });\n\n        _this80.locale = e;\n        _this80._parentElement = null;\n        return _this80;\n      }\n\n      _createClass(Bp, [{\n        key: \"destroy\",\n        value: function destroy() {\n          this.map(function (e) {\n            return e.destroy();\n          });\n        }\n      }, {\n        key: \"setParent\",\n        value: function setParent(e) {\n          this._parentElement = e;\n        }\n      }, {\n        key: \"delegate\",\n        value: function delegate() {\n          var _this81 = this;\n\n          for (var _len17 = arguments.length, e = new Array(_len17), _key17 = 0; _key17 < _len17; _key17++) {\n            e[_key17] = arguments[_key17];\n          }\n\n          if (!e.length || !Vp(e)) {\n            throw new rr[\"b\"](\"ui-viewcollection-delegate-wrong-events: All event names must be strings.\", this);\n          }\n\n          return {\n            to: function to(t) {\n              var _iterator249 = _createForOfIteratorHelper(_this81),\n                  _step249;\n\n              try {\n                for (_iterator249.s(); !(_step249 = _iterator249.n()).done;) {\n                  var _n169 = _step249.value;\n\n                  var _iterator252 = _createForOfIteratorHelper(e),\n                      _step252;\n\n                  try {\n                    for (_iterator252.s(); !(_step252 = _iterator252.n()).done;) {\n                      var _i135 = _step252.value;\n\n                      _n169.delegate(_i135).to(t);\n                    }\n                  } catch (err) {\n                    _iterator252.e(err);\n                  } finally {\n                    _iterator252.f();\n                  }\n                }\n              } catch (err) {\n                _iterator249.e(err);\n              } finally {\n                _iterator249.f();\n              }\n\n              _this81.on(\"add\", function (n, i) {\n                var _iterator250 = _createForOfIteratorHelper(e),\n                    _step250;\n\n                try {\n                  for (_iterator250.s(); !(_step250 = _iterator250.n()).done;) {\n                    var _n167 = _step250.value;\n                    i.delegate(_n167).to(t);\n                  }\n                } catch (err) {\n                  _iterator250.e(err);\n                } finally {\n                  _iterator250.f();\n                }\n              });\n\n              _this81.on(\"remove\", function (n, i) {\n                var _iterator251 = _createForOfIteratorHelper(e),\n                    _step251;\n\n                try {\n                  for (_iterator251.s(); !(_step251 = _iterator251.n()).done;) {\n                    var _n168 = _step251.value;\n                    i.stopDelegating(_n168, t);\n                  }\n                } catch (err) {\n                  _iterator251.e(err);\n                } finally {\n                  _iterator251.f();\n                }\n              });\n            }\n          };\n        }\n      }]);\n\n      return Bp;\n    }(yr);\n\n    function Vp(e) {\n      return e.every(function (e) {\n        return typeof e == \"string\";\n      });\n    }\n\n    var Fp = \"http://www.w3.org/1999/xhtml\";\n\n    var Hp = /*#__PURE__*/function () {\n      function Hp(e) {\n        _classCallCheck(this, Hp);\n\n        Object.assign(this, Zp(Kp(e)));\n        this._isRendered = false;\n        this._revertData = null;\n      }\n\n      _createClass(Hp, [{\n        key: \"render\",\n        value: function render() {\n          var e = this._renderNode({\n            intoFragment: true\n          });\n\n          this._isRendered = true;\n          return e;\n        }\n      }, {\n        key: \"apply\",\n        value: function apply(e) {\n          this._revertData = hb();\n\n          this._renderNode({\n            node: e,\n            isApplying: true,\n            revertData: this._revertData\n          });\n\n          return e;\n        }\n      }, {\n        key: \"revert\",\n        value: function revert(e) {\n          if (!this._revertData) {\n            throw new rr[\"b\"](\"ui-template-revert-not-applied: Attempting to revert a template which has not been applied yet.\", [this, e]);\n          }\n\n          this._revertTemplateFromNode(e, this._revertData);\n        }\n      }, {\n        key: \"getViews\",\n        value: /*#__PURE__*/_regeneratorRuntime().mark(function getViews() {\n          var _marked5, e;\n\n          return _regeneratorRuntime().wrap(function getViews$(_context36) {\n            while (1) {\n              switch (_context36.prev = _context36.next) {\n                case 0:\n                  e = function _e203(t) {\n                    var _iterator253, _step253, _n170;\n\n                    return _regeneratorRuntime().wrap(function e$(_context35) {\n                      while (1) {\n                        switch (_context35.prev = _context35.next) {\n                          case 0:\n                            if (!t.children) {\n                              _context35.next = 23;\n                              break;\n                            }\n\n                            _iterator253 = _createForOfIteratorHelper(t.children);\n                            _context35.prev = 2;\n\n                            _iterator253.s();\n\n                          case 4:\n                            if ((_step253 = _iterator253.n()).done) {\n                              _context35.next = 15;\n                              break;\n                            }\n\n                            _n170 = _step253.value;\n\n                            if (!lb(_n170)) {\n                              _context35.next = 11;\n                              break;\n                            }\n\n                            _context35.next = 9;\n                            return _n170;\n\n                          case 9:\n                            _context35.next = 13;\n                            break;\n\n                          case 11:\n                            if (!db(_n170)) {\n                              _context35.next = 13;\n                              break;\n                            }\n\n                            return _context35.delegateYield(e(_n170), \"t0\", 13);\n\n                          case 13:\n                            _context35.next = 4;\n                            break;\n\n                          case 15:\n                            _context35.next = 20;\n                            break;\n\n                          case 17:\n                            _context35.prev = 17;\n                            _context35.t1 = _context35[\"catch\"](2);\n\n                            _iterator253.e(_context35.t1);\n\n                          case 20:\n                            _context35.prev = 20;\n\n                            _iterator253.f();\n\n                            return _context35.finish(20);\n\n                          case 23:\n                          case \"end\":\n                            return _context35.stop();\n                        }\n                      }\n                    }, _marked5, null, [[2, 17, 20, 23]]);\n                  };\n\n                  _marked5 = /*#__PURE__*/_regeneratorRuntime().mark(e);\n                  return _context36.delegateYield(e(this), \"t0\", 3);\n\n                case 3:\n                case \"end\":\n                  return _context36.stop();\n              }\n            }\n          }, getViews, this);\n        })\n      }, {\n        key: \"_renderNode\",\n        value: function _renderNode(e) {\n          var t;\n\n          if (e.node) {\n            t = this.tag && this.text;\n          } else {\n            t = this.tag ? this.text : !this.text;\n          }\n\n          if (t) {\n            throw new rr[\"b\"]('ui-template-wrong-syntax: Node definition must have either \"tag\" or \"text\" when rendering a new Node.', this);\n          }\n\n          if (this.text) {\n            return this._renderText(e);\n          } else {\n            return this._renderElement(e);\n          }\n        }\n      }, {\n        key: \"_renderElement\",\n        value: function _renderElement(e) {\n          var t = e.node;\n\n          if (!t) {\n            t = e.node = document.createElementNS(this.ns || Fp, this.tag);\n          }\n\n          this._renderAttributes(e);\n\n          this._renderElementChildren(e);\n\n          this._setUpListeners(e);\n\n          return t;\n        }\n      }, {\n        key: \"_renderText\",\n        value: function _renderText(e) {\n          var t = e.node;\n\n          if (t) {\n            e.revertData.text = t.textContent;\n          } else {\n            t = e.node = document.createTextNode(\"\");\n          }\n\n          if (qp(this.text)) {\n            this._bindToObservable({\n              schema: this.text,\n              updater: Qp(t),\n              data: e\n            });\n          } else {\n            t.textContent = this.text.join(\"\");\n          }\n\n          return t;\n        }\n      }, {\n        key: \"_renderAttributes\",\n        value: function _renderAttributes(e) {\n          var t, n, i, o;\n\n          if (!this.attributes) {\n            return;\n          }\n\n          var s = e.node;\n          var r = e.revertData;\n\n          for (t in this.attributes) {\n            i = s.getAttribute(t);\n            n = this.attributes[t];\n\n            if (r) {\n              r.attributes[t] = i;\n            }\n\n            o = ce(n[0]) && n[0].ns ? n[0].ns : null;\n\n            if (qp(n)) {\n              var _a11 = o ? n[0].value : n;\n\n              if (r && fb(t)) {\n                _a11.unshift(i);\n              }\n\n              this._bindToObservable({\n                schema: _a11,\n                updater: Xp(s, t, o),\n                data: e\n              });\n            } else if (t == \"style\" && typeof n[0] !== \"string\") {\n              this._renderStyleAttribute(n[0], e);\n            } else {\n              if (r && i && fb(t)) {\n                n.unshift(i);\n              }\n\n              n = n.map(function (e) {\n                return e ? e.value || e : e;\n              }).reduce(function (e, t) {\n                return e.concat(t);\n              }, []).reduce(sb, \"\");\n\n              if (!cb(n)) {\n                s.setAttributeNS(o, t, n);\n              }\n            }\n          }\n        }\n      }, {\n        key: \"_renderStyleAttribute\",\n        value: function _renderStyleAttribute(e, t) {\n          var n = t.node;\n\n          for (var _i136 in e) {\n            var _o64 = e[_i136];\n\n            if (qp(_o64)) {\n              this._bindToObservable({\n                schema: [_o64],\n                updater: Gp(n, _i136),\n                data: t\n              });\n            } else {\n              n.style[_i136] = _o64;\n            }\n          }\n        }\n      }, {\n        key: \"_renderElementChildren\",\n        value: function _renderElementChildren(e) {\n          var t = e.node;\n          var n = e.intoFragment ? document.createDocumentFragment() : t;\n          var i = e.isApplying;\n          var o = 0;\n\n          var _iterator254 = _createForOfIteratorHelper(this.children),\n              _step254;\n\n          try {\n            for (_iterator254.s(); !(_step254 = _iterator254.n()).done;) {\n              var _s30 = _step254.value;\n\n              if (ub(_s30)) {\n                if (!i) {\n                  _s30.setParent(t);\n\n                  var _iterator255 = _createForOfIteratorHelper(_s30),\n                      _step255;\n\n                  try {\n                    for (_iterator255.s(); !(_step255 = _iterator255.n()).done;) {\n                      var _e204 = _step255.value;\n                      n.appendChild(_e204.element);\n                    }\n                  } catch (err) {\n                    _iterator255.e(err);\n                  } finally {\n                    _iterator255.f();\n                  }\n                }\n              } else if (lb(_s30)) {\n                if (!i) {\n                  if (!_s30.isRendered) {\n                    _s30.render();\n                  }\n\n                  n.appendChild(_s30.element);\n                }\n              } else if (xd(_s30)) {\n                n.appendChild(_s30);\n              } else {\n                if (i) {\n                  var _t191 = e.revertData;\n\n                  var _i137 = hb();\n\n                  _t191.children.push(_i137);\n\n                  _s30._renderNode({\n                    node: n.childNodes[o++],\n                    isApplying: true,\n                    revertData: _i137\n                  });\n                } else {\n                  n.appendChild(_s30.render());\n                }\n              }\n            }\n          } catch (err) {\n            _iterator254.e(err);\n          } finally {\n            _iterator254.f();\n          }\n\n          if (e.intoFragment) {\n            t.appendChild(n);\n          }\n        }\n      }, {\n        key: \"_setUpListeners\",\n        value: function _setUpListeners(e) {\n          var _this82 = this;\n\n          if (!this.eventListeners) {\n            return;\n          }\n\n          var _loop4 = function _loop4(_t192) {\n            var n = _this82.eventListeners[_t192].map(function (n) {\n              var _t192$split = _t192.split(\"@\"),\n                  _t192$split2 = _slicedToArray(_t192$split, 2),\n                  i = _t192$split2[0],\n                  o = _t192$split2[1];\n\n              return n.activateDomEventListener(i, o, e);\n            });\n\n            if (e.revertData) {\n              e.revertData.bindings.push(n);\n            }\n          };\n\n          for (var _t192 in this.eventListeners) {\n            _loop4(_t192);\n          }\n        }\n      }, {\n        key: \"_bindToObservable\",\n        value: function _bindToObservable(_ref18) {\n          var e = _ref18.schema,\n              t = _ref18.updater,\n              n = _ref18.data;\n          var i = n.revertData;\n          Jp(e, t, n);\n          var o = e.filter(function (e) {\n            return !cb(e);\n          }).filter(function (e) {\n            return e.observable;\n          }).map(function (i) {\n            return i.activateAttributeListener(e, t, n);\n          });\n\n          if (i) {\n            i.bindings.push(o);\n          }\n        }\n      }, {\n        key: \"_revertTemplateFromNode\",\n        value: function _revertTemplateFromNode(e, t) {\n          var _iterator256 = _createForOfIteratorHelper(t.bindings),\n              _step256;\n\n          try {\n            for (_iterator256.s(); !(_step256 = _iterator256.n()).done;) {\n              var _e205 = _step256.value;\n\n              var _iterator257 = _createForOfIteratorHelper(_e205),\n                  _step257;\n\n              try {\n                for (_iterator257.s(); !(_step257 = _iterator257.n()).done;) {\n                  var _t193 = _step257.value;\n\n                  _t193();\n                }\n              } catch (err) {\n                _iterator257.e(err);\n              } finally {\n                _iterator257.f();\n              }\n            }\n          } catch (err) {\n            _iterator256.e(err);\n          } finally {\n            _iterator256.f();\n          }\n\n          if (t.text) {\n            e.textContent = t.text;\n            return;\n          }\n\n          for (var _n171 in t.attributes) {\n            var _i138 = t.attributes[_n171];\n\n            if (_i138 === null) {\n              e.removeAttribute(_n171);\n            } else {\n              e.setAttribute(_n171, _i138);\n            }\n          }\n\n          for (var _n172 = 0; _n172 < t.children.length; ++_n172) {\n            this._revertTemplateFromNode(e.childNodes[_n172], t.children[_n172]);\n          }\n        }\n      }], [{\n        key: \"bind\",\n        value: function bind(e, t) {\n          return {\n            to: function to(n, i) {\n              return new Wp({\n                eventNameOrFunction: n,\n                attribute: n,\n                observable: e,\n                emitter: t,\n                callback: i\n              });\n            },\n            if: function _if(n, i, o) {\n              return new $p({\n                observable: e,\n                emitter: t,\n                attribute: n,\n                valueIfTrue: i,\n                callback: o\n              });\n            }\n          };\n        }\n      }, {\n        key: \"extend\",\n        value: function extend(e, t) {\n          if (e._isRendered) {\n            throw new rr[\"b\"](\"template-extend-render: Attempting to extend a template which has already been rendered.\", [this, e]);\n          }\n\n          ab(e, Zp(Kp(t)));\n        }\n      }]);\n\n      return Hp;\n    }();\n\n    kr(Hp, dr);\n\n    var Up = /*#__PURE__*/function () {\n      function Up(e) {\n        _classCallCheck(this, Up);\n\n        Object.assign(this, e);\n      }\n\n      _createClass(Up, [{\n        key: \"getValue\",\n        value: function getValue(e) {\n          var t = this.observable[this.attribute];\n          return this.callback ? this.callback(t, e) : t;\n        }\n      }, {\n        key: \"activateAttributeListener\",\n        value: function activateAttributeListener(e, t, n) {\n          var _this83 = this;\n\n          var i = function i() {\n            return Jp(e, t, n);\n          };\n\n          this.emitter.listenTo(this.observable, \"change:\" + this.attribute, i);\n          return function () {\n            _this83.emitter.stopListening(_this83.observable, \"change:\" + _this83.attribute, i);\n          };\n        }\n      }]);\n\n      return Up;\n    }();\n\n    var Wp = /*#__PURE__*/function (_Up) {\n      _inherits(Wp, _Up);\n\n      var _super39 = _createSuper(Wp);\n\n      function Wp() {\n        _classCallCheck(this, Wp);\n\n        return _super39.apply(this, arguments);\n      }\n\n      _createClass(Wp, [{\n        key: \"activateDomEventListener\",\n        value: function activateDomEventListener(e, t, n) {\n          var _this84 = this;\n\n          var i = function i(e, n) {\n            if (!t || n.target.matches(t)) {\n              if (typeof _this84.eventNameOrFunction == \"function\") {\n                _this84.eventNameOrFunction(n);\n              } else {\n                _this84.observable.fire(_this84.eventNameOrFunction, n);\n              }\n            }\n          };\n\n          this.emitter.listenTo(n.node, e, i);\n          return function () {\n            _this84.emitter.stopListening(n.node, e, i);\n          };\n        }\n      }]);\n\n      return Wp;\n    }(Up);\n\n    var $p = /*#__PURE__*/function (_Up2) {\n      _inherits($p, _Up2);\n\n      var _super40 = _createSuper($p);\n\n      function $p() {\n        _classCallCheck(this, $p);\n\n        return _super40.apply(this, arguments);\n      }\n\n      _createClass($p, [{\n        key: \"getValue\",\n        value: function getValue(e) {\n          var t = _get(_getPrototypeOf($p.prototype), \"getValue\", this).call(this, e);\n\n          return cb(t) ? false : this.valueIfTrue || true;\n        }\n      }]);\n\n      return $p;\n    }(Up);\n\n    function qp(e) {\n      if (!e) {\n        return false;\n      }\n\n      if (e.value) {\n        e = e.value;\n      }\n\n      if (Array.isArray(e)) {\n        return e.some(qp);\n      } else if (e instanceof Up) {\n        return true;\n      }\n\n      return false;\n    }\n\n    function Yp(e, t) {\n      return e.map(function (e) {\n        if (e instanceof Up) {\n          return e.getValue(t);\n        }\n\n        return e;\n      });\n    }\n\n    function Jp(e, t, _ref19) {\n      var n = _ref19.node;\n      var i = Yp(e, n);\n\n      if (e.length == 1 && e[0] instanceof $p) {\n        i = i[0];\n      } else {\n        i = i.reduce(sb, \"\");\n      }\n\n      if (cb(i)) {\n        t.remove();\n      } else {\n        t.set(i);\n      }\n    }\n\n    function Qp(e) {\n      return {\n        set: function set(t) {\n          e.textContent = t;\n        },\n        remove: function remove() {\n          e.textContent = \"\";\n        }\n      };\n    }\n\n    function Xp(e, t, n) {\n      return {\n        set: function set(i) {\n          e.setAttributeNS(n, t, i);\n        },\n        remove: function remove() {\n          e.removeAttributeNS(n, t);\n        }\n      };\n    }\n\n    function Gp(e, t) {\n      return {\n        set: function set(n) {\n          e.style[t] = n;\n        },\n        remove: function remove() {\n          e.style[t] = null;\n        }\n      };\n    }\n\n    function Kp(e) {\n      var t = qs(e, function (e) {\n        if (e && (e instanceof Up || db(e) || lb(e) || ub(e))) {\n          return e;\n        }\n      });\n      return t;\n    }\n\n    function Zp(e) {\n      if (typeof e == \"string\") {\n        e = nb(e);\n      } else if (e.text) {\n        ib(e);\n      }\n\n      if (e.on) {\n        e.eventListeners = tb(e.on);\n        delete e.on;\n      }\n\n      if (!e.text) {\n        if (e.attributes) {\n          eb(e.attributes);\n        }\n\n        var _t194 = [];\n\n        if (e.children) {\n          if (ub(e.children)) {\n            _t194.push(e.children);\n          } else {\n            var _iterator258 = _createForOfIteratorHelper(e.children),\n                _step258;\n\n            try {\n              for (_iterator258.s(); !(_step258 = _iterator258.n()).done;) {\n                var _n173 = _step258.value;\n\n                if (db(_n173) || lb(_n173) || xd(_n173)) {\n                  _t194.push(_n173);\n                } else {\n                  _t194.push(new Hp(_n173));\n                }\n              }\n            } catch (err) {\n              _iterator258.e(err);\n            } finally {\n              _iterator258.f();\n            }\n          }\n        }\n\n        e.children = _t194;\n      }\n\n      return e;\n    }\n\n    function eb(e) {\n      for (var _t195 in e) {\n        if (e[_t195].value) {\n          e[_t195].value = [].concat(e[_t195].value);\n        }\n\n        ob(e, _t195);\n      }\n    }\n\n    function tb(e) {\n      for (var _t196 in e) {\n        ob(e, _t196);\n      }\n\n      return e;\n    }\n\n    function nb(e) {\n      return {\n        text: [e]\n      };\n    }\n\n    function ib(e) {\n      if (!Array.isArray(e.text)) {\n        e.text = [e.text];\n      }\n    }\n\n    function ob(e, t) {\n      if (!Array.isArray(e[t])) {\n        e[t] = [e[t]];\n      }\n    }\n\n    function sb(e, t) {\n      if (cb(t)) {\n        return e;\n      } else if (cb(e)) {\n        return t;\n      } else {\n        return \"\".concat(e, \" \").concat(t);\n      }\n    }\n\n    function rb(e, t) {\n      for (var _n174 in t) {\n        if (e[_n174]) {\n          var _e$_n;\n\n          (_e$_n = e[_n174]).push.apply(_e$_n, _toConsumableArray(t[_n174]));\n        } else {\n          e[_n174] = t[_n174];\n        }\n      }\n    }\n\n    function ab(e, t) {\n      if (t.attributes) {\n        if (!e.attributes) {\n          e.attributes = {};\n        }\n\n        rb(e.attributes, t.attributes);\n      }\n\n      if (t.eventListeners) {\n        if (!e.eventListeners) {\n          e.eventListeners = {};\n        }\n\n        rb(e.eventListeners, t.eventListeners);\n      }\n\n      if (t.text) {\n        var _e$text;\n\n        (_e$text = e.text).push.apply(_e$text, _toConsumableArray(t.text));\n      }\n\n      if (t.children && t.children.length) {\n        if (e.children.length != t.children.length) {\n          throw new rr[\"b\"](\"ui-template-extend-children-mismatch: The number of children in extended definition does not match.\", e);\n        }\n\n        var _n175 = 0;\n\n        var _iterator259 = _createForOfIteratorHelper(t.children),\n            _step259;\n\n        try {\n          for (_iterator259.s(); !(_step259 = _iterator259.n()).done;) {\n            var _i139 = _step259.value;\n            ab(e.children[_n175++], _i139);\n          }\n        } catch (err) {\n          _iterator259.e(err);\n        } finally {\n          _iterator259.f();\n        }\n      }\n    }\n\n    function cb(e) {\n      return !e && e !== 0;\n    }\n\n    function lb(e) {\n      return e instanceof gb;\n    }\n\n    function db(e) {\n      return e instanceof Hp;\n    }\n\n    function ub(e) {\n      return e instanceof Bp;\n    }\n\n    function hb() {\n      return {\n        children: [],\n        bindings: [],\n        attributes: {}\n      };\n    }\n\n    function fb(e) {\n      return e == \"class\" || e == \"style\";\n    }\n\n    var mb = n(16);\n\n    var gb = /*#__PURE__*/function () {\n      function gb(e) {\n        _classCallCheck(this, gb);\n\n        this.element = null;\n        this.isRendered = false;\n        this.locale = e;\n        this.t = e && e.t;\n        this._viewCollections = new yr();\n        this._unboundChildren = this.createCollection();\n\n        this._viewCollections.on(\"add\", function (t, n) {\n          n.locale = e;\n        });\n\n        this.decorate(\"render\");\n      }\n\n      _createClass(gb, [{\n        key: \"bindTemplate\",\n        get: function get() {\n          if (this._bindTemplate) {\n            return this._bindTemplate;\n          }\n\n          return this._bindTemplate = Hp.bind(this, this);\n        }\n      }, {\n        key: \"createCollection\",\n        value: function createCollection() {\n          var e = new Bp();\n\n          this._viewCollections.add(e);\n\n          return e;\n        }\n      }, {\n        key: \"registerChild\",\n        value: function registerChild(e) {\n          if (!Fr(e)) {\n            e = [e];\n          }\n\n          var _iterator260 = _createForOfIteratorHelper(e),\n              _step260;\n\n          try {\n            for (_iterator260.s(); !(_step260 = _iterator260.n()).done;) {\n              var _t197 = _step260.value;\n\n              this._unboundChildren.add(_t197);\n            }\n          } catch (err) {\n            _iterator260.e(err);\n          } finally {\n            _iterator260.f();\n          }\n        }\n      }, {\n        key: \"deregisterChild\",\n        value: function deregisterChild(e) {\n          if (!Fr(e)) {\n            e = [e];\n          }\n\n          var _iterator261 = _createForOfIteratorHelper(e),\n              _step261;\n\n          try {\n            for (_iterator261.s(); !(_step261 = _iterator261.n()).done;) {\n              var _t198 = _step261.value;\n\n              this._unboundChildren.remove(_t198);\n            }\n          } catch (err) {\n            _iterator261.e(err);\n          } finally {\n            _iterator261.f();\n          }\n        }\n      }, {\n        key: \"setTemplate\",\n        value: function setTemplate(e) {\n          this.template = new Hp(e);\n        }\n      }, {\n        key: \"extendTemplate\",\n        value: function extendTemplate(e) {\n          Hp.extend(this.template, e);\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          if (this.isRendered) {\n            throw new rr[\"b\"](\"ui-view-render-already-rendered: This View has already been rendered.\", this);\n          }\n\n          if (this.template) {\n            this.element = this.template.render();\n            this.registerChild(this.template.getViews());\n          }\n\n          this.isRendered = true;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.stopListening();\n\n          this._viewCollections.map(function (e) {\n            return e.destroy();\n          });\n\n          if (this.template && this.template._revertData) {\n            this.template.revert(this.element);\n          }\n        }\n      }]);\n\n      return gb;\n    }();\n\n    kr(gb, Wd);\n    kr(gb, Qc);\n    var pb = \"[object String]\";\n\n    function bb(e) {\n      return typeof e == \"string\" || !Qt(e) && T(e) && v(e) == pb;\n    }\n\n    var wb = bb;\n\n    function _b(e, t) {\n      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : [];\n      var o = n && n.xmlns;\n      var s = o ? e.createElementNS(o, t) : e.createElement(t);\n\n      for (var _e206 in n) {\n        s.setAttribute(_e206, n[_e206]);\n      }\n\n      if (wb(i) || !Fr(i)) {\n        i = [i];\n      }\n\n      var _iterator262 = _createForOfIteratorHelper(i),\n          _step262;\n\n      try {\n        for (_iterator262.s(); !(_step262 = _iterator262.n()).done;) {\n          var _t199 = _step262.value;\n\n          if (wb(_t199)) {\n            _t199 = e.createTextNode(_t199);\n          }\n\n          s.appendChild(_t199);\n        }\n      } catch (err) {\n        _iterator262.e(err);\n      } finally {\n        _iterator262.f();\n      }\n\n      return s;\n    }\n\n    var vb = /*#__PURE__*/function (_Bp) {\n      _inherits(vb, _Bp);\n\n      var _super41 = _createSuper(vb);\n\n      function vb() {\n        _classCallCheck(this, vb);\n\n        return _super41.apply(this, arguments);\n      }\n\n      _createClass(vb, [{\n        key: \"attachToDom\",\n        value: function attachToDom() {\n          this._bodyCollectionContainer = new Hp({\n            tag: \"div\",\n            attributes: {\n              class: [\"ck\", \"ck-reset_all\", \"ck-body\", \"ck-rounded-corners\"],\n              dir: this.locale.uiLanguageDirection\n            },\n            children: this\n          }).render();\n          var e = document.querySelector(\".ck-body-wrapper\");\n\n          if (!e) {\n            e = _b(document, \"div\", {\n              class: \"ck-body-wrapper\"\n            });\n            document.body.appendChild(e);\n          }\n\n          e.appendChild(this._bodyCollectionContainer);\n        }\n      }, {\n        key: \"detachFromDom\",\n        value: function detachFromDom() {\n          _get(_getPrototypeOf(vb.prototype), \"destroy\", this).call(this);\n\n          if (this._bodyCollectionContainer) {\n            this._bodyCollectionContainer.remove();\n          }\n\n          var e = document.querySelector(\".ck-body-wrapper\");\n\n          if (e && e.childElementCount == 0) {\n            e.remove();\n          }\n        }\n      }]);\n\n      return vb;\n    }(Bp);\n\n    var kb = n(18);\n\n    var yb = /*#__PURE__*/function (_gb) {\n      _inherits(yb, _gb);\n\n      var _super42 = _createSuper(yb);\n\n      function yb(e) {\n        var _this85;\n\n        _classCallCheck(this, yb);\n\n        _this85 = _super42.call(this, e);\n        _this85.body = new vb(e);\n        return _this85;\n      }\n\n      _createClass(yb, [{\n        key: \"render\",\n        value: function render() {\n          _get(_getPrototypeOf(yb.prototype), \"render\", this).call(this);\n\n          this.body.attachToDom();\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.body.detachFromDom();\n          return _get(_getPrototypeOf(yb.prototype), \"destroy\", this).call(this);\n        }\n      }]);\n\n      return yb;\n    }(gb);\n\n    var xb = n(20);\n\n    var Ab = /*#__PURE__*/function (_gb2) {\n      _inherits(Ab, _gb2);\n\n      var _super43 = _createSuper(Ab);\n\n      function Ab(e) {\n        var _this86;\n\n        _classCallCheck(this, Ab);\n\n        _this86 = _super43.call(this, e);\n\n        _this86.set(\"text\");\n\n        _this86.set(\"for\");\n\n        _this86.id = \"ck-editor__label_\".concat(nr());\n        var t = _this86.bindTemplate;\n\n        _this86.setTemplate({\n          tag: \"label\",\n          attributes: {\n            class: [\"ck\", \"ck-label\"],\n            id: _this86.id,\n            for: t.to(\"for\")\n          },\n          children: [{\n            text: t.to(\"text\")\n          }]\n        });\n\n        return _this86;\n      }\n\n      return _createClass(Ab);\n    }(gb);\n\n    var Cb = /*#__PURE__*/function (_yb) {\n      _inherits(Cb, _yb);\n\n      var _super44 = _createSuper(Cb);\n\n      function Cb(e) {\n        var _this87;\n\n        _classCallCheck(this, Cb);\n\n        _this87 = _super44.call(this, e);\n        _this87.top = _this87.createCollection();\n        _this87.main = _this87.createCollection();\n        _this87._voiceLabelView = _this87._createVoiceLabel();\n\n        _this87.setTemplate({\n          tag: \"div\",\n          attributes: {\n            class: [\"ck\", \"ck-reset\", \"ck-editor\", \"ck-rounded-corners\"],\n            role: \"application\",\n            dir: e.uiLanguageDirection,\n            lang: e.uiLanguage,\n            \"aria-labelledby\": _this87._voiceLabelView.id\n          },\n          children: [_this87._voiceLabelView, {\n            tag: \"div\",\n            attributes: {\n              class: [\"ck\", \"ck-editor__top\", \"ck-reset_all\"],\n              role: \"presentation\"\n            },\n            children: _this87.top\n          }, {\n            tag: \"div\",\n            attributes: {\n              class: [\"ck\", \"ck-editor__main\"],\n              role: \"presentation\"\n            },\n            children: _this87.main\n          }]\n        });\n\n        return _this87;\n      }\n\n      _createClass(Cb, [{\n        key: \"_createVoiceLabel\",\n        value: function _createVoiceLabel() {\n          var e = this.t;\n          var t = new Ab();\n          t.text = e(\"ba\");\n          t.extendTemplate({\n            attributes: {\n              class: \"ck-voice-label\"\n            }\n          });\n          return t;\n        }\n      }]);\n\n      return Cb;\n    }(yb);\n\n    var Tb = /*#__PURE__*/function (_gb3) {\n      _inherits(Tb, _gb3);\n\n      var _super45 = _createSuper(Tb);\n\n      function Tb(e, t, n) {\n        var _this88;\n\n        _classCallCheck(this, Tb);\n\n        _this88 = _super45.call(this, e);\n\n        _this88.setTemplate({\n          tag: \"div\",\n          attributes: {\n            class: [\"ck\", \"ck-content\", \"ck-editor__editable\", \"ck-rounded-corners\"],\n            lang: e.contentLanguage,\n            dir: e.contentLanguageDirection\n          }\n        });\n\n        _this88.name = null;\n\n        _this88.set(\"isFocused\", false);\n\n        _this88._editableElement = n;\n        _this88._hasExternalElement = !!_this88._editableElement;\n        _this88._editingView = t;\n        return _this88;\n      }\n\n      _createClass(Tb, [{\n        key: \"render\",\n        value: function render() {\n          var _this89 = this;\n\n          _get(_getPrototypeOf(Tb.prototype), \"render\", this).call(this);\n\n          if (this._hasExternalElement) {\n            this.template.apply(this.element = this._editableElement);\n          } else {\n            this._editableElement = this.element;\n          }\n\n          this.on(\"change:isFocused\", function () {\n            return _this89._updateIsFocusedClasses();\n          });\n\n          this._updateIsFocusedClasses();\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          if (this._hasExternalElement) {\n            this.template.revert(this._editableElement);\n          }\n\n          _get(_getPrototypeOf(Tb.prototype), \"destroy\", this).call(this);\n        }\n      }, {\n        key: \"_updateIsFocusedClasses\",\n        value: function _updateIsFocusedClasses() {\n          var e = this._editingView;\n\n          if (e.isRenderingInProgress) {\n            n(this);\n          } else {\n            t(this);\n          }\n\n          function t(t) {\n            e.change(function (n) {\n              var i = e.document.getRoot(t.name);\n              n.addClass(t.isFocused ? \"ck-focused\" : \"ck-blurred\", i);\n              n.removeClass(t.isFocused ? \"ck-blurred\" : \"ck-focused\", i);\n            });\n          }\n\n          function n(i) {\n            e.once(\"change:isRenderingInProgress\", function (e, o, s) {\n              if (!s) {\n                t(i);\n              } else {\n                n(i);\n              }\n            });\n          }\n        }\n      }]);\n\n      return Tb;\n    }(gb);\n\n    var Mb = /*#__PURE__*/function (_Tb) {\n      _inherits(Mb, _Tb);\n\n      var _super46 = _createSuper(Mb);\n\n      function Mb(e, t, n) {\n        var _this90;\n\n        _classCallCheck(this, Mb);\n\n        _this90 = _super46.call(this, e, t, n);\n\n        _this90.extendTemplate({\n          attributes: {\n            role: \"textbox\",\n            class: \"ck-editor__editable_inline\"\n          }\n        });\n\n        return _this90;\n      }\n\n      _createClass(Mb, [{\n        key: \"render\",\n        value: function render() {\n          var _this91 = this;\n\n          _get(_getPrototypeOf(Mb.prototype), \"render\", this).call(this);\n\n          var e = this._editingView;\n          var t = this.t;\n          e.change(function (n) {\n            var i = e.document.getRoot(_this91.name);\n            n.setAttribute(\"aria-label\", t(\"cd\", [_this91.name]), i);\n          });\n        }\n      }]);\n\n      return Mb;\n    }(Tb);\n\n    function Pb(e) {\n      return function (t) {\n        return t + e;\n      };\n    }\n\n    var Eb = n(22);\n    var Sb = Pb(\"px\");\n\n    var Ib = /*#__PURE__*/function (_gb4) {\n      _inherits(Ib, _gb4);\n\n      var _super47 = _createSuper(Ib);\n\n      function Ib(e) {\n        var _this92;\n\n        _classCallCheck(this, Ib);\n\n        _this92 = _super47.call(this, e);\n        var t = _this92.bindTemplate;\n\n        _this92.set(\"isActive\", false);\n\n        _this92.set(\"isSticky\", false);\n\n        _this92.set(\"limiterElement\", null);\n\n        _this92.set(\"limiterBottomOffset\", 50);\n\n        _this92.set(\"viewportTopOffset\", 0);\n\n        _this92.set(\"_marginLeft\", null);\n\n        _this92.set(\"_isStickyToTheLimiter\", false);\n\n        _this92.set(\"_hasViewportTopOffset\", false);\n\n        _this92.content = _this92.createCollection();\n        _this92._contentPanelPlaceholder = new Hp({\n          tag: \"div\",\n          attributes: {\n            class: [\"ck\", \"ck-sticky-panel__placeholder\"],\n            style: {\n              display: t.to(\"isSticky\", function (e) {\n                return e ? \"block\" : \"none\";\n              }),\n              height: t.to(\"isSticky\", function (e) {\n                return e ? Sb(_this92._panelRect.height) : null;\n              })\n            }\n          }\n        }).render();\n        _this92._contentPanel = new Hp({\n          tag: \"div\",\n          attributes: {\n            class: [\"ck\", \"ck-sticky-panel__content\", t.if(\"isSticky\", \"ck-sticky-panel__content_sticky\"), t.if(\"_isStickyToTheLimiter\", \"ck-sticky-panel__content_sticky_bottom-limit\")],\n            style: {\n              width: t.to(\"isSticky\", function (e) {\n                return e ? Sb(_this92._contentPanelPlaceholder.getBoundingClientRect().width) : null;\n              }),\n              top: t.to(\"_hasViewportTopOffset\", function (e) {\n                return e ? Sb(_this92.viewportTopOffset) : null;\n              }),\n              bottom: t.to(\"_isStickyToTheLimiter\", function (e) {\n                return e ? Sb(_this92.limiterBottomOffset) : null;\n              }),\n              marginLeft: t.to(\"_marginLeft\")\n            }\n          },\n          children: _this92.content\n        }).render();\n\n        _this92.setTemplate({\n          tag: \"div\",\n          attributes: {\n            class: [\"ck\", \"ck-sticky-panel\"]\n          },\n          children: [_this92._contentPanelPlaceholder, _this92._contentPanel]\n        });\n\n        return _this92;\n      }\n\n      _createClass(Ib, [{\n        key: \"render\",\n        value: function render() {\n          var _this93 = this;\n\n          _get(_getPrototypeOf(Ib.prototype), \"render\", this).call(this);\n\n          this._checkIfShouldBeSticky();\n\n          this.listenTo(Od.window, \"scroll\", function () {\n            _this93._checkIfShouldBeSticky();\n          });\n          this.listenTo(this, \"change:isActive\", function () {\n            _this93._checkIfShouldBeSticky();\n          });\n        }\n      }, {\n        key: \"_checkIfShouldBeSticky\",\n        value: function _checkIfShouldBeSticky() {\n          var e = this._panelRect = this._contentPanel.getBoundingClientRect();\n\n          var t;\n\n          if (!this.limiterElement) {\n            this.isSticky = false;\n          } else {\n            t = this._limiterRect = this.limiterElement.getBoundingClientRect();\n            this.isSticky = this.isActive && t.top < this.viewportTopOffset && this._panelRect.height + this.limiterBottomOffset < t.height;\n          }\n\n          if (this.isSticky) {\n            this._isStickyToTheLimiter = t.bottom < e.height + this.limiterBottomOffset + this.viewportTopOffset;\n            this._hasViewportTopOffset = !this._isStickyToTheLimiter && !!this.viewportTopOffset;\n            this._marginLeft = this._isStickyToTheLimiter ? null : Sb(-Od.window.scrollX);\n          } else {\n            this._isStickyToTheLimiter = false;\n            this._hasViewportTopOffset = false;\n            this._marginLeft = null;\n          }\n        }\n      }]);\n\n      return Ib;\n    }(gb);\n\n    var Ob = /*#__PURE__*/function () {\n      function Ob(e) {\n        var _this94 = this;\n\n        _classCallCheck(this, Ob);\n\n        Object.assign(this, e);\n\n        if (e.actions && e.keystrokeHandler) {\n          var _loop5 = function _loop5(_t200) {\n            var n = e.actions[_t200];\n\n            if (typeof n == \"string\") {\n              n = [n];\n            }\n\n            var _iterator263 = _createForOfIteratorHelper(n),\n                _step263;\n\n            try {\n              for (_iterator263.s(); !(_step263 = _iterator263.n()).done;) {\n                var _i140 = _step263.value;\n                e.keystrokeHandler.set(_i140, function (e, n) {\n                  _this94[_t200]();\n\n                  n();\n                });\n              }\n            } catch (err) {\n              _iterator263.e(err);\n            } finally {\n              _iterator263.f();\n            }\n          };\n\n          for (var _t200 in e.actions) {\n            _loop5(_t200);\n          }\n        }\n      }\n\n      _createClass(Ob, [{\n        key: \"first\",\n        get: function get() {\n          return this.focusables.find(Nb) || null;\n        }\n      }, {\n        key: \"last\",\n        get: function get() {\n          return this.focusables.filter(Nb).slice(-1)[0] || null;\n        }\n      }, {\n        key: \"next\",\n        get: function get() {\n          return this._getFocusableItem(1);\n        }\n      }, {\n        key: \"previous\",\n        get: function get() {\n          return this._getFocusableItem(-1);\n        }\n      }, {\n        key: \"current\",\n        get: function get() {\n          var _this95 = this;\n\n          var e = null;\n\n          if (this.focusTracker.focusedElement === null) {\n            return null;\n          }\n\n          this.focusables.find(function (t, n) {\n            var i = t.element === _this95.focusTracker.focusedElement;\n\n            if (i) {\n              e = n;\n            }\n\n            return i;\n          });\n          return e;\n        }\n      }, {\n        key: \"focusFirst\",\n        value: function focusFirst() {\n          this._focus(this.first);\n        }\n      }, {\n        key: \"focusLast\",\n        value: function focusLast() {\n          this._focus(this.last);\n        }\n      }, {\n        key: \"focusNext\",\n        value: function focusNext() {\n          this._focus(this.next);\n        }\n      }, {\n        key: \"focusPrevious\",\n        value: function focusPrevious() {\n          this._focus(this.previous);\n        }\n      }, {\n        key: \"_focus\",\n        value: function _focus(e) {\n          if (e) {\n            e.focus();\n          }\n        }\n      }, {\n        key: \"_getFocusableItem\",\n        value: function _getFocusableItem(e) {\n          var t = this.current;\n          var n = this.focusables.length;\n\n          if (!n) {\n            return null;\n          }\n\n          if (t === null) {\n            return this[e === 1 ? \"first\" : \"last\"];\n          }\n\n          var i = (t + n + e) % n;\n\n          do {\n            var _t201 = this.focusables.get(i);\n\n            if (Nb(_t201)) {\n              return _t201;\n            }\n\n            i = (i + n + e) % n;\n          } while (i !== t);\n\n          return null;\n        }\n      }]);\n\n      return Ob;\n    }();\n\n    function Nb(e) {\n      return !!(e.focus && Od.window.getComputedStyle(e.element).display != \"none\");\n    }\n\n    var Rb = /*#__PURE__*/function (_gb5) {\n      _inherits(Rb, _gb5);\n\n      var _super48 = _createSuper(Rb);\n\n      function Rb(e) {\n        var _this96;\n\n        _classCallCheck(this, Rb);\n\n        _this96 = _super48.call(this, e);\n\n        _this96.setTemplate({\n          tag: \"span\",\n          attributes: {\n            class: [\"ck\", \"ck-toolbar__separator\"]\n          }\n        });\n\n        return _this96;\n      }\n\n      return _createClass(Rb);\n    }(gb);\n\n    var Lb = 100;\n\n    var jb = /*#__PURE__*/function () {\n      function jb(e, t) {\n        _classCallCheck(this, jb);\n\n        if (!jb._observerInstance) {\n          jb._createObserver();\n        }\n\n        this._element = e;\n        this._callback = t;\n\n        jb._addElementCallback(e, t);\n\n        jb._observerInstance.observe(e);\n      }\n\n      _createClass(jb, [{\n        key: \"destroy\",\n        value: function destroy() {\n          jb._deleteElementCallback(this._element, this._callback);\n        }\n      }], [{\n        key: \"_addElementCallback\",\n        value: function _addElementCallback(e, t) {\n          if (!jb._elementCallbacks) {\n            jb._elementCallbacks = new Map();\n          }\n\n          var n = jb._elementCallbacks.get(e);\n\n          if (!n) {\n            n = new Set();\n\n            jb._elementCallbacks.set(e, n);\n          }\n\n          n.add(t);\n        }\n      }, {\n        key: \"_deleteElementCallback\",\n        value: function _deleteElementCallback(e, t) {\n          var n = jb._getElementCallbacks(e);\n\n          if (n) {\n            n.delete(t);\n\n            if (!n.size) {\n              jb._elementCallbacks.delete(e);\n\n              jb._observerInstance.unobserve(e);\n            }\n          }\n\n          if (jb._elementCallbacks && !jb._elementCallbacks.size) {\n            jb._observerInstance = null;\n            jb._elementCallbacks = null;\n          }\n        }\n      }, {\n        key: \"_getElementCallbacks\",\n        value: function _getElementCallbacks(e) {\n          if (!jb._elementCallbacks) {\n            return null;\n          }\n\n          return jb._elementCallbacks.get(e);\n        }\n      }, {\n        key: \"_createObserver\",\n        value: function _createObserver() {\n          var e;\n\n          if (typeof Od.window.ResizeObserver === \"function\") {\n            e = Od.window.ResizeObserver;\n          } else {\n            e = Db;\n          }\n\n          jb._observerInstance = new e(function (e) {\n            var _iterator264 = _createForOfIteratorHelper(e),\n                _step264;\n\n            try {\n              for (_iterator264.s(); !(_step264 = _iterator264.n()).done;) {\n                var _t202 = _step264.value;\n\n                var _e207 = jb._getElementCallbacks(_t202.target);\n\n                if (_e207) {\n                  var _iterator265 = _createForOfIteratorHelper(_e207),\n                      _step265;\n\n                  try {\n                    for (_iterator265.s(); !(_step265 = _iterator265.n()).done;) {\n                      var _n176 = _step265.value;\n\n                      _n176(_t202);\n                    }\n                  } catch (err) {\n                    _iterator265.e(err);\n                  } finally {\n                    _iterator265.f();\n                  }\n                }\n              }\n            } catch (err) {\n              _iterator264.e(err);\n            } finally {\n              _iterator264.f();\n            }\n          });\n        }\n      }]);\n\n      return jb;\n    }();\n\n    jb._observerInstance = null;\n    jb._elementCallbacks = null;\n\n    var Db = /*#__PURE__*/function () {\n      function Db(e) {\n        _classCallCheck(this, Db);\n\n        this._callback = e;\n        this._elements = new Set();\n        this._previousRects = new Map();\n        this._periodicCheckTimeout = null;\n      }\n\n      _createClass(Db, [{\n        key: \"observe\",\n        value: function observe(e) {\n          this._elements.add(e);\n\n          this._checkElementRectsAndExecuteCallback();\n\n          if (this._elements.size === 1) {\n            this._startPeriodicCheck();\n          }\n        }\n      }, {\n        key: \"unobserve\",\n        value: function unobserve(e) {\n          this._elements.delete(e);\n\n          this._previousRects.delete(e);\n\n          if (!this._elements.size) {\n            this._stopPeriodicCheck();\n          }\n        }\n      }, {\n        key: \"_startPeriodicCheck\",\n        value: function _startPeriodicCheck() {\n          var _this97 = this;\n\n          var e = function e() {\n            _this97._checkElementRectsAndExecuteCallback();\n\n            _this97._periodicCheckTimeout = setTimeout(e, Lb);\n          };\n\n          this.listenTo(Od.window, \"resize\", function () {\n            _this97._checkElementRectsAndExecuteCallback();\n          });\n          this._periodicCheckTimeout = setTimeout(e, Lb);\n        }\n      }, {\n        key: \"_stopPeriodicCheck\",\n        value: function _stopPeriodicCheck() {\n          clearTimeout(this._periodicCheckTimeout);\n          this.stopListening();\n\n          this._previousRects.clear();\n        }\n      }, {\n        key: \"_checkElementRectsAndExecuteCallback\",\n        value: function _checkElementRectsAndExecuteCallback() {\n          var e = [];\n\n          var _iterator266 = _createForOfIteratorHelper(this._elements),\n              _step266;\n\n          try {\n            for (_iterator266.s(); !(_step266 = _iterator266.n()).done;) {\n              var _t203 = _step266.value;\n\n              if (this._hasRectChanged(_t203)) {\n                e.push({\n                  target: _t203,\n                  contentRect: this._previousRects.get(_t203)\n                });\n              }\n            }\n          } catch (err) {\n            _iterator266.e(err);\n          } finally {\n            _iterator266.f();\n          }\n\n          if (e.length) {\n            this._callback(e);\n          }\n        }\n      }, {\n        key: \"_hasRectChanged\",\n        value: function _hasRectChanged(e) {\n          if (!e.ownerDocument.body.contains(e)) {\n            return false;\n          }\n\n          var t = new kh(e);\n\n          var n = this._previousRects.get(e);\n\n          var i = !n || !n.isEqual(t);\n\n          this._previousRects.set(e, t);\n\n          return i;\n        }\n      }]);\n\n      return Db;\n    }();\n\n    kr(Db, Wd);\n\n    function zb(e) {\n      return e.bindTemplate.to(function (t) {\n        if (t.target === e.element) {\n          t.preventDefault();\n        }\n      });\n    }\n\n    var Bb = /*#__PURE__*/function (_gb6) {\n      _inherits(Bb, _gb6);\n\n      var _super49 = _createSuper(Bb);\n\n      function Bb(e) {\n        var _this98;\n\n        _classCallCheck(this, Bb);\n\n        _this98 = _super49.call(this, e);\n        var t = _this98.bindTemplate;\n\n        _this98.set(\"isVisible\", false);\n\n        _this98.set(\"position\", \"se\");\n\n        _this98.children = _this98.createCollection();\n\n        _this98.setTemplate({\n          tag: \"div\",\n          attributes: {\n            class: [\"ck\", \"ck-reset\", \"ck-dropdown__panel\", t.to(\"position\", function (e) {\n              return \"ck-dropdown__panel_\".concat(e);\n            }), t.if(\"isVisible\", \"ck-dropdown__panel-visible\")]\n          },\n          children: _this98.children,\n          on: {\n            selectstart: t.to(function (e) {\n              return e.preventDefault();\n            })\n          }\n        });\n\n        return _this98;\n      }\n\n      _createClass(Bb, [{\n        key: \"focus\",\n        value: function focus() {\n          if (this.children.length) {\n            this.children.first.focus();\n          }\n        }\n      }, {\n        key: \"focusLast\",\n        value: function focusLast() {\n          if (this.children.length) {\n            var _e208 = this.children.last;\n\n            if (typeof _e208.focusLast === \"function\") {\n              _e208.focusLast();\n            } else {\n              _e208.focus();\n            }\n          }\n        }\n      }]);\n\n      return Bb;\n    }(gb);\n\n    var Vb = n(24);\n\n    function Fb(e) {\n      while (e && e.tagName.toLowerCase() != \"html\") {\n        if (Od.window.getComputedStyle(e).position != \"static\") {\n          return e;\n        }\n\n        e = e.parentElement;\n      }\n\n      return null;\n    }\n\n    function Hb(_ref20) {\n      var e = _ref20.element,\n          t = _ref20.target,\n          n = _ref20.positions,\n          i = _ref20.limiter,\n          o = _ref20.fitInViewport;\n\n      if (me(t)) {\n        t = t();\n      }\n\n      if (me(i)) {\n        i = i();\n      }\n\n      var s = Fb(e.parentElement);\n      var r = new kh(e);\n      var a = new kh(t);\n      var c;\n      var l;\n\n      if (!i && !o) {\n        var _Ub = Ub(n[0], a, r);\n\n        var _Ub2 = _slicedToArray(_Ub, 2);\n\n        l = _Ub2[0];\n        c = _Ub2[1];\n      } else {\n        var _e209 = i && new kh(i).getVisible();\n\n        var _t204 = o && new kh(Od.window);\n\n        var _ref21 = Wb(n, a, r, _e209, _t204) || Ub(n[0], a, r);\n\n        var _ref22 = _slicedToArray(_ref21, 2);\n\n        l = _ref22[0];\n        c = _ref22[1];\n      }\n\n      var _$b = $b(c),\n          d = _$b.left,\n          u = _$b.top;\n\n      if (s) {\n        var _e210 = $b(new kh(s));\n\n        var _t205 = _h(s);\n\n        d -= _e210.left;\n        u -= _e210.top;\n        d += s.scrollLeft;\n        u += s.scrollTop;\n        d -= _t205.left;\n        u -= _t205.top;\n      }\n\n      return {\n        left: d,\n        top: u,\n        name: l\n      };\n    }\n\n    function Ub(e, t, n) {\n      var _e211 = e(t, n),\n          i = _e211.left,\n          o = _e211.top,\n          s = _e211.name;\n\n      return [s, n.clone().moveTo(i, o)];\n    }\n\n    function Wb(e, t, n, i, o) {\n      var s = 0;\n      var r = 0;\n      var a;\n      var c;\n      var l = n.getArea();\n      e.some(function (e) {\n        var _Ub3 = Ub(e, t, n),\n            _Ub4 = _slicedToArray(_Ub3, 2),\n            d = _Ub4[0],\n            u = _Ub4[1];\n\n        var h;\n        var f;\n\n        if (i) {\n          if (o) {\n            var _e212 = i.getIntersection(o);\n\n            if (_e212) {\n              h = _e212.getIntersectionArea(u);\n            } else {\n              h = 0;\n            }\n          } else {\n            h = i.getIntersectionArea(u);\n          }\n        }\n\n        if (o) {\n          f = o.getIntersectionArea(u);\n        }\n\n        if (o && !i) {\n          if (f > r) {\n            m();\n          }\n        } else if (!o && i) {\n          if (h > s) {\n            m();\n          }\n        } else {\n          if (f > r && h >= s) {\n            m();\n          } else if (f >= r && h > s) {\n            m();\n          }\n        }\n\n        function m() {\n          r = f;\n          s = h;\n          a = u;\n          c = d;\n        }\n\n        return h === l;\n      });\n      return a ? [c, a] : null;\n    }\n\n    function $b(_ref23) {\n      var e = _ref23.left,\n          t = _ref23.top;\n      var _Od$window2 = Od.window,\n          n = _Od$window2.scrollX,\n          i = _Od$window2.scrollY;\n      return {\n        left: e + n,\n        top: t + i\n      };\n    }\n\n    var qb = /*#__PURE__*/function (_gb7) {\n      _inherits(qb, _gb7);\n\n      var _super50 = _createSuper(qb);\n\n      function qb(e, t, n) {\n        var _this99;\n\n        _classCallCheck(this, qb);\n\n        _this99 = _super50.call(this, e);\n        var i = _this99.bindTemplate;\n        _this99.buttonView = t;\n        _this99.panelView = n;\n\n        _this99.set(\"isOpen\", false);\n\n        _this99.set(\"isEnabled\", true);\n\n        _this99.set(\"class\");\n\n        _this99.set(\"id\");\n\n        _this99.set(\"panelPosition\", \"auto\");\n\n        _this99.focusTracker = new xp();\n        _this99.keystrokes = new dp();\n\n        _this99.setTemplate({\n          tag: \"div\",\n          attributes: {\n            class: [\"ck\", \"ck-dropdown\", i.to(\"class\"), i.if(\"isEnabled\", \"ck-disabled\", function (e) {\n              return !e;\n            })],\n            id: i.to(\"id\"),\n            \"aria-describedby\": i.to(\"ariaDescribedById\")\n          },\n          children: [t, n]\n        });\n\n        t.extendTemplate({\n          attributes: {\n            class: [\"ck-dropdown__button\"]\n          }\n        });\n        return _this99;\n      }\n\n      _createClass(qb, [{\n        key: \"render\",\n        value: function render() {\n          var _this100 = this;\n\n          _get(_getPrototypeOf(qb.prototype), \"render\", this).call(this);\n\n          this.listenTo(this.buttonView, \"open\", function () {\n            _this100.isOpen = !_this100.isOpen;\n          });\n          this.panelView.bind(\"isVisible\").to(this, \"isOpen\");\n          this.on(\"change:isOpen\", function () {\n            if (!_this100.isOpen) {\n              return;\n            }\n\n            if (_this100.panelPosition === \"auto\") {\n              _this100.panelView.position = qb._getOptimalPosition({\n                element: _this100.panelView.element,\n                target: _this100.buttonView.element,\n                fitInViewport: true,\n                positions: _this100._panelPositions\n              }).name;\n            } else {\n              _this100.panelView.position = _this100.panelPosition;\n            }\n          });\n          this.keystrokes.listenTo(this.element);\n          this.focusTracker.add(this.element);\n\n          var e = function (_e213) {\n            function e(_x2, _x3) {\n              return _e213.apply(this, arguments);\n            }\n\n            e.toString = function () {\n              return _e213.toString();\n            };\n\n            return e;\n          }(function (e, t) {\n            if (_this100.isOpen) {\n              _this100.buttonView.focus();\n\n              _this100.isOpen = false;\n              t();\n            }\n          });\n\n          this.keystrokes.set(\"arrowdown\", function (e, t) {\n            if (_this100.buttonView.isEnabled && !_this100.isOpen) {\n              _this100.isOpen = true;\n              t();\n            }\n          });\n          this.keystrokes.set(\"arrowright\", function (e, t) {\n            if (_this100.isOpen) {\n              t();\n            }\n          });\n          this.keystrokes.set(\"arrowleft\", e);\n          this.keystrokes.set(\"esc\", e);\n        }\n      }, {\n        key: \"focus\",\n        value: function focus() {\n          this.buttonView.focus();\n        }\n      }, {\n        key: \"_panelPositions\",\n        get: function get() {\n          var _qb$defaultPanelPosit = qb.defaultPanelPositions,\n              e = _qb$defaultPanelPosit.southEast,\n              t = _qb$defaultPanelPosit.southWest,\n              n = _qb$defaultPanelPosit.northEast,\n              i = _qb$defaultPanelPosit.northWest;\n\n          if (this.locale.uiLanguageDirection === \"ltr\") {\n            return [e, t, n, i];\n          } else {\n            return [t, e, i, n];\n          }\n        }\n      }]);\n\n      return qb;\n    }(gb);\n\n    qb.defaultPanelPositions = {\n      southEast: function southEast(e) {\n        return {\n          top: e.bottom,\n          left: e.left,\n          name: \"se\"\n        };\n      },\n      southWest: function southWest(e, t) {\n        return {\n          top: e.bottom,\n          left: e.left - t.width + e.width,\n          name: \"sw\"\n        };\n      },\n      northEast: function northEast(e, t) {\n        return {\n          top: e.top - t.height,\n          left: e.left,\n          name: \"ne\"\n        };\n      },\n      northWest: function northWest(e, t) {\n        return {\n          top: e.bottom - t.height,\n          left: e.left - t.width + e.width,\n          name: \"nw\"\n        };\n      }\n    };\n    qb._getOptimalPosition = Hb;\n    var Yb = n(26);\n\n    var Jb = /*#__PURE__*/function (_gb8) {\n      _inherits(Jb, _gb8);\n\n      var _super51 = _createSuper(Jb);\n\n      function Jb() {\n        var _this101;\n\n        _classCallCheck(this, Jb);\n\n        _this101 = _super51.call(this);\n        var e = _this101.bindTemplate;\n\n        _this101.set(\"content\", \"\");\n\n        _this101.set(\"viewBox\", \"0 0 20 20\");\n\n        _this101.set(\"fillColor\", \"\");\n\n        _this101.setTemplate({\n          tag: \"svg\",\n          ns: \"http://www.w3.org/2000/svg\",\n          attributes: {\n            class: [\"ck\", \"ck-icon\"],\n            viewBox: e.to(\"viewBox\")\n          }\n        });\n\n        return _this101;\n      }\n\n      _createClass(Jb, [{\n        key: \"render\",\n        value: function render() {\n          var _this102 = this;\n\n          _get(_getPrototypeOf(Jb.prototype), \"render\", this).call(this);\n\n          this._updateXMLContent();\n\n          this._colorFillPaths();\n\n          this.on(\"change:content\", function () {\n            _this102._updateXMLContent();\n\n            _this102._colorFillPaths();\n          });\n          this.on(\"change:fillColor\", function () {\n            _this102._colorFillPaths();\n          });\n        }\n      }, {\n        key: \"_updateXMLContent\",\n        value: function _updateXMLContent() {\n          if (this.content) {\n            var _e214 = new DOMParser().parseFromString(this.content.trim(), \"image/svg+xml\");\n\n            var _t206 = _e214.querySelector(\"svg\");\n\n            var _n177 = _t206.getAttribute(\"viewBox\");\n\n            if (_n177) {\n              this.viewBox = _n177;\n            }\n\n            this.element.innerHTML = \"\";\n\n            while (_t206.childNodes.length > 0) {\n              this.element.appendChild(_t206.childNodes[0]);\n            }\n          }\n        }\n      }, {\n        key: \"_colorFillPaths\",\n        value: function _colorFillPaths() {\n          var _this103 = this;\n\n          if (this.fillColor) {\n            this.element.querySelectorAll(\".ck-icon__fill\").forEach(function (e) {\n              e.style.fill = _this103.fillColor;\n            });\n          }\n        }\n      }]);\n\n      return Jb;\n    }(gb);\n\n    var Qb = n(28);\n\n    var Xb = /*#__PURE__*/function (_gb9) {\n      _inherits(Xb, _gb9);\n\n      var _super52 = _createSuper(Xb);\n\n      function Xb(e) {\n        var _this104;\n\n        _classCallCheck(this, Xb);\n\n        _this104 = _super52.call(this, e);\n\n        _this104.set(\"text\", \"\");\n\n        _this104.set(\"position\", \"s\");\n\n        var t = _this104.bindTemplate;\n\n        _this104.setTemplate({\n          tag: \"span\",\n          attributes: {\n            class: [\"ck\", \"ck-tooltip\", t.to(\"position\", function (e) {\n              return \"ck-tooltip_\" + e;\n            }), t.if(\"text\", \"ck-hidden\", function (e) {\n              return !e.trim();\n            })]\n          },\n          children: [{\n            tag: \"span\",\n            attributes: {\n              class: [\"ck\", \"ck-tooltip__text\"]\n            },\n            children: [{\n              text: t.to(\"text\")\n            }]\n          }]\n        });\n\n        return _this104;\n      }\n\n      return _createClass(Xb);\n    }(gb);\n\n    var Gb = n(30);\n\n    var Kb = /*#__PURE__*/function (_gb10) {\n      _inherits(Kb, _gb10);\n\n      var _super53 = _createSuper(Kb);\n\n      function Kb(e) {\n        var _this105;\n\n        _classCallCheck(this, Kb);\n\n        _this105 = _super53.call(this, e);\n        var t = _this105.bindTemplate;\n        var n = nr();\n\n        _this105.set(\"class\");\n\n        _this105.set(\"labelStyle\");\n\n        _this105.set(\"icon\");\n\n        _this105.set(\"isEnabled\", true);\n\n        _this105.set(\"isOn\", false);\n\n        _this105.set(\"isVisible\", true);\n\n        _this105.set(\"isToggleable\", false);\n\n        _this105.set(\"keystroke\");\n\n        _this105.set(\"label\");\n\n        _this105.set(\"tabindex\", -1);\n\n        _this105.set(\"tooltip\");\n\n        _this105.set(\"tooltipPosition\", \"s\");\n\n        _this105.set(\"type\", \"button\");\n\n        _this105.set(\"withText\", false);\n\n        _this105.set(\"withKeystroke\", false);\n\n        _this105.children = _this105.createCollection();\n        _this105.tooltipView = _this105._createTooltipView();\n        _this105.labelView = _this105._createLabelView(n);\n        _this105.iconView = new Jb();\n\n        _this105.iconView.extendTemplate({\n          attributes: {\n            class: \"ck-button__icon\"\n          }\n        });\n\n        _this105.keystrokeView = _this105._createKeystrokeView();\n\n        _this105.bind(\"_tooltipString\").to(_assertThisInitialized(_this105), \"tooltip\", _assertThisInitialized(_this105), \"label\", _assertThisInitialized(_this105), \"keystroke\", _this105._getTooltipString.bind(_assertThisInitialized(_this105)));\n\n        _this105.setTemplate({\n          tag: \"button\",\n          attributes: {\n            class: [\"ck\", \"ck-button\", t.to(\"class\"), t.if(\"isEnabled\", \"ck-disabled\", function (e) {\n              return !e;\n            }), t.if(\"isVisible\", \"ck-hidden\", function (e) {\n              return !e;\n            }), t.to(\"isOn\", function (e) {\n              return e ? \"ck-on\" : \"ck-off\";\n            }), t.if(\"withText\", \"ck-button_with-text\"), t.if(\"withKeystroke\", \"ck-button_with-keystroke\")],\n            type: t.to(\"type\", function (e) {\n              return e ? e : \"button\";\n            }),\n            tabindex: t.to(\"tabindex\"),\n            \"aria-labelledby\": \"ck-editor__aria-label_\".concat(n),\n            \"aria-disabled\": t.if(\"isEnabled\", true, function (e) {\n              return !e;\n            }),\n            \"aria-pressed\": t.to(\"isOn\", function (e) {\n              return _this105.isToggleable ? String(e) : false;\n            })\n          },\n          children: _this105.children,\n          on: {\n            mousedown: t.to(function (e) {\n              e.preventDefault();\n            }),\n            click: t.to(function (e) {\n              if (_this105.isEnabled) {\n                _this105.fire(\"execute\");\n              } else {\n                e.preventDefault();\n              }\n            })\n          }\n        });\n\n        return _this105;\n      }\n\n      _createClass(Kb, [{\n        key: \"render\",\n        value: function render() {\n          _get(_getPrototypeOf(Kb.prototype), \"render\", this).call(this);\n\n          if (this.icon) {\n            this.iconView.bind(\"content\").to(this, \"icon\");\n            this.children.add(this.iconView);\n          }\n\n          this.children.add(this.tooltipView);\n          this.children.add(this.labelView);\n\n          if (this.withKeystroke) {\n            this.children.add(this.keystrokeView);\n          }\n        }\n      }, {\n        key: \"focus\",\n        value: function focus() {\n          this.element.focus();\n        }\n      }, {\n        key: \"_createTooltipView\",\n        value: function _createTooltipView() {\n          var e = new Xb();\n          e.bind(\"text\").to(this, \"_tooltipString\");\n          e.bind(\"position\").to(this, \"tooltipPosition\");\n          return e;\n        }\n      }, {\n        key: \"_createLabelView\",\n        value: function _createLabelView(e) {\n          var t = new gb();\n          var n = this.bindTemplate;\n          t.setTemplate({\n            tag: \"span\",\n            attributes: {\n              class: [\"ck\", \"ck-button__label\"],\n              style: n.to(\"labelStyle\"),\n              id: \"ck-editor__aria-label_\".concat(e)\n            },\n            children: [{\n              text: this.bindTemplate.to(\"label\")\n            }]\n          });\n          return t;\n        }\n      }, {\n        key: \"_createKeystrokeView\",\n        value: function _createKeystrokeView() {\n          var e = new gb();\n          e.setTemplate({\n            tag: \"span\",\n            attributes: {\n              class: [\"ck\", \"ck-button__keystroke\"]\n            },\n            children: [{\n              text: this.bindTemplate.to(\"keystroke\", function (e) {\n                return Dl(e);\n              })\n            }]\n          });\n          return e;\n        }\n      }, {\n        key: \"_getTooltipString\",\n        value: function _getTooltipString(e, t, n) {\n          if (e) {\n            if (typeof e == \"string\") {\n              return e;\n            } else {\n              if (n) {\n                n = Dl(n);\n              }\n\n              if (e instanceof Function) {\n                return e(t, n);\n              } else {\n                return \"\".concat(t).concat(n ? \" (\".concat(n, \")\") : \"\");\n              }\n            }\n          }\n\n          return \"\";\n        }\n      }]);\n\n      return Kb;\n    }(gb);\n\n    var Zb = '<svg viewBox=\"0 0 10 10\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z\"/></svg>';\n\n    var ew = /*#__PURE__*/function (_Kb) {\n      _inherits(ew, _Kb);\n\n      var _super54 = _createSuper(ew);\n\n      function ew(e) {\n        var _this106;\n\n        _classCallCheck(this, ew);\n\n        _this106 = _super54.call(this, e);\n        _this106.arrowView = _this106._createArrowView();\n\n        _this106.extendTemplate({\n          attributes: {\n            \"aria-haspopup\": true\n          }\n        });\n\n        _this106.delegate(\"execute\").to(_assertThisInitialized(_this106), \"open\");\n\n        return _this106;\n      }\n\n      _createClass(ew, [{\n        key: \"render\",\n        value: function render() {\n          _get(_getPrototypeOf(ew.prototype), \"render\", this).call(this);\n\n          this.children.add(this.arrowView);\n        }\n      }, {\n        key: \"_createArrowView\",\n        value: function _createArrowView() {\n          var e = new Jb();\n          e.content = Zb;\n          e.extendTemplate({\n            attributes: {\n              class: \"ck-dropdown__arrow\"\n            }\n          });\n          return e;\n        }\n      }]);\n\n      return ew;\n    }(Kb);\n\n    var tw = n(32);\n\n    var nw = /*#__PURE__*/function (_gb11) {\n      _inherits(nw, _gb11);\n\n      var _super55 = _createSuper(nw);\n\n      function nw() {\n        var _this107;\n\n        _classCallCheck(this, nw);\n\n        _this107 = _super55.call(this);\n        _this107.items = _this107.createCollection();\n        _this107.focusTracker = new xp();\n        _this107.keystrokes = new dp();\n        _this107._focusCycler = new Ob({\n          focusables: _this107.items,\n          focusTracker: _this107.focusTracker,\n          keystrokeHandler: _this107.keystrokes,\n          actions: {\n            focusPrevious: \"arrowup\",\n            focusNext: \"arrowdown\"\n          }\n        });\n\n        _this107.setTemplate({\n          tag: \"ul\",\n          attributes: {\n            class: [\"ck\", \"ck-reset\", \"ck-list\"]\n          },\n          children: _this107.items\n        });\n\n        return _this107;\n      }\n\n      _createClass(nw, [{\n        key: \"render\",\n        value: function render() {\n          var _this108 = this;\n\n          _get(_getPrototypeOf(nw.prototype), \"render\", this).call(this);\n\n          var _iterator267 = _createForOfIteratorHelper(this.items),\n              _step267;\n\n          try {\n            for (_iterator267.s(); !(_step267 = _iterator267.n()).done;) {\n              var _e215 = _step267.value;\n              this.focusTracker.add(_e215.element);\n            }\n          } catch (err) {\n            _iterator267.e(err);\n          } finally {\n            _iterator267.f();\n          }\n\n          this.items.on(\"add\", function (e, t) {\n            _this108.focusTracker.add(t.element);\n          });\n          this.items.on(\"remove\", function (e, t) {\n            _this108.focusTracker.remove(t.element);\n          });\n          this.keystrokes.listenTo(this.element);\n        }\n      }, {\n        key: \"focus\",\n        value: function focus() {\n          this._focusCycler.focusFirst();\n        }\n      }, {\n        key: \"focusLast\",\n        value: function focusLast() {\n          this._focusCycler.focusLast();\n        }\n      }]);\n\n      return nw;\n    }(gb);\n\n    var iw = /*#__PURE__*/function (_gb12) {\n      _inherits(iw, _gb12);\n\n      var _super56 = _createSuper(iw);\n\n      function iw(e) {\n        var _this109;\n\n        _classCallCheck(this, iw);\n\n        _this109 = _super56.call(this, e);\n        _this109.children = _this109.createCollection();\n\n        _this109.setTemplate({\n          tag: \"li\",\n          attributes: {\n            class: [\"ck\", \"ck-list__item\"]\n          },\n          children: _this109.children\n        });\n\n        return _this109;\n      }\n\n      _createClass(iw, [{\n        key: \"focus\",\n        value: function focus() {\n          this.children.first.focus();\n        }\n      }]);\n\n      return iw;\n    }(gb);\n\n    var ow = /*#__PURE__*/function (_gb13) {\n      _inherits(ow, _gb13);\n\n      var _super57 = _createSuper(ow);\n\n      function ow(e) {\n        var _this110;\n\n        _classCallCheck(this, ow);\n\n        _this110 = _super57.call(this, e);\n\n        _this110.setTemplate({\n          tag: \"li\",\n          attributes: {\n            class: [\"ck\", \"ck-list__separator\"]\n          }\n        });\n\n        return _this110;\n      }\n\n      return _createClass(ow);\n    }(gb);\n\n    var sw = n(34);\n\n    var rw = /*#__PURE__*/function (_Kb2) {\n      _inherits(rw, _Kb2);\n\n      var _super58 = _createSuper(rw);\n\n      function rw(e) {\n        var _this111;\n\n        _classCallCheck(this, rw);\n\n        _this111 = _super58.call(this, e);\n        _this111.isToggleable = true;\n        _this111.toggleSwitchView = _this111._createToggleView();\n\n        _this111.extendTemplate({\n          attributes: {\n            class: \"ck-switchbutton\"\n          }\n        });\n\n        return _this111;\n      }\n\n      _createClass(rw, [{\n        key: \"render\",\n        value: function render() {\n          _get(_getPrototypeOf(rw.prototype), \"render\", this).call(this);\n\n          this.children.add(this.toggleSwitchView);\n        }\n      }, {\n        key: \"_createToggleView\",\n        value: function _createToggleView() {\n          var e = new gb();\n          e.setTemplate({\n            tag: \"span\",\n            attributes: {\n              class: [\"ck\", \"ck-button__toggle\"]\n            },\n            children: [{\n              tag: \"span\",\n              attributes: {\n                class: [\"ck\", \"ck-button__toggle__inner\"]\n              }\n            }]\n          });\n          return e;\n        }\n      }]);\n\n      return rw;\n    }(Kb);\n\n    function aw(_ref24) {\n      var e = _ref24.emitter,\n          t = _ref24.activator,\n          n = _ref24.callback,\n          i = _ref24.contextElements;\n      e.listenTo(document, \"mousedown\", function (e, _ref25) {\n        var o = _ref25.target;\n\n        if (!t()) {\n          return;\n        }\n\n        var _iterator268 = _createForOfIteratorHelper(i),\n            _step268;\n\n        try {\n          for (_iterator268.s(); !(_step268 = _iterator268.n()).done;) {\n            var _e216 = _step268.value;\n\n            if (_e216.contains(o)) {\n              return;\n            }\n          }\n        } catch (err) {\n          _iterator268.e(err);\n        } finally {\n          _iterator268.f();\n        }\n\n        n();\n      });\n    }\n\n    var cw = n(36);\n    var lw = n(38);\n\n    function dw(e) {\n      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : ew;\n      var n = new t(e);\n      var i = new Bb(e);\n      var o = new qb(e, n, i);\n      n.bind(\"isEnabled\").to(o);\n\n      if (n instanceof ew) {\n        n.bind(\"isOn\").to(o, \"isOpen\");\n      } else {\n        n.arrowView.bind(\"isOn\").to(o, \"isOpen\");\n      }\n\n      fw(o);\n      return o;\n    }\n\n    function uw(e, t) {\n      var n = e.locale;\n      var i = n.t;\n      var o = e.toolbarView = new _w(n);\n      o.set(\"ariaLabel\", i(\"bl\"));\n      e.extendTemplate({\n        attributes: {\n          class: [\"ck-toolbar-dropdown\"]\n        }\n      });\n      t.map(function (e) {\n        return o.items.add(e);\n      });\n      e.panelView.children.add(o);\n      o.items.delegate(\"execute\").to(e);\n    }\n\n    function hw(e, t) {\n      var n = e.locale;\n      var i = e.listView = new nw(n);\n      i.items.bindTo(t).using(function (_ref26) {\n        var e = _ref26.type,\n            t = _ref26.model;\n\n        if (e === \"separator\") {\n          return new ow(n);\n        } else if (e === \"button\" || e === \"switchbutton\") {\n          var _o66;\n\n          var _i141 = new iw(n);\n\n          var _o65;\n\n          if (e === \"button\") {\n            _o65 = new Kb(n);\n          } else {\n            _o65 = new rw(n);\n          }\n\n          (_o66 = _o65).bind.apply(_o66, _toConsumableArray(Object.keys(t))).to(t);\n\n          _o65.delegate(\"execute\").to(_i141);\n\n          _i141.children.add(_o65);\n\n          return _i141;\n        }\n      });\n      e.panelView.children.add(i);\n      i.items.delegate(\"execute\").to(e);\n    }\n\n    function fw(e) {\n      mw(e);\n      gw(e);\n      pw(e);\n    }\n\n    function mw(e) {\n      e.on(\"render\", function () {\n        aw({\n          emitter: e,\n          activator: function activator() {\n            return e.isOpen;\n          },\n          callback: function callback() {\n            e.isOpen = false;\n          },\n          contextElements: [e.element]\n        });\n      });\n    }\n\n    function gw(e) {\n      e.on(\"execute\", function (t) {\n        if (t.source instanceof rw) {\n          return;\n        }\n\n        e.isOpen = false;\n      });\n    }\n\n    function pw(e) {\n      e.keystrokes.set(\"arrowdown\", function (t, n) {\n        if (e.isOpen) {\n          e.panelView.focus();\n          n();\n        }\n      });\n      e.keystrokes.set(\"arrowup\", function (t, n) {\n        if (e.isOpen) {\n          e.panelView.focusLast();\n          n();\n        }\n      });\n    }\n\n    var bw = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"9.5\" cy=\"4.5\" r=\"1.5\"/><circle cx=\"9.5\" cy=\"10.5\" r=\"1.5\"/><circle cx=\"9.5\" cy=\"16.5\" r=\"1.5\"/></svg>';\n    var ww = n(40);\n\n    var _w = /*#__PURE__*/function (_gb14) {\n      _inherits(_w, _gb14);\n\n      var _super59 = _createSuper(_w);\n\n      function _w(e, t) {\n        var _this112;\n\n        _classCallCheck(this, _w);\n\n        _this112 = _super59.call(this, e);\n        var n = _this112.bindTemplate;\n        var i = _this112.t;\n        _this112.options = t || {};\n\n        _this112.set(\"ariaLabel\", i(\"bj\"));\n\n        _this112.set(\"maxWidth\", \"auto\");\n\n        _this112.items = _this112.createCollection();\n        _this112.focusTracker = new xp();\n        _this112.keystrokes = new dp();\n\n        _this112.set(\"class\");\n\n        _this112.set(\"isCompact\", false);\n\n        _this112.itemsView = new vw(e);\n        _this112.children = _this112.createCollection();\n\n        _this112.children.add(_this112.itemsView);\n\n        _this112.focusables = _this112.createCollection();\n        _this112._focusCycler = new Ob({\n          focusables: _this112.focusables,\n          focusTracker: _this112.focusTracker,\n          keystrokeHandler: _this112.keystrokes,\n          actions: {\n            focusPrevious: [\"arrowleft\", \"arrowup\"],\n            focusNext: [\"arrowright\", \"arrowdown\"]\n          }\n        });\n\n        _this112.setTemplate({\n          tag: \"div\",\n          attributes: {\n            class: [\"ck\", \"ck-toolbar\", n.to(\"class\"), n.if(\"isCompact\", \"ck-toolbar_compact\")],\n            role: \"toolbar\",\n            \"aria-label\": n.to(\"ariaLabel\"),\n            style: {\n              maxWidth: n.to(\"maxWidth\")\n            }\n          },\n          children: _this112.children,\n          on: {\n            mousedown: zb(_assertThisInitialized(_this112))\n          }\n        });\n\n        _this112._behavior = _this112.options.shouldGroupWhenFull ? new yw(_assertThisInitialized(_this112)) : new kw(_assertThisInitialized(_this112));\n        return _this112;\n      }\n\n      _createClass(_w, [{\n        key: \"render\",\n        value: function render() {\n          var _this113 = this;\n\n          _get(_getPrototypeOf(_w.prototype), \"render\", this).call(this);\n\n          var _iterator269 = _createForOfIteratorHelper(this.items),\n              _step269;\n\n          try {\n            for (_iterator269.s(); !(_step269 = _iterator269.n()).done;) {\n              var _e217 = _step269.value;\n              this.focusTracker.add(_e217.element);\n            }\n          } catch (err) {\n            _iterator269.e(err);\n          } finally {\n            _iterator269.f();\n          }\n\n          this.items.on(\"add\", function (e, t) {\n            _this113.focusTracker.add(t.element);\n          });\n          this.items.on(\"remove\", function (e, t) {\n            _this113.focusTracker.remove(t.element);\n          });\n          this.keystrokes.listenTo(this.element);\n\n          this._behavior.render(this);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this._behavior.destroy();\n\n          return _get(_getPrototypeOf(_w.prototype), \"destroy\", this).call(this);\n        }\n      }, {\n        key: \"focus\",\n        value: function focus() {\n          this._focusCycler.focusFirst();\n        }\n      }, {\n        key: \"focusLast\",\n        value: function focusLast() {\n          this._focusCycler.focusLast();\n        }\n      }, {\n        key: \"fillFromConfig\",\n        value: function fillFromConfig(e, t) {\n          var _this114 = this;\n\n          e.map(function (e) {\n            if (e == \"|\") {\n              _this114.items.add(new Rb());\n            } else if (t.has(e)) {\n              _this114.items.add(t.create(e));\n            } else {\n              console.warn(Object(rr[\"a\"])(\"toolbarview-item-unavailable: The requested toolbar item is unavailable.\"), {\n                name: e\n              });\n            }\n          });\n        }\n      }]);\n\n      return _w;\n    }(gb);\n\n    var vw = /*#__PURE__*/function (_gb15) {\n      _inherits(vw, _gb15);\n\n      var _super60 = _createSuper(vw);\n\n      function vw(e) {\n        var _this115;\n\n        _classCallCheck(this, vw);\n\n        _this115 = _super60.call(this, e);\n        _this115.children = _this115.createCollection();\n\n        _this115.setTemplate({\n          tag: \"div\",\n          attributes: {\n            class: [\"ck\", \"ck-toolbar__items\"]\n          },\n          children: _this115.children\n        });\n\n        return _this115;\n      }\n\n      return _createClass(vw);\n    }(gb);\n\n    var kw = /*#__PURE__*/function () {\n      function kw(e) {\n        _classCallCheck(this, kw);\n\n        var t = e.bindTemplate;\n        e.set(\"isVertical\", false);\n        e.itemsView.children.bindTo(e.items).using(function (e) {\n          return e;\n        });\n        e.focusables.bindTo(e.items).using(function (e) {\n          return e;\n        });\n        e.extendTemplate({\n          attributes: {\n            class: [t.if(\"isVertical\", \"ck-toolbar_vertical\")]\n          }\n        });\n      }\n\n      _createClass(kw, [{\n        key: \"render\",\n        value: function render() {}\n      }, {\n        key: \"destroy\",\n        value: function destroy() {}\n      }]);\n\n      return kw;\n    }();\n\n    var yw = /*#__PURE__*/function () {\n      function yw(e) {\n        var _this116 = this;\n\n        _classCallCheck(this, yw);\n\n        this.viewChildren = e.children;\n        this.viewFocusables = e.focusables;\n        this.viewItemsView = e.itemsView;\n        this.viewFocusTracker = e.focusTracker;\n        this.viewLocale = e.locale;\n        this.ungroupedItems = e.createCollection();\n        this.groupedItems = e.createCollection();\n        this.groupedItemsDropdown = this._createGroupedItemsDropdown();\n        this.resizeObserver = null;\n        this.cachedPadding = null;\n        e.itemsView.children.bindTo(this.ungroupedItems).using(function (e) {\n          return e;\n        });\n        this.ungroupedItems.on(\"add\", this._updateFocusCycleableItems.bind(this));\n        this.ungroupedItems.on(\"remove\", this._updateFocusCycleableItems.bind(this));\n        e.children.on(\"add\", this._updateFocusCycleableItems.bind(this));\n        e.children.on(\"remove\", this._updateFocusCycleableItems.bind(this));\n        e.items.on(\"add\", function (e, t, n) {\n          if (n > _this116.ungroupedItems.length) {\n            _this116.groupedItems.add(t, n - _this116.ungroupedItems.length);\n          } else {\n            _this116.ungroupedItems.add(t, n);\n          }\n\n          _this116._updateGrouping();\n        });\n        e.items.on(\"remove\", function (e, t, n) {\n          if (n > _this116.ungroupedItems.length) {\n            _this116.groupedItems.remove(t);\n          } else {\n            _this116.ungroupedItems.remove(t);\n          }\n\n          _this116._updateGrouping();\n        });\n        e.extendTemplate({\n          attributes: {\n            class: [\"ck-toolbar_grouping\"]\n          }\n        });\n      }\n\n      _createClass(yw, [{\n        key: \"render\",\n        value: function render(e) {\n          this.viewElement = e.element;\n\n          this._enableGroupingOnResize();\n\n          this._enableGroupingOnMaxWidthChange(e);\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.groupedItemsDropdown.destroy();\n          this.resizeObserver.destroy();\n        }\n      }, {\n        key: \"_updateGrouping\",\n        value: function _updateGrouping() {\n          if (!this.viewElement.ownerDocument.body.contains(this.viewElement)) {\n            return;\n          }\n\n          var e;\n\n          while (this._areItemsOverflowing) {\n            this._groupLastItem();\n\n            e = true;\n          }\n\n          if (!e && this.groupedItems.length) {\n            while (this.groupedItems.length && !this._areItemsOverflowing) {\n              this._ungroupFirstItem();\n            }\n\n            if (this._areItemsOverflowing) {\n              this._groupLastItem();\n            }\n          }\n        }\n      }, {\n        key: \"_areItemsOverflowing\",\n        get: function get() {\n          if (!this.ungroupedItems.length) {\n            return false;\n          }\n\n          var e = this.viewElement;\n          var t = this.viewLocale.uiLanguageDirection;\n          var n = new kh(e.lastChild);\n          var i = new kh(e);\n\n          if (!this.cachedPadding) {\n            var _n178 = Od.window.getComputedStyle(e);\n\n            var _i142 = t === \"ltr\" ? \"paddingRight\" : \"paddingLeft\";\n\n            this.cachedPadding = Number.parseInt(_n178[_i142]);\n          }\n\n          if (t === \"ltr\") {\n            return n.right > i.right - this.cachedPadding;\n          } else {\n            return n.left < i.left + this.cachedPadding;\n          }\n        }\n      }, {\n        key: \"_enableGroupingOnResize\",\n        value: function _enableGroupingOnResize() {\n          var _this117 = this;\n\n          var e;\n          this.resizeObserver = new jb(this.viewElement, function (t) {\n            if (!e || e !== t.contentRect.width) {\n              _this117._updateGrouping();\n\n              e = t.contentRect.width;\n            }\n          });\n\n          this._updateGrouping();\n        }\n      }, {\n        key: \"_enableGroupingOnMaxWidthChange\",\n        value: function _enableGroupingOnMaxWidthChange(e) {\n          var _this118 = this;\n\n          e.on(\"change:maxWidth\", function () {\n            _this118._updateGrouping();\n          });\n        }\n      }, {\n        key: \"_groupLastItem\",\n        value: function _groupLastItem() {\n          if (!this.groupedItems.length) {\n            this.viewChildren.add(new Rb());\n            this.viewChildren.add(this.groupedItemsDropdown);\n            this.viewFocusTracker.add(this.groupedItemsDropdown.element);\n          }\n\n          this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last), 0);\n        }\n      }, {\n        key: \"_ungroupFirstItem\",\n        value: function _ungroupFirstItem() {\n          this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first));\n\n          if (!this.groupedItems.length) {\n            this.viewChildren.remove(this.groupedItemsDropdown);\n            this.viewChildren.remove(this.viewChildren.last);\n            this.viewFocusTracker.remove(this.groupedItemsDropdown.element);\n          }\n        }\n      }, {\n        key: \"_createGroupedItemsDropdown\",\n        value: function _createGroupedItemsDropdown() {\n          var e = this.viewLocale;\n          var t = e.t;\n          var n = dw(e);\n          n.class = \"ck-toolbar__grouped-dropdown\";\n          n.panelPosition = e.uiLanguageDirection === \"ltr\" ? \"sw\" : \"se\";\n          uw(n, []);\n          n.buttonView.set({\n            label: t(\"bk\"),\n            tooltip: true,\n            icon: bw\n          });\n          n.toolbarView.items.bindTo(this.groupedItems).using(function (e) {\n            return e;\n          });\n          return n;\n        }\n      }, {\n        key: \"_updateFocusCycleableItems\",\n        value: function _updateFocusCycleableItems() {\n          var _this119 = this;\n\n          this.viewFocusables.clear();\n          this.ungroupedItems.map(function (e) {\n            _this119.viewFocusables.add(e);\n          });\n\n          if (this.groupedItems.length) {\n            this.viewFocusables.add(this.groupedItemsDropdown);\n          }\n        }\n      }]);\n\n      return yw;\n    }();\n\n    var xw = n(42);\n\n    var Aw = /*#__PURE__*/function (_Cb) {\n      _inherits(Aw, _Cb);\n\n      var _super61 = _createSuper(Aw);\n\n      function Aw(e, t) {\n        var _this120;\n\n        var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n        _classCallCheck(this, Aw);\n\n        _this120 = _super61.call(this, e);\n        _this120.stickyPanel = new Ib(e);\n        _this120.toolbar = new _w(e, {\n          shouldGroupWhenFull: n.shouldToolbarGroupWhenFull\n        });\n        _this120.editable = new Mb(e, t);\n        return _this120;\n      }\n\n      _createClass(Aw, [{\n        key: \"render\",\n        value: function render() {\n          _get(_getPrototypeOf(Aw.prototype), \"render\", this).call(this);\n\n          this.stickyPanel.content.add(this.toolbar);\n          this.top.add(this.stickyPanel);\n          this.main.add(this.editable);\n        }\n      }]);\n\n      return Aw;\n    }(Cb);\n\n    function Cw(e) {\n      if (e instanceof HTMLTextAreaElement) {\n        return e.value;\n      }\n\n      return e.innerHTML;\n    }\n\n    var Tw = /*#__PURE__*/function (_hp) {\n      _inherits(Tw, _hp);\n\n      var _super62 = _createSuper(Tw);\n\n      function Tw(e, t) {\n        var _this121;\n\n        _classCallCheck(this, Tw);\n\n        _this121 = _super62.call(this, t);\n\n        if (Js(e)) {\n          _this121.sourceElement = e;\n        }\n\n        _this121.data.processor = new vp(_this121.data.viewDocument);\n\n        _this121.model.document.createRoot();\n\n        var n = !_this121.config.get(\"toolbar.shouldNotGroupWhenFull\");\n        var i = new Aw(_this121.locale, _this121.editing.view, {\n          shouldToolbarGroupWhenFull: n\n        });\n        _this121.ui = new zp(_assertThisInitialized(_this121), i);\n        wp(_assertThisInitialized(_this121));\n        return _this121;\n      }\n\n      _createClass(Tw, [{\n        key: \"destroy\",\n        value: function destroy() {\n          if (this.sourceElement) {\n            this.updateSourceElement();\n          }\n\n          this.ui.destroy();\n          return _get(_getPrototypeOf(Tw.prototype), \"destroy\", this).call(this);\n        }\n      }], [{\n        key: \"create\",\n        value: function create(e) {\n          var _this122 = this;\n\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          return new Promise(function (n) {\n            var i = new _this122(e, t);\n            n(i.initPlugins().then(function () {\n              return i.ui.init(Js(e) ? e : null);\n            }).then(function () {\n              if (!Js(e) && t.initialData) {\n                throw new rr[\"b\"](\"editor-create-initial-data: \" + \"The config.initialData option cannot be used together with initial data passed in Editor.create().\", null);\n              }\n\n              var n = t.initialData || Mw(e);\n              return i.data.init(n);\n            }).then(function () {\n              return i.fire(\"ready\");\n            }).then(function () {\n              return i;\n            }));\n          });\n        }\n      }]);\n\n      return Tw;\n    }(hp);\n\n    kr(Tw, mp);\n    kr(Tw, bp);\n\n    function Mw(e) {\n      return Js(e) ? Cw(e) : e;\n    }\n\n    var Pw = /*#__PURE__*/function () {\n      function Pw(e, t, n) {\n        _classCallCheck(this, Pw);\n\n        var i;\n        var o = null;\n\n        if (typeof n == \"function\") {\n          i = n;\n        } else {\n          o = e.commands.get(n);\n\n          i = function i() {\n            e.execute(n);\n          };\n        }\n\n        e.model.document.on(\"change\", function (n, s) {\n          if (o && !o.isEnabled) {\n            return;\n          }\n\n          if (s.type == \"transparent\") {\n            return;\n          }\n\n          var r = Array.from(e.model.document.differ.getChanges());\n          var a = r[0];\n\n          if (r.length != 1 || a.type !== \"insert\" || a.name != \"$text\" || a.length != 1) {\n            return;\n          }\n\n          var c = a.position.parent;\n\n          if (!c.is(\"paragraph\") || c.childCount !== 1) {\n            return;\n          }\n\n          var l = t.exec(c.getChild(0).data);\n\n          if (!l) {\n            return;\n          }\n\n          e.model.enqueueChange(function (e) {\n            var t = e.createPositionAt(c, 0);\n            var n = e.createPositionAt(c, l[0].length);\n            var o = new sf(t, n);\n            var s = i({\n              match: l\n            });\n\n            if (s !== false) {\n              e.remove(o);\n            }\n\n            o.detach();\n          });\n        });\n      }\n\n      _createClass(Pw, null, [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"BlockAutoformatEditing\";\n        }\n      }]);\n\n      return Pw;\n    }();\n\n    function Ew(e, t) {\n      var n = e.start;\n      var i = Array.from(e.getItems()).reduce(function (e, i) {\n        if (!(i.is(\"text\") || i.is(\"textProxy\"))) {\n          n = t.createPositionAfter(i);\n          return \"\";\n        }\n\n        return e + i.data;\n      }, \"\");\n      return {\n        text: i,\n        range: t.createRange(n, e.end)\n      };\n    }\n\n    var Sw = /*#__PURE__*/function () {\n      function Sw(e, t, n) {\n        _classCallCheck(this, Sw);\n\n        var i;\n        var o;\n        var s;\n        var r;\n\n        if (t instanceof RegExp) {\n          i = t;\n        } else {\n          s = t;\n        }\n\n        if (typeof n == \"string\") {\n          o = n;\n        } else {\n          r = n;\n        }\n\n        s = s || function (e) {\n          var t;\n          var n = [];\n          var o = [];\n\n          while ((t = i.exec(e)) !== null) {\n            if (t && t.length < 4) {\n              break;\n            }\n\n            var _t207 = t,\n                _e218 = _t207.index,\n                _i143 = _t207[1],\n                _s31 = _t207[2],\n                _r20 = _t207[3];\n\n            var _a12 = _i143 + _s31 + _r20;\n\n            _e218 += t[0].length - _a12.length;\n            var _c6 = [_e218, _e218 + _i143.length];\n            var _l3 = [_e218 + _i143.length + _s31.length, _e218 + _i143.length + _s31.length + _r20.length];\n            n.push(_c6);\n            n.push(_l3);\n            o.push([_e218 + _i143.length, _e218 + _i143.length + _s31.length]);\n          }\n\n          return {\n            remove: n,\n            format: o\n          };\n        };\n\n        r = r || function (t, n) {\n          var i = e.model.schema.getValidRanges(n, o);\n\n          var _iterator270 = _createForOfIteratorHelper(i),\n              _step270;\n\n          try {\n            for (_iterator270.s(); !(_step270 = _iterator270.n()).done;) {\n              var _e219 = _step270.value;\n              t.setAttribute(o, true, _e219);\n            }\n          } catch (err) {\n            _iterator270.e(err);\n          } finally {\n            _iterator270.f();\n          }\n\n          t.removeSelectionAttribute(o);\n        };\n\n        e.model.document.on(\"change\", function (t, n) {\n          if (n.type == \"transparent\") {\n            return;\n          }\n\n          var i = e.model;\n          var o = i.document.selection;\n\n          if (!o.isCollapsed) {\n            return;\n          }\n\n          var a = Array.from(i.document.differ.getChanges());\n          var c = a[0];\n\n          if (a.length != 1 || c.type !== \"insert\" || c.name != \"$text\" || c.length != 1) {\n            return;\n          }\n\n          var l = o.focus;\n          var d = l.parent;\n\n          var _Ew = Ew(i.createRange(i.createPositionAt(d, 0), l), i),\n              u = _Ew.text,\n              h = _Ew.range;\n\n          var f = s(u);\n          var m = Iw(h.start, f.format, i);\n          var g = Iw(h.start, f.remove, i);\n\n          if (!(m.length && g.length)) {\n            return;\n          }\n\n          i.enqueueChange(function (e) {\n            var t = r(e, m);\n\n            if (t === false) {\n              return;\n            }\n\n            var _iterator271 = _createForOfIteratorHelper(g.reverse()),\n                _step271;\n\n            try {\n              for (_iterator271.s(); !(_step271 = _iterator271.n()).done;) {\n                var _t208 = _step271.value;\n                e.remove(_t208);\n              }\n            } catch (err) {\n              _iterator271.e(err);\n            } finally {\n              _iterator271.f();\n            }\n          });\n        });\n      }\n\n      _createClass(Sw, null, [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"InlineAutoformatEditing\";\n        }\n      }]);\n\n      return Sw;\n    }();\n\n    function Iw(e, t, n) {\n      return t.filter(function (e) {\n        return e[0] !== undefined && e[1] !== undefined;\n      }).map(function (t) {\n        return n.createRange(e.getShiftedBy(t[0]), e.getShiftedBy(t[1]));\n      });\n    }\n\n    var Ow = /*#__PURE__*/function () {\n      function Ow(e) {\n        _classCallCheck(this, Ow);\n\n        this.editor = e;\n        this.set(\"isEnabled\", true);\n        this._disableStack = new Set();\n      }\n\n      _createClass(Ow, [{\n        key: \"forceDisabled\",\n        value: function forceDisabled(e) {\n          this._disableStack.add(e);\n\n          if (this._disableStack.size == 1) {\n            this.on(\"set:isEnabled\", Nw, {\n              priority: \"highest\"\n            });\n            this.isEnabled = false;\n          }\n        }\n      }, {\n        key: \"clearForceDisabled\",\n        value: function clearForceDisabled(e) {\n          this._disableStack.delete(e);\n\n          if (this._disableStack.size == 0) {\n            this.off(\"set:isEnabled\", Nw);\n            this.isEnabled = true;\n          }\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.stopListening();\n        }\n      }], [{\n        key: \"isContextPlugin\",\n        get: function get() {\n          return false;\n        }\n      }]);\n\n      return Ow;\n    }();\n\n    kr(Ow, Qc);\n\n    function Nw(e) {\n      e.return = false;\n      e.stop();\n    }\n\n    var Rw = /*#__PURE__*/function (_Ow) {\n      _inherits(Rw, _Ow);\n\n      var _super63 = _createSuper(Rw);\n\n      function Rw() {\n        _classCallCheck(this, Rw);\n\n        return _super63.apply(this, arguments);\n      }\n\n      _createClass(Rw, [{\n        key: \"afterInit\",\n        value: function afterInit() {\n          this._addListAutoformats();\n\n          this._addBasicStylesAutoformats();\n\n          this._addHeadingAutoformats();\n\n          this._addBlockQuoteAutoformats();\n\n          this._addCodeBlockAutoformats();\n        }\n      }, {\n        key: \"_addListAutoformats\",\n        value: function _addListAutoformats() {\n          var e = this.editor.commands;\n\n          if (e.get(\"bulletedList\")) {\n            new Pw(this.editor, /^[*-]\\s$/, \"bulletedList\");\n          }\n\n          if (e.get(\"numberedList\")) {\n            new Pw(this.editor, /^1[.|)]\\s$/, \"numberedList\");\n          }\n        }\n      }, {\n        key: \"_addBasicStylesAutoformats\",\n        value: function _addBasicStylesAutoformats() {\n          var e = this.editor.commands;\n\n          if (e.get(\"bold\")) {\n            var _e220 = Lw(this.editor, \"bold\");\n\n            new Sw(this.editor, /(\\*\\*)([^*]+)(\\*\\*)$/g, _e220);\n            new Sw(this.editor, /(__)([^_]+)(__)$/g, _e220);\n          }\n\n          if (e.get(\"italic\")) {\n            var _e221 = Lw(this.editor, \"italic\");\n\n            new Sw(this.editor, /(?:^|[^*])(\\*)([^*_]+)(\\*)$/g, _e221);\n            new Sw(this.editor, /(?:^|[^_])(_)([^_]+)(_)$/g, _e221);\n          }\n\n          if (e.get(\"code\")) {\n            var _e222 = Lw(this.editor, \"code\");\n\n            new Sw(this.editor, /(`)([^`]+)(`)$/g, _e222);\n          }\n        }\n      }, {\n        key: \"_addHeadingAutoformats\",\n        value: function _addHeadingAutoformats() {\n          var _this123 = this;\n\n          var e = this.editor.commands.get(\"heading\");\n\n          if (e) {\n            e.modelElements.filter(function (e) {\n              return e.match(/^heading[1-6]$/);\n            }).forEach(function (t) {\n              var n = t[7];\n              var i = new RegExp(\"^(#{\".concat(n, \"})\\\\s$\"));\n              new Pw(_this123.editor, i, function () {\n                if (!e.isEnabled) {\n                  return false;\n                }\n\n                _this123.editor.execute(\"heading\", {\n                  value: t\n                });\n              });\n            });\n          }\n        }\n      }, {\n        key: \"_addBlockQuoteAutoformats\",\n        value: function _addBlockQuoteAutoformats() {\n          if (this.editor.commands.get(\"blockQuote\")) {\n            new Pw(this.editor, /^>\\s$/, \"blockQuote\");\n          }\n        }\n      }, {\n        key: \"_addCodeBlockAutoformats\",\n        value: function _addCodeBlockAutoformats() {\n          if (this.editor.commands.get(\"codeBlock\")) {\n            new Pw(this.editor, /^```$/, \"codeBlock\");\n          }\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"Autoformat\";\n        }\n      }]);\n\n      return Rw;\n    }(Ow);\n\n    function Lw(e, t) {\n      return function (n, i) {\n        var o = e.commands.get(t);\n\n        if (!o.isEnabled) {\n          return false;\n        }\n\n        var s = e.model.schema.getValidRanges(i, t);\n\n        var _iterator272 = _createForOfIteratorHelper(s),\n            _step272;\n\n        try {\n          for (_iterator272.s(); !(_step272 = _iterator272.n()).done;) {\n            var _e223 = _step272.value;\n            n.setAttribute(t, true, _e223);\n          }\n        } catch (err) {\n          _iterator272.e(err);\n        } finally {\n          _iterator272.f();\n        }\n\n        n.removeSelectionAttribute(t);\n      };\n    }\n\n    var jw = /*#__PURE__*/function () {\n      function jw(e) {\n        var _this124 = this;\n\n        _classCallCheck(this, jw);\n\n        this.editor = e;\n        this.set(\"value\", undefined);\n        this.set(\"isEnabled\", false);\n        this._disableStack = new Set();\n        this.decorate(\"execute\");\n        this.listenTo(this.editor.model.document, \"change\", function () {\n          _this124.refresh();\n        });\n        this.on(\"execute\", function (e) {\n          if (!_this124.isEnabled) {\n            e.stop();\n          }\n        }, {\n          priority: \"high\"\n        });\n        this.listenTo(e, \"change:isReadOnly\", function (e, t, n) {\n          if (n) {\n            _this124.forceDisabled(\"readOnlyMode\");\n          } else {\n            _this124.clearForceDisabled(\"readOnlyMode\");\n          }\n        });\n      }\n\n      _createClass(jw, [{\n        key: \"refresh\",\n        value: function refresh() {\n          this.isEnabled = true;\n        }\n      }, {\n        key: \"forceDisabled\",\n        value: function forceDisabled(e) {\n          this._disableStack.add(e);\n\n          if (this._disableStack.size == 1) {\n            this.on(\"set:isEnabled\", Dw, {\n              priority: \"highest\"\n            });\n            this.isEnabled = false;\n          }\n        }\n      }, {\n        key: \"clearForceDisabled\",\n        value: function clearForceDisabled(e) {\n          this._disableStack.delete(e);\n\n          if (this._disableStack.size == 0) {\n            this.off(\"set:isEnabled\", Dw);\n            this.refresh();\n          }\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {}\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.stopListening();\n        }\n      }]);\n\n      return jw;\n    }();\n\n    kr(jw, Qc);\n\n    function Dw(e) {\n      e.return = false;\n      e.stop();\n    }\n\n    function zw(e) {\n      var t = e.next();\n\n      if (t.done) {\n        return null;\n      }\n\n      return t.value;\n    }\n\n    var Bw = /*#__PURE__*/function (_jw) {\n      _inherits(Bw, _jw);\n\n      var _super64 = _createSuper(Bw);\n\n      function Bw() {\n        _classCallCheck(this, Bw);\n\n        return _super64.apply(this, arguments);\n      }\n\n      _createClass(Bw, [{\n        key: \"refresh\",\n        value: function refresh() {\n          this.value = this._getValue();\n          this.isEnabled = this._checkEnabled();\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var _this125 = this;\n\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          var t = this.editor.model;\n          var n = t.schema;\n          var i = t.document.selection;\n          var o = Array.from(i.getSelectedBlocks());\n          var s = e.forceValue === undefined ? !this.value : e.forceValue;\n          t.change(function (e) {\n            if (!s) {\n              _this125._removeQuote(e, o.filter(Vw));\n            } else {\n              var _t209 = o.filter(function (e) {\n                return Vw(e) || Hw(n, e);\n              });\n\n              _this125._applyQuote(e, _t209);\n            }\n          });\n        }\n      }, {\n        key: \"_getValue\",\n        value: function _getValue() {\n          var e = this.editor.model.document.selection;\n          var t = zw(e.getSelectedBlocks());\n          return !!(t && Vw(t));\n        }\n      }, {\n        key: \"_checkEnabled\",\n        value: function _checkEnabled() {\n          if (this.value) {\n            return true;\n          }\n\n          var e = this.editor.model.document.selection;\n          var t = this.editor.model.schema;\n          var n = zw(e.getSelectedBlocks());\n\n          if (!n) {\n            return false;\n          }\n\n          return Hw(t, n);\n        }\n      }, {\n        key: \"_removeQuote\",\n        value: function _removeQuote(e, t) {\n          Fw(e, t).reverse().forEach(function (t) {\n            if (t.start.isAtStart && t.end.isAtEnd) {\n              e.unwrap(t.start.parent);\n              return;\n            }\n\n            if (t.start.isAtStart) {\n              var _n179 = e.createPositionBefore(t.start.parent);\n\n              e.move(t, _n179);\n              return;\n            }\n\n            if (!t.end.isAtEnd) {\n              e.split(t.end);\n            }\n\n            var n = e.createPositionAfter(t.end.parent);\n            e.move(t, n);\n          });\n        }\n      }, {\n        key: \"_applyQuote\",\n        value: function _applyQuote(e, t) {\n          var n = [];\n          Fw(e, t).reverse().forEach(function (t) {\n            var i = Vw(t.start);\n\n            if (!i) {\n              i = e.createElement(\"blockQuote\");\n              e.wrap(t, i);\n            }\n\n            n.push(i);\n          });\n          n.reverse().reduce(function (t, n) {\n            if (t.nextSibling == n) {\n              e.merge(e.createPositionAfter(t));\n              return t;\n            }\n\n            return n;\n          });\n        }\n      }]);\n\n      return Bw;\n    }(jw);\n\n    function Vw(e) {\n      return e.parent.name == \"blockQuote\" ? e.parent : null;\n    }\n\n    function Fw(e, t) {\n      var n;\n      var i = 0;\n      var o = [];\n\n      while (i < t.length) {\n        var _s32 = t[i];\n        var _r21 = t[i + 1];\n\n        if (!n) {\n          n = e.createPositionBefore(_s32);\n        }\n\n        if (!_r21 || _s32.nextSibling != _r21) {\n          o.push(e.createRange(n, e.createPositionAfter(_s32)));\n          n = null;\n        }\n\n        i++;\n      }\n\n      return o;\n    }\n\n    function Hw(e, t) {\n      var n = e.checkChild(t.parent, \"blockQuote\");\n      var i = e.checkChild([\"$root\", \"blockQuote\"], t);\n      return n && i;\n    }\n\n    var Uw = /*#__PURE__*/function (_Ow2) {\n      _inherits(Uw, _Ow2);\n\n      var _super65 = _createSuper(Uw);\n\n      function Uw() {\n        _classCallCheck(this, Uw);\n\n        return _super65.apply(this, arguments);\n      }\n\n      _createClass(Uw, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          var t = e.model.schema;\n          e.commands.add(\"blockQuote\", new Bw(e));\n          t.register(\"blockQuote\", {\n            allowWhere: \"$block\",\n            allowContentOf: \"$root\"\n          });\n          t.addChildCheck(function (e, t) {\n            if (e.endsWith(\"blockQuote\") && t.name == \"blockQuote\") {\n              return false;\n            }\n          });\n          e.conversion.elementToElement({\n            model: \"blockQuote\",\n            view: \"blockquote\"\n          });\n          e.model.document.registerPostFixer(function (n) {\n            var i = e.model.document.differ.getChanges();\n\n            var _iterator273 = _createForOfIteratorHelper(i),\n                _step273;\n\n            try {\n              for (_iterator273.s(); !(_step273 = _iterator273.n()).done;) {\n                var _e224 = _step273.value;\n\n                if (_e224.type == \"insert\") {\n                  var _i144 = _e224.position.nodeAfter;\n\n                  if (!_i144) {\n                    continue;\n                  }\n\n                  if (_i144.is(\"blockQuote\") && _i144.isEmpty) {\n                    n.remove(_i144);\n                    return true;\n                  } else if (_i144.is(\"blockQuote\") && !t.checkChild(_e224.position, _i144)) {\n                    n.unwrap(_i144);\n                    return true;\n                  } else if (_i144.is(\"element\")) {\n                    var _e225 = n.createRangeIn(_i144);\n\n                    var _iterator274 = _createForOfIteratorHelper(_e225.getItems()),\n                        _step274;\n\n                    try {\n                      for (_iterator274.s(); !(_step274 = _iterator274.n()).done;) {\n                        var _i145 = _step274.value;\n\n                        if (_i145.is(\"blockQuote\") && !t.checkChild(n.createPositionBefore(_i145), _i145)) {\n                          n.unwrap(_i145);\n                          return true;\n                        }\n                      }\n                    } catch (err) {\n                      _iterator274.e(err);\n                    } finally {\n                      _iterator274.f();\n                    }\n                  }\n                } else if (_e224.type == \"remove\") {\n                  var _t210 = _e224.position.parent;\n\n                  if (_t210.is(\"blockQuote\") && _t210.isEmpty) {\n                    n.remove(_t210);\n                    return true;\n                  }\n                }\n              }\n            } catch (err) {\n              _iterator273.e(err);\n            } finally {\n              _iterator273.f();\n            }\n\n            return false;\n          });\n        }\n      }, {\n        key: \"afterInit\",\n        value: function afterInit() {\n          var _this126 = this;\n\n          var e = this.editor;\n          var t = e.commands.get(\"blockQuote\");\n          this.listenTo(this.editor.editing.view.document, \"enter\", function (e, n) {\n            var i = _this126.editor.model.document;\n            var o = i.selection.getLastPosition().parent;\n\n            if (i.selection.isCollapsed && o.isEmpty && t.value) {\n              _this126.editor.execute(\"blockQuote\");\n\n              _this126.editor.editing.view.scrollToTheSelection();\n\n              n.preventDefault();\n              e.stop();\n            }\n          });\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"BlockQuoteEditing\";\n        }\n      }]);\n\n      return Uw;\n    }(Ow);\n\n    var Ww = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M3 10.423a6.5 6.5 0 0 1 6.056-6.408l.038.67C6.448 5.423 5.354 7.663 5.22 10H9c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574zm8 0a6.5 6.5 0 0 1 6.056-6.408l.038.67c-2.646.739-3.74 2.979-3.873 5.315H17c.552 0 .5.432.5.986v4.511c0 .554-.448.503-1 .503h-5c-.552 0-.5-.449-.5-1.003v-4.574z\"/></svg>';\n    var $w = n(44);\n\n    var qw = /*#__PURE__*/function (_Ow3) {\n      _inherits(qw, _Ow3);\n\n      var _super66 = _createSuper(qw);\n\n      function qw() {\n        _classCallCheck(this, qw);\n\n        return _super66.apply(this, arguments);\n      }\n\n      _createClass(qw, [{\n        key: \"init\",\n        value: function init() {\n          var _this127 = this;\n\n          var e = this.editor;\n          var t = e.t;\n          e.ui.componentFactory.add(\"blockQuote\", function (n) {\n            var i = e.commands.get(\"blockQuote\");\n            var o = new Kb(n);\n            o.set({\n              label: t(\"d\"),\n              icon: Ww,\n              tooltip: true,\n              isToggleable: true\n            });\n            o.bind(\"isOn\", \"isEnabled\").to(i, \"value\", \"isEnabled\");\n\n            _this127.listenTo(o, \"execute\", function () {\n              e.execute(\"blockQuote\");\n              e.editing.view.focus();\n            });\n\n            return o;\n          });\n        }\n      }]);\n\n      return qw;\n    }(Ow);\n\n    var Yw = /*#__PURE__*/function (_Ow4) {\n      _inherits(Yw, _Ow4);\n\n      var _super67 = _createSuper(Yw);\n\n      function Yw() {\n        _classCallCheck(this, Yw);\n\n        return _super67.apply(this, arguments);\n      }\n\n      _createClass(Yw, null, [{\n        key: \"requires\",\n        get: function get() {\n          return [Uw, qw];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"BlockQuote\";\n        }\n      }]);\n\n      return Yw;\n    }(Ow);\n\n    var Jw = /*#__PURE__*/function (_jw2) {\n      _inherits(Jw, _jw2);\n\n      var _super68 = _createSuper(Jw);\n\n      function Jw(e, t) {\n        var _this128;\n\n        _classCallCheck(this, Jw);\n\n        _this128 = _super68.call(this, e);\n        _this128.attributeKey = t;\n        return _this128;\n      }\n\n      _createClass(Jw, [{\n        key: \"refresh\",\n        value: function refresh() {\n          var e = this.editor.model;\n          var t = e.document;\n          this.value = this._getValueFromFirstAllowedNode();\n          this.isEnabled = e.schema.checkAttributeInSelection(t.selection, this.attributeKey);\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var _this129 = this;\n\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          var t = this.editor.model;\n          var n = t.document;\n          var i = n.selection;\n          var o = e.forceValue === undefined ? !this.value : e.forceValue;\n          t.change(function (e) {\n            if (i.isCollapsed) {\n              if (o) {\n                e.setSelectionAttribute(_this129.attributeKey, true);\n              } else {\n                e.removeSelectionAttribute(_this129.attributeKey);\n              }\n            } else {\n              var _n180 = t.schema.getValidRanges(i.getRanges(), _this129.attributeKey);\n\n              var _iterator275 = _createForOfIteratorHelper(_n180),\n                  _step275;\n\n              try {\n                for (_iterator275.s(); !(_step275 = _iterator275.n()).done;) {\n                  var _t211 = _step275.value;\n\n                  if (o) {\n                    e.setAttribute(_this129.attributeKey, o, _t211);\n                  } else {\n                    e.removeAttribute(_this129.attributeKey, _t211);\n                  }\n                }\n              } catch (err) {\n                _iterator275.e(err);\n              } finally {\n                _iterator275.f();\n              }\n            }\n          });\n        }\n      }, {\n        key: \"_getValueFromFirstAllowedNode\",\n        value: function _getValueFromFirstAllowedNode() {\n          var e = this.editor.model;\n          var t = e.schema;\n          var n = e.document.selection;\n\n          if (n.isCollapsed) {\n            return n.hasAttribute(this.attributeKey);\n          }\n\n          var _iterator276 = _createForOfIteratorHelper(n.getRanges()),\n              _step276;\n\n          try {\n            for (_iterator276.s(); !(_step276 = _iterator276.n()).done;) {\n              var _e226 = _step276.value;\n\n              var _iterator277 = _createForOfIteratorHelper(_e226.getItems()),\n                  _step277;\n\n              try {\n                for (_iterator277.s(); !(_step277 = _iterator277.n()).done;) {\n                  var _n181 = _step277.value;\n\n                  if (t.checkAttribute(_n181, this.attributeKey)) {\n                    return _n181.hasAttribute(this.attributeKey);\n                  }\n                }\n              } catch (err) {\n                _iterator277.e(err);\n              } finally {\n                _iterator277.f();\n              }\n            }\n          } catch (err) {\n            _iterator276.e(err);\n          } finally {\n            _iterator276.f();\n          }\n\n          return false;\n        }\n      }]);\n\n      return Jw;\n    }(jw);\n\n    var Qw = \"bold\";\n\n    var Xw = /*#__PURE__*/function (_Ow5) {\n      _inherits(Xw, _Ow5);\n\n      var _super69 = _createSuper(Xw);\n\n      function Xw() {\n        _classCallCheck(this, Xw);\n\n        return _super69.apply(this, arguments);\n      }\n\n      _createClass(Xw, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          e.model.schema.extend(\"$text\", {\n            allowAttributes: Qw\n          });\n          e.model.schema.setAttributeProperties(Qw, {\n            isFormatting: true,\n            copyOnEnter: true\n          });\n          e.conversion.attributeToElement({\n            model: Qw,\n            view: \"strong\",\n            upcastAlso: [\"b\", function (e) {\n              var t = e.getStyle(\"font-weight\");\n\n              if (!t) {\n                return null;\n              }\n\n              if (t == \"bold\" || Number(t) >= 600) {\n                return {\n                  name: true,\n                  styles: [\"font-weight\"]\n                };\n              }\n            }]\n          });\n          e.commands.add(Qw, new Jw(e, Qw));\n          e.keystrokes.set(\"CTRL+B\", Qw);\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"BoldEditing\";\n        }\n      }]);\n\n      return Xw;\n    }(Ow);\n\n    var Gw = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z\"/></svg>';\n    var Kw = \"bold\";\n\n    var Zw = /*#__PURE__*/function (_Ow6) {\n      _inherits(Zw, _Ow6);\n\n      var _super70 = _createSuper(Zw);\n\n      function Zw() {\n        _classCallCheck(this, Zw);\n\n        return _super70.apply(this, arguments);\n      }\n\n      _createClass(Zw, [{\n        key: \"init\",\n        value: function init() {\n          var _this130 = this;\n\n          var e = this.editor;\n          var t = e.t;\n          e.ui.componentFactory.add(Kw, function (n) {\n            var i = e.commands.get(Kw);\n            var o = new Kb(n);\n            o.set({\n              label: t(\"ai\"),\n              icon: Gw,\n              keystroke: \"CTRL+B\",\n              tooltip: true,\n              isToggleable: true\n            });\n            o.bind(\"isOn\", \"isEnabled\").to(i, \"value\", \"isEnabled\");\n\n            _this130.listenTo(o, \"execute\", function () {\n              e.execute(Kw);\n              e.editing.view.focus();\n            });\n\n            return o;\n          });\n        }\n      }]);\n\n      return Zw;\n    }(Ow);\n\n    var e_ = /*#__PURE__*/function (_Ow7) {\n      _inherits(e_, _Ow7);\n\n      var _super71 = _createSuper(e_);\n\n      function e_() {\n        _classCallCheck(this, e_);\n\n        return _super71.apply(this, arguments);\n      }\n\n      _createClass(e_, null, [{\n        key: \"requires\",\n        get: function get() {\n          return [Xw, Zw];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"Bold\";\n        }\n      }]);\n\n      return e_;\n    }(Ow);\n\n    var t_ = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.627 16.5zm5.873-.196zm0-7.001V8h-13v8.5h4.341c.191.54.457 1.044.785 1.5H2a1.5 1.5 0 0 1-1.5-1.5v-13A1.5 1.5 0 0 1 2 2h4.5a1.5 1.5 0 0 1 1.06.44L9.122 4H16a1.5 1.5 0 0 1 1.5 1.5v1A1.5 1.5 0 0 1 19 8v2.531a6.027 6.027 0 0 0-1.5-1.228zM16 6.5v-1H8.5l-2-2H2v13h1V8a1.5 1.5 0 0 1 1.5-1.5H16z\"/><path d=\"M14.5 19.5a5 5 0 1 1 0-10 5 5 0 0 1 0 10zM15 14v-2h-1v2h-2v1h2v2h1v-2h2v-1h-2z\"/></svg>';\n\n    var n_ = /*#__PURE__*/function (_Ow8) {\n      _inherits(n_, _Ow8);\n\n      var _super72 = _createSuper(n_);\n\n      function n_() {\n        _classCallCheck(this, n_);\n\n        return _super72.apply(this, arguments);\n      }\n\n      _createClass(n_, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          var t = e.ui.componentFactory;\n          var n = e.t;\n          t.add(\"ckfinder\", function (t) {\n            var i = e.commands.get(\"ckfinder\");\n            var o = new Kb(t);\n            o.set({\n              label: n(\"e\"),\n              icon: t_,\n              tooltip: true\n            });\n            o.bind(\"isEnabled\").to(i);\n            o.on(\"execute\", function () {\n              e.execute(\"ckfinder\");\n              e.editing.view.focus();\n            });\n            return o;\n          });\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"CKFinderUI\";\n        }\n      }]);\n\n      return n_;\n    }(Ow);\n\n    var i_ = /*#__PURE__*/function (_Yd5) {\n      _inherits(i_, _Yd5);\n\n      var _super73 = _createSuper(i_);\n\n      function i_() {\n        _classCallCheck(this, i_);\n\n        return _super73.apply(this, arguments);\n      }\n\n      _createClass(i_, [{\n        key: \"observe\",\n        value: function observe(e) {\n          var _this131 = this;\n\n          this.listenTo(e, \"load\", function (e, t) {\n            var n = t.target;\n\n            if (n.tagName == \"IMG\") {\n              _this131._fireEvents(t);\n            }\n          }, {\n            useCapture: true\n          });\n        }\n      }, {\n        key: \"_fireEvents\",\n        value: function _fireEvents(e) {\n          if (this.isEnabled) {\n            this.document.fire(\"layoutChanged\");\n            this.document.fire(\"imageLoaded\", e);\n          }\n        }\n      }]);\n\n      return i_;\n    }(Yd);\n\n    var o_ = /*#__PURE__*/function () {\n      function o_() {\n        _classCallCheck(this, o_);\n\n        this._stack = [];\n      }\n\n      _createClass(o_, [{\n        key: \"add\",\n        value: function add(e, t) {\n          var n = this._stack;\n          var i = n[0];\n\n          this._insertDescriptor(e);\n\n          var o = n[0];\n\n          if (i !== o && !s_(i, o)) {\n            this.fire(\"change:top\", {\n              oldDescriptor: i,\n              newDescriptor: o,\n              writer: t\n            });\n          }\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(e, t) {\n          var n = this._stack;\n          var i = n[0];\n\n          this._removeDescriptor(e);\n\n          var o = n[0];\n\n          if (i !== o && !s_(i, o)) {\n            this.fire(\"change:top\", {\n              oldDescriptor: i,\n              newDescriptor: o,\n              writer: t\n            });\n          }\n        }\n      }, {\n        key: \"_insertDescriptor\",\n        value: function _insertDescriptor(e) {\n          var t = this._stack;\n          var n = t.findIndex(function (t) {\n            return t.id === e.id;\n          });\n\n          if (s_(e, t[n])) {\n            return;\n          }\n\n          if (n > -1) {\n            t.splice(n, 1);\n          }\n\n          var i = 0;\n\n          while (t[i] && r_(t[i], e)) {\n            i++;\n          }\n\n          t.splice(i, 0, e);\n        }\n      }, {\n        key: \"_removeDescriptor\",\n        value: function _removeDescriptor(e) {\n          var t = this._stack;\n          var n = t.findIndex(function (t) {\n            return t.id === e;\n          });\n\n          if (n > -1) {\n            t.splice(n, 1);\n          }\n        }\n      }]);\n\n      return o_;\n    }();\n\n    kr(o_, dr);\n\n    function s_(e, t) {\n      return e && t && e.priority == t.priority && a_(e.classes) == a_(t.classes);\n    }\n\n    function r_(e, t) {\n      if (e.priority > t.priority) {\n        return true;\n      } else if (e.priority < t.priority) {\n        return false;\n      }\n\n      return a_(e.classes) > a_(t.classes);\n    }\n\n    function a_(e) {\n      return Array.isArray(e) ? e.sort().join(\",\") : e;\n    }\n\n    var c_ = '<svg viewBox=\"0 0 16 16\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M4 0v1H1v3H0V.5A.5.5 0 0 1 .5 0H4zm8 0h3.5a.5.5 0 0 1 .5.5V4h-1V1h-3V0zM4 16H.5a.5.5 0 0 1-.5-.5V12h1v3h3v1zm8 0v-1h3v-3h1v3.5a.5.5 0 0 1-.5.5H12z\"/><path fill-opacity=\".256\" d=\"M1 1h14v14H1z\"/><g class=\"ck-icon__selected-indicator\"><path d=\"M7 0h2v1H7V0zM0 7h1v2H0V7zm15 0h1v2h-1V7zm-8 8h2v1H7v-1z\"/><path fill-opacity=\".254\" d=\"M1 1h14v14H1z\"/></g></svg>';\n    var l_ = \"ck-widget\";\n    var d_ = \"ck-widget_selected\";\n\n    function u_(e) {\n      if (!e.is(\"element\")) {\n        return false;\n      }\n\n      return !!e.getCustomProperty(\"widget\");\n    }\n\n    function h_(e, t) {\n      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      if (!Cl.isEdge) {\n        t.setAttribute(\"contenteditable\", \"false\", e);\n      }\n\n      t.addClass(l_, e);\n      t.setCustomProperty(\"widget\", true, e);\n      e.getFillerOffset = __;\n\n      if (n.label) {\n        m_(e, n.label, t);\n      }\n\n      if (n.hasSelectionHandle) {\n        v_(e, t);\n      }\n\n      f_(e, t, function (e, t, n) {\n        return n.addClass(i(t.classes), e);\n      }, function (e, t, n) {\n        return n.removeClass(i(t.classes), e);\n      });\n      return e;\n\n      function i(e) {\n        return Array.isArray(e) ? e : [e];\n      }\n    }\n\n    function f_(e, t, n, i) {\n      var o = new o_();\n      o.on(\"change:top\", function (t, o) {\n        if (o.oldDescriptor) {\n          i(e, o.oldDescriptor, o.writer);\n        }\n\n        if (o.newDescriptor) {\n          n(e, o.newDescriptor, o.writer);\n        }\n      });\n      t.setCustomProperty(\"addHighlight\", function (e, t, n) {\n        return o.add(t, n);\n      }, e);\n      t.setCustomProperty(\"removeHighlight\", function (e, t, n) {\n        return o.remove(t, n);\n      }, e);\n    }\n\n    function m_(e, t, n) {\n      n.setCustomProperty(\"widgetLabel\", t, e);\n    }\n\n    function g_(e) {\n      var t = e.getCustomProperty(\"widgetLabel\");\n\n      if (!t) {\n        return \"\";\n      }\n\n      return typeof t == \"function\" ? t() : t;\n    }\n\n    function p_(e, t) {\n      t.addClass([\"ck-editor__editable\", \"ck-editor__nested-editable\"], e);\n\n      if (!Cl.isEdge) {\n        t.setAttribute(\"contenteditable\", e.isReadOnly ? \"false\" : \"true\", e);\n        e.on(\"change:isReadOnly\", function (n, i, o) {\n          t.setAttribute(\"contenteditable\", o ? \"false\" : \"true\", e);\n        });\n      }\n\n      e.on(\"change:isFocused\", function (n, i, o) {\n        if (o) {\n          t.addClass(\"ck-editor__nested-editable_focused\", e);\n        } else {\n          t.removeClass(\"ck-editor__nested-editable_focused\", e);\n        }\n      });\n      return e;\n    }\n\n    function b_(e, t) {\n      var n = e.getSelectedElement();\n\n      if (n && t.schema.isBlock(n)) {\n        return t.createPositionAfter(n);\n      }\n\n      var i = e.getSelectedBlocks().next().value;\n\n      if (i) {\n        if (i.isEmpty) {\n          return t.createPositionAt(i, 0);\n        }\n\n        var _n182 = t.createPositionAfter(i);\n\n        if (e.focus.isTouching(_n182)) {\n          return _n182;\n        }\n\n        return t.createPositionBefore(i);\n      }\n\n      return e.focus;\n    }\n\n    function w_(e, t) {\n      return function (n, i) {\n        var o = i.mapper,\n            s = i.viewPosition;\n        var r = o.findMappedViewAncestor(s);\n\n        if (!t(r)) {\n          return;\n        }\n\n        var a = o.toModelElement(r);\n        i.modelPosition = e.createPositionAt(a, s.isAtStart ? \"before\" : \"after\");\n      };\n    }\n\n    function __() {\n      return null;\n    }\n\n    function v_(e, t) {\n      var n = t.createUIElement(\"div\", {\n        class: \"ck ck-widget__selection-handle\"\n      }, function (e) {\n        var t = this.toDomElement(e);\n        var n = new Jb();\n        n.set(\"content\", c_);\n        n.render();\n        t.appendChild(n.element);\n        return t;\n      });\n      t.insert(t.createPositionAt(e, 0), n);\n      t.addClass([\"ck-widget_with-selection-handle\"], e);\n    }\n\n    function k_(e, t, n) {\n      t.setCustomProperty(\"image\", true, e);\n      return h_(e, t, {\n        label: i\n      });\n\n      function i() {\n        var t = M_(e);\n        var i = t.getAttribute(\"alt\");\n        return i ? \"\".concat(i, \" \").concat(n) : n;\n      }\n    }\n\n    function y_(e) {\n      return !!e.getCustomProperty(\"image\") && u_(e);\n    }\n\n    function x_(e) {\n      var t = e.getSelectedElement();\n\n      if (t && y_(t)) {\n        return t;\n      }\n\n      return null;\n    }\n\n    function A_(e) {\n      return !!e && e.is(\"image\");\n    }\n\n    function C_(e, t) {\n      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var i = e.createElement(\"image\", n);\n      var o = b_(t.document.selection, t);\n      t.insertContent(i, o);\n\n      if (i.parent) {\n        e.setSelection(i, \"on\");\n      }\n    }\n\n    function T_(e) {\n      var t = e.schema;\n      var n = e.document.selection;\n      return P_(n, t, e) && !E_(n, t) && S_(n);\n    }\n\n    function M_(e) {\n      return Array.from(e.getChildren()).find(function (e) {\n        return e.is(\"img\");\n      });\n    }\n\n    function P_(e, t, n) {\n      var i = I_(e, n);\n      return t.checkChild(i, \"image\");\n    }\n\n    function E_(e, t) {\n      var n = e.getSelectedElement();\n      return n && t.isObject(n);\n    }\n\n    function S_(e) {\n      return _toConsumableArray(e.focus.getAncestors()).every(function (e) {\n        return !e.is(\"image\");\n      });\n    }\n\n    function I_(e, t) {\n      var n = b_(e, t);\n      var i = n.parent;\n\n      if (i.isEmpty && !i.is(\"$root\")) {\n        return i.parent;\n      }\n\n      return i;\n    }\n\n    function O_() {\n      return function (t) {\n        t.on(\"element:figure\", e);\n      };\n\n      function e(e, t, n) {\n        if (!n.consumable.test(t.viewItem, {\n          name: true,\n          classes: \"image\"\n        })) {\n          return;\n        }\n\n        var i = M_(t.viewItem);\n\n        if (!i || !i.hasAttribute(\"src\") || !n.consumable.test(i, {\n          name: true\n        })) {\n          return;\n        }\n\n        var o = n.convertItem(i, t.modelCursor);\n        var s = zw(o.modelRange.getItems());\n\n        if (!s) {\n          return;\n        }\n\n        n.convertChildren(t.viewItem, n.writer.createPositionAt(s, 0));\n        t.modelRange = o.modelRange;\n        t.modelCursor = o.modelCursor;\n      }\n    }\n\n    function N_() {\n      return function (t) {\n        t.on(\"attribute:srcset:image\", e);\n      };\n\n      function e(e, t, n) {\n        if (!n.consumable.consume(t.item, e.name)) {\n          return;\n        }\n\n        var i = n.writer;\n        var o = n.mapper.toViewElement(t.item);\n        var s = M_(o);\n\n        if (t.attributeNewValue === null) {\n          var _e227 = t.attributeOldValue;\n\n          if (_e227.data) {\n            i.removeAttribute(\"srcset\", s);\n            i.removeAttribute(\"sizes\", s);\n\n            if (_e227.width) {\n              i.removeAttribute(\"width\", s);\n            }\n          }\n        } else {\n          var _e228 = t.attributeNewValue;\n\n          if (_e228.data) {\n            i.setAttribute(\"srcset\", _e228.data, s);\n            i.setAttribute(\"sizes\", \"100vw\", s);\n\n            if (_e228.width) {\n              i.setAttribute(\"width\", _e228.width, s);\n            }\n          }\n        }\n      }\n    }\n\n    function R_(e) {\n      return function (n) {\n        n.on(\"attribute:\".concat(e, \":image\"), t);\n      };\n\n      function t(e, t, n) {\n        if (!n.consumable.consume(t.item, e.name)) {\n          return;\n        }\n\n        var i = n.writer;\n        var o = n.mapper.toViewElement(t.item);\n        var s = M_(o);\n\n        if (t.attributeNewValue !== null) {\n          i.setAttribute(t.attributeKey, t.attributeNewValue, s);\n        } else {\n          i.removeAttribute(t.attributeKey, s);\n        }\n      }\n    }\n\n    var L_ = /*#__PURE__*/function (_jw3) {\n      _inherits(L_, _jw3);\n\n      var _super74 = _createSuper(L_);\n\n      function L_() {\n        _classCallCheck(this, L_);\n\n        return _super74.apply(this, arguments);\n      }\n\n      _createClass(L_, [{\n        key: \"refresh\",\n        value: function refresh() {\n          this.isEnabled = T_(this.editor.model);\n        }\n      }, {\n        key: \"execute\",\n        value: function execute(e) {\n          var t = this.editor.model;\n          t.change(function (n) {\n            var i = Array.isArray(e.source) ? e.source : [e.source];\n\n            var _iterator278 = _createForOfIteratorHelper(i),\n                _step278;\n\n            try {\n              for (_iterator278.s(); !(_step278 = _iterator278.n()).done;) {\n                var _e229 = _step278.value;\n                C_(n, t, {\n                  src: _e229\n                });\n              }\n            } catch (err) {\n              _iterator278.e(err);\n            } finally {\n              _iterator278.f();\n            }\n          });\n        }\n      }]);\n\n      return L_;\n    }(jw);\n\n    var j_ = /*#__PURE__*/function (_Ow9) {\n      _inherits(j_, _Ow9);\n\n      var _super75 = _createSuper(j_);\n\n      function j_() {\n        _classCallCheck(this, j_);\n\n        return _super75.apply(this, arguments);\n      }\n\n      _createClass(j_, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          var t = e.model.schema;\n          var n = e.t;\n          var i = e.conversion;\n          e.editing.view.addObserver(i_);\n          t.register(\"image\", {\n            isObject: true,\n            isBlock: true,\n            allowWhere: \"$block\",\n            allowAttributes: [\"alt\", \"src\", \"srcset\"]\n          });\n          i.for(\"dataDowncast\").elementToElement({\n            model: \"image\",\n            view: function view(e, t) {\n              return D_(t);\n            }\n          });\n          i.for(\"editingDowncast\").elementToElement({\n            model: \"image\",\n            view: function view(e, t) {\n              return k_(D_(t), t, n(\"ak\"));\n            }\n          });\n          i.for(\"downcast\").add(R_(\"src\")).add(R_(\"alt\")).add(N_());\n          i.for(\"upcast\").elementToElement({\n            view: {\n              name: \"img\",\n              attributes: {\n                src: true\n              }\n            },\n            model: function model(e, t) {\n              return t.createElement(\"image\", {\n                src: e.getAttribute(\"src\")\n              });\n            }\n          }).attributeToAttribute({\n            view: {\n              name: \"img\",\n              key: \"alt\"\n            },\n            model: \"alt\"\n          }).attributeToAttribute({\n            view: {\n              name: \"img\",\n              key: \"srcset\"\n            },\n            model: {\n              key: \"srcset\",\n              value: function value(e) {\n                var t = {\n                  data: e.getAttribute(\"srcset\")\n                };\n\n                if (e.hasAttribute(\"width\")) {\n                  t.width = e.getAttribute(\"width\");\n                }\n\n                return t;\n              }\n            }\n          }).add(O_());\n          e.commands.add(\"imageInsert\", new L_(e));\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"ImageEditing\";\n        }\n      }]);\n\n      return j_;\n    }(Ow);\n\n    function D_(e) {\n      var t = e.createEmptyElement(\"img\");\n      var n = e.createContainerElement(\"figure\", {\n        class: \"image\"\n      });\n      e.insert(e.createPositionAt(n, 0), t);\n      return n;\n    }\n\n    function z_(e, t, n) {\n      return n.createRange(B_(e, t, true, n), B_(e, t, false, n));\n    }\n\n    function B_(e, t, n, i) {\n      var o = e.textNode || (n ? e.nodeBefore : e.nodeAfter);\n      var s = null;\n\n      while (o && o.getAttribute(\"linkHref\") == t) {\n        s = o;\n        o = n ? o.previousSibling : o.nextSibling;\n      }\n\n      return s ? i.createPositionAt(s, n ? \"before\" : \"after\") : e;\n    }\n\n    var V_ = /*#__PURE__*/function (_jw4) {\n      _inherits(V_, _jw4);\n\n      var _super76 = _createSuper(V_);\n\n      function V_(e) {\n        var _this132;\n\n        _classCallCheck(this, V_);\n\n        _this132 = _super76.call(this, e);\n        _this132.manualDecorators = new yr();\n        return _this132;\n      }\n\n      _createClass(V_, [{\n        key: \"restoreManualDecoratorStates\",\n        value: function restoreManualDecoratorStates() {\n          var _iterator279 = _createForOfIteratorHelper(this.manualDecorators),\n              _step279;\n\n          try {\n            for (_iterator279.s(); !(_step279 = _iterator279.n()).done;) {\n              var _e230 = _step279.value;\n              _e230.value = this._getDecoratorStateFromModel(_e230.id);\n            }\n          } catch (err) {\n            _iterator279.e(err);\n          } finally {\n            _iterator279.f();\n          }\n        }\n      }, {\n        key: \"refresh\",\n        value: function refresh() {\n          var e = this.editor.model;\n          var t = e.document;\n          this.value = t.selection.getAttribute(\"linkHref\");\n\n          var _iterator280 = _createForOfIteratorHelper(this.manualDecorators),\n              _step280;\n\n          try {\n            for (_iterator280.s(); !(_step280 = _iterator280.n()).done;) {\n              var _e231 = _step280.value;\n              _e231.value = this._getDecoratorStateFromModel(_e231.id);\n            }\n          } catch (err) {\n            _iterator280.e(err);\n          } finally {\n            _iterator280.f();\n          }\n\n          this.isEnabled = e.schema.checkAttributeInSelection(t.selection, \"linkHref\");\n        }\n      }, {\n        key: \"execute\",\n        value: function execute(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          var n = this.editor.model;\n          var i = n.document.selection;\n          var o = [];\n          var s = [];\n\n          for (var _e232 in t) {\n            if (t[_e232]) {\n              o.push(_e232);\n            } else {\n              s.push(_e232);\n            }\n          }\n\n          n.change(function (t) {\n            if (i.isCollapsed) {\n              var _r22 = i.getFirstPosition();\n\n              if (i.hasAttribute(\"linkHref\")) {\n                var _a13 = z_(_r22, i.getAttribute(\"linkHref\"), n);\n\n                t.setAttribute(\"linkHref\", e, _a13);\n                o.forEach(function (e) {\n                  t.setAttribute(e, true, _a13);\n                });\n                s.forEach(function (e) {\n                  t.removeAttribute(e, _a13);\n                });\n                t.setSelection(_a13);\n              } else if (e !== \"\") {\n                var _s33 = Hr(i.getAttributes());\n\n                _s33.set(\"linkHref\", e);\n\n                o.forEach(function (e) {\n                  _s33.set(e, true);\n                });\n\n                var _a14 = t.createText(e, _s33);\n\n                n.insertContent(_a14, _r22);\n                t.setSelection(t.createRangeOn(_a14));\n              }\n            } else {\n              var _r23 = n.schema.getValidRanges(i.getRanges(), \"linkHref\");\n\n              var _iterator281 = _createForOfIteratorHelper(_r23),\n                  _step281;\n\n              try {\n                var _loop6 = function _loop6() {\n                  var n = _step281.value;\n                  t.setAttribute(\"linkHref\", e, n);\n                  o.forEach(function (e) {\n                    t.setAttribute(e, true, n);\n                  });\n                  s.forEach(function (e) {\n                    t.removeAttribute(e, n);\n                  });\n                };\n\n                for (_iterator281.s(); !(_step281 = _iterator281.n()).done;) {\n                  _loop6();\n                }\n              } catch (err) {\n                _iterator281.e(err);\n              } finally {\n                _iterator281.f();\n              }\n            }\n          });\n        }\n      }, {\n        key: \"_getDecoratorStateFromModel\",\n        value: function _getDecoratorStateFromModel(e) {\n          var t = this.editor.model.document;\n          return t.selection.getAttribute(e) || false;\n        }\n      }]);\n\n      return V_;\n    }(jw);\n\n    var F_ = /*#__PURE__*/function (_jw5) {\n      _inherits(F_, _jw5);\n\n      var _super77 = _createSuper(F_);\n\n      function F_() {\n        _classCallCheck(this, F_);\n\n        return _super77.apply(this, arguments);\n      }\n\n      _createClass(F_, [{\n        key: \"refresh\",\n        value: function refresh() {\n          this.isEnabled = this.editor.model.document.selection.hasAttribute(\"linkHref\");\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var e = this.editor;\n          var t = this.editor.model;\n          var n = t.document.selection;\n          var i = e.commands.get(\"link\");\n          t.change(function (e) {\n            var o = n.isCollapsed ? [z_(n.getFirstPosition(), n.getAttribute(\"linkHref\"), t)] : n.getRanges();\n\n            var _iterator282 = _createForOfIteratorHelper(o),\n                _step282;\n\n            try {\n              for (_iterator282.s(); !(_step282 = _iterator282.n()).done;) {\n                var _t212 = _step282.value;\n                e.removeAttribute(\"linkHref\", _t212);\n\n                if (i) {\n                  var _iterator283 = _createForOfIteratorHelper(i.manualDecorators),\n                      _step283;\n\n                  try {\n                    for (_iterator283.s(); !(_step283 = _iterator283.n()).done;) {\n                      var _n183 = _step283.value;\n                      e.removeAttribute(_n183.id, _t212);\n                    }\n                  } catch (err) {\n                    _iterator283.e(err);\n                  } finally {\n                    _iterator283.f();\n                  }\n                }\n              }\n            } catch (err) {\n              _iterator282.e(err);\n            } finally {\n              _iterator282.f();\n            }\n          });\n        }\n      }]);\n\n      return F_;\n    }(jw);\n\n    function H_(e, t, n) {\n      var i = e.length;\n      n = n === undefined ? i : n;\n      return !t && n >= i ? e : Ia(e, t, n);\n    }\n\n    var U_ = H_;\n    var W_ = \"\\\\ud800-\\\\udfff\",\n        $_ = \"\\\\u0300-\\\\u036f\",\n        q_ = \"\\\\ufe20-\\\\ufe2f\",\n        Y_ = \"\\\\u20d0-\\\\u20ff\",\n        J_ = $_ + q_ + Y_,\n        Q_ = \"\\\\ufe0e\\\\ufe0f\";\n    var X_ = \"\\\\u200d\";\n    var G_ = RegExp(\"[\" + X_ + W_ + J_ + Q_ + \"]\");\n\n    function K_(e) {\n      return G_.test(e);\n    }\n\n    var Z_ = K_;\n\n    function ev(e) {\n      return e.split(\"\");\n    }\n\n    var tv = ev;\n    var nv = \"\\\\ud800-\\\\udfff\",\n        iv = \"\\\\u0300-\\\\u036f\",\n        ov = \"\\\\ufe20-\\\\ufe2f\",\n        sv = \"\\\\u20d0-\\\\u20ff\",\n        rv = iv + ov + sv,\n        av = \"\\\\ufe0e\\\\ufe0f\";\n    var cv = \"[\" + nv + \"]\",\n        lv = \"[\" + rv + \"]\",\n        dv = \"\\\\ud83c[\\\\udffb-\\\\udfff]\",\n        uv = \"(?:\" + lv + \"|\" + dv + \")\",\n        hv = \"[^\" + nv + \"]\",\n        fv = \"(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}\",\n        mv = \"[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]\",\n        gv = \"\\\\u200d\";\n\n    var pv = uv + \"?\",\n        bv = \"[\" + av + \"]?\",\n        wv = \"(?:\" + gv + \"(?:\" + [hv, fv, mv].join(\"|\") + \")\" + bv + pv + \")*\",\n        _v = bv + pv + wv,\n        vv = \"(?:\" + [hv + lv + \"?\", lv, fv, mv, cv].join(\"|\") + \")\";\n\n    var kv = RegExp(dv + \"(?=\" + dv + \")|\" + vv + _v, \"g\");\n\n    function yv(e) {\n      return e.match(kv) || [];\n    }\n\n    var xv = yv;\n\n    function Av(e) {\n      return Z_(e) ? xv(e) : tv(e);\n    }\n\n    var Cv = Av;\n\n    function Tv(e) {\n      return function (t) {\n        t = va(t);\n        var n = Z_(t) ? Cv(t) : undefined;\n        var i = n ? n[0] : t.charAt(0);\n        var o = n ? U_(n, 1).join(\"\") : t.slice(1);\n        return i[e]() + o;\n      };\n    }\n\n    var Mv = Tv;\n    var Pv = Mv(\"toUpperCase\");\n    var Ev = Pv;\n    var Sv = /[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205f\\u3000]/g;\n    var Iv = /^(?:(?:https?|ftps?|mailto):|[^a-z]|[a-z+.-]+(?:[^a-z+.:-]|$))/i;\n\n    function Ov(e) {\n      return e.is(\"attributeElement\") && !!e.getCustomProperty(\"link\");\n    }\n\n    function Nv(e, t) {\n      var n = t.createAttributeElement(\"a\", {\n        href: e\n      }, {\n        priority: 5\n      });\n      t.setCustomProperty(\"link\", true, n);\n      return n;\n    }\n\n    function Rv(e) {\n      e = String(e);\n      return Lv(e) ? e : \"#\";\n    }\n\n    function Lv(e) {\n      var t = e.replace(Sv, \"\");\n      return t.match(Iv);\n    }\n\n    function jv(e, t) {\n      var n = {\n        \"Open in a new tab\": e(\"bp\"),\n        Downloadable: e(\"bq\")\n      };\n      t.forEach(function (e) {\n        if (e.label && n[e.label]) {\n          e.label = n[e.label];\n        }\n\n        return e;\n      });\n      return t;\n    }\n\n    function Dv(e) {\n      var t = [];\n\n      if (e) {\n        for (var _i146 = 0, _Object$entries2 = Object.entries(e); _i146 < _Object$entries2.length; _i146++) {\n          var _Object$entries2$_i = _slicedToArray(_Object$entries2[_i146], 2),\n              _n184 = _Object$entries2$_i[0],\n              _i147 = _Object$entries2$_i[1];\n\n          var _e233 = Object.assign({}, _i147, {\n            id: \"link\".concat(Ev(_n184))\n          });\n\n          t.push(_e233);\n        }\n      }\n\n      return t;\n    }\n\n    var zv = /*#__PURE__*/function () {\n      function zv() {\n        _classCallCheck(this, zv);\n\n        this._definitions = new Set();\n      }\n\n      _createClass(zv, [{\n        key: \"length\",\n        get: function get() {\n          return this._definitions.size;\n        }\n      }, {\n        key: \"add\",\n        value: function add(e) {\n          var _this133 = this;\n\n          if (Array.isArray(e)) {\n            e.forEach(function (e) {\n              return _this133._definitions.add(e);\n            });\n          } else {\n            this._definitions.add(e);\n          }\n        }\n      }, {\n        key: \"getDispatcher\",\n        value: function getDispatcher() {\n          var _this134 = this;\n\n          return function (e) {\n            e.on(\"attribute:linkHref\", function (e, t, n) {\n              if (!n.consumable.test(t.item, \"attribute:linkHref\")) {\n                return;\n              }\n\n              var i = n.writer;\n              var o = i.document.selection;\n\n              var _iterator284 = _createForOfIteratorHelper(_this134._definitions),\n                  _step284;\n\n              try {\n                for (_iterator284.s(); !(_step284 = _iterator284.n()).done;) {\n                  var _e234 = _step284.value;\n\n                  var _s34 = i.createAttributeElement(\"a\", _e234.attributes, {\n                    priority: 5\n                  });\n\n                  i.setCustomProperty(\"link\", true, _s34);\n\n                  if (_e234.callback(t.attributeNewValue)) {\n                    if (t.item.is(\"selection\")) {\n                      i.wrap(o.getFirstRange(), _s34);\n                    } else {\n                      i.wrap(n.mapper.toViewRange(t.range), _s34);\n                    }\n                  } else {\n                    i.unwrap(n.mapper.toViewRange(t.range), _s34);\n                  }\n                }\n              } catch (err) {\n                _iterator284.e(err);\n              } finally {\n                _iterator284.f();\n              }\n            }, {\n              priority: \"high\"\n            });\n          };\n        }\n      }]);\n\n      return zv;\n    }();\n\n    var Bv = /*#__PURE__*/_createClass(function Bv(_ref27) {\n      var e = _ref27.id,\n          t = _ref27.label,\n          n = _ref27.attributes;\n\n      _classCallCheck(this, Bv);\n\n      this.id = e;\n      this.set(\"value\");\n      this.label = t;\n      this.attributes = n;\n    });\n\n    kr(Bv, Qc);\n\n    function Vv(_ref28) {\n      var e = _ref28.view,\n          t = _ref28.model,\n          n = _ref28.emitter,\n          i = _ref28.attribute,\n          o = _ref28.locale;\n      var s = new Fv(t, n, i);\n      var r = t.document.selection;\n      n.listenTo(e.document, \"keydown\", function (e, t) {\n        if (!r.isCollapsed) {\n          return;\n        }\n\n        if (t.shiftKey || t.altKey || t.ctrlKey) {\n          return;\n        }\n\n        var n = t.keyCode == Rl.arrowright;\n        var i = t.keyCode == Rl.arrowleft;\n\n        if (!n && !i) {\n          return;\n        }\n\n        var a = r.getFirstPosition();\n        var c = o.contentLanguageDirection;\n        var l;\n\n        if (c === \"ltr\" && n || c === \"rtl\" && i) {\n          l = s.handleForwardMovement(a, t);\n        } else {\n          l = s.handleBackwardMovement(a, t);\n        }\n\n        if (l) {\n          e.stop();\n        }\n      }, {\n        priority: or.get(\"high\") + 1\n      });\n    }\n\n    var Fv = /*#__PURE__*/function () {\n      function Fv(e, t, n) {\n        var _this135 = this;\n\n        _classCallCheck(this, Fv);\n\n        this.model = e;\n        this.attribute = n;\n        this._modelSelection = e.document.selection;\n        this._overrideUid = null;\n        this._isNextGravityRestorationSkipped = false;\n        t.listenTo(this._modelSelection, \"change:range\", function (e, t) {\n          if (_this135._isNextGravityRestorationSkipped) {\n            _this135._isNextGravityRestorationSkipped = false;\n            return;\n          }\n\n          if (!_this135._isGravityOverridden) {\n            return;\n          }\n\n          if (!t.directChange && Hv(_this135._modelSelection.getFirstPosition(), n)) {\n            return;\n          }\n\n          _this135._restoreGravity();\n        });\n      }\n\n      _createClass(Fv, [{\n        key: \"handleForwardMovement\",\n        value: function handleForwardMovement(e, t) {\n          var n = this.attribute;\n\n          if (this._isGravityOverridden) {\n            return;\n          }\n\n          if (e.isAtStart && this._hasSelectionAttribute) {\n            return;\n          }\n\n          if ($v(e, n) && this._hasSelectionAttribute) {\n            this._preventCaretMovement(t);\n\n            this._removeSelectionAttribute();\n\n            return true;\n          }\n\n          if (Uv(e, n)) {\n            this._preventCaretMovement(t);\n\n            this._overrideGravity();\n\n            return true;\n          }\n\n          if (Wv(e, n) && this._hasSelectionAttribute) {\n            this._preventCaretMovement(t);\n\n            this._overrideGravity();\n\n            return true;\n          }\n        }\n      }, {\n        key: \"handleBackwardMovement\",\n        value: function handleBackwardMovement(e, t) {\n          var n = this.attribute;\n\n          if (this._isGravityOverridden) {\n            if ($v(e, n) && this._hasSelectionAttribute) {\n              this._preventCaretMovement(t);\n\n              this._restoreGravity();\n\n              this._removeSelectionAttribute();\n\n              return true;\n            } else {\n              this._preventCaretMovement(t);\n\n              this._restoreGravity();\n\n              if (e.isAtStart) {\n                this._removeSelectionAttribute();\n              }\n\n              return true;\n            }\n          } else {\n            if ($v(e, n) && !this._hasSelectionAttribute) {\n              this._preventCaretMovement(t);\n\n              this._setSelectionAttributeFromTheNodeBefore(e);\n\n              return true;\n            }\n\n            if (e.isAtEnd && Wv(e, n)) {\n              if (this._hasSelectionAttribute) {\n                if (qv(e, n)) {\n                  this._skipNextAutomaticGravityRestoration();\n\n                  this._overrideGravity();\n                }\n\n                return;\n              } else {\n                this._preventCaretMovement(t);\n\n                this._setSelectionAttributeFromTheNodeBefore(e);\n\n                return true;\n              }\n            }\n\n            if (e.isAtStart) {\n              if (this._hasSelectionAttribute) {\n                this._removeSelectionAttribute();\n\n                this._preventCaretMovement(t);\n\n                return true;\n              }\n\n              return;\n            }\n\n            if (qv(e, n)) {\n              this._skipNextAutomaticGravityRestoration();\n\n              this._overrideGravity();\n            }\n          }\n        }\n      }, {\n        key: \"_isGravityOverridden\",\n        get: function get() {\n          return !!this._overrideUid;\n        }\n      }, {\n        key: \"_hasSelectionAttribute\",\n        get: function get() {\n          return this._modelSelection.hasAttribute(this.attribute);\n        }\n      }, {\n        key: \"_overrideGravity\",\n        value: function _overrideGravity() {\n          this._overrideUid = this.model.change(function (e) {\n            return e.overrideSelectionGravity();\n          });\n        }\n      }, {\n        key: \"_restoreGravity\",\n        value: function _restoreGravity() {\n          var _this136 = this;\n\n          this.model.change(function (e) {\n            e.restoreSelectionGravity(_this136._overrideUid);\n            _this136._overrideUid = null;\n          });\n        }\n      }, {\n        key: \"_preventCaretMovement\",\n        value: function _preventCaretMovement(e) {\n          e.preventDefault();\n        }\n      }, {\n        key: \"_removeSelectionAttribute\",\n        value: function _removeSelectionAttribute() {\n          var _this137 = this;\n\n          this.model.change(function (e) {\n            e.removeSelectionAttribute(_this137.attribute);\n          });\n        }\n      }, {\n        key: \"_setSelectionAttributeFromTheNodeBefore\",\n        value: function _setSelectionAttributeFromTheNodeBefore(e) {\n          var _this138 = this;\n\n          var t = this.attribute;\n          this.model.change(function (n) {\n            n.setSelectionAttribute(_this138.attribute, e.nodeBefore.getAttribute(t));\n          });\n        }\n      }, {\n        key: \"_skipNextAutomaticGravityRestoration\",\n        value: function _skipNextAutomaticGravityRestoration() {\n          this._isNextGravityRestorationSkipped = true;\n        }\n      }]);\n\n      return Fv;\n    }();\n\n    function Hv(e, t) {\n      return Uv(e, t) || Wv(e, t);\n    }\n\n    function Uv(e, t) {\n      var n = e.nodeBefore,\n          i = e.nodeAfter;\n      var o = n ? n.hasAttribute(t) : false;\n      var s = i ? i.hasAttribute(t) : false;\n      return s && (!o || n.getAttribute(t) !== i.getAttribute(t));\n    }\n\n    function Wv(e, t) {\n      var n = e.nodeBefore,\n          i = e.nodeAfter;\n      var o = n ? n.hasAttribute(t) : false;\n      var s = i ? i.hasAttribute(t) : false;\n      return o && (!s || n.getAttribute(t) !== i.getAttribute(t));\n    }\n\n    function $v(e, t) {\n      var n = e.nodeBefore,\n          i = e.nodeAfter;\n      var o = n ? n.hasAttribute(t) : false;\n      var s = i ? i.hasAttribute(t) : false;\n\n      if (!s || !o) {\n        return;\n      }\n\n      return i.getAttribute(t) !== n.getAttribute(t);\n    }\n\n    function qv(e, t) {\n      return Hv(e.getShiftedBy(-1), t);\n    }\n\n    var Yv = n(46);\n    var Jv = \"ck-link_selected\";\n    var Qv = \"automatic\";\n    var Xv = \"manual\";\n    var Gv = /^(https?:)?\\/\\//;\n\n    var Kv = /*#__PURE__*/function (_Ow10) {\n      _inherits(Kv, _Ow10);\n\n      var _super78 = _createSuper(Kv);\n\n      function Kv(e) {\n        var _this139;\n\n        _classCallCheck(this, Kv);\n\n        _this139 = _super78.call(this, e);\n        e.config.define(\"link\", {\n          addTargetToExternalLinks: false\n        });\n        return _this139;\n      }\n\n      _createClass(Kv, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          var t = e.locale;\n          e.model.schema.extend(\"$text\", {\n            allowAttributes: \"linkHref\"\n          });\n          e.conversion.for(\"dataDowncast\").attributeToElement({\n            model: \"linkHref\",\n            view: Nv\n          });\n          e.conversion.for(\"editingDowncast\").attributeToElement({\n            model: \"linkHref\",\n            view: function view(e, t) {\n              return Nv(Rv(e), t);\n            }\n          });\n          e.conversion.for(\"upcast\").elementToAttribute({\n            view: {\n              name: \"a\",\n              attributes: {\n                href: true\n              }\n            },\n            model: {\n              key: \"linkHref\",\n              value: function value(e) {\n                return e.getAttribute(\"href\");\n              }\n            }\n          });\n          e.commands.add(\"link\", new V_(e));\n          e.commands.add(\"unlink\", new F_(e));\n          var n = jv(e.t, Dv(e.config.get(\"link.decorators\")));\n\n          this._enableAutomaticDecorators(n.filter(function (e) {\n            return e.mode === Qv;\n          }));\n\n          this._enableManualDecorators(n.filter(function (e) {\n            return e.mode === Xv;\n          }));\n\n          Vv({\n            view: e.editing.view,\n            model: e.model,\n            emitter: this,\n            attribute: \"linkHref\",\n            locale: t\n          });\n\n          this._setupLinkHighlight();\n        }\n      }, {\n        key: \"_enableAutomaticDecorators\",\n        value: function _enableAutomaticDecorators(e) {\n          var t = this.editor;\n          var n = new zv();\n\n          if (t.config.get(\"link.addTargetToExternalLinks\")) {\n            n.add({\n              id: \"linkIsExternal\",\n              mode: Qv,\n              callback: function callback(e) {\n                return Gv.test(e);\n              },\n              attributes: {\n                target: \"_blank\",\n                rel: \"noopener noreferrer\"\n              }\n            });\n          }\n\n          n.add(e);\n\n          if (n.length) {\n            t.conversion.for(\"downcast\").add(n.getDispatcher());\n          }\n        }\n      }, {\n        key: \"_enableManualDecorators\",\n        value: function _enableManualDecorators(e) {\n          if (!e.length) {\n            return;\n          }\n\n          var t = this.editor;\n          var n = t.commands.get(\"link\");\n          var i = n.manualDecorators;\n          e.forEach(function (e) {\n            t.model.schema.extend(\"$text\", {\n              allowAttributes: e.id\n            });\n            i.add(new Bv(e));\n            t.conversion.for(\"downcast\").attributeToElement({\n              model: e.id,\n              view: function view(t, n) {\n                if (t) {\n                  var _t213 = i.get(e.id).attributes;\n\n                  var _o67 = n.createAttributeElement(\"a\", _t213, {\n                    priority: 5\n                  });\n\n                  n.setCustomProperty(\"link\", true, _o67);\n                  return _o67;\n                }\n              }\n            });\n            t.conversion.for(\"upcast\").elementToAttribute({\n              view: {\n                name: \"a\",\n                attributes: i.get(e.id).attributes\n              },\n              model: {\n                key: e.id\n              }\n            });\n          });\n        }\n      }, {\n        key: \"_setupLinkHighlight\",\n        value: function _setupLinkHighlight() {\n          var e = this.editor;\n          var t = e.editing.view;\n          var n = new Set();\n          t.document.registerPostFixer(function (t) {\n            var i = e.model.document.selection;\n            var o = false;\n\n            if (i.hasAttribute(\"linkHref\")) {\n              var _s35 = z_(i.getFirstPosition(), i.getAttribute(\"linkHref\"), e.model);\n\n              var _r24 = e.editing.mapper.toViewRange(_s35);\n\n              var _iterator285 = _createForOfIteratorHelper(_r24.getItems()),\n                  _step285;\n\n              try {\n                for (_iterator285.s(); !(_step285 = _iterator285.n()).done;) {\n                  var _e235 = _step285.value;\n\n                  if (_e235.is(\"a\") && !_e235.hasClass(Jv)) {\n                    t.addClass(Jv, _e235);\n                    n.add(_e235);\n                    o = true;\n                  }\n                }\n              } catch (err) {\n                _iterator285.e(err);\n              } finally {\n                _iterator285.f();\n              }\n            }\n\n            return o;\n          });\n          e.conversion.for(\"editingDowncast\").add(function (e) {\n            e.on(\"insert\", i, {\n              priority: \"highest\"\n            });\n            e.on(\"remove\", i, {\n              priority: \"highest\"\n            });\n            e.on(\"attribute\", i, {\n              priority: \"highest\"\n            });\n            e.on(\"selection\", i, {\n              priority: \"highest\"\n            });\n\n            function i() {\n              t.change(function (e) {\n                var _iterator286 = _createForOfIteratorHelper(n.values()),\n                    _step286;\n\n                try {\n                  for (_iterator286.s(); !(_step286 = _iterator286.n()).done;) {\n                    var _t214 = _step286.value;\n                    e.removeClass(Jv, _t214);\n                    n.delete(_t214);\n                  }\n                } catch (err) {\n                  _iterator286.e(err);\n                } finally {\n                  _iterator286.f();\n                }\n              });\n            }\n          });\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"LinkEditing\";\n        }\n      }]);\n\n      return Kv;\n    }(Ow);\n\n    var Zv = /*#__PURE__*/function () {\n      function Zv(e) {\n        _classCallCheck(this, Zv);\n\n        this.context = e;\n      }\n\n      _createClass(Zv, [{\n        key: \"destroy\",\n        value: function destroy() {\n          this.stopListening();\n        }\n      }], [{\n        key: \"isContextPlugin\",\n        get: function get() {\n          return true;\n        }\n      }]);\n\n      return Zv;\n    }();\n\n    kr(Zv, Qc);\n\n    var ek = /*#__PURE__*/function (_Zv) {\n      _inherits(ek, _Zv);\n\n      var _super79 = _createSuper(ek);\n\n      function ek() {\n        _classCallCheck(this, ek);\n\n        return _super79.apply(this, arguments);\n      }\n\n      _createClass(ek, [{\n        key: \"init\",\n        value: function init() {\n          this.on(\"show:warning\", function (e, t) {\n            window.alert(t.message);\n          }, {\n            priority: \"lowest\"\n          });\n        }\n      }, {\n        key: \"showSuccess\",\n        value: function showSuccess(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n          this._showNotification({\n            message: e,\n            type: \"success\",\n            namespace: t.namespace,\n            title: t.title\n          });\n        }\n      }, {\n        key: \"showInfo\",\n        value: function showInfo(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n          this._showNotification({\n            message: e,\n            type: \"info\",\n            namespace: t.namespace,\n            title: t.title\n          });\n        }\n      }, {\n        key: \"showWarning\",\n        value: function showWarning(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n          this._showNotification({\n            message: e,\n            type: \"warning\",\n            namespace: t.namespace,\n            title: t.title\n          });\n        }\n      }, {\n        key: \"_showNotification\",\n        value: function _showNotification(e) {\n          var t = \"show:\".concat(e.type) + (e.namespace ? \":\".concat(e.namespace) : \"\");\n          this.fire(t, {\n            message: e.message,\n            type: e.type,\n            title: e.title || \"\"\n          });\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"Notification\";\n        }\n      }]);\n\n      return ek;\n    }(Zv);\n\n    var tk = /*#__PURE__*/function (_jw6) {\n      _inherits(tk, _jw6);\n\n      var _super80 = _createSuper(tk);\n\n      function tk(e) {\n        var _this140;\n\n        _classCallCheck(this, tk);\n\n        _this140 = _super80.call(this, e);\n\n        _this140.stopListening(_this140.editor.model.document, \"change\");\n\n        _this140.listenTo(_this140.editor.model.document, \"change\", function () {\n          return _this140.refresh();\n        }, {\n          priority: \"low\"\n        });\n\n        return _this140;\n      }\n\n      _createClass(tk, [{\n        key: \"refresh\",\n        value: function refresh() {\n          var e = this.editor.commands.get(\"imageInsert\");\n          var t = this.editor.commands.get(\"link\");\n          this.isEnabled = e.isEnabled || t.isEnabled;\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var e = this.editor;\n          var t = this.editor.config.get(\"ckfinder.openerMethod\") || \"modal\";\n\n          if (t != \"popup\" && t != \"modal\") {\n            throw new rr[\"b\"]('ckfinder-unknown-openerMethod: The openerMethod config option must by \"popup\" or \"modal\".', e);\n          }\n\n          var n = this.editor.config.get(\"ckfinder.options\") || {};\n          n.chooseFiles = true;\n          var i = n.onInit;\n\n          if (!n.language) {\n            n.language = e.locale.uiLanguage;\n          }\n\n          n.onInit = function (t) {\n            if (i) {\n              i(t);\n            }\n\n            t.on(\"files:choose\", function (n) {\n              var i = n.data.files.toArray();\n              var o = i.filter(function (e) {\n                return !e.isImage();\n              });\n              var s = i.filter(function (e) {\n                return e.isImage();\n              });\n\n              var _iterator287 = _createForOfIteratorHelper(o),\n                  _step287;\n\n              try {\n                for (_iterator287.s(); !(_step287 = _iterator287.n()).done;) {\n                  var _t215 = _step287.value;\n                  e.execute(\"link\", _t215.getUrl());\n                }\n              } catch (err) {\n                _iterator287.e(err);\n              } finally {\n                _iterator287.f();\n              }\n\n              var r = [];\n\n              var _iterator288 = _createForOfIteratorHelper(s),\n                  _step288;\n\n              try {\n                for (_iterator288.s(); !(_step288 = _iterator288.n()).done;) {\n                  var _e236 = _step288.value;\n\n                  var _n185 = _e236.getUrl();\n\n                  r.push(_n185 ? _n185 : t.request(\"file:getProxyUrl\", {\n                    file: _e236\n                  }));\n                }\n              } catch (err) {\n                _iterator288.e(err);\n              } finally {\n                _iterator288.f();\n              }\n\n              if (r.length) {\n                nk(e, r);\n              }\n            });\n            t.on(\"file:choose:resizedImage\", function (t) {\n              var n = t.data.resizedUrl;\n\n              if (!n) {\n                var _t216 = e.plugins.get(\"Notification\");\n\n                var _n186 = e.locale.t;\n\n                _t216.showWarning(_n186(\"av\"), {\n                  title: _n186(\"aw\"),\n                  namespace: \"ckfinder\"\n                });\n\n                return;\n              }\n\n              nk(e, [n]);\n            });\n          };\n\n          window.CKFinder[t](n);\n        }\n      }]);\n\n      return tk;\n    }(jw);\n\n    function nk(e, t) {\n      var n = e.commands.get(\"imageInsert\");\n\n      if (!n.isEnabled) {\n        var _t217 = e.plugins.get(\"Notification\");\n\n        var _n187 = e.locale.t;\n\n        _t217.showWarning(_n187(\"ax\"), {\n          title: _n187(\"ay\"),\n          namespace: \"ckfinder\"\n        });\n\n        return;\n      }\n\n      e.execute(\"imageInsert\", {\n        source: t\n      });\n    }\n\n    var ik = /*#__PURE__*/function (_Ow11) {\n      _inherits(ik, _Ow11);\n\n      var _super81 = _createSuper(ik);\n\n      function ik() {\n        _classCallCheck(this, ik);\n\n        return _super81.apply(this, arguments);\n      }\n\n      _createClass(ik, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          e.commands.add(\"ckfinder\", new tk(e));\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"CKFinderEditing\";\n        }\n      }, {\n        key: \"requires\",\n        get: function get() {\n          return [ek, j_, Kv];\n        }\n      }]);\n\n      return ik;\n    }(Ow);\n\n    var ok = /*#__PURE__*/function (_Zv2, _Symbol$iterator13) {\n      _inherits(ok, _Zv2);\n\n      var _super82 = _createSuper(ok);\n\n      function ok() {\n        _classCallCheck(this, ok);\n\n        return _super82.apply(this, arguments);\n      }\n\n      _createClass(ok, [{\n        key: \"init\",\n        value: function init() {\n          this.set(\"hasAny\", false);\n          this._actions = new yr({\n            idProperty: \"_id\"\n          });\n\n          this._actions.delegate(\"add\", \"remove\").to(this);\n        }\n      }, {\n        key: \"add\",\n        value: function add(e) {\n          if (typeof e !== \"string\") {\n            throw new rr[\"b\"](\"pendingactions-add-invalid-message: The message must be a string.\", this);\n          }\n\n          var t = Object.create(Qc);\n          t.set(\"message\", e);\n\n          this._actions.add(t);\n\n          this.hasAny = true;\n          return t;\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(e) {\n          this._actions.remove(e);\n\n          this.hasAny = !!this._actions.length;\n        }\n      }, {\n        key: \"first\",\n        get: function get() {\n          return this._actions.get(0);\n        }\n      }, {\n        key: _Symbol$iterator13,\n        value: function value() {\n          return this._actions[Symbol.iterator]();\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"PendingActions\";\n        }\n      }]);\n\n      return ok;\n    }(Zv, Symbol.iterator);\n\n    var sk = /*#__PURE__*/function () {\n      function sk() {\n        var _this141 = this;\n\n        _classCallCheck(this, sk);\n\n        var e = new window.FileReader();\n        this._reader = e;\n        this._data = undefined;\n        this.set(\"loaded\", 0);\n\n        e.onprogress = function (e) {\n          _this141.loaded = e.loaded;\n        };\n      }\n\n      _createClass(sk, [{\n        key: \"error\",\n        get: function get() {\n          return this._reader.error;\n        }\n      }, {\n        key: \"data\",\n        get: function get() {\n          return this._data;\n        }\n      }, {\n        key: \"read\",\n        value: function read(e) {\n          var _this142 = this;\n\n          var t = this._reader;\n          this.total = e.size;\n          return new Promise(function (n, i) {\n            t.onload = function () {\n              var e = t.result;\n              _this142._data = e;\n              n(e);\n            };\n\n            t.onerror = function () {\n              i(\"error\");\n            };\n\n            t.onabort = function () {\n              i(\"aborted\");\n            };\n\n            _this142._reader.readAsDataURL(e);\n          });\n        }\n      }, {\n        key: \"abort\",\n        value: function abort() {\n          this._reader.abort();\n        }\n      }]);\n\n      return sk;\n    }();\n\n    kr(sk, Qc);\n\n    var rk = /*#__PURE__*/function (_Ow12) {\n      _inherits(rk, _Ow12);\n\n      var _super83 = _createSuper(rk);\n\n      function rk() {\n        _classCallCheck(this, rk);\n\n        return _super83.apply(this, arguments);\n      }\n\n      _createClass(rk, [{\n        key: \"init\",\n        value: function init() {\n          var _this143 = this;\n\n          this.loaders = new yr();\n          this.loaders.on(\"add\", function () {\n            return _this143._updatePendingAction();\n          });\n          this.loaders.on(\"remove\", function () {\n            return _this143._updatePendingAction();\n          });\n          this._loadersMap = new Map();\n          this._pendingAction = null;\n          this.set(\"uploaded\", 0);\n          this.set(\"uploadTotal\", null);\n          this.bind(\"uploadedPercent\").to(this, \"uploaded\", this, \"uploadTotal\", function (e, t) {\n            return t ? e / t * 100 : 0;\n          });\n        }\n      }, {\n        key: \"getLoader\",\n        value: function getLoader(e) {\n          return this._loadersMap.get(e) || null;\n        }\n      }, {\n        key: \"createLoader\",\n        value: function createLoader(e) {\n          var _this144 = this;\n\n          if (!this.createUploadAdapter) {\n            console.warn(Object(rr[\"a\"])(\"filerepository-no-upload-adapter: Upload adapter is not defined.\"));\n            return null;\n          }\n\n          var t = new ak(Promise.resolve(e), this.createUploadAdapter);\n          this.loaders.add(t);\n\n          this._loadersMap.set(e, t);\n\n          if (e instanceof Promise) {\n            t.file.then(function (e) {\n              _this144._loadersMap.set(e, t);\n            }).catch(function () {});\n          }\n\n          t.on(\"change:uploaded\", function () {\n            var e = 0;\n\n            var _iterator289 = _createForOfIteratorHelper(_this144.loaders),\n                _step289;\n\n            try {\n              for (_iterator289.s(); !(_step289 = _iterator289.n()).done;) {\n                var _t218 = _step289.value;\n                e += _t218.uploaded;\n              }\n            } catch (err) {\n              _iterator289.e(err);\n            } finally {\n              _iterator289.f();\n            }\n\n            _this144.uploaded = e;\n          });\n          t.on(\"change:uploadTotal\", function () {\n            var e = 0;\n\n            var _iterator290 = _createForOfIteratorHelper(_this144.loaders),\n                _step290;\n\n            try {\n              for (_iterator290.s(); !(_step290 = _iterator290.n()).done;) {\n                var _t219 = _step290.value;\n\n                if (_t219.uploadTotal) {\n                  e += _t219.uploadTotal;\n                }\n              }\n            } catch (err) {\n              _iterator290.e(err);\n            } finally {\n              _iterator290.f();\n            }\n\n            _this144.uploadTotal = e;\n          });\n          return t;\n        }\n      }, {\n        key: \"destroyLoader\",\n        value: function destroyLoader(e) {\n          var _this145 = this;\n\n          var t = e instanceof ak ? e : this.getLoader(e);\n\n          t._destroy();\n\n          this.loaders.remove(t);\n\n          this._loadersMap.forEach(function (e, n) {\n            if (e === t) {\n              _this145._loadersMap.delete(n);\n            }\n          });\n        }\n      }, {\n        key: \"_updatePendingAction\",\n        value: function _updatePendingAction() {\n          var e = this.editor.plugins.get(ok);\n\n          if (this.loaders.length) {\n            if (!this._pendingAction) {\n              var _t220 = this.editor.t;\n\n              var _n188 = function _n188(e) {\n                return \"\".concat(_t220(\"at\"), \" \").concat(parseInt(e), \"%.\");\n              };\n\n              this._pendingAction = e.add(_n188(this.uploadedPercent));\n\n              this._pendingAction.bind(\"message\").to(this, \"uploadedPercent\", _n188);\n            }\n          } else {\n            e.remove(this._pendingAction);\n            this._pendingAction = null;\n          }\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"FileRepository\";\n        }\n      }, {\n        key: \"requires\",\n        get: function get() {\n          return [ok];\n        }\n      }]);\n\n      return rk;\n    }(Ow);\n\n    kr(rk, Qc);\n\n    var ak = /*#__PURE__*/function () {\n      function ak(e, t) {\n        _classCallCheck(this, ak);\n\n        this.id = nr();\n        this._filePromiseWrapper = this._createFilePromiseWrapper(e);\n        this._adapter = t(this);\n        this._reader = new sk();\n        this.set(\"status\", \"idle\");\n        this.set(\"uploaded\", 0);\n        this.set(\"uploadTotal\", null);\n        this.bind(\"uploadedPercent\").to(this, \"uploaded\", this, \"uploadTotal\", function (e, t) {\n          return t ? e / t * 100 : 0;\n        });\n        this.set(\"uploadResponse\", null);\n      }\n\n      _createClass(ak, [{\n        key: \"file\",\n        get: function get() {\n          var _this146 = this;\n\n          if (!this._filePromiseWrapper) {\n            return Promise.resolve(null);\n          } else {\n            return this._filePromiseWrapper.promise.then(function (e) {\n              return _this146._filePromiseWrapper ? e : null;\n            });\n          }\n        }\n      }, {\n        key: \"data\",\n        get: function get() {\n          return this._reader.data;\n        }\n      }, {\n        key: \"read\",\n        value: function read() {\n          var _this147 = this;\n\n          if (this.status != \"idle\") {\n            throw new rr[\"b\"](\"filerepository-read-wrong-status: You cannot call read if the status is different than idle.\", this);\n          }\n\n          this.status = \"reading\";\n          return this.file.then(function (e) {\n            return _this147._reader.read(e);\n          }).then(function (e) {\n            _this147.status = \"idle\";\n            return e;\n          }).catch(function (e) {\n            if (e === \"aborted\") {\n              _this147.status = \"aborted\";\n              throw \"aborted\";\n            }\n\n            _this147.status = \"error\";\n            throw _this147._reader.error ? _this147._reader.error : e;\n          });\n        }\n      }, {\n        key: \"upload\",\n        value: function upload() {\n          var _this148 = this;\n\n          if (this.status != \"idle\") {\n            throw new rr[\"b\"](\"filerepository-upload-wrong-status: You cannot call upload if the status is different than idle.\", this);\n          }\n\n          this.status = \"uploading\";\n          return this.file.then(function () {\n            return _this148._adapter.upload();\n          }).then(function (e) {\n            _this148.uploadResponse = e;\n            _this148.status = \"idle\";\n            return e;\n          }).catch(function (e) {\n            if (_this148.status === \"aborted\") {\n              throw \"aborted\";\n            }\n\n            _this148.status = \"error\";\n            throw e;\n          });\n        }\n      }, {\n        key: \"abort\",\n        value: function abort() {\n          var e = this.status;\n          this.status = \"aborted\";\n\n          if (!this._filePromiseWrapper.isFulfilled) {\n            this._filePromiseWrapper.promise.catch(function () {});\n\n            this._filePromiseWrapper.rejecter(\"aborted\");\n          } else if (e == \"reading\") {\n            this._reader.abort();\n          } else if (e == \"uploading\" && this._adapter.abort) {\n            this._adapter.abort();\n          }\n\n          this._destroy();\n        }\n      }, {\n        key: \"_destroy\",\n        value: function _destroy() {\n          this._filePromiseWrapper = undefined;\n          this._reader = undefined;\n          this._adapter = undefined;\n          this.uploadResponse = undefined;\n        }\n      }, {\n        key: \"_createFilePromiseWrapper\",\n        value: function _createFilePromiseWrapper(e) {\n          var t = {};\n          t.promise = new Promise(function (n, i) {\n            t.rejecter = i;\n            t.isFulfilled = false;\n            e.then(function (e) {\n              t.isFulfilled = true;\n              n(e);\n            }).catch(function (e) {\n              t.isFulfilled = true;\n              i(e);\n            });\n          });\n          return t;\n        }\n      }]);\n\n      return ak;\n    }();\n\n    kr(ak, Qc);\n    var ck = \"ckCsrfToken\";\n    var lk = 40;\n    var dk = \"abcdefghijklmnopqrstuvwxyz0123456789\";\n\n    function uk() {\n      var e = hk(ck);\n\n      if (!e || e.length != lk) {\n        e = mk(lk);\n        fk(ck, e);\n      }\n\n      return e;\n    }\n\n    function hk(e) {\n      e = e.toLowerCase();\n      var t = document.cookie.split(\";\");\n\n      var _iterator291 = _createForOfIteratorHelper(t),\n          _step291;\n\n      try {\n        for (_iterator291.s(); !(_step291 = _iterator291.n()).done;) {\n          var _n189 = _step291.value;\n\n          var _t221 = _n189.split(\"=\");\n\n          var _i148 = decodeURIComponent(_t221[0].trim().toLowerCase());\n\n          if (_i148 === e) {\n            return decodeURIComponent(_t221[1]);\n          }\n        }\n      } catch (err) {\n        _iterator291.e(err);\n      } finally {\n        _iterator291.f();\n      }\n\n      return null;\n    }\n\n    function fk(e, t) {\n      document.cookie = encodeURIComponent(e) + \"=\" + encodeURIComponent(t) + \";path=/\";\n    }\n\n    function mk(e) {\n      var t = \"\";\n      var n = new Uint8Array(e);\n      window.crypto.getRandomValues(n);\n\n      for (var _e237 = 0; _e237 < n.length; _e237++) {\n        var _i149 = dk.charAt(n[_e237] % dk.length);\n\n        t += Math.random() > .5 ? _i149.toUpperCase() : _i149;\n      }\n\n      return t;\n    }\n\n    var gk = /*#__PURE__*/function (_Ow13) {\n      _inherits(gk, _Ow13);\n\n      var _super84 = _createSuper(gk);\n\n      function gk() {\n        _classCallCheck(this, gk);\n\n        return _super84.apply(this, arguments);\n      }\n\n      _createClass(gk, [{\n        key: \"init\",\n        value: function init() {\n          var _this149 = this;\n\n          var e = this.editor.config.get(\"ckfinder.uploadUrl\");\n\n          if (!e) {\n            return;\n          }\n\n          this.editor.plugins.get(rk).createUploadAdapter = function (t) {\n            return new pk(t, e, _this149.editor.t);\n          };\n        }\n      }], [{\n        key: \"requires\",\n        get: function get() {\n          return [rk];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"CKFinderUploadAdapter\";\n        }\n      }]);\n\n      return gk;\n    }(Ow);\n\n    var pk = /*#__PURE__*/function () {\n      function pk(e, t, n) {\n        _classCallCheck(this, pk);\n\n        this.loader = e;\n        this.url = t;\n        this.t = n;\n      }\n\n      _createClass(pk, [{\n        key: \"upload\",\n        value: function upload() {\n          var _this150 = this;\n\n          return this.loader.file.then(function (e) {\n            return new Promise(function (t, n) {\n              _this150._initRequest();\n\n              _this150._initListeners(t, n, e);\n\n              _this150._sendRequest(e);\n            });\n          });\n        }\n      }, {\n        key: \"abort\",\n        value: function abort() {\n          if (this.xhr) {\n            this.xhr.abort();\n          }\n        }\n      }, {\n        key: \"_initRequest\",\n        value: function _initRequest() {\n          var e = this.xhr = new XMLHttpRequest();\n          e.open(\"POST\", this.url, true);\n          e.responseType = \"json\";\n        }\n      }, {\n        key: \"_initListeners\",\n        value: function _initListeners(e, t, n) {\n          var i = this.xhr;\n          var o = this.loader;\n          var s = this.t;\n          var r = s(\"a\") + \" \".concat(n.name, \".\");\n          i.addEventListener(\"error\", function () {\n            return t(r);\n          });\n          i.addEventListener(\"abort\", function () {\n            return t();\n          });\n          i.addEventListener(\"load\", function () {\n            var n = i.response;\n\n            if (!n || !n.uploaded) {\n              return t(n && n.error && n.error.message ? n.error.message : r);\n            }\n\n            e({\n              default: n.url\n            });\n          });\n\n          if (i.upload) {\n            i.upload.addEventListener(\"progress\", function (e) {\n              if (e.lengthComputable) {\n                o.uploadTotal = e.total;\n                o.uploaded = e.loaded;\n              }\n            });\n          }\n        }\n      }, {\n        key: \"_sendRequest\",\n        value: function _sendRequest(e) {\n          var t = new FormData();\n          t.append(\"upload\", e);\n          t.append(\"ckCsrfToken\", uk());\n          this.xhr.send(t);\n        }\n      }]);\n\n      return pk;\n    }();\n\n    var bk = /*#__PURE__*/function (_Ow14) {\n      _inherits(bk, _Ow14);\n\n      var _super85 = _createSuper(bk);\n\n      function bk() {\n        _classCallCheck(this, bk);\n\n        return _super85.apply(this, arguments);\n      }\n\n      _createClass(bk, null, [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"CKFinder\";\n        }\n      }, {\n        key: \"requires\",\n        get: function get() {\n          return [ik, n_, gk];\n        }\n      }]);\n\n      return bk;\n    }(Ow);\n\n    var wk = /*#__PURE__*/function (_jw7) {\n      _inherits(wk, _jw7);\n\n      var _super86 = _createSuper(wk);\n\n      function wk() {\n        _classCallCheck(this, wk);\n\n        return _super86.apply(this, arguments);\n      }\n\n      _createClass(wk, [{\n        key: \"refresh\",\n        value: function refresh() {\n          var e = this.editor.model;\n          var t = e.document;\n          var n = zw(t.selection.getSelectedBlocks());\n          this.value = !!n && n.is(\"paragraph\");\n          this.isEnabled = !!n && _k(n, e.schema);\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          var t = this.editor.model;\n          var n = t.document;\n          t.change(function (i) {\n            var o = (e.selection || n.selection).getSelectedBlocks();\n\n            var _iterator292 = _createForOfIteratorHelper(o),\n                _step292;\n\n            try {\n              for (_iterator292.s(); !(_step292 = _iterator292.n()).done;) {\n                var _e238 = _step292.value;\n\n                if (!_e238.is(\"paragraph\") && _k(_e238, t.schema)) {\n                  i.rename(_e238, \"paragraph\");\n                }\n              }\n            } catch (err) {\n              _iterator292.e(err);\n            } finally {\n              _iterator292.f();\n            }\n          });\n        }\n      }]);\n\n      return wk;\n    }(jw);\n\n    function _k(e, t) {\n      return t.checkChild(e.parent, \"paragraph\") && !t.isObject(e);\n    }\n\n    var vk = /*#__PURE__*/function (_Ow15) {\n      _inherits(vk, _Ow15);\n\n      var _super87 = _createSuper(vk);\n\n      function vk() {\n        _classCallCheck(this, vk);\n\n        return _super87.apply(this, arguments);\n      }\n\n      _createClass(vk, [{\n        key: \"init\",\n        value: function init() {\n          var _this151 = this;\n\n          var e = this.editor;\n          var t = e.model;\n          var n = e.data;\n          e.commands.add(\"paragraph\", new wk(e));\n          t.schema.register(\"paragraph\", {\n            inheritAllFrom: \"$block\"\n          });\n          e.conversion.elementToElement({\n            model: \"paragraph\",\n            view: \"p\"\n          });\n          e.conversion.for(\"upcast\").elementToElement({\n            model: function model(e, t) {\n              if (!vk.paragraphLikeElements.has(e.name)) {\n                return null;\n              }\n\n              if (e.isEmpty) {\n                return null;\n              }\n\n              return t.createElement(\"paragraph\");\n            },\n            converterPriority: \"low\"\n          });\n          n.upcastDispatcher.on(\"element\", function (e, t, n) {\n            if (!n.consumable.test(t.viewItem, {\n              name: t.viewItem.name\n            })) {\n              return;\n            }\n\n            if (yk(t.viewItem, t.modelCursor, n.schema)) {\n              Object.assign(t, kk(t.viewItem, t.modelCursor, n));\n            }\n          }, {\n            priority: \"low\"\n          });\n          n.upcastDispatcher.on(\"text\", function (e, t, n) {\n            if (t.modelRange) {\n              return;\n            }\n\n            if (yk(t.viewItem, t.modelCursor, n.schema)) {\n              Object.assign(t, kk(t.viewItem, t.modelCursor, n));\n            }\n          }, {\n            priority: \"lowest\"\n          });\n          t.document.registerPostFixer(function (e) {\n            return _this151._autoparagraphEmptyRoots(e);\n          });\n          e.data.on(\"ready\", function () {\n            t.enqueueChange(\"transparent\", function (e) {\n              return _this151._autoparagraphEmptyRoots(e);\n            });\n          }, {\n            priority: \"lowest\"\n          });\n        }\n      }, {\n        key: \"_autoparagraphEmptyRoots\",\n        value: function _autoparagraphEmptyRoots(e) {\n          var t = this.editor.model;\n\n          var _iterator293 = _createForOfIteratorHelper(t.document.getRootNames()),\n              _step293;\n\n          try {\n            for (_iterator293.s(); !(_step293 = _iterator293.n()).done;) {\n              var _n190 = _step293.value;\n\n              var _i150 = t.document.getRoot(_n190);\n\n              if (_i150.isEmpty && _i150.rootName != \"$graveyard\") {\n                if (t.schema.checkChild(_i150, \"paragraph\")) {\n                  e.insertElement(\"paragraph\", _i150);\n                  return true;\n                }\n              }\n            }\n          } catch (err) {\n            _iterator293.e(err);\n          } finally {\n            _iterator293.f();\n          }\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"Paragraph\";\n        }\n      }]);\n\n      return vk;\n    }(Ow);\n\n    vk.paragraphLikeElements = new Set([\"blockquote\", \"dd\", \"div\", \"dt\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\", \"li\", \"p\", \"td\"]);\n\n    function kk(e, t, n) {\n      var i = n.writer.createElement(\"paragraph\");\n      n.writer.insert(i, t);\n      return n.convertItem(e, n.writer.createPositionAt(i, 0));\n    }\n\n    function yk(e, t, n) {\n      var i = n.createContext(t);\n\n      if (!n.checkChild(i, \"paragraph\")) {\n        return false;\n      }\n\n      if (!n.checkChild(i.push(\"paragraph\"), e)) {\n        return false;\n      }\n\n      return true;\n    }\n\n    var xk = /*#__PURE__*/function (_jw8) {\n      _inherits(xk, _jw8);\n\n      var _super88 = _createSuper(xk);\n\n      function xk(e, t) {\n        var _this152;\n\n        _classCallCheck(this, xk);\n\n        _this152 = _super88.call(this, e);\n        _this152.modelElements = t;\n        return _this152;\n      }\n\n      _createClass(xk, [{\n        key: \"refresh\",\n        value: function refresh() {\n          var _this153 = this;\n\n          var e = zw(this.editor.model.document.selection.getSelectedBlocks());\n          this.value = !!e && this.modelElements.includes(e.name) && e.name;\n          this.isEnabled = !!e && this.modelElements.some(function (t) {\n            return Ak(e, t, _this153.editor.model.schema);\n          });\n        }\n      }, {\n        key: \"execute\",\n        value: function execute(e) {\n          var t = this.editor.model;\n          var n = t.document;\n          var i = e.value;\n          t.change(function (e) {\n            var o = Array.from(n.selection.getSelectedBlocks()).filter(function (e) {\n              return Ak(e, i, t.schema);\n            });\n\n            var _iterator294 = _createForOfIteratorHelper(o),\n                _step294;\n\n            try {\n              for (_iterator294.s(); !(_step294 = _iterator294.n()).done;) {\n                var _t222 = _step294.value;\n\n                if (!_t222.is(i)) {\n                  e.rename(_t222, i);\n                }\n              }\n            } catch (err) {\n              _iterator294.e(err);\n            } finally {\n              _iterator294.f();\n            }\n          });\n        }\n      }]);\n\n      return xk;\n    }(jw);\n\n    function Ak(e, t, n) {\n      return n.checkChild(e.parent, t) && !n.isObject(e);\n    }\n\n    var Ck = \"paragraph\";\n\n    var Tk = /*#__PURE__*/function (_Ow16) {\n      _inherits(Tk, _Ow16);\n\n      var _super89 = _createSuper(Tk);\n\n      function Tk(e) {\n        var _this154;\n\n        _classCallCheck(this, Tk);\n\n        _this154 = _super89.call(this, e);\n        e.config.define(\"heading\", {\n          options: [{\n            model: \"paragraph\",\n            title: \"Paragraph\",\n            class: \"ck-heading_paragraph\"\n          }, {\n            model: \"heading1\",\n            view: \"h2\",\n            title: \"Heading 1\",\n            class: \"ck-heading_heading1\"\n          }, {\n            model: \"heading2\",\n            view: \"h3\",\n            title: \"Heading 2\",\n            class: \"ck-heading_heading2\"\n          }, {\n            model: \"heading3\",\n            view: \"h4\",\n            title: \"Heading 3\",\n            class: \"ck-heading_heading3\"\n          }]\n        });\n        return _this154;\n      }\n\n      _createClass(Tk, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          var t = e.config.get(\"heading.options\");\n          var n = [];\n\n          var _iterator295 = _createForOfIteratorHelper(t),\n              _step295;\n\n          try {\n            for (_iterator295.s(); !(_step295 = _iterator295.n()).done;) {\n              var _i151 = _step295.value;\n\n              if (_i151.model !== Ck) {\n                e.model.schema.register(_i151.model, {\n                  inheritAllFrom: \"$block\"\n                });\n                e.conversion.elementToElement(_i151);\n                n.push(_i151.model);\n              }\n            }\n          } catch (err) {\n            _iterator295.e(err);\n          } finally {\n            _iterator295.f();\n          }\n\n          this._addDefaultH1Conversion(e);\n\n          e.commands.add(\"heading\", new xk(e, n));\n        }\n      }, {\n        key: \"afterInit\",\n        value: function afterInit() {\n          var e = this.editor;\n          var t = e.commands.get(\"enter\");\n          var n = e.config.get(\"heading.options\");\n\n          if (t) {\n            this.listenTo(t, \"afterExecute\", function (t, i) {\n              var o = e.model.document.selection.getFirstPosition().parent;\n              var s = n.some(function (e) {\n                return o.is(e.model);\n              });\n\n              if (s && !o.is(Ck) && o.childCount === 0) {\n                i.writer.rename(o, Ck);\n              }\n            });\n          }\n        }\n      }, {\n        key: \"_addDefaultH1Conversion\",\n        value: function _addDefaultH1Conversion(e) {\n          e.conversion.for(\"upcast\").elementToElement({\n            model: \"heading1\",\n            view: \"h1\",\n            converterPriority: or.get(\"low\") + 1\n          });\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"HeadingEditing\";\n        }\n      }, {\n        key: \"requires\",\n        get: function get() {\n          return [vk];\n        }\n      }]);\n\n      return Tk;\n    }(Ow);\n\n    var Mk = /*#__PURE__*/_createClass(function Mk(e, t) {\n      _classCallCheck(this, Mk);\n\n      if (t) {\n        Wc(this, t);\n      }\n\n      if (e) {\n        this.set(e);\n      }\n    });\n\n    kr(Mk, Qc);\n\n    function Pk(e) {\n      var t = e.t;\n      var n = {\n        Paragraph: t(\"bw\"),\n        \"Heading 1\": t(\"bx\"),\n        \"Heading 2\": t(\"by\"),\n        \"Heading 3\": t(\"bz\"),\n        \"Heading 4\": t(\"ca\"),\n        \"Heading 5\": t(\"cb\"),\n        \"Heading 6\": t(\"cc\")\n      };\n      return e.config.get(\"heading.options\").map(function (e) {\n        var t = n[e.title];\n\n        if (t && t != e.title) {\n          e.title = t;\n        }\n\n        return e;\n      });\n    }\n\n    var Ek = n(11);\n\n    var Sk = /*#__PURE__*/function (_Ow17) {\n      _inherits(Sk, _Ow17);\n\n      var _super90 = _createSuper(Sk);\n\n      function Sk() {\n        _classCallCheck(this, Sk);\n\n        return _super90.apply(this, arguments);\n      }\n\n      _createClass(Sk, [{\n        key: \"init\",\n        value: function init() {\n          var _this155 = this;\n\n          var e = this.editor;\n          var t = e.t;\n          var n = Pk(e);\n          var i = t(\"f\");\n          var o = t(\"g\");\n          e.ui.componentFactory.add(\"heading\", function (t) {\n            var s = {};\n            var r = new yr();\n            var a = e.commands.get(\"heading\");\n            var c = e.commands.get(\"paragraph\");\n            var l = [a];\n\n            var _iterator296 = _createForOfIteratorHelper(n),\n                _step296;\n\n            try {\n              var _loop7 = function _loop7() {\n                var e = _step296.value;\n                var t = {\n                  type: \"button\",\n                  model: new Mk({\n                    label: e.title,\n                    class: e.class,\n                    withText: true\n                  })\n                };\n\n                if (e.model === \"paragraph\") {\n                  t.model.bind(\"isOn\").to(c, \"value\");\n                  t.model.set(\"commandName\", \"paragraph\");\n                  l.push(c);\n                } else {\n                  t.model.bind(\"isOn\").to(a, \"value\", function (t) {\n                    return t === e.model;\n                  });\n                  t.model.set({\n                    commandName: \"heading\",\n                    commandValue: e.model\n                  });\n                }\n\n                r.add(t);\n                s[e.model] = e.title;\n              };\n\n              for (_iterator296.s(); !(_step296 = _iterator296.n()).done;) {\n                _loop7();\n              }\n            } catch (err) {\n              _iterator296.e(err);\n            } finally {\n              _iterator296.f();\n            }\n\n            var d = dw(t);\n            hw(d, r);\n            d.buttonView.set({\n              isOn: false,\n              withText: true,\n              tooltip: o\n            });\n            d.extendTemplate({\n              attributes: {\n                class: [\"ck-heading-dropdown\"]\n              }\n            });\n            d.bind(\"isEnabled\").toMany(l, \"isEnabled\", function () {\n              for (var _len18 = arguments.length, e = new Array(_len18), _key18 = 0; _key18 < _len18; _key18++) {\n                e[_key18] = arguments[_key18];\n              }\n\n              return e.some(function (e) {\n                return e;\n              });\n            });\n            d.buttonView.bind(\"label\").to(a, \"value\", c, \"value\", function (e, t) {\n              var n = e || t && \"paragraph\";\n              return s[n] ? s[n] : i;\n            });\n\n            _this155.listenTo(d, \"execute\", function (t) {\n              e.execute(t.source.commandName, t.source.commandValue ? {\n                value: t.source.commandValue\n              } : undefined);\n              e.editing.view.focus();\n            });\n\n            return d;\n          });\n        }\n      }]);\n\n      return Sk;\n    }(Ow);\n\n    var Ik = /*#__PURE__*/function (_Ow18) {\n      _inherits(Ik, _Ow18);\n\n      var _super91 = _createSuper(Ik);\n\n      function Ik() {\n        _classCallCheck(this, Ik);\n\n        return _super91.apply(this, arguments);\n      }\n\n      _createClass(Ik, null, [{\n        key: \"requires\",\n        get: function get() {\n          return [Tk, Sk];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"Heading\";\n        }\n      }]);\n\n      return Ik;\n    }(Ow);\n\n    var Ok = /*#__PURE__*/function (_Qu5) {\n      _inherits(Ok, _Qu5);\n\n      var _super92 = _createSuper(Ok);\n\n      function Ok(e) {\n        var _this156;\n\n        _classCallCheck(this, Ok);\n\n        _this156 = _super92.call(this, e);\n        _this156.domEventType = \"mousedown\";\n        return _this156;\n      }\n\n      _createClass(Ok, [{\n        key: \"onDomEvent\",\n        value: function onDomEvent(e) {\n          this.fire(e.type, e);\n        }\n      }]);\n\n      return Ok;\n    }(Qu);\n\n    var Nk = n(49);\n    var Rk = jl(\"Ctrl+A\");\n\n    var Lk = /*#__PURE__*/function (_Ow19) {\n      _inherits(Lk, _Ow19);\n\n      var _super93 = _createSuper(Lk);\n\n      function Lk() {\n        _classCallCheck(this, Lk);\n\n        return _super93.apply(this, arguments);\n      }\n\n      _createClass(Lk, [{\n        key: \"init\",\n        value: function init() {\n          var _this157 = this;\n\n          var e = this.editor.editing.view;\n          var t = e.document;\n          this._previouslySelected = new Set();\n          this.editor.editing.downcastDispatcher.on(\"selection\", function (e, t, n) {\n            _this157._clearPreviouslySelectedWidgets(n.writer);\n\n            var i = n.writer;\n            var o = i.document.selection;\n            var s = o.getSelectedElement();\n            var r = null;\n\n            var _iterator297 = _createForOfIteratorHelper(o.getRanges()),\n                _step297;\n\n            try {\n              for (_iterator297.s(); !(_step297 = _iterator297.n()).done;) {\n                var _e239 = _step297.value;\n\n                var _iterator298 = _createForOfIteratorHelper(_e239),\n                    _step298;\n\n                try {\n                  for (_iterator298.s(); !(_step298 = _iterator298.n()).done;) {\n                    var _t223 = _step298.value;\n                    var _e240 = _t223.item;\n\n                    if (u_(_e240) && !Bk(_e240, r)) {\n                      i.addClass(d_, _e240);\n\n                      _this157._previouslySelected.add(_e240);\n\n                      r = _e240;\n\n                      if (_e240 == s) {\n                        i.setSelection(o.getRanges(), {\n                          fake: true,\n                          label: g_(s)\n                        });\n                      }\n                    }\n                  }\n                } catch (err) {\n                  _iterator298.e(err);\n                } finally {\n                  _iterator298.f();\n                }\n              }\n            } catch (err) {\n              _iterator297.e(err);\n            } finally {\n              _iterator297.f();\n            }\n          }, {\n            priority: \"low\"\n          });\n          e.addObserver(Ok);\n          this.listenTo(t, \"mousedown\", function () {\n            return _this157._onMousedown.apply(_this157, arguments);\n          });\n          this.listenTo(t, \"keydown\", function () {\n            return _this157._onKeydown.apply(_this157, arguments);\n          }, {\n            priority: \"high\"\n          });\n          this.listenTo(t, \"delete\", function (e, t) {\n            if (_this157._handleDelete(t.direction == \"forward\")) {\n              t.preventDefault();\n              e.stop();\n            }\n          }, {\n            priority: \"high\"\n          });\n        }\n      }, {\n        key: \"_onMousedown\",\n        value: function _onMousedown(e, t) {\n          var n = this.editor;\n          var i = n.editing.view;\n          var o = i.document;\n          var s = t.target;\n\n          if (zk(s)) {\n            if (Cl.isSafari && t.domEvent.detail >= 3) {\n              var _e241 = n.editing.mapper;\n\n              var _i152 = _e241.toModelElement(s);\n\n              this.editor.model.change(function (e) {\n                t.preventDefault();\n                e.setSelection(_i152, \"in\");\n              });\n            }\n\n            return;\n          }\n\n          if (!u_(s)) {\n            s = s.findAncestor(u_);\n\n            if (!s) {\n              return;\n            }\n          }\n\n          t.preventDefault();\n\n          if (!o.isFocused) {\n            i.focus();\n          }\n\n          var r = n.editing.mapper.toModelElement(s);\n\n          this._setSelectionOverElement(r);\n        }\n      }, {\n        key: \"_onKeydown\",\n        value: function _onKeydown(e, t) {\n          var n = t.keyCode;\n          var i = this.editor.locale.contentLanguageDirection === \"ltr\";\n          var o = n == Rl.arrowdown || n == Rl[i ? \"arrowright\" : \"arrowleft\"];\n          var s = false;\n\n          if (jk(n)) {\n            s = this._handleArrowKeys(o);\n          } else if (Dk(t)) {\n            s = this._selectAllNestedEditableContent() || this._selectAllContent();\n          } else if (n === Rl.enter) {\n            s = this._handleEnterKey(t.shiftKey);\n          }\n\n          if (s) {\n            t.preventDefault();\n            e.stop();\n          }\n        }\n      }, {\n        key: \"_handleDelete\",\n        value: function _handleDelete(e) {\n          var _this158 = this;\n\n          if (this.editor.isReadOnly) {\n            return;\n          }\n\n          var t = this.editor.model.document;\n          var n = t.selection;\n\n          if (!n.isCollapsed) {\n            return;\n          }\n\n          var i = this._getObjectElementNextToSelection(e);\n\n          if (i) {\n            this.editor.model.change(function (e) {\n              var t = n.anchor.parent;\n\n              while (t.isEmpty) {\n                var _n191 = t;\n                t = _n191.parent;\n                e.remove(_n191);\n              }\n\n              _this158._setSelectionOverElement(i);\n            });\n            return true;\n          }\n        }\n      }, {\n        key: \"_handleArrowKeys\",\n        value: function _handleArrowKeys(e) {\n          var t = this.editor.model;\n          var n = t.schema;\n          var i = t.document;\n          var o = i.selection;\n          var s = o.getSelectedElement();\n\n          if (s && n.isObject(s)) {\n            var _i153 = e ? o.getLastPosition() : o.getFirstPosition();\n\n            var _s36 = n.getNearestSelectionRange(_i153, e ? \"forward\" : \"backward\");\n\n            if (_s36) {\n              t.change(function (e) {\n                e.setSelection(_s36);\n              });\n            }\n\n            return true;\n          }\n\n          if (!o.isCollapsed) {\n            return;\n          }\n\n          var r = this._getObjectElementNextToSelection(e);\n\n          if (!!r && n.isObject(r)) {\n            this._setSelectionOverElement(r);\n\n            return true;\n          }\n        }\n      }, {\n        key: \"_handleEnterKey\",\n        value: function _handleEnterKey(e) {\n          var t = this.editor.model;\n          var n = t.document.selection;\n          var i = n.getSelectedElement();\n\n          if (Vk(i, t.schema)) {\n            t.change(function (n) {\n              var o = n.createPositionAt(i, e ? \"before\" : \"after\");\n              var s = n.createElement(\"paragraph\");\n\n              if (t.schema.isBlock(i.parent)) {\n                var _e242 = t.schema.findAllowedParent(o, s);\n\n                o = n.split(o, _e242).position;\n              }\n\n              n.insert(s, o);\n              n.setSelection(s, \"in\");\n            });\n            return true;\n          }\n        }\n      }, {\n        key: \"_selectAllNestedEditableContent\",\n        value: function _selectAllNestedEditableContent() {\n          var e = this.editor.model;\n          var t = e.document.selection;\n          var n = e.schema.getLimitElement(t);\n\n          if (t.getFirstRange().root == n) {\n            return false;\n          }\n\n          e.change(function (e) {\n            e.setSelection(e.createRangeIn(n));\n          });\n          return true;\n        }\n      }, {\n        key: \"_selectAllContent\",\n        value: function _selectAllContent() {\n          var e = this.editor.model;\n          var t = this.editor.editing;\n          var n = t.view;\n          var i = n.document;\n          var o = i.selection;\n          var s = o.getSelectedElement();\n\n          if (s && u_(s)) {\n            var _n192 = t.mapper.toModelElement(s.parent);\n\n            e.change(function (e) {\n              e.setSelection(e.createRangeIn(_n192));\n            });\n            return true;\n          }\n\n          return false;\n        }\n      }, {\n        key: \"_setSelectionOverElement\",\n        value: function _setSelectionOverElement(e) {\n          this.editor.model.change(function (t) {\n            t.setSelection(t.createRangeOn(e));\n          });\n        }\n      }, {\n        key: \"_getObjectElementNextToSelection\",\n        value: function _getObjectElementNextToSelection(e) {\n          var t = this.editor.model;\n          var n = t.schema;\n          var i = t.document.selection;\n          var o = t.createSelection(i);\n          t.modifySelection(o, {\n            direction: e ? \"forward\" : \"backward\"\n          });\n          var s = e ? o.focus.nodeBefore : o.focus.nodeAfter;\n\n          if (!!s && n.isObject(s)) {\n            return s;\n          }\n\n          return null;\n        }\n      }, {\n        key: \"_clearPreviouslySelectedWidgets\",\n        value: function _clearPreviouslySelectedWidgets(e) {\n          var _iterator299 = _createForOfIteratorHelper(this._previouslySelected),\n              _step299;\n\n          try {\n            for (_iterator299.s(); !(_step299 = _iterator299.n()).done;) {\n              var _t224 = _step299.value;\n              e.removeClass(d_, _t224);\n            }\n          } catch (err) {\n            _iterator299.e(err);\n          } finally {\n            _iterator299.f();\n          }\n\n          this._previouslySelected.clear();\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"Widget\";\n        }\n      }]);\n\n      return Lk;\n    }(Ow);\n\n    function jk(e) {\n      return e == Rl.arrowright || e == Rl.arrowleft || e == Rl.arrowup || e == Rl.arrowdown;\n    }\n\n    function Dk(e) {\n      return Ll(e) == Rk;\n    }\n\n    function zk(e) {\n      while (e) {\n        if (e.is(\"editableElement\") && !e.is(\"rootElement\")) {\n          return true;\n        }\n\n        if (u_(e)) {\n          return false;\n        }\n\n        e = e.parent;\n      }\n\n      return false;\n    }\n\n    function Bk(e, t) {\n      if (!t) {\n        return false;\n      }\n\n      return Array.from(e.getAncestors()).includes(t);\n    }\n\n    function Vk(e, t) {\n      return e && t.isObject(e) && !t.isInline(e);\n    }\n\n    var Fk = /*#__PURE__*/function (_jw9) {\n      _inherits(Fk, _jw9);\n\n      var _super94 = _createSuper(Fk);\n\n      function Fk() {\n        _classCallCheck(this, Fk);\n\n        return _super94.apply(this, arguments);\n      }\n\n      _createClass(Fk, [{\n        key: \"refresh\",\n        value: function refresh() {\n          var e = this.editor.model.document.selection.getSelectedElement();\n          this.isEnabled = A_(e);\n\n          if (A_(e) && e.hasAttribute(\"alt\")) {\n            this.value = e.getAttribute(\"alt\");\n          } else {\n            this.value = false;\n          }\n        }\n      }, {\n        key: \"execute\",\n        value: function execute(e) {\n          var t = this.editor.model;\n          var n = t.document.selection.getSelectedElement();\n          t.change(function (t) {\n            t.setAttribute(\"alt\", e.newValue, n);\n          });\n        }\n      }]);\n\n      return Fk;\n    }(jw);\n\n    var Hk = /*#__PURE__*/function (_Ow20) {\n      _inherits(Hk, _Ow20);\n\n      var _super95 = _createSuper(Hk);\n\n      function Hk() {\n        _classCallCheck(this, Hk);\n\n        return _super95.apply(this, arguments);\n      }\n\n      _createClass(Hk, [{\n        key: \"init\",\n        value: function init() {\n          this.editor.commands.add(\"imageTextAlternative\", new Fk(this.editor));\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"ImageTextAlternativeEditing\";\n        }\n      }]);\n\n      return Hk;\n    }(Ow);\n\n    var Uk = n(51);\n\n    var Wk = /*#__PURE__*/function (_gb16) {\n      _inherits(Wk, _gb16);\n\n      var _super96 = _createSuper(Wk);\n\n      function Wk(e, t) {\n        var _this159;\n\n        _classCallCheck(this, Wk);\n\n        _this159 = _super96.call(this, e);\n        var n = \"ck-input-\".concat(nr());\n        var i = \"ck-status-\".concat(nr());\n\n        _this159.set(\"label\");\n\n        _this159.set(\"value\");\n\n        _this159.set(\"isReadOnly\", false);\n\n        _this159.set(\"errorText\", null);\n\n        _this159.set(\"infoText\", null);\n\n        _this159.labelView = _this159._createLabelView(n);\n        _this159.inputView = _this159._createInputView(t, n, i);\n        _this159.statusView = _this159._createStatusView(i);\n\n        _this159.bind(\"_statusText\").to(_assertThisInitialized(_this159), \"errorText\", _assertThisInitialized(_this159), \"infoText\", function (e, t) {\n          return e || t;\n        });\n\n        var o = _this159.bindTemplate;\n\n        _this159.setTemplate({\n          tag: \"div\",\n          attributes: {\n            class: [\"ck\", \"ck-labeled-input\", o.if(\"isReadOnly\", \"ck-disabled\")]\n          },\n          children: [_this159.labelView, _this159.inputView, _this159.statusView]\n        });\n\n        return _this159;\n      }\n\n      _createClass(Wk, [{\n        key: \"_createLabelView\",\n        value: function _createLabelView(e) {\n          var t = new Ab(this.locale);\n          t.for = e;\n          t.bind(\"text\").to(this, \"label\");\n          return t;\n        }\n      }, {\n        key: \"_createInputView\",\n        value: function _createInputView(e, t, n) {\n          var _this160 = this;\n\n          var i = new e(this.locale, n);\n          i.id = t;\n          i.ariaDescribedById = n;\n          i.bind(\"value\").to(this);\n          i.bind(\"isReadOnly\").to(this);\n          i.bind(\"hasError\").to(this, \"errorText\", function (e) {\n            return !!e;\n          });\n          i.on(\"input\", function () {\n            _this160.errorText = null;\n          });\n          return i;\n        }\n      }, {\n        key: \"_createStatusView\",\n        value: function _createStatusView(e) {\n          var t = new gb(this.locale);\n          var n = this.bindTemplate;\n          t.setTemplate({\n            tag: \"div\",\n            attributes: {\n              class: [\"ck\", \"ck-labeled-input__status\", n.if(\"errorText\", \"ck-labeled-input__status_error\"), n.if(\"_statusText\", \"ck-hidden\", function (e) {\n                return !e;\n              })],\n              id: e,\n              role: n.if(\"errorText\", \"alert\")\n            },\n            children: [{\n              text: n.to(\"_statusText\")\n            }]\n          });\n          return t;\n        }\n      }, {\n        key: \"select\",\n        value: function select() {\n          this.inputView.select();\n        }\n      }, {\n        key: \"focus\",\n        value: function focus() {\n          this.inputView.focus();\n        }\n      }]);\n\n      return Wk;\n    }(gb);\n\n    var $k = n(53);\n\n    var qk = /*#__PURE__*/function (_gb17) {\n      _inherits(qk, _gb17);\n\n      var _super97 = _createSuper(qk);\n\n      function qk(e) {\n        var _this161;\n\n        _classCallCheck(this, qk);\n\n        _this161 = _super97.call(this, e);\n\n        _this161.set(\"value\");\n\n        _this161.set(\"id\");\n\n        _this161.set(\"placeholder\");\n\n        _this161.set(\"isReadOnly\", false);\n\n        _this161.set(\"hasError\", false);\n\n        _this161.set(\"ariaDescribedById\");\n\n        var t = _this161.bindTemplate;\n\n        _this161.setTemplate({\n          tag: \"input\",\n          attributes: {\n            type: \"text\",\n            class: [\"ck\", \"ck-input\", \"ck-input-text\", t.if(\"hasError\", \"ck-error\")],\n            id: t.to(\"id\"),\n            placeholder: t.to(\"placeholder\"),\n            readonly: t.to(\"isReadOnly\"),\n            \"aria-invalid\": t.if(\"hasError\", true),\n            \"aria-describedby\": t.to(\"ariaDescribedById\")\n          },\n          on: {\n            input: t.to(\"input\")\n          }\n        });\n\n        return _this161;\n      }\n\n      _createClass(qk, [{\n        key: \"render\",\n        value: function render() {\n          var _this162 = this;\n\n          _get(_getPrototypeOf(qk.prototype), \"render\", this).call(this);\n\n          var e = function (_e243) {\n            function e(_x4) {\n              return _e243.apply(this, arguments);\n            }\n\n            e.toString = function () {\n              return _e243.toString();\n            };\n\n            return e;\n          }(function (e) {\n            _this162.element.value = !e && e !== 0 ? \"\" : e;\n          });\n\n          e(this.value);\n          this.on(\"change:value\", function (t, n, i) {\n            e(i);\n          });\n        }\n      }, {\n        key: \"select\",\n        value: function select() {\n          this.element.select();\n        }\n      }, {\n        key: \"focus\",\n        value: function focus() {\n          this.element.focus();\n        }\n      }]);\n\n      return qk;\n    }(gb);\n\n    function Yk(_ref29) {\n      var e = _ref29.view;\n      e.listenTo(e.element, \"submit\", function (t, n) {\n        n.preventDefault();\n        e.fire(\"submit\");\n      }, {\n        useCapture: true\n      });\n    }\n\n    var Jk = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M6.972 16.615a.997.997 0 0 1-.744-.292l-4.596-4.596a1 1 0 1 1 1.414-1.414l3.926 3.926 9.937-9.937a1 1 0 0 1 1.414 1.415L7.717 16.323a.997.997 0 0 1-.745.292z\"/></svg>';\n    var Qk = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.591 10.177l4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z\"/></svg>';\n    var Xk = n(55);\n\n    var Gk = /*#__PURE__*/function (_gb18) {\n      _inherits(Gk, _gb18);\n\n      var _super98 = _createSuper(Gk);\n\n      function Gk(e) {\n        var _this163;\n\n        _classCallCheck(this, Gk);\n\n        _this163 = _super98.call(this, e);\n        var t = _this163.locale.t;\n        _this163.focusTracker = new xp();\n        _this163.keystrokes = new dp();\n        _this163.labeledInput = _this163._createLabeledInputView();\n        _this163.saveButtonView = _this163._createButton(t(\"bd\"), Jk, \"ck-button-save\");\n        _this163.saveButtonView.type = \"submit\";\n        _this163.cancelButtonView = _this163._createButton(t(\"be\"), Qk, \"ck-button-cancel\", \"cancel\");\n        _this163._focusables = new Bp();\n        _this163._focusCycler = new Ob({\n          focusables: _this163._focusables,\n          focusTracker: _this163.focusTracker,\n          keystrokeHandler: _this163.keystrokes,\n          actions: {\n            focusPrevious: \"shift + tab\",\n            focusNext: \"tab\"\n          }\n        });\n\n        _this163.setTemplate({\n          tag: \"form\",\n          attributes: {\n            class: [\"ck\", \"ck-text-alternative-form\"],\n            tabindex: \"-1\"\n          },\n          children: [_this163.labeledInput, _this163.saveButtonView, _this163.cancelButtonView]\n        });\n\n        return _this163;\n      }\n\n      _createClass(Gk, [{\n        key: \"render\",\n        value: function render() {\n          var _this164 = this;\n\n          _get(_getPrototypeOf(Gk.prototype), \"render\", this).call(this);\n\n          this.keystrokes.listenTo(this.element);\n          Yk({\n            view: this\n          });\n          [this.labeledInput, this.saveButtonView, this.cancelButtonView].forEach(function (e) {\n            _this164._focusables.add(e);\n\n            _this164.focusTracker.add(e.element);\n          });\n        }\n      }, {\n        key: \"_createButton\",\n        value: function _createButton(e, t, n, i) {\n          var o = new Kb(this.locale);\n          o.set({\n            label: e,\n            icon: t,\n            tooltip: true\n          });\n          o.extendTemplate({\n            attributes: {\n              class: n\n            }\n          });\n\n          if (i) {\n            o.delegate(\"execute\").to(this, i);\n          }\n\n          return o;\n        }\n      }, {\n        key: \"_createLabeledInputView\",\n        value: function _createLabeledInputView() {\n          var e = this.locale.t;\n          var t = new Wk(this.locale, qk);\n          t.label = e(\"bf\");\n          t.inputView.placeholder = e(\"bf\");\n          return t;\n        }\n      }]);\n\n      return Gk;\n    }(gb);\n\n    var Kk = n(57);\n    var Zk = Pb(\"px\");\n    var ey = Od.document.body;\n\n    var ty = /*#__PURE__*/function (_gb19) {\n      _inherits(ty, _gb19);\n\n      var _super99 = _createSuper(ty);\n\n      function ty(e) {\n        var _this165;\n\n        _classCallCheck(this, ty);\n\n        _this165 = _super99.call(this, e);\n        var t = _this165.bindTemplate;\n\n        _this165.set(\"top\", 0);\n\n        _this165.set(\"left\", 0);\n\n        _this165.set(\"position\", \"arrow_nw\");\n\n        _this165.set(\"isVisible\", false);\n\n        _this165.set(\"withArrow\", true);\n\n        _this165.set(\"class\");\n\n        _this165.content = _this165.createCollection();\n\n        _this165.setTemplate({\n          tag: \"div\",\n          attributes: {\n            class: [\"ck\", \"ck-balloon-panel\", t.to(\"position\", function (e) {\n              return \"ck-balloon-panel_\".concat(e);\n            }), t.if(\"isVisible\", \"ck-balloon-panel_visible\"), t.if(\"withArrow\", \"ck-balloon-panel_with-arrow\"), t.to(\"class\")],\n            style: {\n              top: t.to(\"top\", Zk),\n              left: t.to(\"left\", Zk)\n            }\n          },\n          children: _this165.content\n        });\n\n        return _this165;\n      }\n\n      _createClass(ty, [{\n        key: \"show\",\n        value: function show() {\n          this.isVisible = true;\n        }\n      }, {\n        key: \"hide\",\n        value: function hide() {\n          this.isVisible = false;\n        }\n      }, {\n        key: \"attachTo\",\n        value: function attachTo(e) {\n          this.show();\n          var t = ty.defaultPositions;\n          var n = Object.assign({}, {\n            element: this.element,\n            positions: [t.southArrowNorth, t.southArrowNorthMiddleWest, t.southArrowNorthMiddleEast, t.southArrowNorthWest, t.southArrowNorthEast, t.northArrowSouth, t.northArrowSouthMiddleWest, t.northArrowSouthMiddleEast, t.northArrowSouthWest, t.northArrowSouthEast],\n            limiter: ey,\n            fitInViewport: true\n          }, e);\n\n          var i = ty._getOptimalPosition(n);\n\n          var o = parseInt(i.left);\n          var s = parseInt(i.top);\n          var r = i.name;\n          Object.assign(this, {\n            top: s,\n            left: o,\n            position: r\n          });\n        }\n      }, {\n        key: \"pin\",\n        value: function pin(e) {\n          var _this166 = this;\n\n          this.unpin();\n\n          this._pinWhenIsVisibleCallback = function () {\n            if (_this166.isVisible) {\n              _this166._startPinning(e);\n            } else {\n              _this166._stopPinning();\n            }\n          };\n\n          this._startPinning(e);\n\n          this.listenTo(this, \"change:isVisible\", this._pinWhenIsVisibleCallback);\n        }\n      }, {\n        key: \"unpin\",\n        value: function unpin() {\n          if (this._pinWhenIsVisibleCallback) {\n            this._stopPinning();\n\n            this.stopListening(this, \"change:isVisible\", this._pinWhenIsVisibleCallback);\n            this._pinWhenIsVisibleCallback = null;\n            this.hide();\n          }\n        }\n      }, {\n        key: \"_startPinning\",\n        value: function _startPinning(e) {\n          var _this167 = this;\n\n          this.attachTo(e);\n          var t = ny(e.target);\n          var n = e.limiter ? ny(e.limiter) : ey;\n          this.listenTo(Od.document, \"scroll\", function (i, o) {\n            var s = o.target;\n            var r = t && s.contains(t);\n            var a = n && s.contains(n);\n\n            if (r || a || !t || !n) {\n              _this167.attachTo(e);\n            }\n          }, {\n            useCapture: true\n          });\n          this.listenTo(Od.window, \"resize\", function () {\n            _this167.attachTo(e);\n          });\n        }\n      }, {\n        key: \"_stopPinning\",\n        value: function _stopPinning() {\n          this.stopListening(Od.document, \"scroll\");\n          this.stopListening(Od.window, \"resize\");\n        }\n      }]);\n\n      return ty;\n    }(gb);\n\n    function ny(e) {\n      if (Js(e)) {\n        return e;\n      }\n\n      if (wh(e)) {\n        return e.commonAncestorContainer;\n      }\n\n      if (typeof e == \"function\") {\n        return ny(e());\n      }\n\n      return null;\n    }\n\n    ty.arrowHorizontalOffset = 25;\n    ty.arrowVerticalOffset = 10;\n    ty._getOptimalPosition = Hb;\n    ty.defaultPositions = {\n      northWestArrowSouthWest: function northWestArrowSouthWest(e, t) {\n        return {\n          top: iy(e, t),\n          left: e.left - ty.arrowHorizontalOffset,\n          name: \"arrow_sw\"\n        };\n      },\n      northWestArrowSouthMiddleWest: function northWestArrowSouthMiddleWest(e, t) {\n        return {\n          top: iy(e, t),\n          left: e.left - t.width * .25 - ty.arrowHorizontalOffset,\n          name: \"arrow_smw\"\n        };\n      },\n      northWestArrowSouth: function northWestArrowSouth(e, t) {\n        return {\n          top: iy(e, t),\n          left: e.left - t.width / 2,\n          name: \"arrow_s\"\n        };\n      },\n      northWestArrowSouthMiddleEast: function northWestArrowSouthMiddleEast(e, t) {\n        return {\n          top: iy(e, t),\n          left: e.left - t.width * .75 + ty.arrowHorizontalOffset,\n          name: \"arrow_sme\"\n        };\n      },\n      northWestArrowSouthEast: function northWestArrowSouthEast(e, t) {\n        return {\n          top: iy(e, t),\n          left: e.left - t.width + ty.arrowHorizontalOffset,\n          name: \"arrow_se\"\n        };\n      },\n      northArrowSouthWest: function northArrowSouthWest(e, t) {\n        return {\n          top: iy(e, t),\n          left: e.left + e.width / 2 - ty.arrowHorizontalOffset,\n          name: \"arrow_sw\"\n        };\n      },\n      northArrowSouthMiddleWest: function northArrowSouthMiddleWest(e, t) {\n        return {\n          top: iy(e, t),\n          left: e.left + e.width / 2 - t.width * .25 - ty.arrowHorizontalOffset,\n          name: \"arrow_smw\"\n        };\n      },\n      northArrowSouth: function northArrowSouth(e, t) {\n        return {\n          top: iy(e, t),\n          left: e.left + e.width / 2 - t.width / 2,\n          name: \"arrow_s\"\n        };\n      },\n      northArrowSouthMiddleEast: function northArrowSouthMiddleEast(e, t) {\n        return {\n          top: iy(e, t),\n          left: e.left + e.width / 2 - t.width * .75 + ty.arrowHorizontalOffset,\n          name: \"arrow_sme\"\n        };\n      },\n      northArrowSouthEast: function northArrowSouthEast(e, t) {\n        return {\n          top: iy(e, t),\n          left: e.left + e.width / 2 - t.width + ty.arrowHorizontalOffset,\n          name: \"arrow_se\"\n        };\n      },\n      northEastArrowSouthWest: function northEastArrowSouthWest(e, t) {\n        return {\n          top: iy(e, t),\n          left: e.right - ty.arrowHorizontalOffset,\n          name: \"arrow_sw\"\n        };\n      },\n      northEastArrowSouthMiddleWest: function northEastArrowSouthMiddleWest(e, t) {\n        return {\n          top: iy(e, t),\n          left: e.right - t.width * .25 - ty.arrowHorizontalOffset,\n          name: \"arrow_smw\"\n        };\n      },\n      northEastArrowSouth: function northEastArrowSouth(e, t) {\n        return {\n          top: iy(e, t),\n          left: e.right - t.width / 2,\n          name: \"arrow_s\"\n        };\n      },\n      northEastArrowSouthMiddleEast: function northEastArrowSouthMiddleEast(e, t) {\n        return {\n          top: iy(e, t),\n          left: e.right - t.width * .75 + ty.arrowHorizontalOffset,\n          name: \"arrow_sme\"\n        };\n      },\n      northEastArrowSouthEast: function northEastArrowSouthEast(e, t) {\n        return {\n          top: iy(e, t),\n          left: e.right - t.width + ty.arrowHorizontalOffset,\n          name: \"arrow_se\"\n        };\n      },\n      southWestArrowNorthWest: function southWestArrowNorthWest(e, t) {\n        return {\n          top: oy(e, t),\n          left: e.left - ty.arrowHorizontalOffset,\n          name: \"arrow_nw\"\n        };\n      },\n      southWestArrowNorthMiddleWest: function southWestArrowNorthMiddleWest(e, t) {\n        return {\n          top: oy(e, t),\n          left: e.left - t.width * .25 - ty.arrowHorizontalOffset,\n          name: \"arrow_nmw\"\n        };\n      },\n      southWestArrowNorth: function southWestArrowNorth(e, t) {\n        return {\n          top: oy(e, t),\n          left: e.left - t.width / 2,\n          name: \"arrow_n\"\n        };\n      },\n      southWestArrowNorthMiddleEast: function southWestArrowNorthMiddleEast(e, t) {\n        return {\n          top: oy(e, t),\n          left: e.left - t.width * .75 + ty.arrowHorizontalOffset,\n          name: \"arrow_nme\"\n        };\n      },\n      southWestArrowNorthEast: function southWestArrowNorthEast(e, t) {\n        return {\n          top: oy(e, t),\n          left: e.left - t.width + ty.arrowHorizontalOffset,\n          name: \"arrow_ne\"\n        };\n      },\n      southArrowNorthWest: function southArrowNorthWest(e, t) {\n        return {\n          top: oy(e, t),\n          left: e.left + e.width / 2 - ty.arrowHorizontalOffset,\n          name: \"arrow_nw\"\n        };\n      },\n      southArrowNorthMiddleWest: function southArrowNorthMiddleWest(e, t) {\n        return {\n          top: oy(e, t),\n          left: e.left + e.width / 2 - t.width * .25 - ty.arrowHorizontalOffset,\n          name: \"arrow_nmw\"\n        };\n      },\n      southArrowNorth: function southArrowNorth(e, t) {\n        return {\n          top: oy(e, t),\n          left: e.left + e.width / 2 - t.width / 2,\n          name: \"arrow_n\"\n        };\n      },\n      southArrowNorthMiddleEast: function southArrowNorthMiddleEast(e, t) {\n        return {\n          top: oy(e, t),\n          left: e.left + e.width / 2 - t.width * .75 + ty.arrowHorizontalOffset,\n          name: \"arrow_nme\"\n        };\n      },\n      southArrowNorthEast: function southArrowNorthEast(e, t) {\n        return {\n          top: oy(e, t),\n          left: e.left + e.width / 2 - t.width + ty.arrowHorizontalOffset,\n          name: \"arrow_ne\"\n        };\n      },\n      southEastArrowNorthWest: function southEastArrowNorthWest(e, t) {\n        return {\n          top: oy(e, t),\n          left: e.right - ty.arrowHorizontalOffset,\n          name: \"arrow_nw\"\n        };\n      },\n      southEastArrowNorthMiddleWest: function southEastArrowNorthMiddleWest(e, t) {\n        return {\n          top: oy(e, t),\n          left: e.right - t.width * .25 - ty.arrowHorizontalOffset,\n          name: \"arrow_nmw\"\n        };\n      },\n      southEastArrowNorth: function southEastArrowNorth(e, t) {\n        return {\n          top: oy(e, t),\n          left: e.right - t.width / 2,\n          name: \"arrow_n\"\n        };\n      },\n      southEastArrowNorthMiddleEast: function southEastArrowNorthMiddleEast(e, t) {\n        return {\n          top: oy(e, t),\n          left: e.right - t.width * .75 + ty.arrowHorizontalOffset,\n          name: \"arrow_nme\"\n        };\n      },\n      southEastArrowNorthEast: function southEastArrowNorthEast(e, t) {\n        return {\n          top: oy(e, t),\n          left: e.right - t.width + ty.arrowHorizontalOffset,\n          name: \"arrow_ne\"\n        };\n      }\n    };\n\n    function iy(e, t) {\n      return e.top - t.height - ty.arrowVerticalOffset;\n    }\n\n    function oy(e) {\n      return e.bottom + ty.arrowVerticalOffset;\n    }\n\n    var sy = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z\"/></svg>';\n    var ry = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z\"/></svg>';\n    var ay = n(59);\n    var cy = n(61);\n    var ly = Pb(\"px\");\n\n    var dy = /*#__PURE__*/function (_Ow21) {\n      _inherits(dy, _Ow21);\n\n      var _super100 = _createSuper(dy);\n\n      function dy(e) {\n        var _this168;\n\n        _classCallCheck(this, dy);\n\n        _this168 = _super100.call(this, e);\n\n        _this168.positionLimiter = function () {\n          var e = _this168.editor.editing.view;\n          var t = e.document;\n          var n = t.selection.editableElement;\n\n          if (n) {\n            return e.domConverter.mapViewToDom(n.root);\n          }\n\n          return null;\n        };\n\n        _this168.set(\"visibleView\", null);\n\n        _this168.view = new ty(e.locale);\n        e.ui.view.body.add(_this168.view);\n        e.ui.focusTracker.add(_this168.view.element);\n        _this168._viewToStack = new Map();\n        _this168._idToStack = new Map();\n\n        _this168.set(\"_numberOfStacks\", 0);\n\n        _this168.set(\"_singleViewMode\", false);\n\n        _this168._rotatorView = _this168._createRotatorView();\n        _this168._fakePanelsView = _this168._createFakePanelsView();\n        return _this168;\n      }\n\n      _createClass(dy, [{\n        key: \"hasView\",\n        value: function hasView(e) {\n          return Array.from(this._viewToStack.keys()).includes(e);\n        }\n      }, {\n        key: \"add\",\n        value: function add(e) {\n          if (this.hasView(e.view)) {\n            throw new rr[\"b\"](\"contextualballoon-add-view-exist: Cannot add configuration of the same view twice.\", [this, e]);\n          }\n\n          var t = e.stackId || \"main\";\n\n          if (!this._idToStack.has(t)) {\n            this._idToStack.set(t, new Map([[e.view, e]]));\n\n            this._viewToStack.set(e.view, this._idToStack.get(t));\n\n            this._numberOfStacks = this._idToStack.size;\n\n            if (!this._visibleStack || e.singleViewMode) {\n              this.showStack(t);\n            }\n\n            return;\n          }\n\n          var n = this._idToStack.get(t);\n\n          if (e.singleViewMode) {\n            this.showStack(t);\n          }\n\n          n.set(e.view, e);\n\n          this._viewToStack.set(e.view, n);\n\n          if (n === this._visibleStack) {\n            this._showView(e);\n          }\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(e) {\n          if (!this.hasView(e)) {\n            throw new rr[\"b\"](\"contextualballoon-remove-view-not-exist: Cannot remove the configuration of a non-existent view.\", [this, e]);\n          }\n\n          var t = this._viewToStack.get(e);\n\n          if (this._singleViewMode && this.visibleView === e) {\n            this._singleViewMode = false;\n          }\n\n          if (this.visibleView === e) {\n            if (t.size === 1) {\n              if (this._idToStack.size > 1) {\n                this._showNextStack();\n              } else {\n                this.view.hide();\n                this.visibleView = null;\n\n                this._rotatorView.hideView();\n              }\n            } else {\n              this._showView(Array.from(t.values())[t.size - 2]);\n            }\n          }\n\n          if (t.size === 1) {\n            this._idToStack.delete(this._getStackId(t));\n\n            this._numberOfStacks = this._idToStack.size;\n          } else {\n            t.delete(e);\n          }\n\n          this._viewToStack.delete(e);\n        }\n      }, {\n        key: \"updatePosition\",\n        value: function updatePosition(e) {\n          if (e) {\n            this._visibleStack.get(this.visibleView).position = e;\n          }\n\n          this.view.pin(this._getBalloonPosition());\n\n          this._fakePanelsView.updatePosition();\n        }\n      }, {\n        key: \"showStack\",\n        value: function showStack(e) {\n          this.visibleStack = e;\n\n          var t = this._idToStack.get(e);\n\n          if (!t) {\n            throw new rr[\"b\"](\"contextualballoon-showstack-stack-not-exist: Cannot show a stack that does not exist.\", this);\n          }\n\n          if (this._visibleStack === t) {\n            return;\n          }\n\n          this._showView(Array.from(t.values()).pop());\n        }\n      }, {\n        key: \"_visibleStack\",\n        get: function get() {\n          return this._viewToStack.get(this.visibleView);\n        }\n      }, {\n        key: \"_getStackId\",\n        value: function _getStackId(e) {\n          var t = Array.from(this._idToStack.entries()).find(function (t) {\n            return t[1] === e;\n          });\n          return t[0];\n        }\n      }, {\n        key: \"_showNextStack\",\n        value: function _showNextStack() {\n          var e = Array.from(this._idToStack.values());\n          var t = e.indexOf(this._visibleStack) + 1;\n\n          if (!e[t]) {\n            t = 0;\n          }\n\n          this.showStack(this._getStackId(e[t]));\n        }\n      }, {\n        key: \"_showPrevStack\",\n        value: function _showPrevStack() {\n          var e = Array.from(this._idToStack.values());\n          var t = e.indexOf(this._visibleStack) - 1;\n\n          if (!e[t]) {\n            t = e.length - 1;\n          }\n\n          this.showStack(this._getStackId(e[t]));\n        }\n      }, {\n        key: \"_createRotatorView\",\n        value: function _createRotatorView() {\n          var _this169 = this;\n\n          var e = new uy(this.editor.locale);\n          var t = this.editor.locale.t;\n          this.view.content.add(e);\n          e.bind(\"isNavigationVisible\").to(this, \"_numberOfStacks\", this, \"_singleViewMode\", function (e, t) {\n            return !t && e > 1;\n          });\n          e.on(\"change:isNavigationVisible\", function () {\n            return _this169.updatePosition();\n          }, {\n            priority: \"low\"\n          });\n          e.bind(\"counter\").to(this, \"visibleView\", this, \"_numberOfStacks\", function (e, n) {\n            if (n < 2) {\n              return \"\";\n            }\n\n            var i = Array.from(_this169._idToStack.values()).indexOf(_this169._visibleStack) + 1;\n            return t(\"bg\", [i, n]);\n          });\n          e.buttonNextView.on(\"execute\", function () {\n            if (e.focusTracker.isFocused) {\n              _this169.editor.editing.view.focus();\n            }\n\n            _this169._showNextStack();\n          });\n          e.buttonPrevView.on(\"execute\", function () {\n            if (e.focusTracker.isFocused) {\n              _this169.editor.editing.view.focus();\n            }\n\n            _this169._showPrevStack();\n          });\n          return e;\n        }\n      }, {\n        key: \"_createFakePanelsView\",\n        value: function _createFakePanelsView() {\n          var e = new hy(this.editor.locale, this.view);\n          e.bind(\"numberOfPanels\").to(this, \"_numberOfStacks\", this, \"_singleViewMode\", function (e, t) {\n            var n = !t && e >= 2;\n            return n ? Math.min(e - 1, 2) : 0;\n          });\n          e.listenTo(this.view, \"change:top\", function () {\n            return e.updatePosition();\n          });\n          e.listenTo(this.view, \"change:left\", function () {\n            return e.updatePosition();\n          });\n          this.editor.ui.view.body.add(e);\n          return e;\n        }\n      }, {\n        key: \"_showView\",\n        value: function _showView(_ref30) {\n          var e = _ref30.view,\n              _ref30$balloonClassNa = _ref30.balloonClassName,\n              t = _ref30$balloonClassNa === void 0 ? \"\" : _ref30$balloonClassNa,\n              _ref30$withArrow = _ref30.withArrow,\n              n = _ref30$withArrow === void 0 ? true : _ref30$withArrow,\n              _ref30$singleViewMode = _ref30.singleViewMode,\n              i = _ref30$singleViewMode === void 0 ? false : _ref30$singleViewMode;\n          this.view.class = t;\n          this.view.withArrow = n;\n\n          this._rotatorView.showView(e);\n\n          this.visibleView = e;\n          this.view.pin(this._getBalloonPosition());\n\n          this._fakePanelsView.updatePosition();\n\n          if (i) {\n            this._singleViewMode = true;\n          }\n        }\n      }, {\n        key: \"_getBalloonPosition\",\n        value: function _getBalloonPosition() {\n          var e = Array.from(this._visibleStack.values()).pop().position;\n\n          if (e && !e.limiter) {\n            e = Object.assign({}, e, {\n              limiter: this.positionLimiter\n            });\n          }\n\n          return e;\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"ContextualBalloon\";\n        }\n      }]);\n\n      return dy;\n    }(Ow);\n\n    var uy = /*#__PURE__*/function (_gb20) {\n      _inherits(uy, _gb20);\n\n      var _super101 = _createSuper(uy);\n\n      function uy(e) {\n        var _this170;\n\n        _classCallCheck(this, uy);\n\n        _this170 = _super101.call(this, e);\n        var t = e.t;\n        var n = _this170.bindTemplate;\n\n        _this170.set(\"isNavigationVisible\", true);\n\n        _this170.focusTracker = new xp();\n        _this170.buttonPrevView = _this170._createButtonView(t(\"bh\"), sy);\n        _this170.buttonNextView = _this170._createButtonView(t(\"bi\"), ry);\n        _this170.content = _this170.createCollection();\n\n        _this170.setTemplate({\n          tag: \"div\",\n          attributes: {\n            class: [\"ck\", \"ck-balloon-rotator\"],\n            \"z-index\": \"-1\"\n          },\n          children: [{\n            tag: \"div\",\n            attributes: {\n              class: [\"ck-balloon-rotator__navigation\", n.to(\"isNavigationVisible\", function (e) {\n                return e ? \"\" : \"ck-hidden\";\n              })]\n            },\n            children: [_this170.buttonPrevView, {\n              tag: \"span\",\n              attributes: {\n                class: [\"ck-balloon-rotator__counter\"]\n              },\n              children: [{\n                text: n.to(\"counter\")\n              }]\n            }, _this170.buttonNextView]\n          }, {\n            tag: \"div\",\n            attributes: {\n              class: \"ck-balloon-rotator__content\"\n            },\n            children: _this170.content\n          }]\n        });\n\n        return _this170;\n      }\n\n      _createClass(uy, [{\n        key: \"render\",\n        value: function render() {\n          _get(_getPrototypeOf(uy.prototype), \"render\", this).call(this);\n\n          this.focusTracker.add(this.element);\n        }\n      }, {\n        key: \"showView\",\n        value: function showView(e) {\n          this.hideView();\n          this.content.add(e);\n        }\n      }, {\n        key: \"hideView\",\n        value: function hideView() {\n          this.content.clear();\n        }\n      }, {\n        key: \"_createButtonView\",\n        value: function _createButtonView(e, t) {\n          var n = new Kb(this.locale);\n          n.set({\n            label: e,\n            icon: t,\n            tooltip: true\n          });\n          return n;\n        }\n      }]);\n\n      return uy;\n    }(gb);\n\n    var hy = /*#__PURE__*/function (_gb21) {\n      _inherits(hy, _gb21);\n\n      var _super102 = _createSuper(hy);\n\n      function hy(e, t) {\n        var _this171;\n\n        _classCallCheck(this, hy);\n\n        _this171 = _super102.call(this, e);\n        var n = _this171.bindTemplate;\n\n        _this171.set(\"top\", 0);\n\n        _this171.set(\"left\", 0);\n\n        _this171.set(\"height\", 0);\n\n        _this171.set(\"width\", 0);\n\n        _this171.set(\"numberOfPanels\", 0);\n\n        _this171.content = _this171.createCollection();\n        _this171._balloonPanelView = t;\n\n        _this171.setTemplate({\n          tag: \"div\",\n          attributes: {\n            class: [\"ck-fake-panel\", n.to(\"numberOfPanels\", function (e) {\n              return e ? \"\" : \"ck-hidden\";\n            })],\n            style: {\n              top: n.to(\"top\", ly),\n              left: n.to(\"left\", ly),\n              width: n.to(\"width\", ly),\n              height: n.to(\"height\", ly)\n            }\n          },\n          children: _this171.content\n        });\n\n        _this171.on(\"change:numberOfPanels\", function (e, t, n, i) {\n          if (n > i) {\n            _this171._addPanels(n - i);\n          } else {\n            _this171._removePanels(i - n);\n          }\n\n          _this171.updatePosition();\n        });\n\n        return _this171;\n      }\n\n      _createClass(hy, [{\n        key: \"_addPanels\",\n        value: function _addPanels(e) {\n          while (e--) {\n            var _e244 = new gb();\n\n            _e244.setTemplate({\n              tag: \"div\"\n            });\n\n            this.content.add(_e244);\n            this.registerChild(_e244);\n          }\n        }\n      }, {\n        key: \"_removePanels\",\n        value: function _removePanels(e) {\n          while (e--) {\n            var _e245 = this.content.last;\n            this.content.remove(_e245);\n            this.deregisterChild(_e245);\n\n            _e245.destroy();\n          }\n        }\n      }, {\n        key: \"updatePosition\",\n        value: function updatePosition() {\n          if (this.numberOfPanels) {\n            var _this$_balloonPanelVi = this._balloonPanelView,\n                _e246 = _this$_balloonPanelVi.top,\n                _t225 = _this$_balloonPanelVi.left;\n\n            var _kh = new kh(this._balloonPanelView.element),\n                _n193 = _kh.width,\n                _i154 = _kh.height;\n\n            Object.assign(this, {\n              top: _e246,\n              left: _t225,\n              width: _n193,\n              height: _i154\n            });\n          }\n        }\n      }]);\n\n      return hy;\n    }(gb);\n\n    var fy = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M5.085 6.22L2.943 4.078a.75.75 0 1 1 1.06-1.06l2.592 2.59A11.094 11.094 0 0 1 10 5.068c4.738 0 8.578 3.101 8.578 5.083 0 1.197-1.401 2.803-3.555 3.887l1.714 1.713a.75.75 0 0 1-.09 1.138.488.488 0 0 1-.15.084.75.75 0 0 1-.821-.16L6.17 7.304c-.258.11-.51.233-.757.365l6.239 6.24-.006.005.78.78c-.388.094-.78.166-1.174.215l-1.11-1.11h.011L4.55 8.197a7.2 7.2 0 0 0-.665.514l-.112.098 4.897 4.897-.005.006 1.276 1.276a10.164 10.164 0 0 1-1.477-.117l-.479-.479-.009.009-4.863-4.863-.022.031a2.563 2.563 0 0 0-.124.2c-.043.077-.08.158-.108.241a.534.534 0 0 0-.028.133.29.29 0 0 0 .008.072.927.927 0 0 0 .082.226c.067.133.145.26.234.379l3.242 3.365.025.01.59.623c-3.265-.918-5.59-3.155-5.59-4.668 0-1.194 1.448-2.838 3.663-3.93zm7.07.531a4.632 4.632 0 0 1 1.108 5.992l.345.344.046-.018a9.313 9.313 0 0 0 2-1.112c.256-.187.5-.392.727-.613.137-.134.27-.277.392-.431.072-.091.141-.185.203-.286.057-.093.107-.19.148-.292a.72.72 0 0 0 .036-.12.29.29 0 0 0 .008-.072.492.492 0 0 0-.028-.133.999.999 0 0 0-.036-.096 2.165 2.165 0 0 0-.071-.145 2.917 2.917 0 0 0-.125-.2 3.592 3.592 0 0 0-.263-.335 5.444 5.444 0 0 0-.53-.523 7.955 7.955 0 0 0-1.054-.768 9.766 9.766 0 0 0-1.879-.891c-.337-.118-.68-.219-1.027-.301zm-2.85.21l-.069.002a.508.508 0 0 0-.254.097.496.496 0 0 0-.104.679.498.498 0 0 0 .326.199l.045.005c.091.003.181.003.272.012a2.45 2.45 0 0 1 2.017 1.513c.024.061.043.125.069.185a.494.494 0 0 0 .45.287h.008a.496.496 0 0 0 .35-.158.482.482 0 0 0 .13-.335.638.638 0 0 0-.048-.219 3.379 3.379 0 0 0-.36-.723 3.438 3.438 0 0 0-2.791-1.543l-.028-.001h-.013z\"/></svg>';\n\n    function my(e) {\n      var t = e.plugins.get(\"ContextualBalloon\");\n\n      if (x_(e.editing.view.document.selection)) {\n        var _n194 = gy(e);\n\n        t.updatePosition(_n194);\n      }\n    }\n\n    function gy(e) {\n      var t = e.editing.view;\n      var n = ty.defaultPositions;\n      return {\n        target: t.domConverter.viewToDom(t.document.selection.getSelectedElement()),\n        positions: [n.northArrowSouth, n.northArrowSouthWest, n.northArrowSouthEast, n.southArrowNorth, n.southArrowNorthWest, n.southArrowNorthEast]\n      };\n    }\n\n    var py = /*#__PURE__*/function (_Ow22) {\n      _inherits(py, _Ow22);\n\n      var _super103 = _createSuper(py);\n\n      function py() {\n        _classCallCheck(this, py);\n\n        return _super103.apply(this, arguments);\n      }\n\n      _createClass(py, [{\n        key: \"init\",\n        value: function init() {\n          this._createButton();\n\n          this._createForm();\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          _get(_getPrototypeOf(py.prototype), \"destroy\", this).call(this);\n\n          this._form.destroy();\n        }\n      }, {\n        key: \"_createButton\",\n        value: function _createButton() {\n          var _this172 = this;\n\n          var e = this.editor;\n          var t = e.t;\n          e.ui.componentFactory.add(\"imageTextAlternative\", function (n) {\n            var i = e.commands.get(\"imageTextAlternative\");\n            var o = new Kb(n);\n            o.set({\n              label: t(\"az\"),\n              icon: fy,\n              tooltip: true\n            });\n            o.bind(\"isEnabled\").to(i, \"isEnabled\");\n\n            _this172.listenTo(o, \"execute\", function () {\n              _this172._showForm();\n            });\n\n            return o;\n          });\n        }\n      }, {\n        key: \"_createForm\",\n        value: function _createForm() {\n          var _this173 = this;\n\n          var e = this.editor;\n          var t = e.editing.view;\n          var n = t.document;\n          this._balloon = this.editor.plugins.get(\"ContextualBalloon\");\n          this._form = new Gk(e.locale);\n\n          this._form.render();\n\n          this.listenTo(this._form, \"submit\", function () {\n            e.execute(\"imageTextAlternative\", {\n              newValue: _this173._form.labeledInput.inputView.element.value\n            });\n\n            _this173._hideForm(true);\n          });\n          this.listenTo(this._form, \"cancel\", function () {\n            _this173._hideForm(true);\n          });\n\n          this._form.keystrokes.set(\"Esc\", function (e, t) {\n            _this173._hideForm(true);\n\n            t();\n          });\n\n          this.listenTo(e.ui, \"update\", function () {\n            if (!x_(n.selection)) {\n              _this173._hideForm(true);\n            } else if (_this173._isVisible) {\n              my(e);\n            }\n          });\n          aw({\n            emitter: this._form,\n            activator: function activator() {\n              return _this173._isVisible;\n            },\n            contextElements: [this._balloon.view.element],\n            callback: function callback() {\n              return _this173._hideForm();\n            }\n          });\n        }\n      }, {\n        key: \"_showForm\",\n        value: function _showForm() {\n          if (this._isVisible) {\n            return;\n          }\n\n          var e = this.editor;\n          var t = e.commands.get(\"imageTextAlternative\");\n          var n = this._form.labeledInput;\n\n          if (!this._isInBalloon) {\n            this._balloon.add({\n              view: this._form,\n              position: gy(e)\n            });\n          }\n\n          n.value = n.inputView.element.value = t.value || \"\";\n\n          this._form.labeledInput.select();\n        }\n      }, {\n        key: \"_hideForm\",\n        value: function _hideForm(e) {\n          if (!this._isInBalloon) {\n            return;\n          }\n\n          if (this._form.focusTracker.isFocused) {\n            this._form.saveButtonView.focus();\n          }\n\n          this._balloon.remove(this._form);\n\n          if (e) {\n            this.editor.editing.view.focus();\n          }\n        }\n      }, {\n        key: \"_isVisible\",\n        get: function get() {\n          return this._balloon.visibleView === this._form;\n        }\n      }, {\n        key: \"_isInBalloon\",\n        get: function get() {\n          return this._balloon.hasView(this._form);\n        }\n      }], [{\n        key: \"requires\",\n        get: function get() {\n          return [dy];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"ImageTextAlternativeUI\";\n        }\n      }]);\n\n      return py;\n    }(Ow);\n\n    var by = /*#__PURE__*/function (_Ow23) {\n      _inherits(by, _Ow23);\n\n      var _super104 = _createSuper(by);\n\n      function by() {\n        _classCallCheck(this, by);\n\n        return _super104.apply(this, arguments);\n      }\n\n      _createClass(by, null, [{\n        key: \"requires\",\n        get: function get() {\n          return [Hk, py];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"ImageTextAlternative\";\n        }\n      }]);\n\n      return by;\n    }(Ow);\n\n    var wy = n(63);\n\n    var _y = /*#__PURE__*/function (_Ow24) {\n      _inherits(_y, _Ow24);\n\n      var _super105 = _createSuper(_y);\n\n      function _y() {\n        _classCallCheck(this, _y);\n\n        return _super105.apply(this, arguments);\n      }\n\n      _createClass(_y, null, [{\n        key: \"requires\",\n        get: function get() {\n          return [j_, Lk, by];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"Image\";\n        }\n      }]);\n\n      return _y;\n    }(Ow);\n\n    function vy(e, t) {\n      return function (n) {\n        var i = n.createEditableElement(\"figcaption\");\n        n.setCustomProperty(\"imageCaption\", true, i);\n        Ep({\n          view: e,\n          element: i,\n          text: t\n        });\n        return p_(i, n);\n      };\n    }\n\n    function ky(e) {\n      return !!e.getCustomProperty(\"imageCaption\");\n    }\n\n    function yy(e) {\n      var _iterator300 = _createForOfIteratorHelper(e.getChildren()),\n          _step300;\n\n      try {\n        for (_iterator300.s(); !(_step300 = _iterator300.n()).done;) {\n          var _t226 = _step300.value;\n\n          if (!!_t226 && _t226.is(\"caption\")) {\n            return _t226;\n          }\n        }\n      } catch (err) {\n        _iterator300.e(err);\n      } finally {\n        _iterator300.f();\n      }\n\n      return null;\n    }\n\n    function xy(e) {\n      var t = e.parent;\n\n      if (e.name == \"figcaption\" && t && t.name == \"figure\" && t.hasClass(\"image\")) {\n        return {\n          name: true\n        };\n      }\n\n      return null;\n    }\n\n    var Ay = /*#__PURE__*/function (_Ow25) {\n      _inherits(Ay, _Ow25);\n\n      var _super106 = _createSuper(Ay);\n\n      function Ay() {\n        _classCallCheck(this, Ay);\n\n        return _super106.apply(this, arguments);\n      }\n\n      _createClass(Ay, [{\n        key: \"init\",\n        value: function init() {\n          var _this174 = this;\n\n          var e = this.editor;\n          var t = e.editing.view;\n          var n = e.model.schema;\n          var i = e.data;\n          var o = e.editing;\n          var s = e.t;\n          n.register(\"caption\", {\n            allowIn: \"image\",\n            allowContentOf: \"$block\",\n            isLimit: true\n          });\n          e.model.document.registerPostFixer(function (e) {\n            return _this174._insertMissingModelCaptionElement(e);\n          });\n          e.conversion.for(\"upcast\").elementToElement({\n            view: xy,\n            model: \"caption\"\n          });\n\n          var r = function r(e) {\n            return e.createContainerElement(\"figcaption\");\n          };\n\n          i.downcastDispatcher.on(\"insert:caption\", Cy(r, false));\n          var a = vy(t, s(\"al\"));\n          o.downcastDispatcher.on(\"insert:caption\", Cy(a));\n          o.downcastDispatcher.on(\"insert\", this._fixCaptionVisibility(function (e) {\n            return e.item;\n          }), {\n            priority: \"high\"\n          });\n          o.downcastDispatcher.on(\"remove\", this._fixCaptionVisibility(function (e) {\n            return e.position.parent;\n          }), {\n            priority: \"high\"\n          });\n          t.document.registerPostFixer(function (e) {\n            return _this174._updateCaptionVisibility(e);\n          });\n        }\n      }, {\n        key: \"_updateCaptionVisibility\",\n        value: function _updateCaptionVisibility(e) {\n          var t = this.editor.editing.mapper;\n          var n = this._lastSelectedCaption;\n          var i;\n          var o = this.editor.model.document.selection;\n          var s = o.getSelectedElement();\n\n          if (s && s.is(\"image\")) {\n            var _e247 = yy(s);\n\n            i = t.toViewElement(_e247);\n          }\n\n          var r = o.getFirstPosition();\n          var a = My(r.parent);\n\n          if (a) {\n            i = t.toViewElement(a);\n          }\n\n          if (i) {\n            if (n) {\n              if (n === i) {\n                return Ey(i, e);\n              } else {\n                Py(n, e);\n                this._lastSelectedCaption = i;\n                return Ey(i, e);\n              }\n            } else {\n              this._lastSelectedCaption = i;\n              return Ey(i, e);\n            }\n          } else {\n            if (n) {\n              var _t227 = Py(n, e);\n\n              this._lastSelectedCaption = null;\n              return _t227;\n            } else {\n              return false;\n            }\n          }\n        }\n      }, {\n        key: \"_fixCaptionVisibility\",\n        value: function _fixCaptionVisibility(e) {\n          var _this175 = this;\n\n          return function (t, n, i) {\n            var o = e(n);\n            var s = My(o);\n            var r = _this175.editor.editing.mapper;\n            var a = i.writer;\n\n            if (s) {\n              var _e248 = r.toViewElement(s);\n\n              if (_e248) {\n                if (s.childCount) {\n                  a.removeClass(\"ck-hidden\", _e248);\n                } else {\n                  a.addClass(\"ck-hidden\", _e248);\n                }\n              }\n            }\n          };\n        }\n      }, {\n        key: \"_insertMissingModelCaptionElement\",\n        value: function _insertMissingModelCaptionElement(e) {\n          var t = this.editor.model;\n          var n = t.document.differ.getChanges();\n          var i = [];\n\n          var _iterator301 = _createForOfIteratorHelper(n),\n              _step301;\n\n          try {\n            for (_iterator301.s(); !(_step301 = _iterator301.n()).done;) {\n              var _e249 = _step301.value;\n\n              if (_e249.type == \"insert\" && _e249.name != \"$text\") {\n                var _n195 = _e249.position.nodeAfter;\n\n                if (_n195.is(\"image\") && !yy(_n195)) {\n                  i.push(_n195);\n                }\n\n                if (!_n195.is(\"image\") && _n195.childCount) {\n                  var _iterator302 = _createForOfIteratorHelper(t.createRangeIn(_n195).getItems()),\n                      _step302;\n\n                  try {\n                    for (_iterator302.s(); !(_step302 = _iterator302.n()).done;) {\n                      var _e250 = _step302.value;\n\n                      if (_e250.is(\"image\") && !yy(_e250)) {\n                        i.push(_e250);\n                      }\n                    }\n                  } catch (err) {\n                    _iterator302.e(err);\n                  } finally {\n                    _iterator302.f();\n                  }\n                }\n              }\n            }\n          } catch (err) {\n            _iterator301.e(err);\n          } finally {\n            _iterator301.f();\n          }\n\n          for (var _i156 = 0, _i155 = i; _i156 < _i155.length; _i156++) {\n            var _t228 = _i155[_i156];\n            e.appendElement(\"caption\", _t228);\n          }\n\n          return !!i.length;\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"ImageCaptionEditing\";\n        }\n      }]);\n\n      return Ay;\n    }(Ow);\n\n    function Cy(e) {\n      var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      return function (n, i, o) {\n        var s = i.item;\n\n        if (!s.childCount && !t) {\n          return;\n        }\n\n        if (A_(s.parent)) {\n          if (!o.consumable.consume(i.item, \"insert\")) {\n            return;\n          }\n\n          var _t229 = o.mapper.toViewElement(i.range.start.parent);\n\n          var _n196 = e(o.writer);\n\n          var _r25 = o.writer;\n\n          if (!s.childCount) {\n            _r25.addClass(\"ck-hidden\", _n196);\n          }\n\n          Ty(_n196, i.item, _t229, o);\n        }\n      };\n    }\n\n    function Ty(e, t, n, i) {\n      var o = i.writer.createPositionAt(n, \"end\");\n      i.writer.insert(o, e);\n      i.mapper.bindElements(t, e);\n    }\n\n    function My(e) {\n      var t = e.getAncestors({\n        includeSelf: true\n      });\n      var n = t.find(function (e) {\n        return e.name == \"caption\";\n      });\n\n      if (n && n.parent && n.parent.name == \"image\") {\n        return n;\n      }\n\n      return null;\n    }\n\n    function Py(e, t) {\n      if (!e.childCount && !e.hasClass(\"ck-hidden\")) {\n        t.addClass(\"ck-hidden\", e);\n        return true;\n      }\n\n      return false;\n    }\n\n    function Ey(e, t) {\n      if (e.hasClass(\"ck-hidden\")) {\n        t.removeClass(\"ck-hidden\", e);\n        return true;\n      }\n\n      return false;\n    }\n\n    var Sy = n(65);\n\n    var Iy = /*#__PURE__*/function (_Ow26) {\n      _inherits(Iy, _Ow26);\n\n      var _super107 = _createSuper(Iy);\n\n      function Iy() {\n        _classCallCheck(this, Iy);\n\n        return _super107.apply(this, arguments);\n      }\n\n      _createClass(Iy, null, [{\n        key: \"requires\",\n        get: function get() {\n          return [Ay];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"ImageCaption\";\n        }\n      }]);\n\n      return Iy;\n    }(Ow);\n\n    var Oy = /*#__PURE__*/function (_jw10) {\n      _inherits(Oy, _jw10);\n\n      var _super108 = _createSuper(Oy);\n\n      function Oy(e, t) {\n        var _this176;\n\n        _classCallCheck(this, Oy);\n\n        _this176 = _super108.call(this, e);\n        _this176.defaultStyle = false;\n        _this176.styles = t.reduce(function (e, t) {\n          e[t.name] = t;\n\n          if (t.isDefault) {\n            _this176.defaultStyle = t.name;\n          }\n\n          return e;\n        }, {});\n        return _this176;\n      }\n\n      _createClass(Oy, [{\n        key: \"refresh\",\n        value: function refresh() {\n          var e = this.editor.model.document.selection.getSelectedElement();\n          this.isEnabled = A_(e);\n\n          if (!e) {\n            this.value = false;\n          } else if (e.hasAttribute(\"imageStyle\")) {\n            var _t230 = e.getAttribute(\"imageStyle\");\n\n            this.value = this.styles[_t230] ? _t230 : false;\n          } else {\n            this.value = this.defaultStyle;\n          }\n        }\n      }, {\n        key: \"execute\",\n        value: function execute(e) {\n          var _this177 = this;\n\n          var t = e.value;\n          var n = this.editor.model;\n          var i = n.document.selection.getSelectedElement();\n          n.change(function (e) {\n            if (_this177.styles[t].isDefault) {\n              e.removeAttribute(\"imageStyle\", i);\n            } else {\n              e.setAttribute(\"imageStyle\", t, i);\n            }\n          });\n        }\n      }]);\n\n      return Oy;\n    }(jw);\n\n    function Ny(e) {\n      return function (t, n, i) {\n        if (!i.consumable.consume(n.item, t.name)) {\n          return;\n        }\n\n        var o = Ly(n.attributeNewValue, e);\n        var s = Ly(n.attributeOldValue, e);\n        var r = i.mapper.toViewElement(n.item);\n        var a = i.writer;\n\n        if (s) {\n          a.removeClass(s.className, r);\n        }\n\n        if (o) {\n          a.addClass(o.className, r);\n        }\n      };\n    }\n\n    function Ry(e) {\n      var t = e.filter(function (e) {\n        return !e.isDefault;\n      });\n      return function (e, n, i) {\n        if (!n.modelRange) {\n          return;\n        }\n\n        var o = n.viewItem;\n        var s = zw(n.modelRange.getItems());\n\n        if (!i.schema.checkAttribute(s, \"imageStyle\")) {\n          return;\n        }\n\n        var _iterator303 = _createForOfIteratorHelper(t),\n            _step303;\n\n        try {\n          for (_iterator303.s(); !(_step303 = _iterator303.n()).done;) {\n            var _e251 = _step303.value;\n\n            if (i.consumable.consume(o, {\n              classes: _e251.className\n            })) {\n              i.writer.setAttribute(\"imageStyle\", _e251.name, s);\n            }\n          }\n        } catch (err) {\n          _iterator303.e(err);\n        } finally {\n          _iterator303.f();\n        }\n      };\n    }\n\n    function Ly(e, t) {\n      var _iterator304 = _createForOfIteratorHelper(t),\n          _step304;\n\n      try {\n        for (_iterator304.s(); !(_step304 = _iterator304.n()).done;) {\n          var _n197 = _step304.value;\n\n          if (_n197.name === e) {\n            return _n197;\n          }\n        }\n      } catch (err) {\n        _iterator304.e(err);\n      } finally {\n        _iterator304.f();\n      }\n    }\n\n    var jy = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M2 4.5V3h16v1.5zm2.5 3V12h11V7.5h-11zM4.061 6H15.94c.586 0 1.061.407 1.061.91v5.68c0 .503-.475.91-1.061.91H4.06c-.585 0-1.06-.407-1.06-.91V6.91C3 6.406 3.475 6 4.061 6zM2 16.5V15h16v1.5z\"/></svg>';\n    var Dy = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\" clip-rule=\"evenodd\" stroke-linejoin=\"round\" stroke-miterlimit=\"1.414\"><path d=\"M18 4.5V3H2v1.5h16zm0 3V6h-5.674v1.5H18zm0 3V9h-5.674v1.5H18zm0 3V12h-5.674v1.5H18zm-8.5-6V12h-6V7.5h6zm.818-1.5H2.682C2.305 6 2 6.407 2 6.91v5.68c0 .503.305.91.682.91h7.636c.377 0 .682-.407.682-.91V6.91c0-.503-.305-.91-.682-.91zM18 16.5V15H2v1.5h16z\"/></svg>';\n    var zy = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M2 4.5V3h16v1.5zm4.5 3V12h7V7.5h-7zM5.758 6h8.484c.419 0 .758.407.758.91v5.681c0 .502-.34.909-.758.909H5.758c-.419 0-.758-.407-.758-.91V6.91c0-.503.34-.91.758-.91zM2 16.5V15h16v1.5z\"/></svg>';\n    var By = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M2 4.5V3h16v1.5zm0 3V6h5.674v1.5zm0 3V9h5.674v1.5zm0 3V12h5.674v1.5zm8.5-6V12h6V7.5h-6zM9.682 6h7.636c.377 0 .682.407.682.91v5.68c0 .503-.305.91-.682.91H9.682c-.377 0-.682-.407-.682-.91V6.91c0-.503.305-.91.682-.91zM2 16.5V15h16v1.5z\"/></svg>';\n    var Vy = {\n      full: {\n        name: \"full\",\n        title: \"Full size image\",\n        icon: jy,\n        isDefault: true\n      },\n      side: {\n        name: \"side\",\n        title: \"Side image\",\n        icon: By,\n        className: \"image-style-side\"\n      },\n      alignLeft: {\n        name: \"alignLeft\",\n        title: \"Left aligned image\",\n        icon: Dy,\n        className: \"image-style-align-left\"\n      },\n      alignCenter: {\n        name: \"alignCenter\",\n        title: \"Centered image\",\n        icon: zy,\n        className: \"image-style-align-center\"\n      },\n      alignRight: {\n        name: \"alignRight\",\n        title: \"Right aligned image\",\n        icon: By,\n        className: \"image-style-align-right\"\n      }\n    };\n    var Fy = {\n      full: jy,\n      left: Dy,\n      right: By,\n      center: zy\n    };\n\n    function Hy() {\n      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      return e.map(Uy);\n    }\n\n    function Uy(e) {\n      if (typeof e == \"string\") {\n        var _t231 = e;\n\n        if (Vy[_t231]) {\n          e = Object.assign({}, Vy[_t231]);\n        } else {\n          console.warn(Object(rr[\"a\"])(\"image-style-not-found: There is no such image style of given name.\"), {\n            name: _t231\n          });\n          e = {\n            name: _t231\n          };\n        }\n      } else if (Vy[e.name]) {\n        var _t232 = Vy[e.name];\n\n        var _n198 = Object.assign({}, e);\n\n        for (var _i157 in _t232) {\n          if (!e.hasOwnProperty(_i157)) {\n            _n198[_i157] = _t232[_i157];\n          }\n        }\n\n        e = _n198;\n      }\n\n      if (typeof e.icon == \"string\" && Fy[e.icon]) {\n        e.icon = Fy[e.icon];\n      }\n\n      return e;\n    }\n\n    var Wy = /*#__PURE__*/function (_Ow27) {\n      _inherits(Wy, _Ow27);\n\n      var _super109 = _createSuper(Wy);\n\n      function Wy() {\n        _classCallCheck(this, Wy);\n\n        return _super109.apply(this, arguments);\n      }\n\n      _createClass(Wy, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          var t = e.model.schema;\n          var n = e.data;\n          var i = e.editing;\n          e.config.define(\"image.styles\", [\"full\", \"side\"]);\n          var o = Hy(e.config.get(\"image.styles\"));\n          t.extend(\"image\", {\n            allowAttributes: \"imageStyle\"\n          });\n          var s = Ny(o);\n          i.downcastDispatcher.on(\"attribute:imageStyle:image\", s);\n          n.downcastDispatcher.on(\"attribute:imageStyle:image\", s);\n          n.upcastDispatcher.on(\"element:figure\", Ry(o), {\n            priority: \"low\"\n          });\n          e.commands.add(\"imageStyle\", new Oy(e, o));\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"ImageStyleEditing\";\n        }\n      }]);\n\n      return Wy;\n    }(Ow);\n\n    var $y = n(67);\n\n    var qy = /*#__PURE__*/function (_Ow28) {\n      _inherits(qy, _Ow28);\n\n      var _super110 = _createSuper(qy);\n\n      function qy() {\n        _classCallCheck(this, qy);\n\n        return _super110.apply(this, arguments);\n      }\n\n      _createClass(qy, [{\n        key: \"localizedDefaultStylesTitles\",\n        get: function get() {\n          var e = this.editor.t;\n          return {\n            \"Full size image\": e(\"am\"),\n            \"Side image\": e(\"an\"),\n            \"Left aligned image\": e(\"ao\"),\n            \"Centered image\": e(\"ap\"),\n            \"Right aligned image\": e(\"aq\")\n          };\n        }\n      }, {\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          var t = e.config.get(\"image.styles\");\n          var n = Yy(Hy(t), this.localizedDefaultStylesTitles);\n\n          var _iterator305 = _createForOfIteratorHelper(n),\n              _step305;\n\n          try {\n            for (_iterator305.s(); !(_step305 = _iterator305.n()).done;) {\n              var _e252 = _step305.value;\n\n              this._createButton(_e252);\n            }\n          } catch (err) {\n            _iterator305.e(err);\n          } finally {\n            _iterator305.f();\n          }\n        }\n      }, {\n        key: \"_createButton\",\n        value: function _createButton(e) {\n          var _this178 = this;\n\n          var t = this.editor;\n          var n = \"imageStyle:\".concat(e.name);\n          t.ui.componentFactory.add(n, function (n) {\n            var i = t.commands.get(\"imageStyle\");\n            var o = new Kb(n);\n            o.set({\n              label: e.title,\n              icon: e.icon,\n              tooltip: true,\n              isToggleable: true\n            });\n            o.bind(\"isEnabled\").to(i, \"isEnabled\");\n            o.bind(\"isOn\").to(i, \"value\", function (t) {\n              return t === e.name;\n            });\n\n            _this178.listenTo(o, \"execute\", function () {\n              t.execute(\"imageStyle\", {\n                value: e.name\n              });\n              t.editing.view.focus();\n            });\n\n            return o;\n          });\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"ImageStyleUI\";\n        }\n      }]);\n\n      return qy;\n    }(Ow);\n\n    function Yy(e, t) {\n      var _iterator306 = _createForOfIteratorHelper(e),\n          _step306;\n\n      try {\n        for (_iterator306.s(); !(_step306 = _iterator306.n()).done;) {\n          var _n199 = _step306.value;\n\n          if (t[_n199.title]) {\n            _n199.title = t[_n199.title];\n          }\n        }\n      } catch (err) {\n        _iterator306.e(err);\n      } finally {\n        _iterator306.f();\n      }\n\n      return e;\n    }\n\n    var Jy = /*#__PURE__*/function (_Ow29) {\n      _inherits(Jy, _Ow29);\n\n      var _super111 = _createSuper(Jy);\n\n      function Jy() {\n        _classCallCheck(this, Jy);\n\n        return _super111.apply(this, arguments);\n      }\n\n      _createClass(Jy, null, [{\n        key: \"requires\",\n        get: function get() {\n          return [Wy, qy];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"ImageStyle\";\n        }\n      }]);\n\n      return Jy;\n    }(Ow);\n\n    var Qy = /*#__PURE__*/function (_Ow30) {\n      _inherits(Qy, _Ow30);\n\n      var _super112 = _createSuper(Qy);\n\n      function Qy() {\n        _classCallCheck(this, Qy);\n\n        return _super112.apply(this, arguments);\n      }\n\n      _createClass(Qy, [{\n        key: \"init\",\n        value: function init() {\n          var _this179 = this;\n\n          var e = this.editor;\n\n          if (e.plugins.has(\"BalloonToolbar\")) {\n            var _t233 = e.plugins.get(\"BalloonToolbar\");\n\n            this.listenTo(_t233, \"show\", function (t) {\n              if (Ky(e.editing.view.document.selection)) {\n                t.stop();\n              }\n            }, {\n              priority: \"high\"\n            });\n          }\n\n          this._toolbarDefinitions = new Map();\n          this._balloon = this.editor.plugins.get(\"ContextualBalloon\");\n          this.on(\"change:isEnabled\", function () {\n            _this179._updateToolbarsVisibility();\n          });\n          this.listenTo(e.ui, \"update\", function () {\n            _this179._updateToolbarsVisibility();\n          });\n          this.listenTo(e.ui.focusTracker, \"change:isFocused\", function () {\n            _this179._updateToolbarsVisibility();\n          }, {\n            priority: \"low\"\n          });\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          _get(_getPrototypeOf(Qy.prototype), \"destroy\", this).call(this);\n\n          var _iterator307 = _createForOfIteratorHelper(this._toolbarDefinitions.values()),\n              _step307;\n\n          try {\n            for (_iterator307.s(); !(_step307 = _iterator307.n()).done;) {\n              var _e253 = _step307.value;\n\n              _e253.view.destroy();\n            }\n          } catch (err) {\n            _iterator307.e(err);\n          } finally {\n            _iterator307.f();\n          }\n        }\n      }, {\n        key: \"register\",\n        value: function register(e, _ref31) {\n          var t = _ref31.ariaLabel,\n              n = _ref31.items,\n              i = _ref31.getRelatedElement,\n              _ref31$balloonClassNa = _ref31.balloonClassName,\n              o = _ref31$balloonClassNa === void 0 ? \"ck-toolbar-container\" : _ref31$balloonClassNa;\n          var s = this.editor;\n          var r = s.t;\n          var a = new _w(s.locale);\n          a.ariaLabel = t || r(\"au\");\n\n          if (this._toolbarDefinitions.has(e)) {\n            throw new rr[\"b\"](\"widget-toolbar-duplicated: Toolbar with the given id was already added.\", this, {\n              toolbarId: e\n            });\n          }\n\n          a.fillFromConfig(n, s.ui.componentFactory);\n\n          this._toolbarDefinitions.set(e, {\n            view: a,\n            getRelatedElement: i,\n            balloonClassName: o\n          });\n        }\n      }, {\n        key: \"_updateToolbarsVisibility\",\n        value: function _updateToolbarsVisibility() {\n          var e = 0;\n          var t = null;\n          var n = null;\n\n          var _iterator308 = _createForOfIteratorHelper(this._toolbarDefinitions.values()),\n              _step308;\n\n          try {\n            for (_iterator308.s(); !(_step308 = _iterator308.n()).done;) {\n              var _i158 = _step308.value;\n\n              var _o68 = _i158.getRelatedElement(this.editor.editing.view.document.selection);\n\n              if (!this.isEnabled || !_o68) {\n                if (this._isToolbarInBalloon(_i158)) {\n                  this._hideToolbar(_i158);\n                }\n              } else if (!this.editor.ui.focusTracker.isFocused) {\n                if (this._isToolbarVisible(_i158)) {\n                  this._hideToolbar(_i158);\n                }\n              } else {\n                var _s37 = _o68.getAncestors().length;\n\n                if (_s37 > e) {\n                  e = _s37;\n                  t = _o68;\n                  n = _i158;\n                }\n              }\n            }\n          } catch (err) {\n            _iterator308.e(err);\n          } finally {\n            _iterator308.f();\n          }\n\n          if (n) {\n            this._showToolbar(n, t);\n          }\n        }\n      }, {\n        key: \"_hideToolbar\",\n        value: function _hideToolbar(e) {\n          this._balloon.remove(e.view);\n\n          this.stopListening(this._balloon, \"change:visibleView\");\n        }\n      }, {\n        key: \"_showToolbar\",\n        value: function _showToolbar(e, t) {\n          var _this180 = this;\n\n          if (this._isToolbarVisible(e)) {\n            Xy(this.editor, t);\n          } else if (!this._isToolbarInBalloon(e)) {\n            this._balloon.add({\n              view: e.view,\n              position: Gy(this.editor, t),\n              balloonClassName: e.balloonClassName\n            });\n\n            this.listenTo(this._balloon, \"change:visibleView\", function () {\n              var _iterator309 = _createForOfIteratorHelper(_this180._toolbarDefinitions.values()),\n                  _step309;\n\n              try {\n                for (_iterator309.s(); !(_step309 = _iterator309.n()).done;) {\n                  var _e254 = _step309.value;\n\n                  if (_this180._isToolbarVisible(_e254)) {\n                    var _t234 = _e254.getRelatedElement(_this180.editor.editing.view.document.selection);\n\n                    Xy(_this180.editor, _t234);\n                  }\n                }\n              } catch (err) {\n                _iterator309.e(err);\n              } finally {\n                _iterator309.f();\n              }\n            });\n          }\n        }\n      }, {\n        key: \"_isToolbarVisible\",\n        value: function _isToolbarVisible(e) {\n          return this._balloon.visibleView === e.view;\n        }\n      }, {\n        key: \"_isToolbarInBalloon\",\n        value: function _isToolbarInBalloon(e) {\n          return this._balloon.hasView(e.view);\n        }\n      }], [{\n        key: \"requires\",\n        get: function get() {\n          return [dy];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"WidgetToolbarRepository\";\n        }\n      }]);\n\n      return Qy;\n    }(Ow);\n\n    function Xy(e, t) {\n      var n = e.plugins.get(\"ContextualBalloon\");\n      var i = Gy(e, t);\n      n.updatePosition(i);\n    }\n\n    function Gy(e, t) {\n      var n = e.editing.view;\n      var i = ty.defaultPositions;\n      return {\n        target: n.domConverter.mapViewToDom(t),\n        positions: [i.northArrowSouth, i.northArrowSouthWest, i.northArrowSouthEast, i.southArrowNorth, i.southArrowNorthWest, i.southArrowNorthEast]\n      };\n    }\n\n    function Ky(e) {\n      var t = e.getSelectedElement();\n      return !!(t && u_(t));\n    }\n\n    var Zy = /*#__PURE__*/function (_Ow31) {\n      _inherits(Zy, _Ow31);\n\n      var _super113 = _createSuper(Zy);\n\n      function Zy() {\n        _classCallCheck(this, Zy);\n\n        return _super113.apply(this, arguments);\n      }\n\n      _createClass(Zy, [{\n        key: \"afterInit\",\n        value: function afterInit() {\n          var e = this.editor;\n          var t = e.t;\n          var n = e.plugins.get(Qy);\n          n.register(\"image\", {\n            ariaLabel: t(\"b\"),\n            items: e.config.get(\"image.toolbar\") || [],\n            getRelatedElement: x_\n          });\n        }\n      }], [{\n        key: \"requires\",\n        get: function get() {\n          return [Qy];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"ImageToolbar\";\n        }\n      }]);\n\n      return Zy;\n    }(Ow);\n\n    var ex = /*#__PURE__*/function (_gb22) {\n      _inherits(ex, _gb22);\n\n      var _super114 = _createSuper(ex);\n\n      function ex(e) {\n        var _this181;\n\n        _classCallCheck(this, ex);\n\n        _this181 = _super114.call(this, e);\n        _this181.buttonView = new Kb(e);\n        _this181._fileInputView = new tx(e);\n\n        _this181._fileInputView.bind(\"acceptedType\").to(_assertThisInitialized(_this181));\n\n        _this181._fileInputView.bind(\"allowMultipleFiles\").to(_assertThisInitialized(_this181));\n\n        _this181._fileInputView.delegate(\"done\").to(_assertThisInitialized(_this181));\n\n        _this181.setTemplate({\n          tag: \"span\",\n          attributes: {\n            class: \"ck-file-dialog-button\"\n          },\n          children: [_this181.buttonView, _this181._fileInputView]\n        });\n\n        _this181.buttonView.on(\"execute\", function () {\n          _this181._fileInputView.open();\n        });\n\n        return _this181;\n      }\n\n      _createClass(ex, [{\n        key: \"focus\",\n        value: function focus() {\n          this.buttonView.focus();\n        }\n      }]);\n\n      return ex;\n    }(gb);\n\n    var tx = /*#__PURE__*/function (_gb23) {\n      _inherits(tx, _gb23);\n\n      var _super115 = _createSuper(tx);\n\n      function tx(e) {\n        var _this182;\n\n        _classCallCheck(this, tx);\n\n        _this182 = _super115.call(this, e);\n\n        _this182.set(\"acceptedType\");\n\n        _this182.set(\"allowMultipleFiles\", false);\n\n        var t = _this182.bindTemplate;\n\n        _this182.setTemplate({\n          tag: \"input\",\n          attributes: {\n            class: [\"ck-hidden\"],\n            type: \"file\",\n            tabindex: \"-1\",\n            accept: t.to(\"acceptedType\"),\n            multiple: t.to(\"allowMultipleFiles\")\n          },\n          on: {\n            change: t.to(function () {\n              if (_this182.element && _this182.element.files && _this182.element.files.length) {\n                _this182.fire(\"done\", _this182.element.files);\n              }\n\n              _this182.element.value = \"\";\n            })\n          }\n        });\n\n        return _this182;\n      }\n\n      _createClass(tx, [{\n        key: \"open\",\n        value: function open() {\n          this.element.click();\n        }\n      }]);\n\n      return tx;\n    }(gb);\n\n    var nx = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M6.91 10.54c.26-.23.64-.21.88.03l3.36 3.14 2.23-2.06a.64.64 0 0 1 .87 0l2.52 2.97V4.5H3.2v10.12l3.71-4.08zm10.27-7.51c.6 0 1.09.47 1.09 1.05v11.84c0 .59-.49 1.06-1.09 1.06H2.79c-.6 0-1.09-.47-1.09-1.06V4.08c0-.58.49-1.05 1.1-1.05h14.38zm-5.22 5.56a1.96 1.96 0 1 1 3.4-1.96 1.96 1.96 0 0 1-3.4 1.96z\"/></svg>';\n\n    function ix(e) {\n      var t = e.map(function (e) {\n        return e.replace(\"+\", \"\\\\+\");\n      });\n      return new RegExp(\"^image\\\\/(\".concat(t.join(\"|\"), \")$\"));\n    }\n\n    function ox(e) {\n      return new Promise(function (t, n) {\n        var i = e.getAttribute(\"src\");\n        fetch(i).then(function (e) {\n          return e.blob();\n        }).then(function (e) {\n          var o = rx(e, i);\n          var s = o.replace(\"image/\", \"\");\n          var r = \"image.\".concat(s);\n          var a = ax(e, r, o);\n          a ? t(a) : n();\n        }).catch(n);\n      });\n    }\n\n    function sx(e) {\n      if (!e.is(\"element\", \"img\") || !e.getAttribute(\"src\")) {\n        return false;\n      }\n\n      return e.getAttribute(\"src\").match(/^data:image\\/\\w+;base64,/g) || e.getAttribute(\"src\").match(/^blob:/g);\n    }\n\n    function rx(e, t) {\n      if (e.type) {\n        return e.type;\n      } else if (t.match(/data:(image\\/\\w+);base64/)) {\n        return t.match(/data:(image\\/\\w+);base64/)[1].toLowerCase();\n      } else {\n        return \"image/jpeg\";\n      }\n    }\n\n    function ax(e, t, n) {\n      try {\n        return new File([e], t, {\n          type: n\n        });\n      } catch (e) {\n        return null;\n      }\n    }\n\n    var cx = /*#__PURE__*/function (_Ow32) {\n      _inherits(cx, _Ow32);\n\n      var _super116 = _createSuper(cx);\n\n      function cx() {\n        _classCallCheck(this, cx);\n\n        return _super116.apply(this, arguments);\n      }\n\n      _createClass(cx, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          var t = e.t;\n          e.ui.componentFactory.add(\"imageUpload\", function (n) {\n            var i = new ex(n);\n            var o = e.commands.get(\"imageUpload\");\n            var s = e.config.get(\"image.upload.types\");\n            var r = ix(s);\n            i.set({\n              acceptedType: s.map(function (e) {\n                return \"image/\".concat(e);\n              }).join(\",\"),\n              allowMultipleFiles: true\n            });\n            i.buttonView.set({\n              label: t(\"ar\"),\n              icon: nx,\n              tooltip: true\n            });\n            i.buttonView.bind(\"isEnabled\").to(o);\n            i.on(\"done\", function (t, n) {\n              var i = Array.from(n).filter(function (e) {\n                return r.test(e.type);\n              });\n\n              if (i.length) {\n                e.execute(\"imageUpload\", {\n                  file: i\n                });\n              }\n            });\n            return i;\n          });\n        }\n      }]);\n\n      return cx;\n    }(Ow);\n\n    var lx = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 700 250\"><rect rx=\"4\"/></svg>';\n    var dx = n(69);\n    var ux = n(71);\n    var hx = n(73);\n\n    var fx = /*#__PURE__*/function (_Ow33) {\n      _inherits(fx, _Ow33);\n\n      var _super117 = _createSuper(fx);\n\n      function fx(e) {\n        var _this183;\n\n        _classCallCheck(this, fx);\n\n        _this183 = _super117.call(this, e);\n        _this183.placeholder = \"data:image/svg+xml;utf8,\" + encodeURIComponent(lx);\n        return _this183;\n      }\n\n      _createClass(fx, [{\n        key: \"init\",\n        value: function init() {\n          var _this184 = this;\n\n          var e = this.editor;\n          e.editing.downcastDispatcher.on(\"attribute:uploadStatus:image\", function () {\n            return _this184.uploadStatusChange.apply(_this184, arguments);\n          });\n        }\n      }, {\n        key: \"uploadStatusChange\",\n        value: function uploadStatusChange(e, t, n) {\n          var i = this.editor;\n          var o = t.item;\n          var s = o.getAttribute(\"uploadId\");\n\n          if (!n.consumable.consume(t.item, e.name)) {\n            return;\n          }\n\n          var r = i.plugins.get(rk);\n          var a = s ? t.attributeNewValue : null;\n          var c = this.placeholder;\n          var l = i.editing.mapper.toViewElement(o);\n          var d = n.writer;\n\n          if (a == \"reading\") {\n            mx(l, d);\n            px(c, l, d);\n            return;\n          }\n\n          if (a == \"uploading\") {\n            var _e255 = r.loaders.get(s);\n\n            mx(l, d);\n\n            if (!_e255) {\n              px(c, l, d);\n            } else {\n              bx(l, d);\n              wx(l, d, _e255, i.editing.view);\n              Cx(l, d, _e255);\n            }\n\n            return;\n          }\n\n          if (a == \"complete\" && r.loaders.get(s) && !Cl.isEdge) {\n            vx(l, d, i.editing.view);\n          }\n\n          _x(l, d);\n\n          bx(l, d);\n          gx(l, d);\n        }\n      }]);\n\n      return fx;\n    }(Ow);\n\n    function mx(e, t) {\n      if (!e.hasClass(\"ck-appear\")) {\n        t.addClass(\"ck-appear\", e);\n      }\n    }\n\n    function gx(e, t) {\n      t.removeClass(\"ck-appear\", e);\n    }\n\n    function px(e, t, n) {\n      if (!t.hasClass(\"ck-image-upload-placeholder\")) {\n        n.addClass(\"ck-image-upload-placeholder\", t);\n      }\n\n      var i = M_(t);\n\n      if (i.getAttribute(\"src\") !== e) {\n        n.setAttribute(\"src\", e, i);\n      }\n\n      if (!xx(t, \"placeholder\")) {\n        n.insert(n.createPositionAfter(i), yx(n));\n      }\n    }\n\n    function bx(e, t) {\n      if (e.hasClass(\"ck-image-upload-placeholder\")) {\n        t.removeClass(\"ck-image-upload-placeholder\", e);\n      }\n\n      Ax(e, t, \"placeholder\");\n    }\n\n    function wx(e, t, n, i) {\n      var o = kx(t);\n      t.insert(t.createPositionAt(e, \"end\"), o);\n      n.on(\"change:uploadedPercent\", function (e, t, n) {\n        i.change(function (e) {\n          e.setStyle(\"width\", n + \"%\", o);\n        });\n      });\n    }\n\n    function _x(e, t) {\n      Ax(e, t, \"progressBar\");\n    }\n\n    function vx(e, t, n) {\n      var i = t.createUIElement(\"div\", {\n        class: \"ck-image-upload-complete-icon\"\n      });\n      t.insert(t.createPositionAt(e, \"end\"), i);\n      setTimeout(function () {\n        n.change(function (e) {\n          return e.remove(e.createRangeOn(i));\n        });\n      }, 3e3);\n    }\n\n    function kx(e) {\n      var t = e.createUIElement(\"div\", {\n        class: \"ck-progress-bar\"\n      });\n      e.setCustomProperty(\"progressBar\", true, t);\n      return t;\n    }\n\n    function yx(e) {\n      var t = e.createUIElement(\"div\", {\n        class: \"ck-upload-placeholder-loader\"\n      });\n      e.setCustomProperty(\"placeholder\", true, t);\n      return t;\n    }\n\n    function xx(e, t) {\n      var _iterator310 = _createForOfIteratorHelper(e.getChildren()),\n          _step310;\n\n      try {\n        for (_iterator310.s(); !(_step310 = _iterator310.n()).done;) {\n          var _n200 = _step310.value;\n\n          if (_n200.getCustomProperty(t)) {\n            return _n200;\n          }\n        }\n      } catch (err) {\n        _iterator310.e(err);\n      } finally {\n        _iterator310.f();\n      }\n    }\n\n    function Ax(e, t, n) {\n      var i = xx(e, n);\n\n      if (i) {\n        t.remove(t.createRangeOn(i));\n      }\n    }\n\n    function Cx(e, t, n) {\n      if (n.data) {\n        var _i159 = M_(e);\n\n        t.setAttribute(\"src\", n.data, _i159);\n      }\n    }\n\n    var Tx = /*#__PURE__*/function () {\n      function Tx(e) {\n        _classCallCheck(this, Tx);\n\n        this.files = Mx(e);\n        this._native = e;\n      }\n\n      _createClass(Tx, [{\n        key: \"types\",\n        get: function get() {\n          return this._native.types;\n        }\n      }, {\n        key: \"getData\",\n        value: function getData(e) {\n          return this._native.getData(e);\n        }\n      }, {\n        key: \"setData\",\n        value: function setData(e, t) {\n          this._native.setData(e, t);\n        }\n      }]);\n\n      return Tx;\n    }();\n\n    function Mx(e) {\n      var t = e.files ? Array.from(e.files) : [];\n      var n = e.items ? Array.from(e.items) : [];\n\n      if (t.length) {\n        return t;\n      }\n\n      return n.filter(function (e) {\n        return e.kind === \"file\";\n      }).map(function (e) {\n        return e.getAsFile();\n      });\n    }\n\n    var Px = /*#__PURE__*/function (_Qu6) {\n      _inherits(Px, _Qu6);\n\n      var _super118 = _createSuper(Px);\n\n      function Px(e) {\n        var _this185;\n\n        _classCallCheck(this, Px);\n\n        _this185 = _super118.call(this, e);\n        var t = _this185.document;\n        _this185.domEventType = [\"paste\", \"copy\", \"cut\", \"drop\", \"dragover\"];\n\n        _this185.listenTo(t, \"paste\", n, {\n          priority: \"low\"\n        });\n\n        _this185.listenTo(t, \"drop\", n, {\n          priority: \"low\"\n        });\n\n        function n(e, n) {\n          n.preventDefault();\n          var i = n.dropRange ? [n.dropRange] : Array.from(t.selection.getRanges());\n          var o = new er(t, \"clipboardInput\");\n          t.fire(o, {\n            dataTransfer: n.dataTransfer,\n            targetRanges: i\n          });\n\n          if (o.stop.called) {\n            n.stopPropagation();\n          }\n        }\n\n        return _this185;\n      }\n\n      _createClass(Px, [{\n        key: \"onDomEvent\",\n        value: function onDomEvent(e) {\n          var t = {\n            dataTransfer: new Tx(e.clipboardData ? e.clipboardData : e.dataTransfer)\n          };\n\n          if (e.type == \"drop\") {\n            t.dropRange = Ex(this.view, e);\n          }\n\n          this.fire(e.type, e, t);\n        }\n      }]);\n\n      return Px;\n    }(Qu);\n\n    function Ex(e, t) {\n      var n = t.target.ownerDocument;\n      var i = t.clientX;\n      var o = t.clientY;\n      var s;\n\n      if (n.caretRangeFromPoint && n.caretRangeFromPoint(i, o)) {\n        s = n.caretRangeFromPoint(i, o);\n      } else if (t.rangeParent) {\n        s = n.createRange();\n        s.setStart(t.rangeParent, t.rangeOffset);\n        s.collapse(true);\n      }\n\n      if (s) {\n        return e.domConverter.domRangeToView(s);\n      } else {\n        return e.document.selection.getFirstRange();\n      }\n    }\n\n    function Sx(e) {\n      e = e.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\\n/g, \"</p><p>\").replace(/^\\s/, \"&nbsp;\").replace(/\\s$/, \"&nbsp;\").replace(/\\s\\s/g, \" &nbsp;\");\n\n      if (e.indexOf(\"</p><p>\") > -1) {\n        e = \"<p>\".concat(e, \"</p>\");\n      }\n\n      return e;\n    }\n\n    function Ix(e) {\n      return e.replace(/<span(?: class=\"Apple-converted-space\"|)>(\\s+)<\\/span>/g, function (e, t) {\n        if (t.length == 1) {\n          return \" \";\n        }\n\n        return t;\n      });\n    }\n\n    var Ox = [\"figcaption\", \"li\"];\n\n    function Nx(e) {\n      var t = \"\";\n\n      if (e.is(\"text\") || e.is(\"textProxy\")) {\n        t = e.data;\n      } else if (e.is(\"img\") && e.hasAttribute(\"alt\")) {\n        t = e.getAttribute(\"alt\");\n      } else {\n        var _n201 = null;\n\n        var _iterator311 = _createForOfIteratorHelper(e.getChildren()),\n            _step311;\n\n        try {\n          for (_iterator311.s(); !(_step311 = _iterator311.n()).done;) {\n            var _i160 = _step311.value;\n\n            var _e256 = Nx(_i160);\n\n            if (_n201 && (_n201.is(\"containerElement\") || _i160.is(\"containerElement\"))) {\n              if (Ox.includes(_n201.name) || Ox.includes(_i160.name)) {\n                t += \"\\n\";\n              } else {\n                t += \"\\n\\n\";\n              }\n            }\n\n            t += _e256;\n            _n201 = _i160;\n          }\n        } catch (err) {\n          _iterator311.e(err);\n        } finally {\n          _iterator311.f();\n        }\n      }\n\n      return t;\n    }\n\n    var Rx = /*#__PURE__*/function (_Ow34) {\n      _inherits(Rx, _Ow34);\n\n      var _super119 = _createSuper(Rx);\n\n      function Rx() {\n        _classCallCheck(this, Rx);\n\n        return _super119.apply(this, arguments);\n      }\n\n      _createClass(Rx, [{\n        key: \"init\",\n        value: function init() {\n          var _this186 = this;\n\n          var e = this.editor;\n          var t = e.model.document;\n          var n = e.editing.view;\n          var i = n.document;\n          this._htmlDataProcessor = new vp(i);\n          n.addObserver(Px);\n          this.listenTo(i, \"clipboardInput\", function (t) {\n            if (e.isReadOnly) {\n              t.stop();\n            }\n          }, {\n            priority: \"highest\"\n          });\n          this.listenTo(i, \"clipboardInput\", function (e, t) {\n            var i = t.dataTransfer;\n            var o = \"\";\n\n            if (i.getData(\"text/html\")) {\n              o = Ix(i.getData(\"text/html\"));\n            } else if (i.getData(\"text/plain\")) {\n              o = Sx(i.getData(\"text/plain\"));\n            }\n\n            o = _this186._htmlDataProcessor.toView(o);\n\n            _this186.fire(\"inputTransformation\", {\n              content: o,\n              dataTransfer: i\n            });\n\n            n.scrollToTheSelection();\n          }, {\n            priority: \"low\"\n          });\n          this.listenTo(this, \"inputTransformation\", function (e, t) {\n            if (!t.content.isEmpty) {\n              var _e257 = _this186.editor.data;\n              var _n202 = _this186.editor.model;\n\n              var _i161 = _e257.toModel(t.content, \"$clipboardHolder\");\n\n              if (_i161.childCount == 0) {\n                return;\n              }\n\n              _n202.insertContent(_i161);\n            }\n          }, {\n            priority: \"low\"\n          });\n\n          function o(n, o) {\n            var s = o.dataTransfer;\n            o.preventDefault();\n            var r = e.data.toView(e.model.getSelectedContent(t.selection));\n            i.fire(\"clipboardOutput\", {\n              dataTransfer: s,\n              content: r,\n              method: n.name\n            });\n          }\n\n          this.listenTo(i, \"copy\", o, {\n            priority: \"low\"\n          });\n          this.listenTo(i, \"cut\", function (t, n) {\n            if (e.isReadOnly) {\n              n.preventDefault();\n            } else {\n              o(t, n);\n            }\n          }, {\n            priority: \"low\"\n          });\n          this.listenTo(i, \"clipboardOutput\", function (n, i) {\n            if (!i.content.isEmpty) {\n              i.dataTransfer.setData(\"text/html\", _this186._htmlDataProcessor.toData(i.content));\n              i.dataTransfer.setData(\"text/plain\", Nx(i.content));\n            }\n\n            if (i.method == \"cut\") {\n              e.model.deleteContent(t.selection);\n            }\n          }, {\n            priority: \"low\"\n          });\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"Clipboard\";\n        }\n      }]);\n\n      return Rx;\n    }(Ow);\n\n    var Lx = /*#__PURE__*/function () {\n      function Lx(e) {\n        _classCallCheck(this, Lx);\n\n        this.document = e;\n      }\n\n      _createClass(Lx, [{\n        key: \"createDocumentFragment\",\n        value: function createDocumentFragment(e) {\n          return new Wl(this.document, e);\n        }\n      }, {\n        key: \"createElement\",\n        value: function createElement(e, t, n) {\n          return new Dc(this.document, e, t, n);\n        }\n      }, {\n        key: \"createText\",\n        value: function createText(e) {\n          return new zr(this.document, e);\n        }\n      }, {\n        key: \"clone\",\n        value: function clone(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n          return e._clone(t);\n        }\n      }, {\n        key: \"appendChild\",\n        value: function appendChild(e, t) {\n          return t._appendChild(e);\n        }\n      }, {\n        key: \"insertChild\",\n        value: function insertChild(e, t, n) {\n          return n._insertChild(e, t);\n        }\n      }, {\n        key: \"removeChildren\",\n        value: function removeChildren(e, t, n) {\n          return n._removeChildren(e, t);\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(e) {\n          var t = e.parent;\n\n          if (t) {\n            return this.removeChildren(t.getChildIndex(e), 1, t);\n          }\n\n          return [];\n        }\n      }, {\n        key: \"replace\",\n        value: function replace(e, t) {\n          var n = e.parent;\n\n          if (n) {\n            var _i162 = n.getChildIndex(e);\n\n            this.removeChildren(_i162, 1, n);\n            this.insertChild(_i162, t, n);\n            return true;\n          }\n\n          return false;\n        }\n      }, {\n        key: \"unwrapElement\",\n        value: function unwrapElement(e) {\n          var t = e.parent;\n\n          if (t) {\n            var _n203 = t.getChildIndex(e);\n\n            this.remove(e);\n            this.insertChild(_n203, e.getChildren(), t);\n          }\n        }\n      }, {\n        key: \"rename\",\n        value: function rename(e, t) {\n          var n = new Dc(this.document, e, t.getAttributes(), t.getChildren());\n          return this.replace(t, n) ? n : null;\n        }\n      }, {\n        key: \"setAttribute\",\n        value: function setAttribute(e, t, n) {\n          n._setAttribute(e, t);\n        }\n      }, {\n        key: \"removeAttribute\",\n        value: function removeAttribute(e, t) {\n          t._removeAttribute(e);\n        }\n      }, {\n        key: \"addClass\",\n        value: function addClass(e, t) {\n          t._addClass(e);\n        }\n      }, {\n        key: \"removeClass\",\n        value: function removeClass(e, t) {\n          t._removeClass(e);\n        }\n      }, {\n        key: \"setStyle\",\n        value: function setStyle(e, t, n) {\n          if (R(e) && n === undefined) {\n            n = t;\n          }\n\n          n._setStyle(e, t);\n        }\n      }, {\n        key: \"removeStyle\",\n        value: function removeStyle(e, t) {\n          t._removeStyle(e);\n        }\n      }, {\n        key: \"setCustomProperty\",\n        value: function setCustomProperty(e, t, n) {\n          n._setCustomProperty(e, t);\n        }\n      }, {\n        key: \"removeCustomProperty\",\n        value: function removeCustomProperty(e, t) {\n          return t._removeCustomProperty(e);\n        }\n      }, {\n        key: \"createPositionAt\",\n        value: function createPositionAt(e, t) {\n          return dl._createAt(e, t);\n        }\n      }, {\n        key: \"createPositionAfter\",\n        value: function createPositionAfter(e) {\n          return dl._createAfter(e);\n        }\n      }, {\n        key: \"createPositionBefore\",\n        value: function createPositionBefore(e) {\n          return dl._createBefore(e);\n        }\n      }, {\n        key: \"createRange\",\n        value: function createRange(e, t) {\n          return new ul(e, t);\n        }\n      }, {\n        key: \"createRangeOn\",\n        value: function createRangeOn(e) {\n          return ul._createOn(e);\n        }\n      }, {\n        key: \"createRangeIn\",\n        value: function createRangeIn(e) {\n          return ul._createIn(e);\n        }\n      }, {\n        key: \"createSelection\",\n        value: function createSelection(e, t, n) {\n          return new ml(e, t, n);\n        }\n      }]);\n\n      return Lx;\n    }();\n\n    var jx = /*#__PURE__*/function (_jw11) {\n      _inherits(jx, _jw11);\n\n      var _super120 = _createSuper(jx);\n\n      function jx() {\n        _classCallCheck(this, jx);\n\n        return _super120.apply(this, arguments);\n      }\n\n      _createClass(jx, [{\n        key: \"refresh\",\n        value: function refresh() {\n          this.isEnabled = T_(this.editor.model);\n        }\n      }, {\n        key: \"execute\",\n        value: function execute(e) {\n          var t = this.editor;\n          var n = t.model;\n          var i = t.plugins.get(rk);\n          n.change(function (t) {\n            var o = Array.isArray(e.file) ? e.file : [e.file];\n\n            var _iterator312 = _createForOfIteratorHelper(o),\n                _step312;\n\n            try {\n              for (_iterator312.s(); !(_step312 = _iterator312.n()).done;) {\n                var _e258 = _step312.value;\n                Dx(t, n, i, _e258);\n              }\n            } catch (err) {\n              _iterator312.e(err);\n            } finally {\n              _iterator312.f();\n            }\n          });\n        }\n      }]);\n\n      return jx;\n    }(jw);\n\n    function Dx(e, t, n, i) {\n      var o = n.createLoader(i);\n\n      if (!o) {\n        return;\n      }\n\n      C_(e, t, {\n        uploadId: o.id\n      });\n    }\n\n    var zx = /*#__PURE__*/function (_Ow35) {\n      _inherits(zx, _Ow35);\n\n      var _super121 = _createSuper(zx);\n\n      function zx(e) {\n        var _this187;\n\n        _classCallCheck(this, zx);\n\n        _this187 = _super121.call(this, e);\n        e.config.define(\"image\", {\n          upload: {\n            types: [\"jpeg\", \"png\", \"gif\", \"bmp\", \"webp\", \"tiff\"]\n          }\n        });\n        return _this187;\n      }\n\n      _createClass(zx, [{\n        key: \"init\",\n        value: function init() {\n          var _this188 = this;\n\n          var e = this.editor;\n          var t = e.model.document;\n          var n = e.model.schema;\n          var i = e.conversion;\n          var o = e.plugins.get(rk);\n          var s = ix(e.config.get(\"image.upload.types\"));\n          n.extend(\"image\", {\n            allowAttributes: [\"uploadId\", \"uploadStatus\"]\n          });\n          e.commands.add(\"imageUpload\", new jx(e));\n          i.for(\"upcast\").attributeToAttribute({\n            view: {\n              name: \"img\",\n              key: \"uploadId\"\n            },\n            model: \"uploadId\"\n          });\n          this.listenTo(e.editing.view.document, \"clipboardInput\", function (t, n) {\n            if (Bx(n.dataTransfer)) {\n              return;\n            }\n\n            var i = Array.from(n.dataTransfer.files).filter(function (e) {\n              if (!e) {\n                return false;\n              }\n\n              return s.test(e.type);\n            });\n            var o = n.targetRanges.map(function (t) {\n              return e.editing.mapper.toModelRange(t);\n            });\n            e.model.change(function (n) {\n              n.setSelection(o);\n\n              if (i.length) {\n                t.stop();\n                e.model.enqueueChange(\"default\", function () {\n                  e.execute(\"imageUpload\", {\n                    file: i\n                  });\n                });\n              }\n            });\n          });\n          this.listenTo(e.plugins.get(Rx), \"inputTransformation\", function (t, n) {\n            var i = Array.from(e.editing.view.createRangeIn(n.content)).filter(function (e) {\n              return sx(e.item) && !e.item.getAttribute(\"uploadProcessed\");\n            }).map(function (e) {\n              return {\n                promise: ox(e.item),\n                imageElement: e.item\n              };\n            });\n\n            if (!i.length) {\n              return;\n            }\n\n            var s = new Lx(e.editing.view.document);\n\n            var _iterator313 = _createForOfIteratorHelper(i),\n                _step313;\n\n            try {\n              for (_iterator313.s(); !(_step313 = _iterator313.n()).done;) {\n                var _e259 = _step313.value;\n                s.setAttribute(\"uploadProcessed\", true, _e259.imageElement);\n\n                var _t235 = o.createLoader(_e259.promise);\n\n                if (_t235) {\n                  s.setAttribute(\"src\", \"\", _e259.imageElement);\n                  s.setAttribute(\"uploadId\", _t235.id, _e259.imageElement);\n                }\n              }\n            } catch (err) {\n              _iterator313.e(err);\n            } finally {\n              _iterator313.f();\n            }\n          });\n          e.editing.view.document.on(\"dragover\", function (e, t) {\n            t.preventDefault();\n          });\n          t.on(\"change\", function () {\n            var n = t.differ.getChanges({\n              includeChangesInGraveyard: true\n            });\n\n            var _iterator314 = _createForOfIteratorHelper(n),\n                _step314;\n\n            try {\n              for (_iterator314.s(); !(_step314 = _iterator314.n()).done;) {\n                var _t236 = _step314.value;\n\n                if (_t236.type == \"insert\" && _t236.name != \"$text\") {\n                  var _n204 = _t236.position.nodeAfter;\n\n                  var _i163 = _t236.position.root.rootName == \"$graveyard\";\n\n                  var _iterator315 = _createForOfIteratorHelper(Vx(e, _n204)),\n                      _step315;\n\n                  try {\n                    for (_iterator315.s(); !(_step315 = _iterator315.n()).done;) {\n                      var _t237 = _step315.value;\n\n                      var _e260 = _t237.getAttribute(\"uploadId\");\n\n                      if (!_e260) {\n                        continue;\n                      }\n\n                      var _n205 = o.loaders.get(_e260);\n\n                      if (!_n205) {\n                        continue;\n                      }\n\n                      if (_i163) {\n                        _n205.abort();\n                      } else if (_n205.status == \"idle\") {\n                        _this188._readAndUpload(_n205, _t237);\n                      }\n                    }\n                  } catch (err) {\n                    _iterator315.e(err);\n                  } finally {\n                    _iterator315.f();\n                  }\n                }\n              }\n            } catch (err) {\n              _iterator314.e(err);\n            } finally {\n              _iterator314.f();\n            }\n          });\n        }\n      }, {\n        key: \"_readAndUpload\",\n        value: function _readAndUpload(e, t) {\n          var _this189 = this;\n\n          var n = this.editor;\n          var i = n.model;\n          var o = n.locale.t;\n          var s = n.plugins.get(rk);\n          var r = n.plugins.get(ek);\n          i.enqueueChange(\"transparent\", function (e) {\n            e.setAttribute(\"uploadStatus\", \"reading\", t);\n          });\n          return e.read().then(function () {\n            var o = e.upload();\n\n            if (Cl.isSafari) {\n              var _e261 = n.editing.mapper.toViewElement(t);\n\n              var _i164 = M_(_e261);\n\n              n.editing.view.once(\"render\", function () {\n                if (!_i164.parent) {\n                  return;\n                }\n\n                var e = n.editing.view.domConverter.mapViewToDom(_i164.parent);\n\n                if (!e) {\n                  return;\n                }\n\n                var t = e.style.display;\n                e.style.display = \"none\";\n                e._ckHack = e.offsetHeight;\n                e.style.display = t;\n              });\n            }\n\n            i.enqueueChange(\"transparent\", function (e) {\n              e.setAttribute(\"uploadStatus\", \"uploading\", t);\n            });\n            return o;\n          }).then(function (e) {\n            i.enqueueChange(\"transparent\", function (n) {\n              n.setAttributes({\n                uploadStatus: \"complete\",\n                src: e.default\n              }, t);\n\n              _this189._parseAndSetSrcsetAttributeOnImage(e, t, n);\n            });\n            a();\n          }).catch(function (n) {\n            if (e.status !== \"error\" && e.status !== \"aborted\") {\n              throw n;\n            }\n\n            if (e.status == \"error\" && n) {\n              r.showWarning(n, {\n                title: o(\"as\"),\n                namespace: \"upload\"\n              });\n            }\n\n            a();\n            i.enqueueChange(\"transparent\", function (e) {\n              e.remove(t);\n            });\n          });\n\n          function a() {\n            i.enqueueChange(\"transparent\", function (e) {\n              e.removeAttribute(\"uploadId\", t);\n              e.removeAttribute(\"uploadStatus\", t);\n            });\n            s.destroyLoader(e);\n          }\n        }\n      }, {\n        key: \"_parseAndSetSrcsetAttributeOnImage\",\n        value: function _parseAndSetSrcsetAttributeOnImage(e, t, n) {\n          var i = 0;\n          var o = Object.keys(e).filter(function (e) {\n            var t = parseInt(e, 10);\n\n            if (!isNaN(t)) {\n              i = Math.max(i, t);\n              return true;\n            }\n          }).map(function (t) {\n            return \"\".concat(e[t], \" \").concat(t, \"w\");\n          }).join(\", \");\n\n          if (o != \"\") {\n            n.setAttribute(\"srcset\", {\n              data: o,\n              width: i\n            }, t);\n          }\n        }\n      }], [{\n        key: \"requires\",\n        get: function get() {\n          return [rk, ek, Rx];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"ImageUploadEditing\";\n        }\n      }]);\n\n      return zx;\n    }(Ow);\n\n    function Bx(e) {\n      return Array.from(e.types).includes(\"text/html\") && e.getData(\"text/html\") !== \"\";\n    }\n\n    function Vx(e, t) {\n      return Array.from(e.model.createRangeOn(t)).filter(function (e) {\n        return e.item.is(\"image\");\n      }).map(function (e) {\n        return e.item;\n      });\n    }\n\n    var Fx = /*#__PURE__*/function (_Ow36) {\n      _inherits(Fx, _Ow36);\n\n      var _super122 = _createSuper(Fx);\n\n      function Fx() {\n        _classCallCheck(this, Fx);\n\n        return _super122.apply(this, arguments);\n      }\n\n      _createClass(Fx, null, [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"ImageUpload\";\n        }\n      }, {\n        key: \"requires\",\n        get: function get() {\n          return [zx, cx, fx];\n        }\n      }]);\n\n      return Fx;\n    }(Ow);\n\n    var Hx = /*#__PURE__*/function (_jw12) {\n      _inherits(Hx, _jw12);\n\n      var _super123 = _createSuper(Hx);\n\n      function Hx(e) {\n        var _this190;\n\n        _classCallCheck(this, Hx);\n\n        _this190 = _super123.call(this, e);\n        _this190._childCommands = [];\n        return _this190;\n      }\n\n      _createClass(Hx, [{\n        key: \"refresh\",\n        value: function refresh() {}\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var t = this._getFirstEnabledCommand();\n\n          for (var _len19 = arguments.length, e = new Array(_len19), _key19 = 0; _key19 < _len19; _key19++) {\n            e[_key19] = arguments[_key19];\n          }\n\n          t.execute(e);\n        }\n      }, {\n        key: \"registerChildCommand\",\n        value: function registerChildCommand(e) {\n          var _this191 = this;\n\n          this._childCommands.push(e);\n\n          e.on(\"change:isEnabled\", function () {\n            return _this191._checkEnabled();\n          });\n\n          this._checkEnabled();\n        }\n      }, {\n        key: \"_checkEnabled\",\n        value: function _checkEnabled() {\n          this.isEnabled = !!this._getFirstEnabledCommand();\n        }\n      }, {\n        key: \"_getFirstEnabledCommand\",\n        value: function _getFirstEnabledCommand() {\n          return this._childCommands.find(function (e) {\n            return e.isEnabled;\n          });\n        }\n      }]);\n\n      return Hx;\n    }(jw);\n\n    var Ux = /*#__PURE__*/function (_Ow37) {\n      _inherits(Ux, _Ow37);\n\n      var _super124 = _createSuper(Ux);\n\n      function Ux() {\n        _classCallCheck(this, Ux);\n\n        return _super124.apply(this, arguments);\n      }\n\n      _createClass(Ux, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          e.commands.add(\"indent\", new Hx(e));\n          e.commands.add(\"outdent\", new Hx(e));\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"IndentEditing\";\n        }\n      }]);\n\n      return Ux;\n    }(Ow);\n\n    var Wx = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zM1.632 6.95L5.02 9.358a.4.4 0 0 1-.013.661l-3.39 2.207A.4.4 0 0 1 1 11.892V7.275a.4.4 0 0 1 .632-.326z\"/></svg>';\n    var $x = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm5 6c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM2.75 16.5h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 1 0 0 1.5zm1.618-9.55L.98 9.358a.4.4 0 0 0 .013.661l3.39 2.207A.4.4 0 0 0 5 11.892V7.275a.4.4 0 0 0-.632-.326z\"/></svg>';\n\n    var qx = /*#__PURE__*/function (_Ow38) {\n      _inherits(qx, _Ow38);\n\n      var _super125 = _createSuper(qx);\n\n      function qx() {\n        _classCallCheck(this, qx);\n\n        return _super125.apply(this, arguments);\n      }\n\n      _createClass(qx, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          var t = e.locale;\n          var n = e.t;\n          var i = t.uiLanguageDirection == \"ltr\" ? Wx : $x;\n          var o = t.uiLanguageDirection == \"ltr\" ? $x : Wx;\n\n          this._defineButton(\"indent\", n(\"h\"), i);\n\n          this._defineButton(\"outdent\", n(\"i\"), o);\n        }\n      }, {\n        key: \"_defineButton\",\n        value: function _defineButton(e, t, n) {\n          var _this192 = this;\n\n          var i = this.editor;\n          i.ui.componentFactory.add(e, function (o) {\n            var s = i.commands.get(e);\n            var r = new Kb(o);\n            r.set({\n              label: t,\n              icon: n,\n              tooltip: true\n            });\n            r.bind(\"isOn\", \"isEnabled\").to(s, \"value\", \"isEnabled\");\n\n            _this192.listenTo(r, \"execute\", function () {\n              i.execute(e);\n              i.editing.view.focus();\n            });\n\n            return r;\n          });\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"IndentUI\";\n        }\n      }]);\n\n      return qx;\n    }(Ow);\n\n    var Yx = /*#__PURE__*/function (_Ow39) {\n      _inherits(Yx, _Ow39);\n\n      var _super126 = _createSuper(Yx);\n\n      function Yx() {\n        _classCallCheck(this, Yx);\n\n        return _super126.apply(this, arguments);\n      }\n\n      _createClass(Yx, null, [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"Indent\";\n        }\n      }, {\n        key: \"requires\",\n        get: function get() {\n          return [Ux, qx];\n        }\n      }]);\n\n      return Yx;\n    }(Ow);\n\n    var Jx = \"italic\";\n\n    var Qx = /*#__PURE__*/function (_Ow40) {\n      _inherits(Qx, _Ow40);\n\n      var _super127 = _createSuper(Qx);\n\n      function Qx() {\n        _classCallCheck(this, Qx);\n\n        return _super127.apply(this, arguments);\n      }\n\n      _createClass(Qx, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          e.model.schema.extend(\"$text\", {\n            allowAttributes: Jx\n          });\n          e.model.schema.setAttributeProperties(Jx, {\n            isFormatting: true,\n            copyOnEnter: true\n          });\n          e.conversion.attributeToElement({\n            model: Jx,\n            view: \"i\",\n            upcastAlso: [\"em\", {\n              styles: {\n                \"font-style\": \"italic\"\n              }\n            }]\n          });\n          e.commands.add(Jx, new Jw(e, Jx));\n          e.keystrokes.set(\"CTRL+I\", Jx);\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"ItalicEditing\";\n        }\n      }]);\n\n      return Qx;\n    }(Ow);\n\n    var Xx = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M9.586 14.633l.021.004c-.036.335.095.655.393.962.082.083.173.15.274.201h1.474a.6.6 0 1 1 0 1.2H5.304a.6.6 0 0 1 0-1.2h1.15c.474-.07.809-.182 1.005-.334.157-.122.291-.32.404-.597l2.416-9.55a1.053 1.053 0 0 0-.281-.823 1.12 1.12 0 0 0-.442-.296H8.15a.6.6 0 0 1 0-1.2h6.443a.6.6 0 1 1 0 1.2h-1.195c-.376.056-.65.155-.823.296-.215.175-.423.439-.623.79l-2.366 9.347z\"/></svg>';\n    var Gx = \"italic\";\n\n    var Kx = /*#__PURE__*/function (_Ow41) {\n      _inherits(Kx, _Ow41);\n\n      var _super128 = _createSuper(Kx);\n\n      function Kx() {\n        _classCallCheck(this, Kx);\n\n        return _super128.apply(this, arguments);\n      }\n\n      _createClass(Kx, [{\n        key: \"init\",\n        value: function init() {\n          var _this193 = this;\n\n          var e = this.editor;\n          var t = e.t;\n          e.ui.componentFactory.add(Gx, function (n) {\n            var i = e.commands.get(Gx);\n            var o = new Kb(n);\n            o.set({\n              label: t(\"aj\"),\n              icon: Xx,\n              keystroke: \"CTRL+I\",\n              tooltip: true,\n              isToggleable: true\n            });\n            o.bind(\"isOn\", \"isEnabled\").to(i, \"value\", \"isEnabled\");\n\n            _this193.listenTo(o, \"execute\", function () {\n              e.execute(Gx);\n              e.editing.view.focus();\n            });\n\n            return o;\n          });\n        }\n      }]);\n\n      return Kx;\n    }(Ow);\n\n    var Zx = /*#__PURE__*/function (_Ow42) {\n      _inherits(Zx, _Ow42);\n\n      var _super129 = _createSuper(Zx);\n\n      function Zx() {\n        _classCallCheck(this, Zx);\n\n        return _super129.apply(this, arguments);\n      }\n\n      _createClass(Zx, null, [{\n        key: \"requires\",\n        get: function get() {\n          return [Qx, Kx];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"Italic\";\n        }\n      }]);\n\n      return Zx;\n    }(Ow);\n\n    var eA = /*#__PURE__*/function (_Qu7) {\n      _inherits(eA, _Qu7);\n\n      var _super130 = _createSuper(eA);\n\n      function eA(e) {\n        var _this194;\n\n        _classCallCheck(this, eA);\n\n        _this194 = _super130.call(this, e);\n        _this194.domEventType = \"click\";\n        return _this194;\n      }\n\n      _createClass(eA, [{\n        key: \"onDomEvent\",\n        value: function onDomEvent(e) {\n          this.fire(e.type, e);\n        }\n      }]);\n\n      return eA;\n    }(Qu);\n\n    var tA = n(75);\n\n    var nA = /*#__PURE__*/function (_gb24) {\n      _inherits(nA, _gb24);\n\n      var _super131 = _createSuper(nA);\n\n      function nA(e) {\n        var _this195;\n\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n        _classCallCheck(this, nA);\n\n        _this195 = _super131.call(this, e);\n        var n = e.t;\n        _this195.focusTracker = new xp();\n        _this195.keystrokes = new dp();\n        _this195.urlInputView = _this195._createUrlInput();\n        _this195.saveButtonView = _this195._createButton(n(\"bd\"), Jk, \"ck-button-save\");\n        _this195.saveButtonView.type = \"submit\";\n        _this195.cancelButtonView = _this195._createButton(n(\"be\"), Qk, \"ck-button-cancel\", \"cancel\");\n        _this195._manualDecoratorSwitches = _this195._createManualDecoratorSwitches(t);\n        _this195.children = _this195._createFormChildren(t);\n        _this195._focusables = new Bp();\n        _this195._focusCycler = new Ob({\n          focusables: _this195._focusables,\n          focusTracker: _this195.focusTracker,\n          keystrokeHandler: _this195.keystrokes,\n          actions: {\n            focusPrevious: \"shift + tab\",\n            focusNext: \"tab\"\n          }\n        });\n        var i = [\"ck\", \"ck-link-form\"];\n\n        if (t.length) {\n          i.push(\"ck-link-form_layout-vertical\");\n        }\n\n        _this195.setTemplate({\n          tag: \"form\",\n          attributes: {\n            class: i,\n            tabindex: \"-1\"\n          },\n          children: _this195.children\n        });\n\n        return _this195;\n      }\n\n      _createClass(nA, [{\n        key: \"getDecoratorSwitchesState\",\n        value: function getDecoratorSwitchesState() {\n          return Array.from(this._manualDecoratorSwitches).reduce(function (e, t) {\n            e[t.name] = t.isOn;\n            return e;\n          }, {});\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this196 = this;\n\n          _get(_getPrototypeOf(nA.prototype), \"render\", this).call(this);\n\n          Yk({\n            view: this\n          });\n          var e = [this.urlInputView].concat(_toConsumableArray(this._manualDecoratorSwitches), [this.saveButtonView, this.cancelButtonView]);\n          e.forEach(function (e) {\n            _this196._focusables.add(e);\n\n            _this196.focusTracker.add(e.element);\n          });\n          this.keystrokes.listenTo(this.element);\n        }\n      }, {\n        key: \"focus\",\n        value: function focus() {\n          this._focusCycler.focusFirst();\n        }\n      }, {\n        key: \"_createUrlInput\",\n        value: function _createUrlInput() {\n          var e = this.locale.t;\n          var t = new Wk(this.locale, qk);\n          t.label = e(\"bv\");\n          t.inputView.placeholder = \"https://example.com\";\n          return t;\n        }\n      }, {\n        key: \"_createButton\",\n        value: function _createButton(e, t, n, i) {\n          var o = new Kb(this.locale);\n          o.set({\n            label: e,\n            icon: t,\n            tooltip: true\n          });\n          o.extendTemplate({\n            attributes: {\n              class: n\n            }\n          });\n\n          if (i) {\n            o.delegate(\"execute\").to(this, i);\n          }\n\n          return o;\n        }\n      }, {\n        key: \"_createManualDecoratorSwitches\",\n        value: function _createManualDecoratorSwitches(e) {\n          var _this197 = this;\n\n          var t = this.createCollection();\n\n          var _iterator316 = _createForOfIteratorHelper(e),\n              _step316;\n\n          try {\n            var _loop8 = function _loop8() {\n              var n = _step316.value;\n              var e = new rw(_this197.locale);\n              e.set({\n                name: n.id,\n                label: n.label,\n                withText: true\n              });\n              e.bind(\"isOn\").to(n, \"value\");\n              e.on(\"execute\", function () {\n                n.set(\"value\", !e.isOn);\n              });\n              t.add(e);\n            };\n\n            for (_iterator316.s(); !(_step316 = _iterator316.n()).done;) {\n              _loop8();\n            }\n          } catch (err) {\n            _iterator316.e(err);\n          } finally {\n            _iterator316.f();\n          }\n\n          return t;\n        }\n      }, {\n        key: \"_createFormChildren\",\n        value: function _createFormChildren(e) {\n          var t = this.createCollection();\n          t.add(this.urlInputView);\n\n          if (e.length) {\n            var _e262 = new gb();\n\n            _e262.setTemplate({\n              tag: \"ul\",\n              children: this._manualDecoratorSwitches.map(function (e) {\n                return {\n                  tag: \"li\",\n                  children: [e],\n                  attributes: {\n                    class: [\"ck\", \"ck-list__item\"]\n                  }\n                };\n              }),\n              attributes: {\n                class: [\"ck\", \"ck-reset\", \"ck-list\"]\n              }\n            });\n\n            t.add(_e262);\n          }\n\n          t.add(this.saveButtonView);\n          t.add(this.cancelButtonView);\n          return t;\n        }\n      }]);\n\n      return nA;\n    }(gb);\n\n    var iA = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184zm4.919 10.562l-1.414 1.414a.75.75 0 1 1-1.06-1.06l1.414-1.415-1.415-1.414a.75.75 0 0 1 1.061-1.06l1.414 1.414 1.414-1.415a.75.75 0 0 1 1.061 1.061l-1.414 1.414 1.414 1.415a.75.75 0 0 1-1.06 1.06l-1.415-1.414z\"/></svg>';\n    var oA = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M7.3 17.37l-.061.088a1.518 1.518 0 0 1-.934.535l-4.178.663-.806-4.153a1.495 1.495 0 0 1 .187-1.058l.056-.086L8.77 2.639c.958-1.351 2.803-1.076 4.296-.03 1.497 1.047 2.387 2.693 1.433 4.055L7.3 17.37zM9.14 4.728l-5.545 8.346 3.277 2.294 5.544-8.346L9.14 4.728zM6.07 16.512l-3.276-2.295.53 2.73 2.746-.435zM9.994 3.506L13.271 5.8c.316-.452-.16-1.333-1.065-1.966-.905-.634-1.895-.78-2.212-.328zM8 18.5L9.375 17H19v1.5H8z\"/></svg>';\n    var sA = n(77);\n\n    var rA = /*#__PURE__*/function (_gb25) {\n      _inherits(rA, _gb25);\n\n      var _super132 = _createSuper(rA);\n\n      function rA(e) {\n        var _this198;\n\n        _classCallCheck(this, rA);\n\n        _this198 = _super132.call(this, e);\n        var t = e.t;\n        _this198.focusTracker = new xp();\n        _this198.keystrokes = new dp();\n        _this198.previewButtonView = _this198._createPreviewButton();\n        _this198.unlinkButtonView = _this198._createButton(t(\"br\"), iA, \"unlink\");\n        _this198.editButtonView = _this198._createButton(t(\"bs\"), oA, \"edit\");\n\n        _this198.set(\"href\");\n\n        _this198._focusables = new Bp();\n        _this198._focusCycler = new Ob({\n          focusables: _this198._focusables,\n          focusTracker: _this198.focusTracker,\n          keystrokeHandler: _this198.keystrokes,\n          actions: {\n            focusPrevious: \"shift + tab\",\n            focusNext: \"tab\"\n          }\n        });\n\n        _this198.setTemplate({\n          tag: \"div\",\n          attributes: {\n            class: [\"ck\", \"ck-link-actions\"],\n            tabindex: \"-1\"\n          },\n          children: [_this198.previewButtonView, _this198.editButtonView, _this198.unlinkButtonView]\n        });\n\n        return _this198;\n      }\n\n      _createClass(rA, [{\n        key: \"render\",\n        value: function render() {\n          var _this199 = this;\n\n          _get(_getPrototypeOf(rA.prototype), \"render\", this).call(this);\n\n          var e = [this.previewButtonView, this.editButtonView, this.unlinkButtonView];\n          e.forEach(function (e) {\n            _this199._focusables.add(e);\n\n            _this199.focusTracker.add(e.element);\n          });\n          this.keystrokes.listenTo(this.element);\n        }\n      }, {\n        key: \"focus\",\n        value: function focus() {\n          this._focusCycler.focusFirst();\n        }\n      }, {\n        key: \"_createButton\",\n        value: function _createButton(e, t, n) {\n          var i = new Kb(this.locale);\n          i.set({\n            label: e,\n            icon: t,\n            tooltip: true\n          });\n          i.delegate(\"execute\").to(this, n);\n          return i;\n        }\n      }, {\n        key: \"_createPreviewButton\",\n        value: function _createPreviewButton() {\n          var e = new Kb(this.locale);\n          var t = this.bindTemplate;\n          var n = this.t;\n          e.set({\n            withText: true,\n            tooltip: n(\"bt\")\n          });\n          e.extendTemplate({\n            attributes: {\n              class: [\"ck\", \"ck-link-actions__preview\"],\n              href: t.to(\"href\", function (e) {\n                return e && Rv(e);\n              }),\n              target: \"_blank\",\n              rel: \"noopener noreferrer\"\n            }\n          });\n          e.bind(\"label\").to(this, \"href\", function (e) {\n            return e || n(\"bu\");\n          });\n          e.bind(\"isEnabled\").to(this, \"href\", function (e) {\n            return !!e;\n          });\n          e.template.tag = \"a\";\n          e.template.eventListeners = {};\n          return e;\n        }\n      }]);\n\n      return rA;\n    }(gb);\n\n    var aA = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M11.077 15l.991-1.416a.75.75 0 1 1 1.229.86l-1.148 1.64a.748.748 0 0 1-.217.206 5.251 5.251 0 0 1-8.503-5.955.741.741 0 0 1 .12-.274l1.147-1.639a.75.75 0 1 1 1.228.86L4.933 10.7l.006.003a3.75 3.75 0 0 0 6.132 4.294l.006.004zm5.494-5.335a.748.748 0 0 1-.12.274l-1.147 1.639a.75.75 0 1 1-1.228-.86l.86-1.23a3.75 3.75 0 0 0-6.144-4.301l-.86 1.229a.75.75 0 0 1-1.229-.86l1.148-1.64a.748.748 0 0 1 .217-.206 5.251 5.251 0 0 1 8.503 5.955zm-4.563-2.532a.75.75 0 0 1 .184 1.045l-3.155 4.505a.75.75 0 1 1-1.229-.86l3.155-4.506a.75.75 0 0 1 1.045-.184z\"/></svg>';\n    var cA = \"Ctrl+K\";\n\n    var lA = /*#__PURE__*/function (_Ow43) {\n      _inherits(lA, _Ow43);\n\n      var _super133 = _createSuper(lA);\n\n      function lA() {\n        _classCallCheck(this, lA);\n\n        return _super133.apply(this, arguments);\n      }\n\n      _createClass(lA, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          e.editing.view.addObserver(eA);\n          this.actionsView = this._createActionsView();\n          this.formView = this._createFormView();\n          this._balloon = e.plugins.get(dy);\n\n          this._createToolbarLinkButton();\n\n          this._enableUserBalloonInteractions();\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          _get(_getPrototypeOf(lA.prototype), \"destroy\", this).call(this);\n\n          this.formView.destroy();\n        }\n      }, {\n        key: \"_createActionsView\",\n        value: function _createActionsView() {\n          var _this200 = this;\n\n          var e = this.editor;\n          var t = new rA(e.locale);\n          var n = e.commands.get(\"link\");\n          var i = e.commands.get(\"unlink\");\n          t.bind(\"href\").to(n, \"value\");\n          t.editButtonView.bind(\"isEnabled\").to(n);\n          t.unlinkButtonView.bind(\"isEnabled\").to(i);\n          this.listenTo(t, \"edit\", function () {\n            _this200._addFormView();\n          });\n          this.listenTo(t, \"unlink\", function () {\n            e.execute(\"unlink\");\n\n            _this200._hideUI();\n          });\n          t.keystrokes.set(\"Esc\", function (e, t) {\n            _this200._hideUI();\n\n            t();\n          });\n          t.keystrokes.set(cA, function (e, t) {\n            _this200._addFormView();\n\n            t();\n          });\n          return t;\n        }\n      }, {\n        key: \"_createFormView\",\n        value: function _createFormView() {\n          var _this201 = this;\n\n          var e = this.editor;\n          var t = e.commands.get(\"link\");\n          var n = new nA(e.locale, t.manualDecorators);\n          n.urlInputView.bind(\"value\").to(t, \"value\");\n          n.urlInputView.bind(\"isReadOnly\").to(t, \"isEnabled\", function (e) {\n            return !e;\n          });\n          n.saveButtonView.bind(\"isEnabled\").to(t);\n          this.listenTo(n, \"submit\", function () {\n            e.execute(\"link\", n.urlInputView.inputView.element.value, n.getDecoratorSwitchesState());\n\n            _this201._closeFormView();\n          });\n          this.listenTo(n, \"cancel\", function () {\n            _this201._closeFormView();\n          });\n          n.keystrokes.set(\"Esc\", function (e, t) {\n            _this201._closeFormView();\n\n            t();\n          });\n          return n;\n        }\n      }, {\n        key: \"_createToolbarLinkButton\",\n        value: function _createToolbarLinkButton() {\n          var _this202 = this;\n\n          var e = this.editor;\n          var t = e.commands.get(\"link\");\n          var n = e.t;\n          e.keystrokes.set(cA, function (e, t) {\n            t();\n\n            _this202._showUI(true);\n          });\n          e.ui.componentFactory.add(\"link\", function (e) {\n            var i = new Kb(e);\n            i.isEnabled = true;\n            i.label = n(\"j\");\n            i.icon = aA;\n            i.keystroke = cA;\n            i.tooltip = true;\n            i.isToggleable = true;\n            i.bind(\"isEnabled\").to(t, \"isEnabled\");\n            i.bind(\"isOn\").to(t, \"value\", function (e) {\n              return !!e;\n            });\n\n            _this202.listenTo(i, \"execute\", function () {\n              return _this202._showUI(true);\n            });\n\n            return i;\n          });\n        }\n      }, {\n        key: \"_enableUserBalloonInteractions\",\n        value: function _enableUserBalloonInteractions() {\n          var _this203 = this;\n\n          var e = this.editor.editing.view.document;\n          this.listenTo(e, \"click\", function () {\n            var e = _this203._getSelectedLinkElement();\n\n            if (e) {\n              _this203._showUI();\n            }\n          });\n          this.editor.keystrokes.set(\"Tab\", function (e, t) {\n            if (_this203._areActionsVisible && !_this203.actionsView.focusTracker.isFocused) {\n              _this203.actionsView.focus();\n\n              t();\n            }\n          }, {\n            priority: \"high\"\n          });\n          this.editor.keystrokes.set(\"Esc\", function (e, t) {\n            if (_this203._isUIVisible) {\n              _this203._hideUI();\n\n              t();\n            }\n          });\n          aw({\n            emitter: this.formView,\n            activator: function activator() {\n              return _this203._isUIInPanel;\n            },\n            contextElements: [this._balloon.view.element],\n            callback: function callback() {\n              return _this203._hideUI();\n            }\n          });\n        }\n      }, {\n        key: \"_addActionsView\",\n        value: function _addActionsView() {\n          if (this._areActionsInPanel) {\n            return;\n          }\n\n          this._balloon.add({\n            view: this.actionsView,\n            position: this._getBalloonPositionData()\n          });\n        }\n      }, {\n        key: \"_addFormView\",\n        value: function _addFormView() {\n          if (this._isFormInPanel) {\n            return;\n          }\n\n          var e = this.editor;\n          var t = e.commands.get(\"link\");\n\n          this._balloon.add({\n            view: this.formView,\n            position: this._getBalloonPositionData()\n          });\n\n          if (this._balloon.visibleView === this.formView) {\n            this.formView.urlInputView.select();\n          }\n\n          this.formView.urlInputView.inputView.element.value = t.value || \"\";\n        }\n      }, {\n        key: \"_closeFormView\",\n        value: function _closeFormView() {\n          var e = this.editor.commands.get(\"link\");\n          e.restoreManualDecoratorStates();\n\n          if (e.value !== undefined) {\n            this._removeFormView();\n          } else {\n            this._hideUI();\n          }\n        }\n      }, {\n        key: \"_removeFormView\",\n        value: function _removeFormView() {\n          if (this._isFormInPanel) {\n            this.formView.saveButtonView.focus();\n\n            this._balloon.remove(this.formView);\n\n            this.editor.editing.view.focus();\n          }\n        }\n      }, {\n        key: \"_showUI\",\n        value: function _showUI() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n\n          if (!this._getSelectedLinkElement()) {\n            this._addActionsView();\n\n            if (e) {\n              this._balloon.showStack(\"main\");\n            }\n\n            this._addFormView();\n          } else {\n            if (this._areActionsVisible) {\n              this._addFormView();\n            } else {\n              this._addActionsView();\n            }\n\n            if (e) {\n              this._balloon.showStack(\"main\");\n            }\n          }\n\n          this._startUpdatingUI();\n        }\n      }, {\n        key: \"_hideUI\",\n        value: function _hideUI() {\n          if (!this._isUIInPanel) {\n            return;\n          }\n\n          var e = this.editor;\n          this.stopListening(e.ui, \"update\");\n          this.stopListening(this._balloon, \"change:visibleView\");\n          e.editing.view.focus();\n\n          this._removeFormView();\n\n          this._balloon.remove(this.actionsView);\n        }\n      }, {\n        key: \"_startUpdatingUI\",\n        value: function _startUpdatingUI() {\n          var _this204 = this;\n\n          var e = this.editor;\n          var t = e.editing.view.document;\n\n          var n = this._getSelectedLinkElement();\n\n          var i = s();\n\n          var o = function o() {\n            var e = _this204._getSelectedLinkElement();\n\n            var t = s();\n\n            if (n && !e || !n && t !== i) {\n              _this204._hideUI();\n            } else if (_this204._isUIVisible) {\n              _this204._balloon.updatePosition(_this204._getBalloonPositionData());\n            }\n\n            n = e;\n            i = t;\n          };\n\n          function s() {\n            return t.selection.focus.getAncestors().reverse().find(function (e) {\n              return e.is(\"element\");\n            });\n          }\n\n          this.listenTo(e.ui, \"update\", o);\n          this.listenTo(this._balloon, \"change:visibleView\", o);\n        }\n      }, {\n        key: \"_isFormInPanel\",\n        get: function get() {\n          return this._balloon.hasView(this.formView);\n        }\n      }, {\n        key: \"_areActionsInPanel\",\n        get: function get() {\n          return this._balloon.hasView(this.actionsView);\n        }\n      }, {\n        key: \"_areActionsVisible\",\n        get: function get() {\n          return this._balloon.visibleView === this.actionsView;\n        }\n      }, {\n        key: \"_isUIInPanel\",\n        get: function get() {\n          return this._isFormInPanel || this._areActionsInPanel;\n        }\n      }, {\n        key: \"_isUIVisible\",\n        get: function get() {\n          var e = this._balloon.visibleView;\n          return e == this.formView || this._areActionsVisible;\n        }\n      }, {\n        key: \"_getBalloonPositionData\",\n        value: function _getBalloonPositionData() {\n          var e = this.editor.editing.view;\n          var t = e.document;\n\n          var n = this._getSelectedLinkElement();\n\n          var i = n ? e.domConverter.mapViewToDom(n) : e.domConverter.viewRangeToDom(t.selection.getFirstRange());\n          return {\n            target: i\n          };\n        }\n      }, {\n        key: \"_getSelectedLinkElement\",\n        value: function _getSelectedLinkElement() {\n          var e = this.editor.editing.view;\n          var t = e.document.selection;\n\n          if (t.isCollapsed) {\n            return dA(t.getFirstPosition());\n          } else {\n            var _n206 = t.getFirstRange().getTrimmed();\n\n            var _i165 = dA(_n206.start);\n\n            var _o69 = dA(_n206.end);\n\n            if (!_i165 || _i165 != _o69) {\n              return null;\n            }\n\n            if (e.createRangeIn(_i165).getTrimmed().isEqual(_n206)) {\n              return _i165;\n            } else {\n              return null;\n            }\n          }\n        }\n      }], [{\n        key: \"requires\",\n        get: function get() {\n          return [dy];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"LinkUI\";\n        }\n      }]);\n\n      return lA;\n    }(Ow);\n\n    function dA(e) {\n      return e.getAncestors().find(function (e) {\n        return Ov(e);\n      });\n    }\n\n    var uA = /*#__PURE__*/function (_Ow44) {\n      _inherits(uA, _Ow44);\n\n      var _super134 = _createSuper(uA);\n\n      function uA() {\n        _classCallCheck(this, uA);\n\n        return _super134.apply(this, arguments);\n      }\n\n      _createClass(uA, null, [{\n        key: \"requires\",\n        get: function get() {\n          return [Kv, lA];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"Link\";\n        }\n      }]);\n\n      return uA;\n    }(Ow);\n\n    var hA = /*#__PURE__*/function (_jw13) {\n      _inherits(hA, _jw13);\n\n      var _super135 = _createSuper(hA);\n\n      function hA(e, t) {\n        var _this205;\n\n        _classCallCheck(this, hA);\n\n        _this205 = _super135.call(this, e);\n        _this205.type = t;\n        return _this205;\n      }\n\n      _createClass(hA, [{\n        key: \"refresh\",\n        value: function refresh() {\n          this.value = this._getValue();\n          this.isEnabled = this._checkEnabled();\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var _this206 = this;\n\n          var e = this.editor.model;\n          var t = e.document;\n          var n = Array.from(t.selection.getSelectedBlocks()).filter(function (t) {\n            return mA(t, e.schema);\n          });\n          var i = this.value === true;\n          e.change(function (e) {\n            if (i) {\n              var _t238 = n[n.length - 1].nextSibling;\n              var _i166 = Number.POSITIVE_INFINITY;\n              var _o70 = [];\n\n              while (_t238 && _t238.name == \"listItem\" && _t238.getAttribute(\"listIndent\") !== 0) {\n                var _e263 = _t238.getAttribute(\"listIndent\");\n\n                if (_e263 < _i166) {\n                  _i166 = _e263;\n                }\n\n                var _n207 = _e263 - _i166;\n\n                _o70.push({\n                  element: _t238,\n                  listIndent: _n207\n                });\n\n                _t238 = _t238.nextSibling;\n              }\n\n              _o70 = _o70.reverse();\n\n              var _iterator317 = _createForOfIteratorHelper(_o70),\n                  _step317;\n\n              try {\n                for (_iterator317.s(); !(_step317 = _iterator317.n()).done;) {\n                  var _t239 = _step317.value;\n                  e.setAttribute(\"listIndent\", _t239.listIndent, _t239.element);\n                }\n              } catch (err) {\n                _iterator317.e(err);\n              } finally {\n                _iterator317.f();\n              }\n            }\n\n            if (!i) {\n              var _e264 = Number.POSITIVE_INFINITY;\n\n              var _iterator318 = _createForOfIteratorHelper(n),\n                  _step318;\n\n              try {\n                for (_iterator318.s(); !(_step318 = _iterator318.n()).done;) {\n                  var _t240 = _step318.value;\n\n                  if (_t240.is(\"listItem\") && _t240.getAttribute(\"listIndent\") < _e264) {\n                    _e264 = _t240.getAttribute(\"listIndent\");\n                  }\n                }\n              } catch (err) {\n                _iterator318.e(err);\n              } finally {\n                _iterator318.f();\n              }\n\n              _e264 = _e264 === 0 ? 1 : _e264;\n              fA(n, true, _e264);\n              fA(n, false, _e264);\n            }\n\n            var _iterator319 = _createForOfIteratorHelper(n.reverse()),\n                _step319;\n\n            try {\n              for (_iterator319.s(); !(_step319 = _iterator319.n()).done;) {\n                var _t241 = _step319.value;\n\n                if (i && _t241.name == \"listItem\") {\n                  e.rename(_t241, \"paragraph\");\n                } else if (!i && _t241.name != \"listItem\") {\n                  e.setAttributes({\n                    listType: _this206.type,\n                    listIndent: 0\n                  }, _t241);\n                  e.rename(_t241, \"listItem\");\n                } else if (!i && _t241.name == \"listItem\" && _t241.getAttribute(\"listType\") != _this206.type) {\n                  e.setAttribute(\"listType\", _this206.type, _t241);\n                }\n              }\n            } catch (err) {\n              _iterator319.e(err);\n            } finally {\n              _iterator319.f();\n            }\n          });\n        }\n      }, {\n        key: \"_getValue\",\n        value: function _getValue() {\n          var e = zw(this.editor.model.document.selection.getSelectedBlocks());\n          return !!e && e.is(\"listItem\") && e.getAttribute(\"listType\") == this.type;\n        }\n      }, {\n        key: \"_checkEnabled\",\n        value: function _checkEnabled() {\n          if (this.value) {\n            return true;\n          }\n\n          var e = this.editor.model.document.selection;\n          var t = this.editor.model.schema;\n          var n = zw(e.getSelectedBlocks());\n\n          if (!n) {\n            return false;\n          }\n\n          return mA(n, t);\n        }\n      }]);\n\n      return hA;\n    }(jw);\n\n    function fA(e, t, n) {\n      var i = t ? e[0] : e[e.length - 1];\n\n      if (i.is(\"listItem\")) {\n        var _o71 = i[t ? \"previousSibling\" : \"nextSibling\"];\n\n        var _s38 = i.getAttribute(\"listIndent\");\n\n        while (_o71 && _o71.is(\"listItem\") && _o71.getAttribute(\"listIndent\") >= n) {\n          if (_s38 > _o71.getAttribute(\"listIndent\")) {\n            _s38 = _o71.getAttribute(\"listIndent\");\n          }\n\n          if (_o71.getAttribute(\"listIndent\") == _s38) {\n            e[t ? \"unshift\" : \"push\"](_o71);\n          }\n\n          _o71 = _o71[t ? \"previousSibling\" : \"nextSibling\"];\n        }\n      }\n    }\n\n    function mA(e, t) {\n      return t.checkChild(e.parent, \"listItem\") && !t.isObject(e);\n    }\n\n    var gA = /*#__PURE__*/function (_jw14) {\n      _inherits(gA, _jw14);\n\n      var _super136 = _createSuper(gA);\n\n      function gA(e, t) {\n        var _this207;\n\n        _classCallCheck(this, gA);\n\n        _this207 = _super136.call(this, e);\n        _this207._indentBy = t == \"forward\" ? 1 : -1;\n        return _this207;\n      }\n\n      _createClass(gA, [{\n        key: \"refresh\",\n        value: function refresh() {\n          this.isEnabled = this._checkEnabled();\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var _this208 = this;\n\n          var e = this.editor.model;\n          var t = e.document;\n          var n = Array.from(t.selection.getSelectedBlocks());\n          e.change(function (e) {\n            var t = n[n.length - 1];\n            var i = t.nextSibling;\n\n            while (i && i.name == \"listItem\" && i.getAttribute(\"listIndent\") > t.getAttribute(\"listIndent\")) {\n              n.push(i);\n              i = i.nextSibling;\n            }\n\n            if (_this208._indentBy < 0) {\n              n = n.reverse();\n            }\n\n            var _iterator320 = _createForOfIteratorHelper(n),\n                _step320;\n\n            try {\n              for (_iterator320.s(); !(_step320 = _iterator320.n()).done;) {\n                var _t242 = _step320.value;\n\n                var _n208 = _t242.getAttribute(\"listIndent\") + _this208._indentBy;\n\n                if (_n208 < 0) {\n                  e.rename(_t242, \"paragraph\");\n                } else {\n                  e.setAttribute(\"listIndent\", _n208, _t242);\n                }\n              }\n            } catch (err) {\n              _iterator320.e(err);\n            } finally {\n              _iterator320.f();\n            }\n          });\n        }\n      }, {\n        key: \"_checkEnabled\",\n        value: function _checkEnabled() {\n          var e = zw(this.editor.model.document.selection.getSelectedBlocks());\n\n          if (!e || !e.is(\"listItem\")) {\n            return false;\n          }\n\n          if (this._indentBy > 0) {\n            var _t243 = e.getAttribute(\"listIndent\");\n\n            var _n209 = e.getAttribute(\"listType\");\n\n            var _i167 = e.previousSibling;\n\n            while (_i167 && _i167.is(\"listItem\") && _i167.getAttribute(\"listIndent\") >= _t243) {\n              if (_i167.getAttribute(\"listIndent\") == _t243) {\n                return _i167.getAttribute(\"listType\") == _n209;\n              }\n\n              _i167 = _i167.previousSibling;\n            }\n\n            return false;\n          }\n\n          return true;\n        }\n      }]);\n\n      return gA;\n    }(jw);\n\n    function pA(e) {\n      var t = e.createContainerElement(\"li\");\n      t.getFillerOffset = xA;\n      return t;\n    }\n\n    function bA(e, t) {\n      var n = t.mapper;\n      var i = t.writer;\n      var o = e.getAttribute(\"listType\") == \"numbered\" ? \"ol\" : \"ul\";\n      var s = pA(i);\n      var r = i.createContainerElement(o, null);\n      i.insert(i.createPositionAt(r, 0), s);\n      n.bindElements(e, s);\n      return s;\n    }\n\n    function wA(e, t, n, i) {\n      var o = t.parent;\n      var s = n.mapper;\n      var r = n.writer;\n      var a = s.toViewPosition(i.createPositionBefore(e));\n      var c = kA(e.previousSibling, {\n        sameIndent: true,\n        smallerIndent: true,\n        listIndent: e.getAttribute(\"listIndent\")\n      });\n      var l = e.previousSibling;\n\n      if (c && c.getAttribute(\"listIndent\") == e.getAttribute(\"listIndent\")) {\n        var _e265 = s.toViewElement(c);\n\n        a = r.breakContainer(r.createPositionAfter(_e265));\n      } else {\n        if (l && l.name == \"listItem\") {\n          a = s.toViewPosition(i.createPositionAt(l, \"end\"));\n        } else {\n          a = s.toViewPosition(i.createPositionBefore(e));\n        }\n      }\n\n      a = vA(a);\n      r.insert(a, o);\n\n      if (l && l.name == \"listItem\") {\n        var _e266 = s.toViewElement(l);\n\n        var _n210 = r.createRange(r.createPositionAt(_e266, 0), a);\n\n        var _i168 = _n210.getWalker({\n          ignoreElementEnd: true\n        });\n\n        var _iterator321 = _createForOfIteratorHelper(_i168),\n            _step321;\n\n        try {\n          for (_iterator321.s(); !(_step321 = _iterator321.n()).done;) {\n            var _e267 = _step321.value;\n\n            if (_e267.item.is(\"li\")) {\n              var _n211 = r.breakContainer(r.createPositionBefore(_e267.item));\n\n              var _o72 = _e267.item.parent;\n\n              var _s39 = r.createPositionAt(t, \"end\");\n\n              _A(r, _s39.nodeBefore, _s39.nodeAfter);\n\n              r.move(r.createRangeOn(_o72), _s39);\n              _i168.position = _n211;\n            }\n          }\n        } catch (err) {\n          _iterator321.e(err);\n        } finally {\n          _iterator321.f();\n        }\n      } else {\n        var _n212 = o.nextSibling;\n\n        if (_n212 && (_n212.is(\"ul\") || _n212.is(\"ol\"))) {\n          var _i169 = null;\n\n          var _iterator322 = _createForOfIteratorHelper(_n212.getChildren()),\n              _step322;\n\n          try {\n            for (_iterator322.s(); !(_step322 = _iterator322.n()).done;) {\n              var _t244 = _step322.value;\n\n              var _n213 = s.toModelElement(_t244);\n\n              if (_n213 && _n213.getAttribute(\"listIndent\") > e.getAttribute(\"listIndent\")) {\n                _i169 = _t244;\n              } else {\n                break;\n              }\n            }\n          } catch (err) {\n            _iterator322.e(err);\n          } finally {\n            _iterator322.f();\n          }\n\n          if (_i169) {\n            r.breakContainer(r.createPositionAfter(_i169));\n            r.move(r.createRangeOn(_i169.parent), r.createPositionAt(t, \"end\"));\n          }\n        }\n      }\n\n      _A(r, o, o.nextSibling);\n\n      _A(r, o.previousSibling, o);\n    }\n\n    function _A(e, t, n) {\n      if (!t || !n || t.name != \"ul\" && t.name != \"ol\") {\n        return null;\n      }\n\n      if (t.name != n.name || t.getAttribute(\"class\") !== n.getAttribute(\"class\")) {\n        return null;\n      }\n\n      return e.mergeContainers(e.createPositionAfter(t));\n    }\n\n    function vA(e) {\n      return e.getLastMatchingPosition(function (e) {\n        return e.item.is(\"uiElement\");\n      });\n    }\n\n    function kA(e, t) {\n      var n = !!t.sameIndent;\n      var i = !!t.smallerIndent;\n      var o = t.listIndent;\n      var s = e;\n\n      while (s && s.name == \"listItem\") {\n        var _e268 = s.getAttribute(\"listIndent\");\n\n        if (n && o == _e268 || i && o > _e268) {\n          return s;\n        }\n\n        s = s.previousSibling;\n      }\n\n      return null;\n    }\n\n    function yA(e, t, n, i) {\n      e.ui.componentFactory.add(t, function (o) {\n        var s = e.commands.get(t);\n        var r = new Kb(o);\n        r.set({\n          label: n,\n          icon: i,\n          tooltip: true,\n          isToggleable: true\n        });\n        r.bind(\"isOn\", \"isEnabled\").to(s, \"value\", \"isEnabled\");\n        r.on(\"execute\", function () {\n          e.execute(t);\n          e.editing.view.focus();\n        });\n        return r;\n      });\n    }\n\n    function xA() {\n      var e = !this.isEmpty && (this.getChild(0).name == \"ul\" || this.getChild(0).name == \"ol\");\n\n      if (this.isEmpty || e) {\n        return 0;\n      }\n\n      return Hc.call(this);\n    }\n\n    function AA(e) {\n      return function (t, n, i) {\n        var o = i.consumable;\n\n        if (!o.test(n.item, \"insert\") || !o.test(n.item, \"attribute:listType\") || !o.test(n.item, \"attribute:listIndent\")) {\n          return;\n        }\n\n        o.consume(n.item, \"insert\");\n        o.consume(n.item, \"attribute:listType\");\n        o.consume(n.item, \"attribute:listIndent\");\n        var s = n.item;\n        var r = bA(s, i);\n        wA(s, r, i, e);\n      };\n    }\n\n    function CA(e) {\n      return function (t, n, i) {\n        var o = i.mapper.toViewPosition(n.position).getLastMatchingPosition(function (e) {\n          return !e.item.is(\"li\");\n        });\n        var s = o.nodeAfter;\n        var r = i.writer;\n        r.breakContainer(r.createPositionBefore(s));\n        r.breakContainer(r.createPositionAfter(s));\n        var a = s.parent;\n        var c = a.previousSibling;\n        var l = r.createRangeOn(a);\n        var d = r.remove(l);\n\n        if (c && c.nextSibling) {\n          _A(r, c, c.nextSibling);\n        }\n\n        var u = i.mapper.toModelElement(s);\n        VA(u.getAttribute(\"listIndent\") + 1, n.position, l.start, s, i, e);\n\n        var _iterator323 = _createForOfIteratorHelper(r.createRangeIn(d).getItems()),\n            _step323;\n\n        try {\n          for (_iterator323.s(); !(_step323 = _iterator323.n()).done;) {\n            var _e269 = _step323.value;\n            i.mapper.unbindViewElement(_e269);\n          }\n        } catch (err) {\n          _iterator323.e(err);\n        } finally {\n          _iterator323.f();\n        }\n\n        t.stop();\n      };\n    }\n\n    function TA(e, t, n) {\n      if (!n.consumable.consume(t.item, \"attribute:listType\")) {\n        return;\n      }\n\n      var i = n.mapper.toViewElement(t.item);\n      var o = n.writer;\n      o.breakContainer(o.createPositionBefore(i));\n      o.breakContainer(o.createPositionAfter(i));\n      var s = i.parent;\n      var r = t.attributeNewValue == \"numbered\" ? \"ol\" : \"ul\";\n      o.rename(r, s);\n    }\n\n    function MA(e, t, n) {\n      var i = n.mapper.toViewElement(t.item);\n      var o = i.parent;\n      var s = n.writer;\n\n      _A(s, o, o.nextSibling);\n\n      _A(s, o.previousSibling, o);\n\n      var _iterator324 = _createForOfIteratorHelper(t.item.getChildren()),\n          _step324;\n\n      try {\n        for (_iterator324.s(); !(_step324 = _iterator324.n()).done;) {\n          var _e270 = _step324.value;\n          n.consumable.consume(_e270, \"insert\");\n        }\n      } catch (err) {\n        _iterator324.e(err);\n      } finally {\n        _iterator324.f();\n      }\n    }\n\n    function PA(e) {\n      return function (t, n, i) {\n        if (!i.consumable.consume(n.item, \"attribute:listIndent\")) {\n          return;\n        }\n\n        var o = i.mapper.toViewElement(n.item);\n        var s = i.writer;\n        s.breakContainer(s.createPositionBefore(o));\n        s.breakContainer(s.createPositionAfter(o));\n        var r = o.parent;\n        var a = r.previousSibling;\n        var c = s.createRangeOn(r);\n        s.remove(c);\n\n        if (a && a.nextSibling) {\n          _A(s, a, a.nextSibling);\n        }\n\n        VA(n.attributeOldValue + 1, n.range.start, c.start, o, i, e);\n        wA(n.item, o, i, e);\n\n        var _iterator325 = _createForOfIteratorHelper(n.item.getChildren()),\n            _step325;\n\n        try {\n          for (_iterator325.s(); !(_step325 = _iterator325.n()).done;) {\n            var _e271 = _step325.value;\n            i.consumable.consume(_e271, \"insert\");\n          }\n        } catch (err) {\n          _iterator325.e(err);\n        } finally {\n          _iterator325.f();\n        }\n      };\n    }\n\n    function EA(e, t, n) {\n      if (t.item.name != \"listItem\") {\n        var _e272 = n.mapper.toViewPosition(t.range.start);\n\n        var _i170 = n.writer;\n        var _o73 = [];\n\n        while (_e272.parent.name == \"ul\" || _e272.parent.name == \"ol\") {\n          _e272 = _i170.breakContainer(_e272);\n\n          if (_e272.parent.name != \"li\") {\n            break;\n          }\n\n          var _t245 = _e272;\n\n          var _n214 = _i170.createPositionAt(_e272.parent, \"end\");\n\n          if (!_t245.isEqual(_n214)) {\n            var _e273 = _i170.remove(_i170.createRange(_t245, _n214));\n\n            _o73.push(_e273);\n          }\n\n          _e272 = _i170.createPositionAfter(_e272.parent);\n        }\n\n        if (_o73.length > 0) {\n          for (var _t246 = 0; _t246 < _o73.length; _t246++) {\n            var _n215 = _e272.nodeBefore;\n\n            var _s40 = _i170.insert(_e272, _o73[_t246]);\n\n            _e272 = _s40.end;\n\n            if (_t246 > 0) {\n              var _t247 = _A(_i170, _n215, _n215.nextSibling);\n\n              if (_t247 && _t247.parent == _n215) {\n                _e272.offset--;\n              }\n            }\n          }\n\n          _A(_i170, _e272.nodeBefore, _e272.nodeAfter);\n        }\n      }\n    }\n\n    function SA(e, t, n) {\n      var i = n.mapper.toViewPosition(t.position);\n      var o = i.nodeBefore;\n      var s = i.nodeAfter;\n\n      _A(n.writer, o, s);\n    }\n\n    function IA(e, t, n) {\n      if (n.consumable.consume(t.viewItem, {\n        name: true\n      })) {\n        var _e274 = n.writer;\n\n        var _i171 = _e274.createElement(\"listItem\");\n\n        var _o74 = HA(t.viewItem);\n\n        _e274.setAttribute(\"listIndent\", _o74, _i171);\n\n        var _s41 = t.viewItem.parent && t.viewItem.parent.name == \"ol\" ? \"numbered\" : \"bulleted\";\n\n        _e274.setAttribute(\"listType\", _s41, _i171);\n\n        var _r26 = n.splitToAllowedParent(_i171, t.modelCursor);\n\n        if (!_r26) {\n          return;\n        }\n\n        _e274.insert(_i171, _r26.position);\n\n        var _a15 = zA(_i171, t.viewItem.getChildren(), n);\n\n        t.modelRange = _e274.createRange(t.modelCursor, _a15);\n\n        if (_r26.cursorParent) {\n          t.modelCursor = _e274.createPositionAt(_r26.cursorParent, 0);\n        } else {\n          t.modelCursor = t.modelRange.end;\n        }\n      }\n    }\n\n    function OA(e, t, n) {\n      if (n.consumable.test(t.viewItem, {\n        name: true\n      })) {\n        var _e275 = Array.from(t.viewItem.getChildren());\n\n        for (var _i172 = 0, _e276 = _e275; _i172 < _e276.length; _i172++) {\n          var _t248 = _e276[_i172];\n\n          var _e277 = !(_t248.is(\"li\") || FA(_t248));\n\n          if (_e277) {\n            _t248._remove();\n          }\n        }\n      }\n    }\n\n    function NA(e, t, n) {\n      if (n.consumable.test(t.viewItem, {\n        name: true\n      })) {\n        if (t.viewItem.childCount === 0) {\n          return;\n        }\n\n        var _e278 = _toConsumableArray(t.viewItem.getChildren());\n\n        var _n216 = false;\n        var _i173 = true;\n\n        var _iterator326 = _createForOfIteratorHelper(_e278),\n            _step326;\n\n        try {\n          for (_iterator326.s(); !(_step326 = _iterator326.n()).done;) {\n            var _t249 = _step326.value;\n\n            if (_n216 && !FA(_t249)) {\n              _t249._remove();\n            }\n\n            if (_t249.is(\"text\")) {\n              if (_i173) {\n                _t249._data = _t249.data.replace(/^\\s+/, \"\");\n              }\n\n              if (!_t249.nextSibling || FA(_t249.nextSibling)) {\n                _t249._data = _t249.data.replace(/\\s+$/, \"\");\n              }\n            } else if (FA(_t249)) {\n              _n216 = true;\n            }\n\n            _i173 = false;\n          }\n        } catch (err) {\n          _iterator326.e(err);\n        } finally {\n          _iterator326.f();\n        }\n      }\n    }\n\n    function RA(e) {\n      return function (t, n) {\n        if (n.isPhantom) {\n          return;\n        }\n\n        var i = n.modelPosition.nodeBefore;\n\n        if (i && i.is(\"listItem\")) {\n          var _t250 = n.mapper.toViewElement(i);\n\n          var _o75 = _t250.getAncestors().find(FA);\n\n          var _s42 = e.createPositionAt(_t250, 0).getWalker();\n\n          var _iterator327 = _createForOfIteratorHelper(_s42),\n              _step327;\n\n          try {\n            for (_iterator327.s(); !(_step327 = _iterator327.n()).done;) {\n              var _e279 = _step327.value;\n\n              if (_e279.type == \"elementStart\" && _e279.item.is(\"li\")) {\n                n.viewPosition = _e279.previousPosition;\n                break;\n              } else if (_e279.type == \"elementEnd\" && _e279.item == _o75) {\n                n.viewPosition = _e279.nextPosition;\n                break;\n              }\n            }\n          } catch (err) {\n            _iterator327.e(err);\n          } finally {\n            _iterator327.f();\n          }\n        }\n      };\n    }\n\n    function LA(e) {\n      return function (t, n) {\n        var i = n.viewPosition;\n        var o = i.parent;\n        var s = n.mapper;\n\n        if (o.name == \"ul\" || o.name == \"ol\") {\n          if (!i.isAtEnd) {\n            var _t251 = s.toModelElement(i.nodeAfter);\n\n            n.modelPosition = e.createPositionBefore(_t251);\n          } else {\n            var _t252 = s.toModelElement(i.nodeBefore);\n\n            var _o76 = s.getModelLength(i.nodeBefore);\n\n            n.modelPosition = e.createPositionBefore(_t252).getShiftedBy(_o76);\n          }\n\n          t.stop();\n        } else if (o.name == \"li\" && i.nodeBefore && (i.nodeBefore.name == \"ul\" || i.nodeBefore.name == \"ol\")) {\n          var _r27 = s.toModelElement(o);\n\n          var _a16 = 1;\n          var _c7 = i.nodeBefore;\n\n          while (_c7 && FA(_c7)) {\n            _a16 += s.getModelLength(_c7);\n            _c7 = _c7.previousSibling;\n          }\n\n          n.modelPosition = e.createPositionBefore(_r27).getShiftedBy(_a16);\n          t.stop();\n        }\n      };\n    }\n\n    function jA(e, t) {\n      var n = e.document.differ.getChanges();\n      var i = new Map();\n      var o = false;\n\n      var _iterator328 = _createForOfIteratorHelper(n),\n          _step328;\n\n      try {\n        for (_iterator328.s(); !(_step328 = _iterator328.n()).done;) {\n          var _i175 = _step328.value;\n\n          if (_i175.type == \"insert\" && _i175.name == \"listItem\") {\n            s(_i175.position);\n          } else if (_i175.type == \"insert\" && _i175.name != \"listItem\") {\n            if (_i175.name != \"$text\") {\n              var _n219 = _i175.position.nodeAfter;\n\n              if (_n219.hasAttribute(\"listIndent\")) {\n                t.removeAttribute(\"listIndent\", _n219);\n                o = true;\n              }\n\n              if (_n219.hasAttribute(\"listType\")) {\n                t.removeAttribute(\"listType\", _n219);\n                o = true;\n              }\n\n              var _iterator330 = _createForOfIteratorHelper(Array.from(e.createRangeIn(_n219)).filter(function (e) {\n                return e.item.is(\"listItem\");\n              })),\n                  _step330;\n\n              try {\n                for (_iterator330.s(); !(_step330 = _iterator330.n()).done;) {\n                  var _t254 = _step330.value;\n                  s(_t254.previousPosition);\n                }\n              } catch (err) {\n                _iterator330.e(err);\n              } finally {\n                _iterator330.f();\n              }\n            }\n\n            var _n218 = _i175.position.getShiftedBy(_i175.length);\n\n            s(_n218);\n          } else if (_i175.type == \"remove\" && _i175.name == \"listItem\") {\n            s(_i175.position);\n          } else if (_i175.type == \"attribute\" && _i175.attributeKey == \"listIndent\") {\n            s(_i175.range.start);\n          } else if (_i175.type == \"attribute\" && _i175.attributeKey == \"listType\") {\n            s(_i175.range.start);\n          }\n        }\n      } catch (err) {\n        _iterator328.e(err);\n      } finally {\n        _iterator328.f();\n      }\n\n      var _iterator329 = _createForOfIteratorHelper(i.values()),\n          _step329;\n\n      try {\n        for (_iterator329.s(); !(_step329 = _iterator329.n()).done;) {\n          var _e280 = _step329.value;\n          r(_e280);\n          a(_e280);\n        }\n      } catch (err) {\n        _iterator329.e(err);\n      } finally {\n        _iterator329.f();\n      }\n\n      return o;\n\n      function s(e) {\n        var t = e.nodeBefore;\n\n        if (!t || !t.is(\"listItem\")) {\n          var _t253 = e.nodeAfter;\n\n          if (_t253 && _t253.is(\"listItem\")) {\n            i.set(_t253, _t253);\n          }\n        } else {\n          var _n217 = t;\n\n          if (i.has(_n217)) {\n            return;\n          }\n\n          while (_n217.previousSibling && _n217.previousSibling.is(\"listItem\")) {\n            _n217 = _n217.previousSibling;\n\n            if (i.has(_n217)) {\n              return;\n            }\n          }\n\n          i.set(e.nodeBefore, _n217);\n        }\n      }\n\n      function r(e) {\n        var n = 0;\n        var i = null;\n\n        while (e && e.is(\"listItem\")) {\n          var _s43 = e.getAttribute(\"listIndent\");\n\n          if (_s43 > n) {\n            var _r28 = void 0;\n\n            if (i === null) {\n              i = _s43 - n;\n              _r28 = n;\n            } else {\n              if (i > _s43) {\n                i = _s43;\n              }\n\n              _r28 = _s43 - i;\n            }\n\n            t.setAttribute(\"listIndent\", _r28, e);\n            o = true;\n          } else {\n            i = null;\n            n = e.getAttribute(\"listIndent\") + 1;\n          }\n\n          e = e.nextSibling;\n        }\n      }\n\n      function a(e) {\n        var n = [];\n        var i = null;\n\n        while (e && e.is(\"listItem\")) {\n          var _s44 = e.getAttribute(\"listIndent\");\n\n          if (i && i.getAttribute(\"listIndent\") > _s44) {\n            n = n.slice(0, _s44 + 1);\n          }\n\n          if (_s44 != 0) {\n            if (n[_s44]) {\n              var _i174 = n[_s44];\n\n              if (e.getAttribute(\"listType\") != _i174) {\n                t.setAttribute(\"listType\", _i174, e);\n                o = true;\n              }\n            } else {\n              n[_s44] = e.getAttribute(\"listType\");\n            }\n          }\n\n          i = e;\n          e = e.nextSibling;\n        }\n      }\n    }\n\n    function DA(e, _ref32) {\n      var _ref33 = _slicedToArray(_ref32, 2),\n          t = _ref33[0],\n          n = _ref33[1];\n\n      var i = t.is(\"documentFragment\") ? t.getChild(0) : t;\n      var o;\n\n      if (!n) {\n        o = this.document.selection;\n      } else {\n        o = this.createSelection(n);\n      }\n\n      if (i && i.is(\"listItem\")) {\n        var _e281 = o.getFirstPosition();\n\n        var _t255 = null;\n\n        if (_e281.parent.is(\"listItem\")) {\n          _t255 = _e281.parent;\n        } else if (_e281.nodeBefore && _e281.nodeBefore.is(\"listItem\")) {\n          _t255 = _e281.nodeBefore;\n        }\n\n        if (_t255) {\n          var _e282 = _t255.getAttribute(\"listIndent\");\n\n          if (_e282 > 0) {\n            while (i && i.is(\"listItem\")) {\n              i._setAttribute(\"listIndent\", i.getAttribute(\"listIndent\") + _e282);\n\n              i = i.nextSibling;\n            }\n          }\n        }\n      }\n    }\n\n    function zA(e, t, n) {\n      var i = n.writer,\n          o = n.schema;\n      var s = i.createPositionAfter(e);\n\n      var _iterator331 = _createForOfIteratorHelper(t),\n          _step331;\n\n      try {\n        for (_iterator331.s(); !(_step331 = _iterator331.n()).done;) {\n          var _r29 = _step331.value;\n\n          if (_r29.name == \"ul\" || _r29.name == \"ol\") {\n            s = n.convertItem(_r29, s).modelCursor;\n          } else {\n            var _t256 = n.convertItem(_r29, i.createPositionAt(e, \"end\"));\n\n            var _a17 = _t256.modelRange.start.nodeAfter;\n\n            var _c8 = _a17 && _a17.is(\"element\") && !o.checkChild(e, _a17.name);\n\n            if (_c8) {\n              if (_t256.modelCursor.parent.is(\"listItem\")) {\n                e = _t256.modelCursor.parent;\n              } else {\n                e = BA(_t256.modelCursor);\n              }\n\n              s = i.createPositionAfter(e);\n            }\n          }\n        }\n      } catch (err) {\n        _iterator331.e(err);\n      } finally {\n        _iterator331.f();\n      }\n\n      return s;\n    }\n\n    function BA(e) {\n      var t = new Uh({\n        startPosition: e\n      });\n      var n;\n\n      do {\n        n = t.next();\n      } while (!n.value.item.is(\"listItem\"));\n\n      return n.value.item;\n    }\n\n    function VA(e, t, n, i, o, s) {\n      var r = kA(t.nodeBefore, {\n        sameIndent: true,\n        smallerIndent: true,\n        listIndent: e,\n        foo: \"b\"\n      });\n      var a = o.mapper;\n      var c = o.writer;\n      var l = r ? r.getAttribute(\"listIndent\") : null;\n      var d;\n\n      if (!r) {\n        d = n;\n      } else if (l == e) {\n        var _e283 = a.toViewElement(r).parent;\n        d = c.createPositionAfter(_e283);\n      } else {\n        var _e284 = s.createPositionAt(r, \"end\");\n\n        d = a.toViewPosition(_e284);\n      }\n\n      d = vA(d);\n\n      for (var _i176 = 0, _arr = _toConsumableArray(i.getChildren()); _i176 < _arr.length; _i176++) {\n        var _e285 = _arr[_i176];\n\n        if (FA(_e285)) {\n          d = c.move(c.createRangeOn(_e285), d).end;\n\n          _A(c, _e285, _e285.nextSibling);\n\n          _A(c, _e285.previousSibling, _e285);\n        }\n      }\n    }\n\n    function FA(e) {\n      return e.is(\"ol\") || e.is(\"ul\");\n    }\n\n    function HA(e) {\n      var t = 0;\n      var n = e.parent;\n\n      while (n) {\n        if (n.is(\"li\")) {\n          t++;\n        } else {\n          var _e286 = n.previousSibling;\n\n          if (_e286 && _e286.is(\"li\")) {\n            t++;\n          }\n        }\n\n        n = n.parent;\n      }\n\n      return t;\n    }\n\n    var UA = /*#__PURE__*/function (_Ow45) {\n      _inherits(UA, _Ow45);\n\n      var _super137 = _createSuper(UA);\n\n      function UA() {\n        _classCallCheck(this, UA);\n\n        return _super137.apply(this, arguments);\n      }\n\n      _createClass(UA, [{\n        key: \"init\",\n        value: function init() {\n          var _this209 = this;\n\n          var e = this.editor;\n          e.model.schema.register(\"listItem\", {\n            inheritAllFrom: \"$block\",\n            allowAttributes: [\"listType\", \"listIndent\"]\n          });\n          var t = e.data;\n          var n = e.editing;\n          e.model.document.registerPostFixer(function (t) {\n            return jA(e.model, t);\n          });\n          n.mapper.registerViewToModelLength(\"li\", WA);\n          t.mapper.registerViewToModelLength(\"li\", WA);\n          n.mapper.on(\"modelToViewPosition\", RA(n.view));\n          n.mapper.on(\"viewToModelPosition\", LA(e.model));\n          t.mapper.on(\"modelToViewPosition\", RA(n.view));\n          e.conversion.for(\"editingDowncast\").add(function (t) {\n            t.on(\"insert\", EA, {\n              priority: \"high\"\n            });\n            t.on(\"insert:listItem\", AA(e.model));\n            t.on(\"attribute:listType:listItem\", TA, {\n              priority: \"high\"\n            });\n            t.on(\"attribute:listType:listItem\", MA, {\n              priority: \"low\"\n            });\n            t.on(\"attribute:listIndent:listItem\", PA(e.model));\n            t.on(\"remove:listItem\", CA(e.model));\n            t.on(\"remove\", SA, {\n              priority: \"low\"\n            });\n          });\n          e.conversion.for(\"dataDowncast\").add(function (t) {\n            t.on(\"insert\", EA, {\n              priority: \"high\"\n            });\n            t.on(\"insert:listItem\", AA(e.model));\n          });\n          e.conversion.for(\"upcast\").add(function (e) {\n            e.on(\"element:ul\", OA, {\n              priority: \"high\"\n            });\n            e.on(\"element:ol\", OA, {\n              priority: \"high\"\n            });\n            e.on(\"element:li\", NA, {\n              priority: \"high\"\n            });\n            e.on(\"element:li\", IA);\n          });\n          e.model.on(\"insertContent\", DA, {\n            priority: \"high\"\n          });\n          e.commands.add(\"numberedList\", new hA(e, \"numbered\"));\n          e.commands.add(\"bulletedList\", new hA(e, \"bulleted\"));\n          e.commands.add(\"indentList\", new gA(e, \"forward\"));\n          e.commands.add(\"outdentList\", new gA(e, \"backward\"));\n          var i = n.view.document;\n          this.listenTo(i, \"enter\", function (e, t) {\n            var n = _this209.editor.model.document;\n            var i = n.selection.getLastPosition().parent;\n\n            if (n.selection.isCollapsed && i.name == \"listItem\" && i.isEmpty) {\n              _this209.editor.execute(\"outdentList\");\n\n              t.preventDefault();\n              e.stop();\n            }\n          });\n          this.listenTo(i, \"delete\", function (e, t) {\n            if (t.direction !== \"backward\") {\n              return;\n            }\n\n            var n = _this209.editor.model.document.selection;\n\n            if (!n.isCollapsed) {\n              return;\n            }\n\n            var i = n.getFirstPosition();\n\n            if (!i.isAtStart) {\n              return;\n            }\n\n            var o = i.parent;\n\n            if (o.name !== \"listItem\") {\n              return;\n            }\n\n            var s = o.previousSibling && o.previousSibling.name === \"listItem\";\n\n            if (s) {\n              return;\n            }\n\n            _this209.editor.execute(\"outdentList\");\n\n            t.preventDefault();\n            e.stop();\n          }, {\n            priority: \"high\"\n          });\n\n          var o = function o(e) {\n            return function (t, n) {\n              var i = _this209.editor.commands.get(e);\n\n              if (i.isEnabled) {\n                _this209.editor.execute(e);\n\n                n();\n              }\n            };\n          };\n\n          e.keystrokes.set(\"Tab\", o(\"indentList\"));\n          e.keystrokes.set(\"Shift+Tab\", o(\"outdentList\"));\n        }\n      }, {\n        key: \"afterInit\",\n        value: function afterInit() {\n          var e = this.editor.commands;\n          var t = e.get(\"indent\");\n          var n = e.get(\"outdent\");\n\n          if (t) {\n            t.registerChildCommand(e.get(\"indentList\"));\n          }\n\n          if (n) {\n            n.registerChildCommand(e.get(\"outdentList\"));\n          }\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"ListEditing\";\n        }\n      }, {\n        key: \"requires\",\n        get: function get() {\n          return [vk];\n        }\n      }]);\n\n      return UA;\n    }(Ow);\n\n    function WA(e) {\n      var t = 1;\n\n      var _iterator332 = _createForOfIteratorHelper(e.getChildren()),\n          _step332;\n\n      try {\n        for (_iterator332.s(); !(_step332 = _iterator332.n()).done;) {\n          var _n220 = _step332.value;\n\n          if (_n220.name == \"ul\" || _n220.name == \"ol\") {\n            var _iterator333 = _createForOfIteratorHelper(_n220.getChildren()),\n                _step333;\n\n            try {\n              for (_iterator333.s(); !(_step333 = _iterator333.n()).done;) {\n                var _e287 = _step333.value;\n                t += WA(_e287);\n              }\n            } catch (err) {\n              _iterator333.e(err);\n            } finally {\n              _iterator333.f();\n            }\n          }\n        }\n      } catch (err) {\n        _iterator332.e(err);\n      } finally {\n        _iterator332.f();\n      }\n\n      return t;\n    }\n\n    var $A = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zM3.5 3v5H2V3.7H1v-1h2.5V3zM.343 17.857l2.59-3.257H2.92a.6.6 0 1 0-1.04 0H.302a2 2 0 1 1 3.995 0h-.001c-.048.405-.16.734-.333.988-.175.254-.59.692-1.244 1.312H4.3v1h-4l.043-.043zM7 14.75a.75.75 0 0 1 .75-.75h9.5a.75.75 0 1 1 0 1.5h-9.5a.75.75 0 0 1-.75-.75z\"/></svg>';\n    var qA = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M7 5.75c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0C1 4.784 1.777 4 2.75 4c.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75C1.784 7.5 1 6.723 1 5.75zm6 9c0 .414.336.75.75.75h9.5a.75.75 0 1 0 0-1.5h-9.5a.75.75 0 0 0-.75.75zm-6 0c0-.966.777-1.75 1.75-1.75.966 0 1.75.777 1.75 1.75 0 .966-.777 1.75-1.75 1.75-.966 0-1.75-.777-1.75-1.75z\"/></svg>';\n\n    var YA = /*#__PURE__*/function (_Ow46) {\n      _inherits(YA, _Ow46);\n\n      var _super138 = _createSuper(YA);\n\n      function YA() {\n        _classCallCheck(this, YA);\n\n        return _super138.apply(this, arguments);\n      }\n\n      _createClass(YA, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor.t;\n          yA(this.editor, \"numberedList\", e(\"k\"), $A);\n          yA(this.editor, \"bulletedList\", e(\"l\"), qA);\n        }\n      }]);\n\n      return YA;\n    }(Ow);\n\n    var JA = /*#__PURE__*/function (_Ow47) {\n      _inherits(JA, _Ow47);\n\n      var _super139 = _createSuper(JA);\n\n      function JA() {\n        _classCallCheck(this, JA);\n\n        return _super139.apply(this, arguments);\n      }\n\n      _createClass(JA, null, [{\n        key: \"requires\",\n        get: function get() {\n          return [UA, YA];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"List\";\n        }\n      }]);\n\n      return JA;\n    }(Ow);\n\n    function QA(e, t) {\n      return function (e) {\n        e.on(\"attribute:url:media\", n);\n      };\n\n      function n(n, i, o) {\n        if (!o.consumable.consume(i.item, n.name)) {\n          return;\n        }\n\n        var s = i.attributeNewValue;\n        var r = o.writer;\n        var a = o.mapper.toViewElement(i.item);\n        r.remove(r.createRangeIn(a));\n        var c = e.getMediaViewElement(r, s, t);\n        r.insert(r.createPositionAt(a, 0), c);\n      }\n    }\n\n    function XA(e, t, n) {\n      t.setCustomProperty(\"media\", true, e);\n      return h_(e, t, {\n        label: n\n      });\n    }\n\n    function GA(e) {\n      var t = e.getSelectedElement();\n\n      if (t && KA(t)) {\n        return t;\n      }\n\n      return null;\n    }\n\n    function KA(e) {\n      return !!e.getCustomProperty(\"media\") && u_(e);\n    }\n\n    function ZA(e, t, n, i) {\n      var o = e.createContainerElement(\"figure\", {\n        class: \"media\"\n      });\n      o.getFillerOffset = nC;\n      e.insert(e.createPositionAt(o, 0), t.getMediaViewElement(e, n, i));\n      return o;\n    }\n\n    function eC(e) {\n      var t = e.getSelectedElement();\n\n      if (t && t.is(\"media\")) {\n        return t;\n      }\n\n      return null;\n    }\n\n    function tC(e, t, n) {\n      e.change(function (i) {\n        var o = i.createElement(\"media\", {\n          url: t\n        });\n        e.insertContent(o, n);\n        i.setSelection(o, \"on\");\n      });\n    }\n\n    function nC() {\n      return null;\n    }\n\n    var iC = /*#__PURE__*/function (_jw15) {\n      _inherits(iC, _jw15);\n\n      var _super140 = _createSuper(iC);\n\n      function iC() {\n        _classCallCheck(this, iC);\n\n        return _super140.apply(this, arguments);\n      }\n\n      _createClass(iC, [{\n        key: \"refresh\",\n        value: function refresh() {\n          var e = this.editor.model;\n          var t = e.document.selection;\n          var n = e.schema;\n          var i = t.getFirstPosition();\n          var o = eC(t);\n          var s = i.parent;\n\n          if (s != s.root) {\n            s = s.parent;\n          }\n\n          this.value = o ? o.getAttribute(\"url\") : null;\n          this.isEnabled = n.checkChild(s, \"media\");\n        }\n      }, {\n        key: \"execute\",\n        value: function execute(e) {\n          var t = this.editor.model;\n          var n = t.document.selection;\n          var i = eC(n);\n\n          if (i) {\n            t.change(function (t) {\n              t.setAttribute(\"url\", e, i);\n            });\n          } else {\n            var _i177 = b_(n, t);\n\n            tC(t, e, _i177);\n          }\n        }\n      }]);\n\n      return iC;\n    }(jw);\n\n    var oC = '<svg viewBox=\"0 0 64 42\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M47.426 17V3.713L63.102 0v19.389h-.001l.001.272c0 1.595-2.032 3.43-4.538 4.098-2.506.668-4.538-.083-4.538-1.678 0-1.594 2.032-3.43 4.538-4.098.914-.244 2.032-.565 2.888-.603V4.516L49.076 7.447v9.556A1.014 1.014 0 0 0 49 17h-1.574zM29.5 17h-8.343a7.073 7.073 0 1 0-4.657 4.06v3.781H3.3a2.803 2.803 0 0 1-2.8-2.804V8.63a2.803 2.803 0 0 1 2.8-2.805h4.082L8.58 2.768A1.994 1.994 0 0 1 10.435 1.5h8.985c.773 0 1.477.448 1.805 1.149l1.488 3.177H26.7c1.546 0 2.8 1.256 2.8 2.805V17zm-11.637 0H17.5a1 1 0 0 0-1 1v.05A4.244 4.244 0 1 1 17.863 17zm29.684 2c.97 0 .953-.048.953.889v20.743c0 .953.016.905-.953.905H19.453c-.97 0-.953.048-.953-.905V19.89c0-.937-.016-.889.97-.889h28.077zm-4.701 19.338V22.183H24.154v16.155h18.692zM20.6 21.375v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616v-1.616H20.6zm0 3.231v1.616h1.616V37.53H20.6zm24.233-16.155v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615v-1.616h-1.615zm0 3.231v1.616h1.615V37.53h-1.615zM29.485 25.283a.4.4 0 0 1 .593-.35l9.05 4.977a.4.4 0 0 1 0 .701l-9.05 4.978a.4.4 0 0 1-.593-.35v-9.956z\"/></svg>';\n    var sC = \"0 0 64 42\";\n\n    var rC = /*#__PURE__*/function () {\n      function rC(e, t) {\n        _classCallCheck(this, rC);\n\n        var n = t.providers;\n        var i = t.extraProviders || [];\n        var o = new Set(t.removeProviders);\n        var s = n.concat(i).filter(function (e) {\n          var t = e.name;\n\n          if (!t) {\n            console.warn(Object(rr[\"a\"])(\"media-embed-no-provider-name: The configured media provider has no name and cannot be used.\"), {\n              provider: e\n            });\n            return false;\n          }\n\n          return !o.has(t);\n        });\n        this.locale = e;\n        this.providerDefinitions = s;\n      }\n\n      _createClass(rC, [{\n        key: \"hasMedia\",\n        value: function hasMedia(e) {\n          return !!this._getMedia(e);\n        }\n      }, {\n        key: \"getMediaViewElement\",\n        value: function getMediaViewElement(e, t, n) {\n          return this._getMedia(t).getViewElement(e, n);\n        }\n      }, {\n        key: \"_getMedia\",\n        value: function _getMedia(e) {\n          if (!e) {\n            return new aC(this.locale);\n          }\n\n          e = e.trim();\n\n          var _iterator334 = _createForOfIteratorHelper(this.providerDefinitions),\n              _step334;\n\n          try {\n            for (_iterator334.s(); !(_step334 = _iterator334.n()).done;) {\n              var _t257 = _step334.value;\n              var _n221 = _t257.html;\n              var _i178 = _t257.url;\n\n              if (!Array.isArray(_i178)) {\n                _i178 = [_i178];\n              }\n\n              var _iterator335 = _createForOfIteratorHelper(_i178),\n                  _step335;\n\n              try {\n                for (_iterator335.s(); !(_step335 = _iterator335.n()).done;) {\n                  var _t258 = _step335.value;\n\n                  var _i179 = this._getUrlMatches(e, _t258);\n\n                  if (_i179) {\n                    return new aC(this.locale, e, _i179, _n221);\n                  }\n                }\n              } catch (err) {\n                _iterator335.e(err);\n              } finally {\n                _iterator335.f();\n              }\n            }\n          } catch (err) {\n            _iterator334.e(err);\n          } finally {\n            _iterator334.f();\n          }\n\n          return null;\n        }\n      }, {\n        key: \"_getUrlMatches\",\n        value: function _getUrlMatches(e, t) {\n          var n = e.match(t);\n\n          if (n) {\n            return n;\n          }\n\n          var i = e.replace(/^https?:\\/\\//, \"\");\n          n = i.match(t);\n\n          if (n) {\n            return n;\n          }\n\n          i = i.replace(/^www\\./, \"\");\n          n = i.match(t);\n\n          if (n) {\n            return n;\n          }\n\n          return null;\n        }\n      }]);\n\n      return rC;\n    }();\n\n    var aC = /*#__PURE__*/function () {\n      function aC(e, t, n, i) {\n        _classCallCheck(this, aC);\n\n        this.url = this._getValidUrl(t);\n        this._t = e.t;\n        this._match = n;\n        this._previewRenderer = i;\n      }\n\n      _createClass(aC, [{\n        key: \"getViewElement\",\n        value: function getViewElement(e, t) {\n          var n = {};\n\n          if (t.renderForEditingView || t.renderMediaPreview && this.url && this._previewRenderer) {\n            if (this.url) {\n              n[\"data-oembed-url\"] = this.url;\n            }\n\n            if (t.renderForEditingView) {\n              n.class = \"ck-media__wrapper\";\n            }\n\n            var _i180 = this._getPreviewHtml(t);\n\n            return e.createUIElement(\"div\", n, function (e) {\n              var t = this.toDomElement(e);\n              t.innerHTML = _i180;\n              return t;\n            });\n          } else {\n            if (this.url) {\n              n.url = this.url;\n            }\n\n            return e.createEmptyElement(\"oembed\", n);\n          }\n        }\n      }, {\n        key: \"_getPreviewHtml\",\n        value: function _getPreviewHtml(e) {\n          if (this._previewRenderer) {\n            return this._previewRenderer(this._match);\n          } else {\n            if (this.url && e.renderForEditingView) {\n              return this._getPlaceholderHtml();\n            }\n\n            return \"\";\n          }\n        }\n      }, {\n        key: \"_getPlaceholderHtml\",\n        value: function _getPlaceholderHtml() {\n          var e = new Xb();\n          var t = new Jb();\n          e.text = this._t(\"Open media in new tab\");\n          t.content = oC;\n          t.viewBox = sC;\n          var n = new Hp({\n            tag: \"div\",\n            attributes: {\n              class: \"ck ck-reset_all ck-media__placeholder\"\n            },\n            children: [{\n              tag: \"div\",\n              attributes: {\n                class: \"ck-media__placeholder__icon\"\n              },\n              children: [t]\n            }, {\n              tag: \"a\",\n              attributes: {\n                class: \"ck-media__placeholder__url\",\n                target: \"_blank\",\n                rel: \"noopener noreferrer\",\n                href: this.url\n              },\n              children: [{\n                tag: \"span\",\n                attributes: {\n                  class: \"ck-media__placeholder__url__text\"\n                },\n                children: [this.url]\n              }, e]\n            }]\n          }).render();\n          return n.outerHTML;\n        }\n      }, {\n        key: \"_getValidUrl\",\n        value: function _getValidUrl(e) {\n          if (!e) {\n            return null;\n          }\n\n          if (e.match(/^https?/)) {\n            return e;\n          }\n\n          return \"https://\" + e;\n        }\n      }]);\n\n      return aC;\n    }();\n\n    var cC = n(79);\n\n    var lC = /*#__PURE__*/function (_Ow48) {\n      _inherits(lC, _Ow48);\n\n      var _super141 = _createSuper(lC);\n\n      function lC(e) {\n        var _this210;\n\n        _classCallCheck(this, lC);\n\n        _this210 = _super141.call(this, e);\n        e.config.define(\"mediaEmbed\", {\n          providers: [{\n            name: \"dailymotion\",\n            url: /^dailymotion\\.com\\/video\\/(\\w+)/,\n            html: function html(e) {\n              var t = e[1];\n              return '<div style=\"position: relative; padding-bottom: 100%; height: 0; \">' + \"<iframe src=\\\"https://www.dailymotion.com/embed/video/\".concat(t, \"\\\" \") + 'style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" ' + 'frameborder=\"0\" width=\"480\" height=\"270\" allowfullscreen allow=\"autoplay\">' + \"</iframe>\" + \"</div>\";\n            }\n          }, {\n            name: \"spotify\",\n            url: [/^open\\.spotify\\.com\\/(artist\\/\\w+)/, /^open\\.spotify\\.com\\/(album\\/\\w+)/, /^open\\.spotify\\.com\\/(track\\/\\w+)/],\n            html: function html(e) {\n              var t = e[1];\n              return '<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 126%;\">' + \"<iframe src=\\\"https://open.spotify.com/embed/\".concat(t, \"\\\" \") + 'style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" ' + 'frameborder=\"0\" allowtransparency=\"true\" allow=\"encrypted-media\">' + \"</iframe>\" + \"</div>\";\n            }\n          }, {\n            name: \"youtube\",\n            url: [/^(?:m\\.)?youtube\\.com\\/watch\\?v=([\\w-]+)/, /^(?:m\\.)?youtube\\.com\\/v\\/([\\w-]+)/, /^youtube\\.com\\/embed\\/([\\w-]+)/, /^youtu\\.be\\/([\\w-]+)/],\n            html: function html(e) {\n              var t = e[1];\n              return '<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;\">' + \"<iframe src=\\\"https://www.youtube.com/embed/\".concat(t, \"\\\" \") + 'style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" ' + 'frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen>' + \"</iframe>\" + \"</div>\";\n            }\n          }, {\n            name: \"vimeo\",\n            url: [/^vimeo\\.com\\/(\\d+)/, /^vimeo\\.com\\/[^/]+\\/[^/]+\\/video\\/(\\d+)/, /^vimeo\\.com\\/album\\/[^/]+\\/video\\/(\\d+)/, /^vimeo\\.com\\/channels\\/[^/]+\\/(\\d+)/, /^vimeo\\.com\\/groups\\/[^/]+\\/videos\\/(\\d+)/, /^vimeo\\.com\\/ondemand\\/[^/]+\\/(\\d+)/, /^player\\.vimeo\\.com\\/video\\/(\\d+)/],\n            html: function html(e) {\n              var t = e[1];\n              return '<div style=\"position: relative; padding-bottom: 100%; height: 0; padding-bottom: 56.2493%;\">' + \"<iframe src=\\\"https://player.vimeo.com/video/\".concat(t, \"\\\" \") + 'style=\"position: absolute; width: 100%; height: 100%; top: 0; left: 0;\" ' + 'frameborder=\"0\" webkitallowfullscreen mozallowfullscreen allowfullscreen>' + \"</iframe>\" + \"</div>\";\n            }\n          }, {\n            name: \"instagram\",\n            url: /^instagram\\.com\\/p\\/(\\w+)/\n          }, {\n            name: \"twitter\",\n            url: /^twitter\\.com/\n          }, {\n            name: \"googleMaps\",\n            url: /^google\\.com\\/maps/\n          }, {\n            name: \"flickr\",\n            url: /^flickr\\.com/\n          }, {\n            name: \"facebook\",\n            url: /^facebook\\.com/\n          }]\n        });\n        _this210.registry = new rC(e.locale, e.config.get(\"mediaEmbed\"));\n        return _this210;\n      }\n\n      _createClass(lC, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          var t = e.model.schema;\n          var n = e.t;\n          var i = e.conversion;\n          var o = e.config.get(\"mediaEmbed.previewsInData\");\n          var s = this.registry;\n          e.commands.add(\"mediaEmbed\", new iC(e));\n          t.register(\"media\", {\n            isObject: true,\n            isBlock: true,\n            allowWhere: \"$block\",\n            allowAttributes: [\"url\"]\n          });\n          i.for(\"dataDowncast\").elementToElement({\n            model: \"media\",\n            view: function view(e, t) {\n              var n = e.getAttribute(\"url\");\n              return ZA(t, s, n, {\n                renderMediaPreview: n && o\n              });\n            }\n          });\n          i.for(\"dataDowncast\").add(QA(s, {\n            renderMediaPreview: o\n          }));\n          i.for(\"editingDowncast\").elementToElement({\n            model: \"media\",\n            view: function view(e, t) {\n              var i = e.getAttribute(\"url\");\n              var o = ZA(t, s, i, {\n                renderForEditingView: true\n              });\n              return XA(o, t, n(\"m\"));\n            }\n          });\n          i.for(\"editingDowncast\").add(QA(s, {\n            renderForEditingView: true\n          }));\n          i.for(\"upcast\").elementToElement({\n            view: {\n              name: \"oembed\",\n              attributes: {\n                url: true\n              }\n            },\n            model: function model(e, t) {\n              var n = e.getAttribute(\"url\");\n\n              if (s.hasMedia(n)) {\n                return t.createElement(\"media\", {\n                  url: n\n                });\n              }\n            }\n          }).elementToElement({\n            view: {\n              name: \"div\",\n              attributes: {\n                \"data-oembed-url\": true\n              }\n            },\n            model: function model(e, t) {\n              var n = e.getAttribute(\"data-oembed-url\");\n\n              if (s.hasMedia(n)) {\n                return t.createElement(\"media\", {\n                  url: n\n                });\n              }\n            }\n          });\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"MediaEmbedEditing\";\n        }\n      }]);\n\n      return lC;\n    }(Ow);\n\n    var dC = new Map();\n\n    function uC(e, t, n) {\n      var i = dC.get(e);\n\n      if (!i) {\n        i = new Map();\n        dC.set(e, i);\n      }\n\n      i.set(t, n);\n    }\n\n    function hC(e, t) {\n      var n = dC.get(e);\n\n      if (n && n.has(t)) {\n        return n.get(t);\n      }\n\n      return fC;\n    }\n\n    function fC(e) {\n      return [e];\n    }\n\n    function mC(e, t) {\n      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var i = hC(e.constructor, t.constructor);\n\n      try {\n        e = e.clone();\n        return i(e, t, n);\n      } catch (e) {\n        throw e;\n      }\n    }\n\n    function gC(e, t, n) {\n      e = e.slice();\n      t = t.slice();\n      var i = new pC(n.document, n.useRelations, n.forceWeakRemove);\n      i.setOriginalOperations(e);\n      i.setOriginalOperations(t);\n      var o = i.originalOperations;\n\n      if (e.length == 0 || t.length == 0) {\n        return {\n          operationsA: e,\n          operationsB: t,\n          originalOperations: o\n        };\n      }\n\n      var s = new WeakMap();\n\n      var _iterator336 = _createForOfIteratorHelper(e),\n          _step336;\n\n      try {\n        for (_iterator336.s(); !(_step336 = _iterator336.n()).done;) {\n          var _t260 = _step336.value;\n          s.set(_t260, 0);\n        }\n      } catch (err) {\n        _iterator336.e(err);\n      } finally {\n        _iterator336.f();\n      }\n\n      var r = {\n        nextBaseVersionA: e[e.length - 1].baseVersion + 1,\n        nextBaseVersionB: t[t.length - 1].baseVersion + 1,\n        originalOperationsACount: e.length,\n        originalOperationsBCount: t.length\n      };\n      var a = 0;\n\n      while (a < e.length) {\n        var _e288, _t259;\n\n        var _n222 = e[a];\n\n        var _o77 = s.get(_n222);\n\n        if (_o77 == t.length) {\n          a++;\n          continue;\n        }\n\n        var _r30 = t[_o77];\n\n        var _c9 = mC(_n222, _r30, i.getContext(_n222, _r30, true));\n\n        var _l4 = mC(_r30, _n222, i.getContext(_r30, _n222, false));\n\n        i.updateRelation(_n222, _r30);\n        i.setOriginalOperations(_c9, _n222);\n        i.setOriginalOperations(_l4, _r30);\n\n        var _iterator337 = _createForOfIteratorHelper(_c9),\n            _step337;\n\n        try {\n          for (_iterator337.s(); !(_step337 = _iterator337.n()).done;) {\n            var _e289 = _step337.value;\n            s.set(_e289, _o77 + _l4.length);\n          }\n        } catch (err) {\n          _iterator337.e(err);\n        } finally {\n          _iterator337.f();\n        }\n\n        (_e288 = e).splice.apply(_e288, [a, 1].concat(_toConsumableArray(_c9)));\n\n        (_t259 = t).splice.apply(_t259, [_o77, 1].concat(_toConsumableArray(_l4)));\n      }\n\n      if (n.padWithNoOps) {\n        var _n223 = e.length - r.originalOperationsACount;\n\n        var _i181 = t.length - r.originalOperationsBCount;\n\n        wC(e, _i181 - _n223);\n        wC(t, _n223 - _i181);\n      }\n\n      bC(e, r.nextBaseVersionB);\n      bC(t, r.nextBaseVersionA);\n      return {\n        operationsA: e,\n        operationsB: t,\n        originalOperations: o\n      };\n    }\n\n    var pC = /*#__PURE__*/function () {\n      function pC(e, t) {\n        var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n        _classCallCheck(this, pC);\n\n        this.originalOperations = new Map();\n        this._history = e.history;\n        this._useRelations = t;\n        this._forceWeakRemove = !!n;\n        this._relations = new Map();\n      }\n\n      _createClass(pC, [{\n        key: \"setOriginalOperations\",\n        value: function setOriginalOperations(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n          var n = t ? this.originalOperations.get(t) : null;\n\n          var _iterator338 = _createForOfIteratorHelper(e),\n              _step338;\n\n          try {\n            for (_iterator338.s(); !(_step338 = _iterator338.n()).done;) {\n              var _t261 = _step338.value;\n              this.originalOperations.set(_t261, n || _t261);\n            }\n          } catch (err) {\n            _iterator338.e(err);\n          } finally {\n            _iterator338.f();\n          }\n        }\n      }, {\n        key: \"updateRelation\",\n        value: function updateRelation(e, t) {\n          switch (e.constructor) {\n            case Zm:\n              {\n                switch (t.constructor) {\n                  case og:\n                    {\n                      if (e.targetPosition.isEqual(t.sourcePosition) || t.movedRange.containsPosition(e.targetPosition)) {\n                        this._setRelation(e, t, \"insertAtSource\");\n                      } else if (e.targetPosition.isEqual(t.deletionPosition)) {\n                        this._setRelation(e, t, \"insertBetween\");\n                      } else if (e.targetPosition.isAfter(t.sourcePosition)) {\n                        this._setRelation(e, t, \"moveTargetAfter\");\n                      }\n\n                      break;\n                    }\n\n                  case Zm:\n                    {\n                      if (e.targetPosition.isEqual(t.sourcePosition) || e.targetPosition.isBefore(t.sourcePosition)) {\n                        this._setRelation(e, t, \"insertBefore\");\n                      } else {\n                        this._setRelation(e, t, \"insertAfter\");\n                      }\n\n                      break;\n                    }\n                }\n\n                break;\n              }\n\n            case sg:\n              {\n                switch (t.constructor) {\n                  case og:\n                    {\n                      if (e.splitPosition.isBefore(t.sourcePosition)) {\n                        this._setRelation(e, t, \"splitBefore\");\n                      }\n\n                      break;\n                    }\n\n                  case Zm:\n                    {\n                      if (e.splitPosition.isEqual(t.sourcePosition) || e.splitPosition.isBefore(t.sourcePosition)) {\n                        this._setRelation(e, t, \"splitBefore\");\n                      }\n\n                      break;\n                    }\n                }\n\n                break;\n              }\n\n            case og:\n              {\n                switch (t.constructor) {\n                  case og:\n                    {\n                      if (!e.targetPosition.isEqual(t.sourcePosition)) {\n                        this._setRelation(e, t, \"mergeTargetNotMoved\");\n                      }\n\n                      if (e.sourcePosition.isEqual(t.targetPosition)) {\n                        this._setRelation(e, t, \"mergeSourceNotMoved\");\n                      }\n\n                      if (e.sourcePosition.isEqual(t.sourcePosition)) {\n                        this._setRelation(e, t, \"mergeSameElement\");\n                      }\n\n                      break;\n                    }\n\n                  case sg:\n                    {\n                      if (e.sourcePosition.isEqual(t.splitPosition)) {\n                        this._setRelation(e, t, \"splitAtSource\");\n                      }\n                    }\n                }\n\n                break;\n              }\n\n            case tg:\n              {\n                var _n224 = e.newRange;\n\n                if (!_n224) {\n                  return;\n                }\n\n                switch (t.constructor) {\n                  case Zm:\n                    {\n                      var _i182 = qh._createFromPositionAndShift(t.sourcePosition, t.howMany);\n\n                      var _o78 = _i182.containsPosition(_n224.start) || _i182.start.isEqual(_n224.start);\n\n                      var _s45 = _i182.containsPosition(_n224.end) || _i182.end.isEqual(_n224.end);\n\n                      if ((_o78 || _s45) && !_i182.containsRange(_n224)) {\n                        this._setRelation(e, t, {\n                          side: _o78 ? \"left\" : \"right\",\n                          path: _o78 ? _n224.start.path.slice() : _n224.end.path.slice()\n                        });\n                      }\n\n                      break;\n                    }\n\n                  case og:\n                    {\n                      var _i183 = _n224.start.isEqual(t.targetPosition);\n\n                      var _o79 = _n224.start.isEqual(t.deletionPosition);\n\n                      var _s46 = _n224.end.isEqual(t.deletionPosition);\n\n                      var _r31 = _n224.end.isEqual(t.sourcePosition);\n\n                      if (_i183 || _o79 || _s46 || _r31) {\n                        this._setRelation(e, t, {\n                          wasInLeftElement: _i183,\n                          wasStartBeforeMergedElement: _o79,\n                          wasEndBeforeMergedElement: _s46,\n                          wasInRightElement: _r31\n                        });\n                      }\n\n                      break;\n                    }\n                }\n\n                break;\n              }\n          }\n        }\n      }, {\n        key: \"getContext\",\n        value: function getContext(e, t, n) {\n          return {\n            aIsStrong: n,\n            aWasUndone: this._wasUndone(e),\n            bWasUndone: this._wasUndone(t),\n            abRelation: this._useRelations ? this._getRelation(e, t) : null,\n            baRelation: this._useRelations ? this._getRelation(t, e) : null,\n            forceWeakRemove: this._forceWeakRemove\n          };\n        }\n      }, {\n        key: \"_wasUndone\",\n        value: function _wasUndone(e) {\n          var t = this.originalOperations.get(e);\n          return t.wasUndone || this._history.isUndoneOperation(t);\n        }\n      }, {\n        key: \"_getRelation\",\n        value: function _getRelation(e, t) {\n          var n = this.originalOperations.get(t);\n\n          var i = this._history.getUndoneOperation(n);\n\n          if (!i) {\n            return null;\n          }\n\n          var o = this.originalOperations.get(e);\n\n          var s = this._relations.get(o);\n\n          if (s) {\n            return s.get(i) || null;\n          }\n\n          return null;\n        }\n      }, {\n        key: \"_setRelation\",\n        value: function _setRelation(e, t, n) {\n          var i = this.originalOperations.get(e);\n          var o = this.originalOperations.get(t);\n\n          var s = this._relations.get(i);\n\n          if (!s) {\n            s = new Map();\n\n            this._relations.set(i, s);\n          }\n\n          s.set(o, n);\n        }\n      }]);\n\n      return pC;\n    }();\n\n    function bC(e, t) {\n      var _iterator339 = _createForOfIteratorHelper(e),\n          _step339;\n\n      try {\n        for (_iterator339.s(); !(_step339 = _iterator339.n()).done;) {\n          var _n225 = _step339.value;\n          _n225.baseVersion = t++;\n        }\n      } catch (err) {\n        _iterator339.e(err);\n      } finally {\n        _iterator339.f();\n      }\n    }\n\n    function wC(e, t) {\n      for (var _n226 = 0; _n226 < t; _n226++) {\n        e.push(new Pg(0));\n      }\n    }\n\n    uC(Gm, Gm, function (e, t, n) {\n      if (e.key === t.key) {\n        var _i184 = e.range.getDifference(t.range).map(function (t) {\n          return new Gm(t, e.key, e.oldValue, e.newValue, 0);\n        });\n\n        var _o80 = e.range.getIntersection(t.range);\n\n        if (_o80) {\n          if (n.aIsStrong) {\n            _i184.push(new Gm(_o80, t.key, t.newValue, e.newValue, 0));\n          }\n        }\n\n        if (_i184.length == 0) {\n          return [new Pg(0)];\n        }\n\n        return _i184;\n      } else {\n        return [e];\n      }\n    });\n    uC(Gm, eg, function (e, t) {\n      if (e.range.start.hasSameParentAs(t.position) && e.range.containsPosition(t.position)) {\n        var _n227 = e.range._getTransformedByInsertion(t.position, t.howMany, !t.shouldReceiveAttributes);\n\n        var _i185 = _n227.map(function (t) {\n          return new Gm(t, e.key, e.oldValue, e.newValue, e.baseVersion);\n        });\n\n        if (t.shouldReceiveAttributes) {\n          var _n228 = _C(t, e.key, e.oldValue);\n\n          if (_n228) {\n            _i185.unshift(_n228);\n          }\n        }\n\n        return _i185;\n      }\n\n      e.range = e.range._getTransformedByInsertion(t.position, t.howMany, false)[0];\n      return [e];\n    });\n\n    function _C(e, t, n) {\n      var i = e.nodes;\n      var o = i.getNode(0).getAttribute(t);\n\n      if (o == n) {\n        return null;\n      }\n\n      var s = new qh(e.position, e.position.getShiftedBy(e.howMany));\n      return new Gm(s, t, o, n, 0);\n    }\n\n    uC(Gm, og, function (e, t) {\n      var n = [];\n\n      if (e.range.start.hasSameParentAs(t.deletionPosition)) {\n        if (e.range.containsPosition(t.deletionPosition) || e.range.start.isEqual(t.deletionPosition)) {\n          n.push(qh._createFromPositionAndShift(t.graveyardPosition, 1));\n        }\n      }\n\n      var i = e.range._getTransformedByMergeOperation(t);\n\n      if (!i.isCollapsed) {\n        n.push(i);\n      }\n\n      return n.map(function (t) {\n        return new Gm(t, e.key, e.oldValue, e.newValue, e.baseVersion);\n      });\n    });\n    uC(Gm, Zm, function (e, t) {\n      var n = vC(e.range, t);\n      return n.map(function (t) {\n        return new Gm(t, e.key, e.oldValue, e.newValue, e.baseVersion);\n      });\n    });\n\n    function vC(e, t) {\n      var n = qh._createFromPositionAndShift(t.sourcePosition, t.howMany);\n\n      var i = null;\n      var o = [];\n\n      if (n.containsRange(e, true)) {\n        i = e;\n      } else if (e.start.hasSameParentAs(n.start)) {\n        o = e.getDifference(n);\n        i = e.getIntersection(n);\n      } else {\n        o = [e];\n      }\n\n      var s = [];\n\n      var _iterator340 = _createForOfIteratorHelper(o),\n          _step340;\n\n      try {\n        for (_iterator340.s(); !(_step340 = _iterator340.n()).done;) {\n          var _e290 = _step340.value;\n          _e290 = _e290._getTransformedByDeletion(t.sourcePosition, t.howMany);\n\n          var _n229 = t.getMovedRangeStart();\n\n          var _i186 = _e290.start.hasSameParentAs(_n229);\n\n          _e290 = _e290._getTransformedByInsertion(_n229, t.howMany, _i186);\n          s.push.apply(s, _toConsumableArray(_e290));\n        }\n      } catch (err) {\n        _iterator340.e(err);\n      } finally {\n        _iterator340.f();\n      }\n\n      if (i) {\n        s.push(i._getTransformedByMove(t.sourcePosition, t.targetPosition, t.howMany, false)[0]);\n      }\n\n      return s;\n    }\n\n    uC(Gm, sg, function (e, t) {\n      if (e.range.end.isEqual(t.insertionPosition)) {\n        if (!t.graveyardPosition) {\n          e.range.end.offset++;\n        }\n\n        return [e];\n      }\n\n      if (e.range.start.hasSameParentAs(t.splitPosition) && e.range.containsPosition(t.splitPosition)) {\n        var _n230 = e.clone();\n\n        _n230.range = new qh(t.moveTargetPosition.clone(), e.range.end._getCombined(t.splitPosition, t.moveTargetPosition));\n        e.range.end = t.splitPosition.clone();\n        e.range.end.stickiness = \"toPrevious\";\n        return [e, _n230];\n      }\n\n      e.range = e.range._getTransformedBySplitOperation(t);\n      return [e];\n    });\n    uC(eg, Gm, function (e, t) {\n      var n = [e];\n\n      if (e.shouldReceiveAttributes && e.position.hasSameParentAs(t.range.start) && t.range.containsPosition(e.position)) {\n        var _i187 = _C(e, t.key, t.newValue);\n\n        if (_i187) {\n          n.push(_i187);\n        }\n      }\n\n      return n;\n    });\n    uC(eg, eg, function (e, t, n) {\n      if (e.position.isEqual(t.position) && n.aIsStrong) {\n        return [e];\n      }\n\n      e.position = e.position._getTransformedByInsertOperation(t);\n      return [e];\n    });\n    uC(eg, Zm, function (e, t) {\n      e.position = e.position._getTransformedByMoveOperation(t);\n      return [e];\n    });\n    uC(eg, sg, function (e, t) {\n      e.position = e.position._getTransformedBySplitOperation(t);\n      return [e];\n    });\n    uC(eg, og, function (e, t) {\n      e.position = e.position._getTransformedByMergeOperation(t);\n      return [e];\n    });\n    uC(tg, eg, function (e, t) {\n      if (e.oldRange) {\n        e.oldRange = e.oldRange._getTransformedByInsertOperation(t)[0];\n      }\n\n      if (e.newRange) {\n        e.newRange = e.newRange._getTransformedByInsertOperation(t)[0];\n      }\n\n      return [e];\n    });\n    uC(tg, tg, function (e, t, n) {\n      if (e.name == t.name) {\n        if (n.aIsStrong) {\n          e.oldRange = t.newRange ? t.newRange.clone() : null;\n        } else {\n          return [new Pg(0)];\n        }\n      }\n\n      return [e];\n    });\n    uC(tg, og, function (e, t) {\n      if (e.oldRange) {\n        e.oldRange = e.oldRange._getTransformedByMergeOperation(t);\n      }\n\n      if (e.newRange) {\n        e.newRange = e.newRange._getTransformedByMergeOperation(t);\n      }\n\n      return [e];\n    });\n    uC(tg, Zm, function (e, t, n) {\n      if (e.oldRange) {\n        e.oldRange = qh._createFromRanges(e.oldRange._getTransformedByMoveOperation(t));\n      }\n\n      if (e.newRange) {\n        if (n.abRelation) {\n          var _i188 = qh._createFromRanges(e.newRange._getTransformedByMoveOperation(t));\n\n          if (n.abRelation.side == \"left\" && t.targetPosition.isEqual(e.newRange.start)) {\n            e.newRange.start.path = n.abRelation.path;\n            e.newRange.end = _i188.end;\n            return [e];\n          } else if (n.abRelation.side == \"right\" && t.targetPosition.isEqual(e.newRange.end)) {\n            e.newRange.start = _i188.start;\n            e.newRange.end.path = n.abRelation.path;\n            return [e];\n          }\n        }\n\n        e.newRange = qh._createFromRanges(e.newRange._getTransformedByMoveOperation(t));\n      }\n\n      return [e];\n    });\n    uC(tg, sg, function (e, t, n) {\n      if (e.oldRange) {\n        e.oldRange = e.oldRange._getTransformedBySplitOperation(t);\n      }\n\n      if (e.newRange) {\n        if (n.abRelation) {\n          var _i189 = e.newRange._getTransformedBySplitOperation(t);\n\n          if (e.newRange.start.isEqual(t.splitPosition) && n.abRelation.wasStartBeforeMergedElement) {\n            e.newRange.start = $h._createAt(t.insertionPosition);\n          } else if (e.newRange.start.isEqual(t.splitPosition) && !n.abRelation.wasInLeftElement) {\n            e.newRange.start = $h._createAt(t.moveTargetPosition);\n          }\n\n          if (e.newRange.end.isEqual(t.splitPosition) && n.abRelation.wasInRightElement) {\n            e.newRange.end = $h._createAt(t.moveTargetPosition);\n          } else if (e.newRange.end.isEqual(t.splitPosition) && n.abRelation.wasEndBeforeMergedElement) {\n            e.newRange.end = $h._createAt(t.insertionPosition);\n          } else {\n            e.newRange.end = _i189.end;\n          }\n\n          return [e];\n        }\n\n        e.newRange = e.newRange._getTransformedBySplitOperation(t);\n      }\n\n      return [e];\n    });\n    uC(og, eg, function (e, t) {\n      if (e.sourcePosition.hasSameParentAs(t.position)) {\n        e.howMany += t.howMany;\n      }\n\n      e.sourcePosition = e.sourcePosition._getTransformedByInsertOperation(t);\n      e.targetPosition = e.targetPosition._getTransformedByInsertOperation(t);\n      return [e];\n    });\n    uC(og, og, function (e, t, n) {\n      if (e.sourcePosition.isEqual(t.sourcePosition) && e.targetPosition.isEqual(t.targetPosition)) {\n        if (!n.bWasUndone) {\n          return [new Pg(0)];\n        } else {\n          var _n231 = t.graveyardPosition.path.slice();\n\n          _n231.push(0);\n\n          e.sourcePosition = new $h(t.graveyardPosition.root, _n231);\n          e.howMany = 0;\n          return [e];\n        }\n      }\n\n      if (e.sourcePosition.isEqual(t.sourcePosition) && !e.targetPosition.isEqual(t.targetPosition) && !n.bWasUndone && n.abRelation != \"splitAtSource\") {\n        var _i190 = e.targetPosition.root.rootName == \"$graveyard\";\n\n        var _o81 = t.targetPosition.root.rootName == \"$graveyard\";\n\n        var _s47 = _i190 && !_o81;\n\n        var _r32 = _o81 && !_i190;\n\n        var _a18 = _r32 || !_s47 && n.aIsStrong;\n\n        if (_a18) {\n          var _n232 = t.targetPosition._getTransformedByMergeOperation(t);\n\n          var _i191 = e.targetPosition._getTransformedByMergeOperation(t);\n\n          return [new Zm(_n232, e.howMany, _i191, 0)];\n        } else {\n          return [new Pg(0)];\n        }\n      }\n\n      if (e.sourcePosition.hasSameParentAs(t.targetPosition)) {\n        e.howMany += t.howMany;\n      }\n\n      e.sourcePosition = e.sourcePosition._getTransformedByMergeOperation(t);\n      e.targetPosition = e.targetPosition._getTransformedByMergeOperation(t);\n\n      if (!e.graveyardPosition.isEqual(t.graveyardPosition) || !n.aIsStrong) {\n        e.graveyardPosition = e.graveyardPosition._getTransformedByMergeOperation(t);\n      }\n\n      return [e];\n    });\n    uC(og, Zm, function (e, t, n) {\n      var i = qh._createFromPositionAndShift(t.sourcePosition, t.howMany);\n\n      if (t.type == \"remove\" && !n.bWasUndone && !n.forceWeakRemove) {\n        if (e.deletionPosition.hasSameParentAs(t.sourcePosition) && i.containsPosition(e.sourcePosition)) {\n          return [new Pg(0)];\n        }\n      }\n\n      if (e.sourcePosition.hasSameParentAs(t.targetPosition)) {\n        e.howMany += t.howMany;\n      }\n\n      if (e.sourcePosition.hasSameParentAs(t.sourcePosition)) {\n        e.howMany -= t.howMany;\n      }\n\n      e.sourcePosition = e.sourcePosition._getTransformedByMoveOperation(t);\n      e.targetPosition = e.targetPosition._getTransformedByMoveOperation(t);\n\n      if (!e.graveyardPosition.isEqual(t.targetPosition)) {\n        e.graveyardPosition = e.graveyardPosition._getTransformedByMoveOperation(t);\n      }\n\n      return [e];\n    });\n    uC(og, sg, function (e, t, n) {\n      if (t.graveyardPosition) {\n        e.graveyardPosition = e.graveyardPosition._getTransformedByDeletion(t.graveyardPosition, 1);\n\n        if (e.deletionPosition.isEqual(t.graveyardPosition)) {\n          e.howMany = t.howMany;\n        }\n      }\n\n      if (e.targetPosition.isEqual(t.splitPosition)) {\n        var _i192 = t.howMany != 0;\n\n        var _o82 = t.graveyardPosition && e.deletionPosition.isEqual(t.graveyardPosition);\n\n        if (_i192 || _o82 || n.abRelation == \"mergeTargetNotMoved\") {\n          e.sourcePosition = e.sourcePosition._getTransformedBySplitOperation(t);\n          return [e];\n        }\n      }\n\n      if (e.sourcePosition.isEqual(t.splitPosition)) {\n        if (n.abRelation == \"mergeSourceNotMoved\") {\n          e.howMany = 0;\n          e.targetPosition = e.targetPosition._getTransformedBySplitOperation(t);\n          return [e];\n        }\n\n        if (n.abRelation == \"mergeSameElement\" || e.sourcePosition.offset > 0) {\n          e.sourcePosition = t.moveTargetPosition.clone();\n          e.targetPosition = e.targetPosition._getTransformedBySplitOperation(t);\n          return [e];\n        }\n      }\n\n      if (e.sourcePosition.hasSameParentAs(t.splitPosition)) {\n        e.howMany = t.splitPosition.offset;\n      }\n\n      e.sourcePosition = e.sourcePosition._getTransformedBySplitOperation(t);\n      e.targetPosition = e.targetPosition._getTransformedBySplitOperation(t);\n      return [e];\n    });\n    uC(Zm, eg, function (e, t) {\n      var n = qh._createFromPositionAndShift(e.sourcePosition, e.howMany);\n\n      var i = n._getTransformedByInsertOperation(t, false)[0];\n\n      e.sourcePosition = i.start;\n      e.howMany = i.end.offset - i.start.offset;\n\n      if (!e.targetPosition.isEqual(t.position)) {\n        e.targetPosition = e.targetPosition._getTransformedByInsertOperation(t);\n      }\n\n      return [e];\n    });\n    uC(Zm, Zm, function (e, t, n) {\n      var i = qh._createFromPositionAndShift(e.sourcePosition, e.howMany);\n\n      var o = qh._createFromPositionAndShift(t.sourcePosition, t.howMany);\n\n      var s = n.aIsStrong;\n      var r = !n.aIsStrong;\n\n      if (n.abRelation == \"insertBefore\" || n.baRelation == \"insertAfter\") {\n        r = true;\n      } else if (n.abRelation == \"insertAfter\" || n.baRelation == \"insertBefore\") {\n        r = false;\n      }\n\n      var a;\n\n      if (e.targetPosition.isEqual(t.targetPosition) && r) {\n        a = e.targetPosition._getTransformedByDeletion(t.sourcePosition, t.howMany);\n      } else {\n        a = e.targetPosition._getTransformedByMove(t.sourcePosition, t.targetPosition, t.howMany);\n      }\n\n      if (kC(e, t) && kC(t, e)) {\n        return [t.getReversed()];\n      }\n\n      var c = i.containsPosition(t.targetPosition);\n\n      if (c && i.containsRange(o, true)) {\n        i.start = i.start._getTransformedByMove(t.sourcePosition, t.targetPosition, t.howMany);\n        i.end = i.end._getTransformedByMove(t.sourcePosition, t.targetPosition, t.howMany);\n        return yC([i], a);\n      }\n\n      var l = o.containsPosition(e.targetPosition);\n\n      if (l && o.containsRange(i, true)) {\n        i.start = i.start._getCombined(t.sourcePosition, t.getMovedRangeStart());\n        i.end = i.end._getCombined(t.sourcePosition, t.getMovedRangeStart());\n        return yC([i], a);\n      }\n\n      var d = Nr(e.sourcePosition.getParentPath(), t.sourcePosition.getParentPath());\n\n      if (d == \"prefix\" || d == \"extension\") {\n        i.start = i.start._getTransformedByMove(t.sourcePosition, t.targetPosition, t.howMany);\n        i.end = i.end._getTransformedByMove(t.sourcePosition, t.targetPosition, t.howMany);\n        return yC([i], a);\n      }\n\n      if (e.type == \"remove\" && t.type != \"remove\" && !n.aWasUndone && !n.forceWeakRemove) {\n        s = true;\n      } else if (e.type != \"remove\" && t.type == \"remove\" && !n.bWasUndone && !n.forceWeakRemove) {\n        s = false;\n      }\n\n      var u = [];\n      var h = i.getDifference(o);\n\n      var _iterator341 = _createForOfIteratorHelper(h),\n          _step341;\n\n      try {\n        for (_iterator341.s(); !(_step341 = _iterator341.n()).done;) {\n          var _e291 = _step341.value;\n          _e291.start = _e291.start._getTransformedByDeletion(t.sourcePosition, t.howMany);\n          _e291.end = _e291.end._getTransformedByDeletion(t.sourcePosition, t.howMany);\n\n          var _n233 = Nr(_e291.start.getParentPath(), t.getMovedRangeStart().getParentPath()) == \"same\";\n\n          var _i193 = _e291._getTransformedByInsertion(t.getMovedRangeStart(), t.howMany, _n233);\n\n          u.push.apply(u, _toConsumableArray(_i193));\n        }\n      } catch (err) {\n        _iterator341.e(err);\n      } finally {\n        _iterator341.f();\n      }\n\n      var f = i.getIntersection(o);\n\n      if (f !== null && s) {\n        f.start = f.start._getCombined(t.sourcePosition, t.getMovedRangeStart());\n        f.end = f.end._getCombined(t.sourcePosition, t.getMovedRangeStart());\n\n        if (u.length === 0) {\n          u.push(f);\n        } else if (u.length == 1) {\n          if (o.start.isBefore(i.start) || o.start.isEqual(i.start)) {\n            u.unshift(f);\n          } else {\n            u.push(f);\n          }\n        } else {\n          u.splice(1, 0, f);\n        }\n      }\n\n      if (u.length === 0) {\n        return [new Pg(e.baseVersion)];\n      }\n\n      return yC(u, a);\n    });\n    uC(Zm, sg, function (e, t, n) {\n      var i = e.targetPosition.clone();\n\n      if (!e.targetPosition.isEqual(t.insertionPosition) || !t.graveyardPosition || n.abRelation == \"moveTargetAfter\") {\n        i = e.targetPosition._getTransformedBySplitOperation(t);\n      }\n\n      var o = qh._createFromPositionAndShift(e.sourcePosition, e.howMany);\n\n      if (o.end.isEqual(t.insertionPosition)) {\n        if (!t.graveyardPosition) {\n          e.howMany++;\n        }\n\n        e.targetPosition = i;\n        return [e];\n      }\n\n      if (o.start.hasSameParentAs(t.splitPosition) && o.containsPosition(t.splitPosition)) {\n        var _e292 = new qh(t.splitPosition, o.end);\n\n        _e292 = _e292._getTransformedBySplitOperation(t);\n        var _n234 = [new qh(o.start, t.splitPosition), _e292];\n        return yC(_n234, i);\n      }\n\n      if (e.targetPosition.isEqual(t.splitPosition) && n.abRelation == \"insertAtSource\") {\n        i = t.moveTargetPosition;\n      }\n\n      if (e.targetPosition.isEqual(t.insertionPosition) && n.abRelation == \"insertBetween\") {\n        i = e.targetPosition;\n      }\n\n      var s = o._getTransformedBySplitOperation(t);\n\n      var r = [s];\n\n      if (t.graveyardPosition) {\n        var _i194 = o.start.isEqual(t.graveyardPosition) || o.containsPosition(t.graveyardPosition);\n\n        if (e.howMany > 1 && _i194 && !n.aWasUndone) {\n          r.push(qh._createFromPositionAndShift(t.insertionPosition, 1));\n        }\n      }\n\n      return yC(r, i);\n    });\n    uC(Zm, og, function (e, t, n) {\n      var i = qh._createFromPositionAndShift(e.sourcePosition, e.howMany);\n\n      if (t.deletionPosition.hasSameParentAs(e.sourcePosition) && i.containsPosition(t.sourcePosition)) {\n        if (e.type == \"remove\" && !n.forceWeakRemove) {\n          if (!n.aWasUndone) {\n            var _n235 = [];\n\n            var _i195 = t.graveyardPosition.clone();\n\n            var _o83 = t.targetPosition._getTransformedByMergeOperation(t);\n\n            if (e.howMany > 1) {\n              _n235.push(new Zm(e.sourcePosition, e.howMany - 1, e.targetPosition, 0));\n\n              _i195 = _i195._getTransformedByMove(e.sourcePosition, e.targetPosition, e.howMany - 1);\n              _o83 = _o83._getTransformedByMove(e.sourcePosition, e.targetPosition, e.howMany - 1);\n            }\n\n            var _s48 = t.deletionPosition._getCombined(e.sourcePosition, e.targetPosition);\n\n            var _r33 = new Zm(_i195, 1, _s48, 0);\n\n            var _a19 = _r33.getMovedRangeStart().path.slice();\n\n            _a19.push(0);\n\n            var _c10 = new $h(_r33.targetPosition.root, _a19);\n\n            _o83 = _o83._getTransformedByMove(_i195, _s48, 1);\n\n            var _l5 = new Zm(_o83, t.howMany, _c10, 0);\n\n            _n235.push(_r33);\n\n            _n235.push(_l5);\n\n            return _n235;\n          }\n        } else {\n          if (e.howMany == 1) {\n            if (!n.bWasUndone) {\n              return [new Pg(0)];\n            } else {\n              e.sourcePosition = t.graveyardPosition.clone();\n              e.targetPosition = e.targetPosition._getTransformedByMergeOperation(t);\n              return [e];\n            }\n          }\n        }\n      }\n\n      var o = qh._createFromPositionAndShift(e.sourcePosition, e.howMany);\n\n      var s = o._getTransformedByMergeOperation(t);\n\n      e.sourcePosition = s.start;\n      e.howMany = s.end.offset - s.start.offset;\n      e.targetPosition = e.targetPosition._getTransformedByMergeOperation(t);\n      return [e];\n    });\n    uC(ng, eg, function (e, t) {\n      e.position = e.position._getTransformedByInsertOperation(t);\n      return [e];\n    });\n    uC(ng, og, function (e, t) {\n      if (e.position.isEqual(t.deletionPosition)) {\n        e.position = t.graveyardPosition.clone();\n        e.position.stickiness = \"toNext\";\n        return [e];\n      }\n\n      e.position = e.position._getTransformedByMergeOperation(t);\n      return [e];\n    });\n    uC(ng, Zm, function (e, t) {\n      e.position = e.position._getTransformedByMoveOperation(t);\n      return [e];\n    });\n    uC(ng, ng, function (e, t, n) {\n      if (e.position.isEqual(t.position)) {\n        if (n.aIsStrong) {\n          e.oldName = t.newName;\n        } else {\n          return [new Pg(0)];\n        }\n      }\n\n      return [e];\n    });\n    uC(ng, sg, function (e, t) {\n      var n = e.position.path;\n      var i = t.splitPosition.getParentPath();\n\n      if (Nr(n, i) == \"same\" && !t.graveyardPosition) {\n        var _t262 = new ng(e.position.getShiftedBy(1), e.oldName, e.newName, 0);\n\n        return [e, _t262];\n      }\n\n      e.position = e.position._getTransformedBySplitOperation(t);\n      return [e];\n    });\n    uC(ig, ig, function (e, t, n) {\n      if (e.root === t.root && e.key === t.key) {\n        if (!n.aIsStrong || e.newValue === t.newValue) {\n          return [new Pg(0)];\n        } else {\n          e.oldValue = t.newValue;\n        }\n      }\n\n      return [e];\n    });\n    uC(sg, eg, function (e, t) {\n      if (e.splitPosition.hasSameParentAs(t.position) && e.splitPosition.offset < t.position.offset) {\n        e.howMany += t.howMany;\n      }\n\n      e.splitPosition = e.splitPosition._getTransformedByInsertOperation(t);\n      e.insertionPosition = sg.getInsertionPosition(e.splitPosition);\n      return [e];\n    });\n    uC(sg, og, function (e, t, n) {\n      if (!e.graveyardPosition && !n.bWasUndone && e.splitPosition.hasSameParentAs(t.sourcePosition)) {\n        var _n236 = t.graveyardPosition.path.slice();\n\n        _n236.push(0);\n\n        var _i196 = new $h(t.graveyardPosition.root, _n236);\n\n        var _o84 = sg.getInsertionPosition(new $h(t.graveyardPosition.root, _n236));\n\n        var _s49 = new sg(_i196, 0, null, 0);\n\n        _s49.insertionPosition = _o84;\n        e.splitPosition = e.splitPosition._getTransformedByMergeOperation(t);\n        e.insertionPosition = sg.getInsertionPosition(e.splitPosition);\n        e.graveyardPosition = _s49.insertionPosition.clone();\n        e.graveyardPosition.stickiness = \"toNext\";\n        return [_s49, e];\n      }\n\n      if (e.splitPosition.hasSameParentAs(t.deletionPosition) && !e.splitPosition.isAfter(t.deletionPosition)) {\n        e.howMany--;\n      }\n\n      if (e.splitPosition.hasSameParentAs(t.targetPosition)) {\n        e.howMany += t.howMany;\n      }\n\n      e.splitPosition = e.splitPosition._getTransformedByMergeOperation(t);\n      e.insertionPosition = sg.getInsertionPosition(e.splitPosition);\n\n      if (e.graveyardPosition) {\n        e.graveyardPosition = e.graveyardPosition._getTransformedByMergeOperation(t);\n      }\n\n      return [e];\n    });\n    uC(sg, Zm, function (e, t, n) {\n      var i = qh._createFromPositionAndShift(t.sourcePosition, t.howMany);\n\n      if (e.graveyardPosition) {\n        var _o85 = i.start.isEqual(e.graveyardPosition) || i.containsPosition(e.graveyardPosition);\n\n        if (!n.bWasUndone && _o85) {\n          var _n237 = e.splitPosition._getTransformedByMoveOperation(t);\n\n          var _i197 = e.graveyardPosition._getTransformedByMoveOperation(t);\n\n          var _o86 = _i197.path.slice();\n\n          _o86.push(0);\n\n          var _s50 = new $h(_i197.root, _o86);\n\n          var _r34 = new Zm(_n237, e.howMany, _s50, 0);\n\n          return [_r34];\n        }\n\n        e.graveyardPosition = e.graveyardPosition._getTransformedByMoveOperation(t);\n      }\n\n      if (e.splitPosition.hasSameParentAs(t.sourcePosition) && i.containsPosition(e.splitPosition)) {\n        var _n238 = t.howMany - (e.splitPosition.offset - t.sourcePosition.offset);\n\n        e.howMany -= _n238;\n\n        if (e.splitPosition.hasSameParentAs(t.targetPosition) && e.splitPosition.offset < t.targetPosition.offset) {\n          e.howMany += t.howMany;\n        }\n\n        e.splitPosition = t.sourcePosition.clone();\n        e.insertionPosition = sg.getInsertionPosition(e.splitPosition);\n        return [e];\n      }\n\n      var o = e.splitPosition.isEqual(t.targetPosition);\n\n      if (o && (n.baRelation == \"insertAtSource\" || n.abRelation == \"splitBefore\")) {\n        e.howMany += t.howMany;\n        e.splitPosition = e.splitPosition._getTransformedByDeletion(t.sourcePosition, t.howMany);\n        e.insertionPosition = sg.getInsertionPosition(e.splitPosition);\n        return [e];\n      }\n\n      if (!t.sourcePosition.isEqual(t.targetPosition)) {\n        if (e.splitPosition.hasSameParentAs(t.sourcePosition) && e.splitPosition.offset <= t.sourcePosition.offset) {\n          e.howMany -= t.howMany;\n        }\n\n        if (e.splitPosition.hasSameParentAs(t.targetPosition) && e.splitPosition.offset < t.targetPosition.offset) {\n          e.howMany += t.howMany;\n        }\n      }\n\n      e.splitPosition.stickiness = \"toNone\";\n      e.splitPosition = e.splitPosition._getTransformedByMoveOperation(t);\n      e.splitPosition.stickiness = \"toNext\";\n\n      if (e.graveyardPosition) {\n        e.insertionPosition = e.insertionPosition._getTransformedByMoveOperation(t);\n      } else {\n        e.insertionPosition = sg.getInsertionPosition(e.splitPosition);\n      }\n\n      return [e];\n    });\n    uC(sg, sg, function (e, t, n) {\n      if (e.splitPosition.isEqual(t.splitPosition)) {\n        if (!e.graveyardPosition && !t.graveyardPosition) {\n          return [new Pg(0)];\n        }\n\n        if (e.graveyardPosition && t.graveyardPosition && e.graveyardPosition.isEqual(t.graveyardPosition)) {\n          return [new Pg(0)];\n        }\n\n        if (n.abRelation == \"splitBefore\") {\n          e.howMany = 0;\n          e.graveyardPosition = e.graveyardPosition._getTransformedBySplitOperation(t);\n          return [e];\n        }\n      }\n\n      if (e.graveyardPosition && t.graveyardPosition && e.graveyardPosition.isEqual(t.graveyardPosition)) {\n        var _i198 = e.splitPosition.root.rootName == \"$graveyard\";\n\n        var _o87 = t.splitPosition.root.rootName == \"$graveyard\";\n\n        var _s51 = _i198 && !_o87;\n\n        var _r35 = _o87 && !_i198;\n\n        var _a20 = _r35 || !_s51 && n.aIsStrong;\n\n        if (_a20) {\n          var _n239 = [];\n\n          if (t.howMany) {\n            _n239.push(new Zm(t.moveTargetPosition, t.howMany, t.splitPosition, 0));\n          }\n\n          if (e.howMany) {\n            _n239.push(new Zm(e.splitPosition, e.howMany, e.moveTargetPosition, 0));\n          }\n\n          return _n239;\n        } else {\n          return [new Pg(0)];\n        }\n      }\n\n      if (e.graveyardPosition) {\n        e.graveyardPosition = e.graveyardPosition._getTransformedBySplitOperation(t);\n      }\n\n      if (e.splitPosition.isEqual(t.insertionPosition) && n.abRelation == \"splitBefore\") {\n        e.howMany++;\n        return [e];\n      }\n\n      if (t.splitPosition.isEqual(e.insertionPosition) && n.baRelation == \"splitBefore\") {\n        var _n240 = t.insertionPosition.path.slice();\n\n        _n240.push(0);\n\n        var _i199 = new $h(t.insertionPosition.root, _n240);\n\n        var _o88 = new Zm(e.insertionPosition, 1, _i199, 0);\n\n        return [e, _o88];\n      }\n\n      if (e.splitPosition.hasSameParentAs(t.splitPosition) && e.splitPosition.offset < t.splitPosition.offset) {\n        e.howMany -= t.howMany;\n      }\n\n      e.splitPosition = e.splitPosition._getTransformedBySplitOperation(t);\n      e.insertionPosition = sg.getInsertionPosition(e.splitPosition);\n      return [e];\n    });\n\n    function kC(e, t) {\n      return e.targetPosition._getTransformedByDeletion(t.sourcePosition, t.howMany) === null;\n    }\n\n    function yC(e, t) {\n      var n = [];\n\n      for (var _i200 = 0; _i200 < e.length; _i200++) {\n        var _o89 = e[_i200];\n\n        var _s52 = new Zm(_o89.start, _o89.end.offset - _o89.start.offset, t, 0);\n\n        n.push(_s52);\n\n        for (var _t263 = _i200 + 1; _t263 < e.length; _t263++) {\n          e[_t263] = e[_t263]._getTransformedByMove(_s52.sourcePosition, _s52.targetPosition, _s52.howMany)[0];\n        }\n\n        t = t._getTransformedByMove(_s52.sourcePosition, _s52.targetPosition, _s52.howMany);\n      }\n\n      return n;\n    }\n\n    var xC = /*#__PURE__*/function (_jw16) {\n      _inherits(xC, _jw16);\n\n      var _super142 = _createSuper(xC);\n\n      function xC(e) {\n        var _this211;\n\n        _classCallCheck(this, xC);\n\n        _this211 = _super142.call(this, e);\n        _this211._stack = [];\n        _this211._createdBatches = new WeakSet();\n\n        _this211.refresh();\n\n        return _this211;\n      }\n\n      _createClass(xC, [{\n        key: \"refresh\",\n        value: function refresh() {\n          this.isEnabled = this._stack.length > 0;\n        }\n      }, {\n        key: \"addBatch\",\n        value: function addBatch(e) {\n          var t = this.editor.model.document.selection;\n          var n = {\n            ranges: t.hasOwnRange ? Array.from(t.getRanges()) : [],\n            isBackward: t.isBackward\n          };\n\n          this._stack.push({\n            batch: e,\n            selection: n\n          });\n\n          this.refresh();\n        }\n      }, {\n        key: \"clearStack\",\n        value: function clearStack() {\n          this._stack = [];\n          this.refresh();\n        }\n      }, {\n        key: \"_restoreSelection\",\n        value: function _restoreSelection(e, t, n) {\n          var i = this.editor.model;\n          var o = i.document;\n          var s = [];\n\n          var _iterator342 = _createForOfIteratorHelper(e),\n              _step342;\n\n          try {\n            for (_iterator342.s(); !(_step342 = _iterator342.n()).done;) {\n              var _t264 = _step342.value;\n\n              var _e293 = AC(_t264, n);\n\n              var _i201 = _e293.find(function (e) {\n                return e.start.root != o.graveyard;\n              });\n\n              if (_i201) {\n                s.push(_i201);\n              }\n            }\n          } catch (err) {\n            _iterator342.e(err);\n          } finally {\n            _iterator342.f();\n          }\n\n          if (s.length) {\n            i.change(function (e) {\n              e.setSelection(s, {\n                backward: t\n              });\n            });\n          }\n        }\n      }, {\n        key: \"_undo\",\n        value: function _undo(e, t) {\n          var n = this.editor.model;\n          var i = n.document;\n\n          this._createdBatches.add(t);\n\n          var o = e.operations.slice().filter(function (e) {\n            return e.isDocumentOperation;\n          });\n          o.reverse();\n\n          var _iterator343 = _createForOfIteratorHelper(o),\n              _step343;\n\n          try {\n            for (_iterator343.s(); !(_step343 = _iterator343.n()).done;) {\n              var _e294 = _step343.value;\n\n              var _o90 = _e294.baseVersion + 1;\n\n              var _s53 = Array.from(i.history.getOperations(_o90));\n\n              var _r36 = gC([_e294.getReversed()], _s53, {\n                useRelations: true,\n                document: this.editor.model.document,\n                padWithNoOps: false,\n                forceWeakRemove: true\n              });\n\n              var _a21 = _r36.operationsA;\n\n              var _iterator344 = _createForOfIteratorHelper(_a21),\n                  _step344;\n\n              try {\n                for (_iterator344.s(); !(_step344 = _iterator344.n()).done;) {\n                  var _o91 = _step344.value;\n                  t.addOperation(_o91);\n                  n.applyOperation(_o91);\n                  i.history.setOperationAsUndone(_e294, _o91);\n                }\n              } catch (err) {\n                _iterator344.e(err);\n              } finally {\n                _iterator344.f();\n              }\n            }\n          } catch (err) {\n            _iterator343.e(err);\n          } finally {\n            _iterator343.f();\n          }\n        }\n      }]);\n\n      return xC;\n    }(jw);\n\n    function AC(e, t) {\n      var n = e.getTransformedByOperations(t);\n      n.sort(function (e, t) {\n        return e.start.isBefore(t.start) ? -1 : 1;\n      });\n\n      for (var _e295 = 1; _e295 < n.length; _e295++) {\n        var _t265 = n[_e295 - 1];\n        var _i202 = n[_e295];\n\n        if (_t265.end.isTouching(_i202.start)) {\n          _t265.end = _i202.end;\n          n.splice(_e295, 1);\n          _e295--;\n        }\n      }\n\n      return n;\n    }\n\n    var CC = /*#__PURE__*/function (_xC) {\n      _inherits(CC, _xC);\n\n      var _super143 = _createSuper(CC);\n\n      function CC() {\n        _classCallCheck(this, CC);\n\n        return _super143.apply(this, arguments);\n      }\n\n      _createClass(CC, [{\n        key: \"execute\",\n        value: function execute() {\n          var _this212 = this;\n\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n          var t = e ? this._stack.findIndex(function (t) {\n            return t.batch == e;\n          }) : this._stack.length - 1;\n\n          var n = this._stack.splice(t, 1)[0];\n\n          var i = this.editor.model.createBatch(\"transparent\");\n          this.editor.model.enqueueChange(i, function () {\n            _this212._undo(n.batch, i);\n\n            var e = _this212.editor.model.document.history.getOperations(n.batch.baseVersion);\n\n            _this212._restoreSelection(n.selection.ranges, n.selection.isBackward, e);\n\n            _this212.fire(\"revert\", n.batch, i);\n          });\n          this.refresh();\n        }\n      }]);\n\n      return CC;\n    }(xC);\n\n    var TC = /*#__PURE__*/function (_xC2) {\n      _inherits(TC, _xC2);\n\n      var _super144 = _createSuper(TC);\n\n      function TC() {\n        _classCallCheck(this, TC);\n\n        return _super144.apply(this, arguments);\n      }\n\n      _createClass(TC, [{\n        key: \"execute\",\n        value: function execute() {\n          var _this213 = this;\n\n          var e = this._stack.pop();\n\n          var t = this.editor.model.createBatch(\"transparent\");\n          this.editor.model.enqueueChange(t, function () {\n            var n = e.batch.operations[e.batch.operations.length - 1];\n            var i = n.baseVersion + 1;\n\n            var o = _this213.editor.model.document.history.getOperations(i);\n\n            _this213._restoreSelection(e.selection.ranges, e.selection.isBackward, o);\n\n            _this213._undo(e.batch, t);\n          });\n          this.refresh();\n        }\n      }]);\n\n      return TC;\n    }(xC);\n\n    var MC = /*#__PURE__*/function (_Ow49) {\n      _inherits(MC, _Ow49);\n\n      var _super145 = _createSuper(MC);\n\n      function MC(e) {\n        var _this214;\n\n        _classCallCheck(this, MC);\n\n        _this214 = _super145.call(this, e);\n        _this214._batchRegistry = new WeakSet();\n        return _this214;\n      }\n\n      _createClass(MC, [{\n        key: \"init\",\n        value: function init() {\n          var _this215 = this;\n\n          var e = this.editor;\n          this._undoCommand = new CC(e);\n          this._redoCommand = new TC(e);\n          e.commands.add(\"undo\", this._undoCommand);\n          e.commands.add(\"redo\", this._redoCommand);\n          this.listenTo(e.model, \"applyOperation\", function (e, t) {\n            var n = t[0];\n\n            if (!n.isDocumentOperation) {\n              return;\n            }\n\n            var i = n.batch;\n\n            var o = _this215._redoCommand._createdBatches.has(i);\n\n            var s = _this215._undoCommand._createdBatches.has(i);\n\n            var r = _this215._batchRegistry.has(i);\n\n            if (r || i.type == \"transparent\" && !o && !s) {\n              return;\n            } else {\n              if (o) {\n                _this215._undoCommand.addBatch(i);\n              } else if (!s) {\n                _this215._undoCommand.addBatch(i);\n\n                _this215._redoCommand.clearStack();\n              }\n            }\n\n            _this215._batchRegistry.add(i);\n          }, {\n            priority: \"highest\"\n          });\n          this.listenTo(this._undoCommand, \"revert\", function (e, t, n) {\n            _this215._redoCommand.addBatch(n);\n          });\n          e.keystrokes.set(\"CTRL+Z\", \"undo\");\n          e.keystrokes.set(\"CTRL+Y\", \"redo\");\n          e.keystrokes.set(\"CTRL+SHIFT+Z\", \"redo\");\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"UndoEditing\";\n        }\n      }]);\n\n      return MC;\n    }(Ow);\n\n    var PC = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M5.042 9.367l2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z\"/></svg>';\n    var EC = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M14.958 9.367l-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z\"/></svg>';\n\n    var SC = /*#__PURE__*/function (_Ow50) {\n      _inherits(SC, _Ow50);\n\n      var _super146 = _createSuper(SC);\n\n      function SC() {\n        _classCallCheck(this, SC);\n\n        return _super146.apply(this, arguments);\n      }\n\n      _createClass(SC, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          var t = e.locale;\n          var n = e.t;\n          var i = t.uiLanguageDirection == \"ltr\" ? PC : EC;\n          var o = t.uiLanguageDirection == \"ltr\" ? EC : PC;\n\n          this._addButton(\"undo\", n(\"bb\"), \"CTRL+Z\", i);\n\n          this._addButton(\"redo\", n(\"bc\"), \"CTRL+Y\", o);\n        }\n      }, {\n        key: \"_addButton\",\n        value: function _addButton(e, t, n, i) {\n          var _this216 = this;\n\n          var o = this.editor;\n          o.ui.componentFactory.add(e, function (s) {\n            var r = o.commands.get(e);\n            var a = new Kb(s);\n            a.set({\n              label: t,\n              icon: i,\n              keystroke: n,\n              tooltip: true\n            });\n            a.bind(\"isEnabled\").to(r, \"isEnabled\");\n\n            _this216.listenTo(a, \"execute\", function () {\n              o.execute(e);\n              o.editing.view.focus();\n            });\n\n            return a;\n          });\n        }\n      }]);\n\n      return SC;\n    }(Ow);\n\n    var IC = /*#__PURE__*/function (_Ow51) {\n      _inherits(IC, _Ow51);\n\n      var _super147 = _createSuper(IC);\n\n      function IC() {\n        _classCallCheck(this, IC);\n\n        return _super147.apply(this, arguments);\n      }\n\n      _createClass(IC, null, [{\n        key: \"requires\",\n        get: function get() {\n          return [MC, SC];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"Undo\";\n        }\n      }]);\n\n      return IC;\n    }(Ow);\n\n    var OC = /^(?:http(s)?:\\/\\/)?[\\w.-]+(?:\\.[\\w.-]+)+[\\w\\-._~:/?#[\\]@!$&'()*+,;=]+$/;\n\n    var NC = /*#__PURE__*/function (_Ow52) {\n      _inherits(NC, _Ow52);\n\n      var _super148 = _createSuper(NC);\n\n      function NC(e) {\n        var _this217;\n\n        _classCallCheck(this, NC);\n\n        _this217 = _super148.call(this, e);\n        _this217._timeoutId = null;\n        _this217._positionToInsert = null;\n        return _this217;\n      }\n\n      _createClass(NC, [{\n        key: \"init\",\n        value: function init() {\n          var _this218 = this;\n\n          var e = this.editor;\n          var t = e.model.document;\n          this.listenTo(e.plugins.get(Rx), \"inputTransformation\", function () {\n            var e = t.selection.getFirstRange();\n            var n = Ig.fromPosition(e.start);\n            n.stickiness = \"toPrevious\";\n            var i = Ig.fromPosition(e.end);\n            i.stickiness = \"toNext\";\n            t.once(\"change:data\", function () {\n              _this218._embedMediaBetweenPositions(n, i);\n\n              n.detach();\n              i.detach();\n            }, {\n              priority: \"high\"\n            });\n          });\n          e.commands.get(\"undo\").on(\"execute\", function () {\n            if (_this218._timeoutId) {\n              Od.window.clearTimeout(_this218._timeoutId);\n\n              _this218._positionToInsert.detach();\n\n              _this218._timeoutId = null;\n              _this218._positionToInsert = null;\n            }\n          }, {\n            priority: \"high\"\n          });\n        }\n      }, {\n        key: \"_embedMediaBetweenPositions\",\n        value: function _embedMediaBetweenPositions(e, t) {\n          var _this219 = this;\n\n          var n = this.editor;\n          var i = n.plugins.get(lC).registry;\n          var o = new sf(e, t);\n          var s = o.getWalker({\n            ignoreElementEnd: true\n          });\n          var r = \"\";\n\n          var _iterator345 = _createForOfIteratorHelper(s),\n              _step345;\n\n          try {\n            for (_iterator345.s(); !(_step345 = _iterator345.n()).done;) {\n              var _e296 = _step345.value;\n\n              if (_e296.item.is(\"textProxy\")) {\n                r += _e296.item.data;\n              }\n            }\n          } catch (err) {\n            _iterator345.e(err);\n          } finally {\n            _iterator345.f();\n          }\n\n          r = r.trim();\n\n          if (!r.match(OC)) {\n            return;\n          }\n\n          if (!i.hasMedia(r)) {\n            return;\n          }\n\n          var a = n.commands.get(\"mediaEmbed\");\n\n          if (!a.isEnabled) {\n            return;\n          }\n\n          this._positionToInsert = Ig.fromPosition(e);\n          this._timeoutId = Od.window.setTimeout(function () {\n            n.model.change(function (e) {\n              _this219._timeoutId = null;\n              e.remove(o);\n              var t;\n\n              if (_this219._positionToInsert.root.rootName !== \"$graveyard\") {\n                t = _this219._positionToInsert;\n              }\n\n              tC(n.model, r, t);\n\n              _this219._positionToInsert.detach();\n\n              _this219._positionToInsert = null;\n            });\n          }, 100);\n        }\n      }], [{\n        key: \"requires\",\n        get: function get() {\n          return [Rx, IC];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"AutoMediaEmbed\";\n        }\n      }]);\n\n      return NC;\n    }(Ow);\n\n    var RC = n(81);\n\n    var LC = /*#__PURE__*/function (_gb26) {\n      _inherits(LC, _gb26);\n\n      var _super149 = _createSuper(LC);\n\n      function LC(e, t) {\n        var _this220;\n\n        _classCallCheck(this, LC);\n\n        _this220 = _super149.call(this, t);\n        var n = t.t;\n        _this220.focusTracker = new xp();\n        _this220.keystrokes = new dp();\n        _this220.urlInputView = _this220._createUrlInput();\n        _this220.saveButtonView = _this220._createButton(n(\"bd\"), Jk, \"ck-button-save\");\n        _this220.saveButtonView.type = \"submit\";\n        _this220.cancelButtonView = _this220._createButton(n(\"be\"), Qk, \"ck-button-cancel\", \"cancel\");\n        _this220._focusables = new Bp();\n        _this220._focusCycler = new Ob({\n          focusables: _this220._focusables,\n          focusTracker: _this220.focusTracker,\n          keystrokeHandler: _this220.keystrokes,\n          actions: {\n            focusPrevious: \"shift + tab\",\n            focusNext: \"tab\"\n          }\n        });\n        _this220._validators = e;\n\n        _this220.setTemplate({\n          tag: \"form\",\n          attributes: {\n            class: [\"ck\", \"ck-media-form\"],\n            tabindex: \"-1\"\n          },\n          children: [_this220.urlInputView, _this220.saveButtonView, _this220.cancelButtonView]\n        });\n\n        return _this220;\n      }\n\n      _createClass(LC, [{\n        key: \"render\",\n        value: function render() {\n          var _this221 = this;\n\n          _get(_getPrototypeOf(LC.prototype), \"render\", this).call(this);\n\n          Yk({\n            view: this\n          });\n          var e = [this.urlInputView, this.saveButtonView, this.cancelButtonView];\n          e.forEach(function (e) {\n            _this221._focusables.add(e);\n\n            _this221.focusTracker.add(e.element);\n          });\n          this.keystrokes.listenTo(this.element);\n\n          var t = function t(e) {\n            return e.stopPropagation();\n          };\n\n          this.keystrokes.set(\"arrowright\", t);\n          this.keystrokes.set(\"arrowleft\", t);\n          this.keystrokes.set(\"arrowup\", t);\n          this.keystrokes.set(\"arrowdown\", t);\n          this.listenTo(this.urlInputView.element, \"selectstart\", function (e, t) {\n            t.stopPropagation();\n          }, {\n            priority: \"high\"\n          });\n        }\n      }, {\n        key: \"focus\",\n        value: function focus() {\n          this._focusCycler.focusFirst();\n        }\n      }, {\n        key: \"url\",\n        get: function get() {\n          return this.urlInputView.inputView.element.value.trim();\n        },\n        set: function set(e) {\n          this.urlInputView.inputView.element.value = e.trim();\n        }\n      }, {\n        key: \"isValid\",\n        value: function isValid() {\n          this.resetFormStatus();\n\n          var _iterator346 = _createForOfIteratorHelper(this._validators),\n              _step346;\n\n          try {\n            for (_iterator346.s(); !(_step346 = _iterator346.n()).done;) {\n              var _e297 = _step346.value;\n\n              var _t266 = _e297(this);\n\n              if (_t266) {\n                this.urlInputView.errorText = _t266;\n                return false;\n              }\n            }\n          } catch (err) {\n            _iterator346.e(err);\n          } finally {\n            _iterator346.f();\n          }\n\n          return true;\n        }\n      }, {\n        key: \"resetFormStatus\",\n        value: function resetFormStatus() {\n          this.urlInputView.errorText = null;\n          this.urlInputView.infoText = this._urlInputViewInfoDefault;\n        }\n      }, {\n        key: \"_createUrlInput\",\n        value: function _createUrlInput() {\n          var _this222 = this;\n\n          var e = this.locale.t;\n          var t = new Wk(this.locale, qk);\n          var n = t.inputView;\n          this._urlInputViewInfoDefault = e(\"bm\");\n          this._urlInputViewInfoTip = e(\"bn\");\n          t.label = e(\"bo\");\n          t.infoText = this._urlInputViewInfoDefault;\n          n.placeholder = \"https://example.com\";\n          n.on(\"input\", function () {\n            t.infoText = n.element.value ? _this222._urlInputViewInfoTip : _this222._urlInputViewInfoDefault;\n          });\n          return t;\n        }\n      }, {\n        key: \"_createButton\",\n        value: function _createButton(e, t, n, i) {\n          var o = new Kb(this.locale);\n          o.set({\n            label: e,\n            icon: t,\n            tooltip: true\n          });\n          o.extendTemplate({\n            attributes: {\n              class: n\n            }\n          });\n\n          if (i) {\n            o.delegate(\"execute\").to(this, i);\n          }\n\n          return o;\n        }\n      }]);\n\n      return LC;\n    }(gb);\n\n    var jC = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path d=\"M18.68 3.03c.6 0 .59-.03.59.55v12.84c0 .59.01.56-.59.56H1.29c-.6 0-.59.03-.59-.56V3.58c0-.58-.01-.55.6-.55h17.38zM15.77 15V5H4.2v10h11.57zM2 4v1h1V4H2zm0 2v1h1V6H2zm0 2v1h1V8H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zm0 2v1h1v-1H2zM17 4v1h1V4h-1zm0 2v1h1V6h-1zm0 2v1h1V8h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zm0 2v1h1v-1h-1zM7.5 7.177a.4.4 0 01.593-.351l5.133 2.824a.4.4 0 010 .7l-5.133 2.824a.4.4 0 01-.593-.35V7.176v.001z\"/></svg>\\n';\n\n    var DC = /*#__PURE__*/function (_Ow53) {\n      _inherits(DC, _Ow53);\n\n      var _super150 = _createSuper(DC);\n\n      function DC() {\n        _classCallCheck(this, DC);\n\n        return _super150.apply(this, arguments);\n      }\n\n      _createClass(DC, [{\n        key: \"init\",\n        value: function init() {\n          var _this223 = this;\n\n          var e = this.editor;\n          var t = e.commands.get(\"mediaEmbed\");\n          var n = e.plugins.get(lC).registry;\n          this.form = new LC(zC(e.t, n), e.locale);\n          e.ui.componentFactory.add(\"mediaEmbed\", function (n) {\n            var i = dw(n);\n\n            _this223._setUpDropdown(i, _this223.form, t, e);\n\n            _this223._setUpForm(_this223.form, i, t);\n\n            return i;\n          });\n        }\n      }, {\n        key: \"_setUpDropdown\",\n        value: function _setUpDropdown(e, t, n) {\n          var i = this.editor;\n          var o = i.t;\n          var s = e.buttonView;\n          e.bind(\"isEnabled\").to(n);\n          e.panelView.children.add(t);\n          s.set({\n            label: o(\"n\"),\n            icon: jC,\n            tooltip: true\n          });\n          s.on(\"open\", function () {\n            t.url = n.value || \"\";\n            t.urlInputView.select();\n            t.focus();\n          }, {\n            priority: \"low\"\n          });\n          e.on(\"submit\", function () {\n            if (t.isValid()) {\n              i.execute(\"mediaEmbed\", t.url);\n              r();\n            }\n          });\n          e.on(\"change:isOpen\", function () {\n            return t.resetFormStatus();\n          });\n          e.on(\"cancel\", function () {\n            return r();\n          });\n\n          function r() {\n            i.editing.view.focus();\n            e.isOpen = false;\n          }\n        }\n      }, {\n        key: \"_setUpForm\",\n        value: function _setUpForm(e, t, n) {\n          e.delegate(\"submit\", \"cancel\").to(t);\n          e.urlInputView.bind(\"value\").to(n, \"value\");\n          e.urlInputView.bind(\"isReadOnly\").to(n, \"isEnabled\", function (e) {\n            return !e;\n          });\n          e.saveButtonView.bind(\"isEnabled\").to(n);\n        }\n      }], [{\n        key: \"requires\",\n        get: function get() {\n          return [lC];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"MediaEmbedUI\";\n        }\n      }]);\n\n      return DC;\n    }(Ow);\n\n    function zC(e, t) {\n      return [function (t) {\n        if (!t.url.length) {\n          return e(\"o\");\n        }\n      }, function (n) {\n        if (!t.hasMedia(n.url)) {\n          return e(\"p\");\n        }\n      }];\n    }\n\n    var BC = n(83);\n\n    var VC = /*#__PURE__*/function (_Ow54) {\n      _inherits(VC, _Ow54);\n\n      var _super151 = _createSuper(VC);\n\n      function VC() {\n        _classCallCheck(this, VC);\n\n        return _super151.apply(this, arguments);\n      }\n\n      _createClass(VC, null, [{\n        key: \"requires\",\n        get: function get() {\n          return [lC, DC, NC, Lk];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"MediaEmbed\";\n        }\n      }]);\n\n      return VC;\n    }(Ow);\n\n    function FC(e, t) {\n      var _iterator347 = _createForOfIteratorHelper(e.getChildren()),\n          _step347;\n\n      try {\n        for (_iterator347.s(); !(_step347 = _iterator347.n()).done;) {\n          var _n241 = _step347.value;\n\n          if (_n241.is(\"b\") && _n241.getStyle(\"font-weight\") === \"normal\") {\n            var _i203 = e.getChildIndex(_n241);\n\n            t.remove(_n241);\n            t.insertChild(_i203, _n241.getChildren(), e);\n          }\n        }\n      } catch (err) {\n        _iterator347.e(err);\n      } finally {\n        _iterator347.f();\n      }\n    }\n\n    function HC(e, t) {\n      if (!e.childCount) {\n        return;\n      }\n\n      var n = new Lx(e.document);\n      var i = WC(e, n);\n\n      if (!i.length) {\n        return;\n      }\n\n      var o = null;\n      var s = 1;\n      i.forEach(function (e, r) {\n        var a = XC(i[r - 1], e);\n        var c = a ? null : i[r - 1];\n        var l = KC(c, e);\n\n        if (a) {\n          o = null;\n          s = 1;\n        }\n\n        if (!o || l !== 0) {\n          var _i204 = $C(e, t);\n\n          if (!o) {\n            o = qC(_i204, e.element, n);\n          } else if (e.indent > s) {\n            var _e298 = o.getChild(o.childCount - 1);\n\n            var _t267 = _e298.getChild(_e298.childCount - 1);\n\n            o = qC(_i204, _t267, n);\n            s += 1;\n          } else if (e.indent < s) {\n            var _t268 = s - e.indent;\n\n            o = ZC(o, _t268);\n            s = parseInt(e.indent);\n          }\n\n          if (e.indent <= s) {\n            if (!o.is(_i204.type)) {\n              o = n.rename(_i204.type, o);\n            }\n          }\n        }\n\n        var d = YC(e.element, n);\n        n.appendChild(d, o);\n      });\n    }\n\n    function UC(e, t) {\n      var _iterator348 = _createForOfIteratorHelper(t.createRangeIn(e)),\n          _step348;\n\n      try {\n        for (_iterator348.s(); !(_step348 = _iterator348.n()).done;) {\n          var _n242 = _step348.value;\n          var _e299 = _n242.item;\n\n          if (_e299.is(\"li\")) {\n            var _n243 = _e299.getChild(0);\n\n            if (_n243.is(\"p\")) {\n              t.unwrapElement(_n243);\n            }\n          }\n        }\n      } catch (err) {\n        _iterator348.e(err);\n      } finally {\n        _iterator348.f();\n      }\n    }\n\n    function WC(e, t) {\n      var n = t.createRangeIn(e);\n      var i = new Ur({\n        name: /^p|h\\d+$/,\n        styles: {\n          \"mso-list\": /.*/\n        }\n      });\n      var o = [];\n\n      var _iterator349 = _createForOfIteratorHelper(n),\n          _step349;\n\n      try {\n        for (_iterator349.s(); !(_step349 = _iterator349.n()).done;) {\n          var _e300 = _step349.value;\n\n          if (_e300.type === \"elementStart\" && i.match(_e300.item)) {\n            var _t269 = JC(_e300.item);\n\n            o.push({\n              element: _e300.item,\n              id: _t269.id,\n              order: _t269.order,\n              indent: _t269.indent\n            });\n          }\n        }\n      } catch (err) {\n        _iterator349.e(err);\n      } finally {\n        _iterator349.f();\n      }\n\n      return o;\n    }\n\n    function $C(e, t) {\n      var n = new RegExp(\"@list l\".concat(e.id, \":level\").concat(e.indent, \"\\\\s*({[^}]*)\"), \"gi\");\n      var i = /mso-level-number-format:([^;]*);/gi;\n      var o = n.exec(t);\n      var s = \"decimal\";\n\n      if (o && o[1]) {\n        var _e301 = i.exec(o[1]);\n\n        if (_e301 && _e301[1]) {\n          s = _e301[1].trim();\n        }\n      }\n\n      return {\n        type: s !== \"bullet\" && s !== \"image\" ? \"ol\" : \"ul\",\n        style: s\n      };\n    }\n\n    function qC(e, t, n) {\n      var i = t.parent;\n      var o = n.createElement(e.type);\n      var s = i.getChildIndex(t) + 1;\n      n.insertChild(s, o, i);\n      return o;\n    }\n\n    function YC(e, t) {\n      QC(e, t);\n      return t.rename(\"li\", e);\n    }\n\n    function JC(e) {\n      var t = {};\n      var n = e.getStyle(\"mso-list\");\n\n      if (n) {\n        var _e302 = n.match(/(^|\\s+)l(\\d+)/i);\n\n        var _i205 = n.match(/\\s*lfo(\\d+)/i);\n\n        var _o92 = n.match(/\\s*level(\\d+)/i);\n\n        if (_e302 && _i205 && _o92) {\n          t.id = _e302[2];\n          t.order = _i205[1];\n          t.indent = _o92[1];\n        }\n      }\n\n      return t;\n    }\n\n    function QC(e, t) {\n      var n = new Ur({\n        name: \"span\",\n        styles: {\n          \"mso-list\": \"Ignore\"\n        }\n      });\n      var i = t.createRangeIn(e);\n\n      var _iterator350 = _createForOfIteratorHelper(i),\n          _step350;\n\n      try {\n        for (_iterator350.s(); !(_step350 = _iterator350.n()).done;) {\n          var _e303 = _step350.value;\n\n          if (_e303.type === \"elementStart\" && n.match(_e303.item)) {\n            t.remove(_e303.item);\n          }\n        }\n      } catch (err) {\n        _iterator350.e(err);\n      } finally {\n        _iterator350.f();\n      }\n    }\n\n    function XC(e, t) {\n      if (!e) {\n        return true;\n      }\n\n      if (e.id !== t.id) {\n        return true;\n      }\n\n      var n = t.element.previousSibling;\n\n      if (!n) {\n        return true;\n      }\n\n      return !GC(n);\n    }\n\n    function GC(e) {\n      return e.is(\"ol\") || e.is(\"ul\");\n    }\n\n    function KC(e, t) {\n      return e ? t.indent - e.indent : t.indent - 1;\n    }\n\n    function ZC(e, t) {\n      var n = e.getAncestors({\n        parentFirst: true\n      });\n      var i = null;\n      var o = 0;\n\n      var _iterator351 = _createForOfIteratorHelper(n),\n          _step351;\n\n      try {\n        for (_iterator351.s(); !(_step351 = _iterator351.n()).done;) {\n          var _e304 = _step351.value;\n\n          if (_e304.name === \"ul\" || _e304.name === \"ol\") {\n            o++;\n          }\n\n          if (o === t) {\n            i = _e304;\n            break;\n          }\n        }\n      } catch (err) {\n        _iterator351.e(err);\n      } finally {\n        _iterator351.f();\n      }\n\n      return i;\n    }\n\n    var eT = /id=(\"|')docs-internal-guid-[-0-9a-f]+(\"|')/i;\n\n    var tT = /*#__PURE__*/function () {\n      function tT(e) {\n        _classCallCheck(this, tT);\n\n        this.document = e;\n      }\n\n      _createClass(tT, [{\n        key: \"isActive\",\n        value: function isActive(e) {\n          return eT.test(e);\n        }\n      }, {\n        key: \"execute\",\n        value: function execute(e) {\n          var t = new Lx(this.document);\n          FC(e.content, t);\n          UC(e.content, t);\n        }\n      }]);\n\n      return tT;\n    }();\n\n    function nT(e) {\n      return oT(oT(e)).replace(/(<span\\s+style=['\"]mso-spacerun:yes['\"]>[\\s]*?)[\\r\\n]+(\\s*<\\/span>)/g, \"$1$2\").replace(/<span\\s+style=['\"]mso-spacerun:yes['\"]><\\/span>/g, \"\").replace(/ <\\//g, \" </\").replace(/ <o:p><\\/o:p>/g, \" <o:p></o:p>\").replace(/<o:p>(&nbsp;|\\u00A0)<\\/o:p>/g, \"\").replace(/>(\\s*[\\r\\n]\\s*)</g, \"><\");\n    }\n\n    function iT(e) {\n      e.querySelectorAll(\"span[style*=spacerun]\").forEach(function (e) {\n        var t = e.childNodes && e.childNodes[0] && e.childNodes[0].data && e.childNodes[0].data.length || 0;\n        e.innerHTML = Array(t + 1).join(\"  \").substr(0, t);\n      });\n    }\n\n    function oT(e) {\n      return e.replace(/<span(?: class=\"Apple-converted-space\"|)>(\\s+)<\\/span>/g, function (e, t) {\n        return t.length === 1 ? \" \" : Array(t.length + 1).join(\"  \").substr(0, t.length);\n      });\n    }\n\n    function sT(e) {\n      var t = new DOMParser();\n      e = e.replace(/<!--\\[if gte vml 1]>/g, \"\");\n      var n = nT(cT(e));\n      var i = t.parseFromString(n, \"text/html\");\n      iT(i);\n      var o = i.body.innerHTML;\n      var s = rT(i);\n      var r = aT(i);\n      return {\n        body: s,\n        bodyString: o,\n        styles: r.styles,\n        stylesString: r.stylesString\n      };\n    }\n\n    function rT(e) {\n      var t = new pl(new Nc());\n      var n = new Dd(t, {\n        blockFillerMode: \"nbsp\"\n      });\n      var i = e.createDocumentFragment();\n      var o = e.body.childNodes;\n\n      while (o.length > 0) {\n        i.appendChild(o[0]);\n      }\n\n      return n.domToView(i);\n    }\n\n    function aT(e) {\n      var t = [];\n      var n = [];\n      var i = Array.from(e.getElementsByTagName(\"style\"));\n\n      for (var _i207 = 0, _i206 = i; _i207 < _i206.length; _i207++) {\n        var _e305 = _i206[_i207];\n\n        if (_e305.sheet && _e305.sheet.cssRules && _e305.sheet.cssRules.length) {\n          t.push(_e305.sheet);\n          n.push(_e305.innerHTML);\n        }\n      }\n\n      return {\n        styles: t,\n        stylesString: n.join(\" \")\n      };\n    }\n\n    function cT(e) {\n      var t = /<\\/body>(.*?)(<\\/html>|$)/;\n      var n = e.match(t);\n\n      if (n && n[1]) {\n        e = e.slice(0, n.index) + e.slice(n.index).replace(n[1], \"\");\n      }\n\n      return e;\n    }\n\n    function lT(e, t) {\n      if (!e.childCount) {\n        return;\n      }\n\n      var n = new Lx();\n      var i = uT(e, n);\n      hT(i, e, n);\n      fT(e, n);\n      var o = mT(e, n);\n\n      if (o.length) {\n        pT(o, gT(t), n);\n      }\n    }\n\n    function dT(e) {\n      return btoa(e.match(/\\w{2}/g).map(function (e) {\n        return String.fromCharCode(parseInt(e, 16));\n      }).join(\"\"));\n    }\n\n    function uT(e, t) {\n      var n = t.createRangeIn(e);\n      var i = new Ur({\n        name: /v:(.+)/\n      });\n      var o = [];\n\n      var _iterator352 = _createForOfIteratorHelper(n),\n          _step352;\n\n      try {\n        for (_iterator352.s(); !(_step352 = _iterator352.n()).done;) {\n          var _e306 = _step352.value;\n          var _t270 = _e306.item;\n\n          var _n244 = _t270.previousSibling && _t270.previousSibling.name || null;\n\n          if (i.match(_t270) && _t270.getAttribute(\"o:gfxdata\") && _n244 !== \"v:shapetype\") {\n            o.push(_e306.item.getAttribute(\"id\"));\n          }\n        }\n      } catch (err) {\n        _iterator352.e(err);\n      } finally {\n        _iterator352.f();\n      }\n\n      return o;\n    }\n\n    function hT(e, t, n) {\n      var i = n.createRangeIn(t);\n      var o = new Ur({\n        name: \"img\"\n      });\n      var s = [];\n\n      var _iterator353 = _createForOfIteratorHelper(i),\n          _step353;\n\n      try {\n        for (_iterator353.s(); !(_step353 = _iterator353.n()).done;) {\n          var _t271 = _step353.value;\n\n          if (o.match(_t271.item)) {\n            var _n245 = _t271.item;\n\n            var _i209 = _n245.getAttribute(\"v:shapes\") ? _n245.getAttribute(\"v:shapes\").split(\" \") : [];\n\n            if (_i209.length && _i209.every(function (t) {\n              return e.indexOf(t) > -1;\n            })) {\n              s.push(_n245);\n            } else if (!_n245.getAttribute(\"src\")) {\n              s.push(_n245);\n            }\n          }\n        }\n      } catch (err) {\n        _iterator353.e(err);\n      } finally {\n        _iterator353.f();\n      }\n\n      for (var _i208 = 0, _s54 = s; _i208 < _s54.length; _i208++) {\n        var _e307 = _s54[_i208];\n        n.remove(_e307);\n      }\n    }\n\n    function fT(e, t) {\n      var n = t.createRangeIn(e);\n      var i = new Ur({\n        name: /v:(.+)/\n      });\n      var o = [];\n\n      var _iterator354 = _createForOfIteratorHelper(n),\n          _step354;\n\n      try {\n        for (_iterator354.s(); !(_step354 = _iterator354.n()).done;) {\n          var _e309 = _step354.value;\n\n          if (i.match(_e309.item)) {\n            o.push(_e309.item);\n          }\n        }\n      } catch (err) {\n        _iterator354.e(err);\n      } finally {\n        _iterator354.f();\n      }\n\n      for (var _i210 = 0, _o93 = o; _i210 < _o93.length; _i210++) {\n        var _e308 = _o93[_i210];\n        t.remove(_e308);\n      }\n    }\n\n    function mT(e, t) {\n      var n = t.createRangeIn(e);\n      var i = new Ur({\n        name: \"img\"\n      });\n      var o = [];\n\n      var _iterator355 = _createForOfIteratorHelper(n),\n          _step355;\n\n      try {\n        for (_iterator355.s(); !(_step355 = _iterator355.n()).done;) {\n          var _e310 = _step355.value;\n\n          if (i.match(_e310.item)) {\n            if (_e310.item.getAttribute(\"src\").startsWith(\"file://\")) {\n              o.push(_e310.item);\n            }\n          }\n        }\n      } catch (err) {\n        _iterator355.e(err);\n      } finally {\n        _iterator355.f();\n      }\n\n      return o;\n    }\n\n    function gT(e) {\n      if (!e) {\n        return [];\n      }\n\n      var t = /{\\\\pict[\\s\\S]+?\\\\bliptag-?\\d+(\\\\blipupi-?\\d+)?({\\\\\\*\\\\blipuid\\s?[\\da-fA-F]+)?[\\s}]*?/;\n      var n = new RegExp(\"(?:(\" + t.source + \"))([\\\\da-fA-F\\\\s]+)\\\\}\", \"g\");\n      var i = e.match(n);\n      var o = [];\n\n      if (i) {\n        var _iterator356 = _createForOfIteratorHelper(i),\n            _step356;\n\n        try {\n          for (_iterator356.s(); !(_step356 = _iterator356.n()).done;) {\n            var _e311 = _step356.value;\n            var _n246 = false;\n\n            if (_e311.includes(\"\\\\pngblip\")) {\n              _n246 = \"image/png\";\n            } else if (_e311.includes(\"\\\\jpegblip\")) {\n              _n246 = \"image/jpeg\";\n            }\n\n            if (_n246) {\n              o.push({\n                hex: _e311.replace(t, \"\").replace(/[^\\da-fA-F]/g, \"\"),\n                type: _n246\n              });\n            }\n          }\n        } catch (err) {\n          _iterator356.e(err);\n        } finally {\n          _iterator356.f();\n        }\n      }\n\n      return o;\n    }\n\n    function pT(e, t, n) {\n      if (e.length === t.length) {\n        for (var _i211 = 0; _i211 < e.length; _i211++) {\n          var _o94 = \"data:\".concat(t[_i211].type, \";base64,\").concat(dT(t[_i211].hex));\n\n          n.setAttribute(\"src\", _o94, e[_i211]);\n        }\n      }\n    }\n\n    var bT = /<meta\\s*name=\"?generator\"?\\s*content=\"?microsoft\\s*word\\s*\\d+\"?\\/?>/i;\n    var wT = /xmlns:o=\"urn:schemas-microsoft-com/i;\n\n    var _T = /*#__PURE__*/function () {\n      function _T() {\n        _classCallCheck(this, _T);\n      }\n\n      _createClass(_T, [{\n        key: \"isActive\",\n        value: function isActive(e) {\n          return bT.test(e) || wT.test(e);\n        }\n      }, {\n        key: \"execute\",\n        value: function execute(e) {\n          var _sT = sT(e.dataTransfer.getData(\"text/html\")),\n              t = _sT.body,\n              n = _sT.stylesString;\n\n          HC(t, n);\n          lT(t, e.dataTransfer.getData(\"text/rtf\"));\n          e.content = t;\n        }\n      }]);\n\n      return _T;\n    }();\n\n    var vT = /*#__PURE__*/function (_Ow55) {\n      _inherits(vT, _Ow55);\n\n      var _super152 = _createSuper(vT);\n\n      function vT() {\n        _classCallCheck(this, vT);\n\n        return _super152.apply(this, arguments);\n      }\n\n      _createClass(vT, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          var t = [];\n          t.push(new _T());\n          t.push(new tT(e.editing.view.document));\n          e.plugins.get(\"Clipboard\").on(\"inputTransformation\", function (e, n) {\n            if (n.isTransformedWithPasteFromOffice) {\n              return;\n            }\n\n            var i = n.dataTransfer.getData(\"text/html\");\n            var o = t.find(function (e) {\n              return e.isActive(i);\n            });\n\n            if (o) {\n              o.execute(n);\n              n.isTransformedWithPasteFromOffice = true;\n            }\n          }, {\n            priority: \"high\"\n          });\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"PasteFromOffice\";\n        }\n      }, {\n        key: \"requires\",\n        get: function get() {\n          return [Rx];\n        }\n      }]);\n\n      return vT;\n    }(Ow);\n\n    function kT(e, t) {\n      var n = t.parent;\n\n      while (n) {\n        if (n.name === e) {\n          return n;\n        }\n\n        n = n.parent;\n      }\n    }\n\n    function yT(e, t, n, i) {\n      var o = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n\n      if (t > o) {\n        i.setAttribute(e, t, n);\n      } else {\n        i.removeAttribute(e, n);\n      }\n    }\n\n    function xT(e, t) {\n      var n = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      var i = e.createElement(\"tableCell\", n);\n      e.insertElement(\"paragraph\", i);\n      e.insert(i, t);\n    }\n\n    function AT(e) {\n      if (!e || !ce(e)) {\n        return e;\n      }\n\n      var t = e.top,\n          n = e.right,\n          i = e.bottom,\n          o = e.left;\n\n      if (t == n && n == i && i == o) {\n        return t;\n      }\n    }\n\n    function CT(e, t) {\n      var n = parseFloat(e);\n\n      if (Number.isNaN(n)) {\n        return e;\n      }\n\n      if (String(n) !== String(e)) {\n        return e;\n      }\n\n      return \"\".concat(n).concat(t);\n    }\n\n    function TT(e, t) {\n      var n = t.parent.parent;\n      var i = parseInt(n.getAttribute(\"headingColumns\") || 0);\n\n      var _e$getCellLocation = e.getCellLocation(t),\n          o = _e$getCellLocation.column;\n\n      return !!i && o < i;\n    }\n\n    function MT() {\n      return function (e) {\n        e.on(\"element:table\", function (e, t, n) {\n          var i = t.viewItem;\n\n          if (!n.consumable.test(i, {\n            name: true\n          })) {\n            return;\n          }\n\n          var _ET = ET(i),\n              o = _ET.rows,\n              s = _ET.headingRows,\n              r = _ET.headingColumns;\n\n          var a = {};\n\n          if (r) {\n            a.headingColumns = r;\n          }\n\n          if (s) {\n            a.headingRows = s;\n          }\n\n          var c = n.writer.createElement(\"table\", a);\n          var l = n.splitToAllowedParent(c, t.modelCursor);\n\n          if (!l) {\n            return;\n          }\n\n          n.writer.insert(c, l.position);\n          n.consumable.consume(i, {\n            name: true\n          });\n\n          if (o.length) {\n            o.forEach(function (e) {\n              return n.convertItem(e, n.writer.createPositionAt(c, \"end\"));\n            });\n          } else {\n            var _e312 = n.writer.createElement(\"tableRow\");\n\n            n.writer.insert(_e312, n.writer.createPositionAt(c, \"end\"));\n            xT(n.writer, n.writer.createPositionAt(_e312, \"end\"));\n          }\n\n          t.modelRange = n.writer.createRange(n.writer.createPositionBefore(c), n.writer.createPositionAfter(c));\n\n          if (l.cursorParent) {\n            t.modelCursor = n.writer.createPositionAt(l.cursorParent, 0);\n          } else {\n            t.modelCursor = t.modelRange.end;\n          }\n        });\n      };\n    }\n\n    function PT(e) {\n      return function (t) {\n        t.on(\"element:\".concat(e), function (e, t, n) {\n          var i = t.viewItem;\n\n          if (!n.consumable.test(i, {\n            name: true\n          })) {\n            return;\n          }\n\n          var o = n.writer.createElement(\"tableCell\");\n          var s = n.splitToAllowedParent(o, t.modelCursor);\n\n          if (!s) {\n            return;\n          }\n\n          n.writer.insert(o, s.position);\n          n.consumable.consume(i, {\n            name: true\n          });\n          var r = n.writer.createPositionAt(o, 0);\n          n.convertChildren(i, r);\n\n          if (!o.childCount) {\n            n.writer.insertElement(\"paragraph\", r);\n          }\n\n          t.modelRange = n.writer.createRange(n.writer.createPositionBefore(o), n.writer.createPositionAfter(o));\n          t.modelCursor = t.modelRange.end;\n        });\n      };\n    }\n\n    function ET(e) {\n      var t = {\n        headingRows: 0,\n        headingColumns: 0\n      };\n      var n = [];\n      var i = [];\n      var o;\n\n      for (var _i212 = 0, _Array$from7 = Array.from(e.getChildren()); _i212 < _Array$from7.length; _i212++) {\n        var _s55 = _Array$from7[_i212];\n\n        if (_s55.name === \"tbody\" || _s55.name === \"thead\" || _s55.name === \"tfoot\") {\n          if (_s55.name === \"thead\" && !o) {\n            o = _s55;\n          }\n\n          var _e313 = Array.from(_s55.getChildren()).filter(function (e) {\n            return e.is(\"element\", \"tr\");\n          });\n\n          var _iterator357 = _createForOfIteratorHelper(_e313),\n              _step357;\n\n          try {\n            for (_iterator357.s(); !(_step357 = _iterator357.n()).done;) {\n              var _s56 = _step357.value;\n\n              if (_s56.parent.name === \"thead\" && _s56.parent === o) {\n                t.headingRows++;\n                n.push(_s56);\n              } else {\n                i.push(_s56);\n\n                var _e314 = ST(_s56, t, o);\n\n                if (_e314 > t.headingColumns) {\n                  t.headingColumns = _e314;\n                }\n              }\n            }\n          } catch (err) {\n            _iterator357.e(err);\n          } finally {\n            _iterator357.f();\n          }\n        }\n      }\n\n      t.rows = [].concat(n, i);\n      return t;\n    }\n\n    function ST(e) {\n      var t = 0;\n      var n = 0;\n      var i = Array.from(e.getChildren()).filter(function (e) {\n        return e.name === \"th\" || e.name === \"td\";\n      });\n\n      while (n < i.length && i[n].name === \"th\") {\n        var _e315 = i[n];\n\n        var _o95 = parseInt(_e315.getAttribute(\"colspan\") || 1);\n\n        t = t + _o95;\n        n++;\n      }\n\n      return t;\n    }\n\n    var IT = /*#__PURE__*/function (_Symbol$iterator14) {\n      function IT(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        _classCallCheck(this, IT);\n\n        this.table = e;\n        this.startRow = t.startRow || 0;\n        this.endRow = typeof t.endRow == \"number\" ? t.endRow : undefined;\n        this.includeSpanned = !!t.includeSpanned;\n        this.column = typeof t.column == \"number\" ? t.column : undefined;\n        this._skipRows = new Set();\n        this._row = 0;\n        this._column = 0;\n        this._cellIndex = 0;\n        this._spannedCells = new Map();\n        this._nextCellAtColumn = -1;\n      }\n\n      _createClass(IT, [{\n        key: _Symbol$iterator14,\n        value: function value() {\n          return this;\n        }\n      }, {\n        key: \"next\",\n        value: function next() {\n          var e = this.table.getChild(this._row);\n\n          if (!e || this._isOverEndRow()) {\n            return {\n              done: true\n            };\n          }\n\n          var t, n, i;\n\n          if (this._isSpanned(this._row, this._column)) {\n            t = this._getSpanned(this._row, this._column);\n            n = !this.includeSpanned || this._shouldSkipRow() || this._shouldSkipColumn();\n            i = this._formatOutValue(t, this._column, true);\n          } else {\n            t = e.getChild(this._cellIndex);\n\n            if (!t) {\n              this._row++;\n              this._column = 0;\n              this._cellIndex = 0;\n              this._nextCellAtColumn = -1;\n              return this.next();\n            }\n\n            var _o96 = parseInt(t.getAttribute(\"colspan\") || 1);\n\n            var _s57 = parseInt(t.getAttribute(\"rowspan\") || 1);\n\n            if (_o96 > 1 || _s57 > 1) {\n              this._recordSpans(this._row, this._column, _s57, _o96, t);\n            }\n\n            this._nextCellAtColumn = this._column + _o96;\n            n = this._shouldSkipRow() || this._shouldSkipColumn();\n            i = this._formatOutValue(t, this._column, false, _s57, _o96);\n          }\n\n          this._column++;\n\n          if (this._column == this._nextCellAtColumn) {\n            this._cellIndex++;\n          }\n\n          return n ? this.next() : i;\n        }\n      }, {\n        key: \"skipRow\",\n        value: function skipRow(e) {\n          this._skipRows.add(e);\n        }\n      }, {\n        key: \"_isOverEndRow\",\n        value: function _isOverEndRow() {\n          return this.endRow !== undefined && this._row > this.endRow;\n        }\n      }, {\n        key: \"_formatOutValue\",\n        value: function _formatOutValue(e, t, n) {\n          var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n          var o = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 1;\n          return {\n            done: false,\n            value: {\n              cell: e,\n              row: this._row,\n              column: t,\n              isSpanned: n,\n              rowspan: i,\n              colspan: o,\n              cellIndex: this._cellIndex\n            }\n          };\n        }\n      }, {\n        key: \"_shouldSkipRow\",\n        value: function _shouldSkipRow() {\n          var e = this._row < this.startRow;\n\n          var t = this._skipRows.has(this._row);\n\n          return e || t;\n        }\n      }, {\n        key: \"_shouldSkipColumn\",\n        value: function _shouldSkipColumn() {\n          if (this.column === undefined) {\n            return false;\n          }\n\n          return this.column != this._column;\n        }\n      }, {\n        key: \"_isSpanned\",\n        value: function _isSpanned(e, t) {\n          if (!this._spannedCells.has(e)) {\n            return false;\n          }\n\n          var n = this._spannedCells.get(e);\n\n          return n.has(t);\n        }\n      }, {\n        key: \"_getSpanned\",\n        value: function _getSpanned(e, t) {\n          return this._spannedCells.get(e).get(t);\n        }\n      }, {\n        key: \"_recordSpans\",\n        value: function _recordSpans(e, t, n, i, o) {\n          for (var _n247 = t + 1; _n247 <= t + i - 1; _n247++) {\n            this._markSpannedCell(e, _n247, o);\n          }\n\n          for (var _s58 = e + 1; _s58 < e + n; _s58++) {\n            for (var _e316 = t; _e316 <= t + i - 1; _e316++) {\n              this._markSpannedCell(_s58, _e316, o);\n            }\n          }\n        }\n      }, {\n        key: \"_markSpannedCell\",\n        value: function _markSpannedCell(e, t, n) {\n          if (!this._spannedCells.has(e)) {\n            this._spannedCells.set(e, new Map());\n          }\n\n          var i = this._spannedCells.get(e);\n\n          i.set(t, n);\n        }\n      }]);\n\n      return IT;\n    }(Symbol.iterator);\n\n    function OT(e, t) {\n      t.setCustomProperty(\"table\", true, e);\n      return h_(e, t, {\n        hasSelectionHandle: true\n      });\n    }\n\n    function NT(e) {\n      return !!e.getCustomProperty(\"table\") && u_(e);\n    }\n\n    function RT(e) {\n      var t = e.getSelectedElement();\n\n      if (t && NT(t)) {\n        return t;\n      }\n\n      return null;\n    }\n\n    function LT(e) {\n      var t = kT(\"table\", e.getFirstPosition());\n\n      if (t && NT(t.parent)) {\n        return t.parent;\n      }\n\n      return null;\n    }\n\n    function jT(e) {\n      var t = [];\n\n      var _iterator358 = _createForOfIteratorHelper(BT(e.getRanges())),\n          _step358;\n\n      try {\n        for (_iterator358.s(); !(_step358 = _iterator358.n()).done;) {\n          var _n248 = _step358.value;\n\n          var _e317 = _n248.getContainedElement();\n\n          if (_e317 && _e317.is(\"tableCell\")) {\n            t.push(_e317);\n          }\n        }\n      } catch (err) {\n        _iterator358.e(err);\n      } finally {\n        _iterator358.f();\n      }\n\n      return t;\n    }\n\n    function DT(e) {\n      var t = [];\n\n      var _iterator359 = _createForOfIteratorHelper(e.getRanges()),\n          _step359;\n\n      try {\n        for (_iterator359.s(); !(_step359 = _iterator359.n()).done;) {\n          var _n249 = _step359.value;\n\n          var _e318 = kT(\"tableCell\", _n249.start);\n\n          if (_e318) {\n            t.push(_e318);\n          }\n        }\n      } catch (err) {\n        _iterator359.e(err);\n      } finally {\n        _iterator359.f();\n      }\n\n      return t;\n    }\n\n    function zT(e) {\n      var t = jT(e);\n\n      if (t.length) {\n        return t;\n      }\n\n      return DT(e);\n    }\n\n    function BT(e) {\n      return Array.from(e).sort(VT);\n    }\n\n    function VT(e, t) {\n      var n = e.start;\n      var i = t.start;\n\n      if (n.isEqual(i)) {\n        return 0;\n      }\n\n      return n.isBefore(i) ? -1 : 1;\n    }\n\n    function FT() {\n      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return function (t) {\n        return t.on(\"insert:table\", function (t, n, i) {\n          var o = n.item;\n\n          if (!i.consumable.consume(o, \"insert\")) {\n            return;\n          }\n\n          i.consumable.consume(o, \"attribute:headingRows:table\");\n          i.consumable.consume(o, \"attribute:headingColumns:table\");\n          var s = e && e.asWidget;\n          var r = i.writer.createContainerElement(\"figure\", {\n            class: \"table\"\n          });\n          var a = i.writer.createContainerElement(\"table\");\n          i.writer.insert(i.writer.createPositionAt(r, 0), a);\n          var c;\n\n          if (s) {\n            c = OT(r, i.writer);\n          }\n\n          var l = new IT(o);\n          var d = {\n            headingRows: o.getAttribute(\"headingRows\") || 0,\n            headingColumns: o.getAttribute(\"headingColumns\") || 0\n          };\n          var u = new Map();\n\n          var _iterator360 = _createForOfIteratorHelper(l),\n              _step360;\n\n          try {\n            for (_iterator360.s(); !(_step360 = _iterator360.n()).done;) {\n              var _t272 = _step360.value;\n              var _n250 = _t272.row,\n                  _s59 = _t272.cell;\n\n              var _r37 = ZT(KT(_n250, d), a, i);\n\n              var _c11 = o.getChild(_n250);\n\n              var _l6 = u.get(_n250) || XT(_c11, _n250, _r37, i);\n\n              u.set(_n250, _l6);\n              i.consumable.consume(_s59, \"insert\");\n\n              var _h2 = i.writer.createPositionAt(_l6, \"end\");\n\n              QT(_t272, d, _h2, i, e);\n            }\n          } catch (err) {\n            _iterator360.e(err);\n          } finally {\n            _iterator360.f();\n          }\n\n          var h = i.mapper.toViewPosition(n.range.start);\n          i.mapper.bindElements(o, s ? c : r);\n          i.writer.insert(h, s ? c : r);\n        });\n      };\n    }\n\n    function HT() {\n      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return function (t) {\n        return t.on(\"insert:tableRow\", function (t, n, i) {\n          var o = n.item;\n\n          if (!i.consumable.consume(o, \"insert\")) {\n            return;\n          }\n\n          var s = o.parent;\n          var r = i.mapper.toViewElement(s);\n          var a = oM(r);\n          var c = s.getChildIndex(o);\n          var l = new IT(s, {\n            startRow: c,\n            endRow: c\n          });\n          var d = {\n            headingRows: s.getAttribute(\"headingRows\") || 0,\n            headingColumns: s.getAttribute(\"headingColumns\") || 0\n          };\n          var u = new Map();\n\n          var _iterator361 = _createForOfIteratorHelper(l),\n              _step361;\n\n          try {\n            for (_iterator361.s(); !(_step361 = _iterator361.n()).done;) {\n              var _t273 = _step361.value;\n\n              var _n251 = ZT(KT(c, d), a, i);\n\n              var _s60 = u.get(c) || XT(o, c, _n251, i);\n\n              u.set(c, _s60);\n              i.consumable.consume(_t273.cell, \"insert\");\n\n              var _r38 = i.writer.createPositionAt(_s60, \"end\");\n\n              QT(_t273, d, _r38, i, e);\n            }\n          } catch (err) {\n            _iterator361.e(err);\n          } finally {\n            _iterator361.f();\n          }\n        });\n      };\n    }\n\n    function UT() {\n      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return function (t) {\n        return t.on(\"insert:tableCell\", function (t, n, i) {\n          var o = n.item;\n\n          if (!i.consumable.consume(o, \"insert\")) {\n            return;\n          }\n\n          var s = o.parent;\n          var r = s.parent;\n          var a = r.getChildIndex(s);\n          var c = new IT(r, {\n            startRow: a,\n            endRow: a\n          });\n          var l = {\n            headingRows: r.getAttribute(\"headingRows\") || 0,\n            headingColumns: r.getAttribute(\"headingColumns\") || 0\n          };\n\n          var _iterator362 = _createForOfIteratorHelper(c),\n              _step362;\n\n          try {\n            for (_iterator362.s(); !(_step362 = _iterator362.n()).done;) {\n              var _t274 = _step362.value;\n\n              if (_t274.cell === o) {\n                var _n252 = i.mapper.toViewElement(s);\n\n                var _r39 = i.writer.createPositionAt(_n252, s.getChildIndex(o));\n\n                QT(_t274, l, _r39, i, e);\n                return;\n              }\n            }\n          } catch (err) {\n            _iterator362.e(err);\n          } finally {\n            _iterator362.f();\n          }\n        });\n      };\n    }\n\n    function WT() {\n      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var t = !!e.asWidget;\n      return function (e) {\n        return e.on(\"attribute:headingRows:table\", function (e, n, i) {\n          var o = n.item;\n\n          if (!i.consumable.consume(n.item, e.name)) {\n            return;\n          }\n\n          var s = i.mapper.toViewElement(o);\n          var r = oM(s);\n          var a = n.attributeOldValue;\n          var c = n.attributeNewValue;\n\n          if (c > a) {\n            var _e319 = Array.from(o.getChildren()).filter(function (_ref34) {\n              var e = _ref34.index;\n              return l(e, a - 1, c);\n            });\n\n            var _n253 = ZT(\"thead\", r, i);\n\n            iM(_e319, _n253, i, \"end\");\n\n            var _iterator363 = _createForOfIteratorHelper(_e319),\n                _step363;\n\n            try {\n              for (_iterator363.s(); !(_step363 = _iterator363.n()).done;) {\n                var _n254 = _step363.value;\n\n                var _iterator364 = _createForOfIteratorHelper(_n254.getChildren()),\n                    _step364;\n\n                try {\n                  for (_iterator364.s(); !(_step364 = _iterator364.n()).done;) {\n                    var _e320 = _step364.value;\n                    YT(_e320, \"th\", i, t);\n                  }\n                } catch (err) {\n                  _iterator364.e(err);\n                } finally {\n                  _iterator364.f();\n                }\n              }\n            } catch (err) {\n              _iterator363.e(err);\n            } finally {\n              _iterator363.f();\n            }\n\n            nM(\"tbody\", r, i);\n          } else {\n            var _e321 = Array.from(o.getChildren()).filter(function (_ref35) {\n              var e = _ref35.index;\n              return l(e, c - 1, a);\n            }).reverse();\n\n            var _n255 = ZT(\"tbody\", r, i);\n\n            iM(_e321, _n255, i, 0);\n\n            var _s61 = new IT(o, {\n              startRow: c ? c - 1 : c,\n              endRow: a - 1\n            });\n\n            var _d3 = {\n              headingRows: o.getAttribute(\"headingRows\") || 0,\n              headingColumns: o.getAttribute(\"headingColumns\") || 0\n            };\n\n            var _iterator365 = _createForOfIteratorHelper(_s61),\n                _step365;\n\n            try {\n              for (_iterator365.s(); !(_step365 = _iterator365.n()).done;) {\n                var _e322 = _step365.value;\n                JT(_e322, _d3, i, t);\n              }\n            } catch (err) {\n              _iterator365.e(err);\n            } finally {\n              _iterator365.f();\n            }\n\n            nM(\"thead\", r, i);\n          }\n\n          function l(e, t, n) {\n            return e > t && e < n;\n          }\n        });\n      };\n    }\n\n    function $T() {\n      var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var t = !!e.asWidget;\n      return function (e) {\n        return e.on(\"attribute:headingColumns:table\", function (e, n, i) {\n          var o = n.item;\n\n          if (!i.consumable.consume(n.item, e.name)) {\n            return;\n          }\n\n          var s = {\n            headingRows: o.getAttribute(\"headingRows\") || 0,\n            headingColumns: o.getAttribute(\"headingColumns\") || 0\n          };\n          var r = n.attributeOldValue;\n          var a = n.attributeNewValue;\n          var c = (r > a ? r : a) - 1;\n\n          var _iterator366 = _createForOfIteratorHelper(new IT(o)),\n              _step366;\n\n          try {\n            for (_iterator366.s(); !(_step366 = _iterator366.n()).done;) {\n              var _e323 = _step366.value;\n\n              if (_e323.column > c) {\n                continue;\n              }\n\n              JT(_e323, s, i, t);\n            }\n          } catch (err) {\n            _iterator366.e(err);\n          } finally {\n            _iterator366.f();\n          }\n        });\n      };\n    }\n\n    function qT() {\n      return function (e) {\n        return e.on(\"remove:tableRow\", function (e, t, n) {\n          e.stop();\n          var i = n.writer;\n          var o = n.mapper;\n          var s = o.toViewPosition(t.position).getLastMatchingPosition(function (e) {\n            return !e.item.is(\"tr\");\n          });\n          var r = s.nodeAfter;\n          var a = r.parent;\n          var c = i.createRangeOn(r);\n          var l = i.remove(c);\n\n          var _iterator367 = _createForOfIteratorHelper(i.createRangeIn(l).getItems()),\n              _step367;\n\n          try {\n            for (_iterator367.s(); !(_step367 = _iterator367.n()).done;) {\n              var _e324 = _step367.value;\n              o.unbindViewElement(_e324);\n            }\n          } catch (err) {\n            _iterator367.e(err);\n          } finally {\n            _iterator367.f();\n          }\n\n          if (!a.childCount) {\n            i.remove(i.createRangeOn(a));\n          }\n        }, {\n          priority: \"higher\"\n        });\n      };\n    }\n\n    function YT(e, t, n, i) {\n      var o = n.writer;\n      var s = n.mapper.toViewElement(e);\n\n      if (!s) {\n        return;\n      }\n\n      var r;\n\n      if (i) {\n        var _e325 = o.createEditableElement(t, s.getAttributes());\n\n        r = p_(_e325, o);\n        o.insert(o.createPositionAfter(s), r);\n        o.move(o.createRangeIn(s), o.createPositionAt(r, 0));\n        o.remove(o.createRangeOn(s));\n      } else {\n        r = o.rename(t, s);\n      }\n\n      n.mapper.unbindViewElement(s);\n      n.mapper.bindElements(e, r);\n    }\n\n    function JT(e, t, n, i) {\n      var o = e.cell;\n      var s = GT(e, t);\n      var r = n.mapper.toViewElement(o);\n\n      if (r && r.name !== s) {\n        YT(o, s, n, i);\n      }\n    }\n\n    function QT(e, t, n, i, o) {\n      var s = o && o.asWidget;\n      var r = GT(e, t);\n      var a = s ? p_(i.writer.createEditableElement(r), i.writer) : i.writer.createContainerElement(r);\n      var c = e.cell;\n      var l = c.getChild(0);\n      var d = c.childCount === 1 && l.name === \"paragraph\";\n      i.writer.insert(n, a);\n\n      if (d && !sM(l)) {\n        var _e326 = c.getChild(0);\n\n        var _t275 = i.writer.createPositionAt(a, \"end\");\n\n        i.consumable.consume(_e326, \"insert\");\n\n        if (o.asWidget) {\n          var _n256 = i.writer.createContainerElement(\"span\", {\n            style: \"display:inline-block\"\n          });\n\n          i.mapper.bindElements(_e326, _n256);\n          i.writer.insert(_t275, _n256);\n          i.mapper.bindElements(c, a);\n        } else {\n          i.mapper.bindElements(c, a);\n          i.mapper.bindElements(_e326, a);\n        }\n      } else {\n        i.mapper.bindElements(c, a);\n      }\n    }\n\n    function XT(e, t, n, i) {\n      i.consumable.consume(e, \"insert\");\n      var o = i.writer.createContainerElement(\"tr\");\n      i.mapper.bindElements(e, o);\n      var s = e.parent.getAttribute(\"headingRows\") || 0;\n      var r = s > 0 && t >= s ? t - s : t;\n      var a = i.writer.createPositionAt(n, r);\n      i.writer.insert(a, o);\n      return o;\n    }\n\n    function GT(e, t) {\n      var n = e.row,\n          i = e.column;\n      var o = t.headingColumns,\n          s = t.headingRows;\n      var r = s && s > n;\n\n      if (r) {\n        return \"th\";\n      }\n\n      var a = o && o > i;\n      return a ? \"th\" : \"td\";\n    }\n\n    function KT(e, t) {\n      return e < t.headingRows ? \"thead\" : \"tbody\";\n    }\n\n    function ZT(e, t, n) {\n      var i = eM(e, t);\n      return i ? i : tM(e, t, n);\n    }\n\n    function eM(e, t) {\n      var _iterator368 = _createForOfIteratorHelper(t.getChildren()),\n          _step368;\n\n      try {\n        for (_iterator368.s(); !(_step368 = _iterator368.n()).done;) {\n          var _n257 = _step368.value;\n\n          if (_n257.name == e) {\n            return _n257;\n          }\n        }\n      } catch (err) {\n        _iterator368.e(err);\n      } finally {\n        _iterator368.f();\n      }\n    }\n\n    function tM(e, t, n) {\n      var i = n.writer.createContainerElement(e);\n      var o = n.writer.createPositionAt(t, e == \"tbody\" ? \"end\" : 0);\n      n.writer.insert(o, i);\n      return i;\n    }\n\n    function nM(e, t, n) {\n      var i = eM(e, t);\n\n      if (i && i.childCount === 0) {\n        n.writer.remove(n.writer.createRangeOn(i));\n      }\n    }\n\n    function iM(e, t, n, i) {\n      var _iterator369 = _createForOfIteratorHelper(e),\n          _step369;\n\n      try {\n        for (_iterator369.s(); !(_step369 = _iterator369.n()).done;) {\n          var _o97 = _step369.value;\n\n          var _e327 = n.mapper.toViewElement(_o97);\n\n          if (_e327) {\n            n.writer.move(n.writer.createRangeOn(_e327), n.writer.createPositionAt(t, i));\n          }\n        }\n      } catch (err) {\n        _iterator369.e(err);\n      } finally {\n        _iterator369.f();\n      }\n    }\n\n    function oM(e) {\n      var _iterator370 = _createForOfIteratorHelper(e.getChildren()),\n          _step370;\n\n      try {\n        for (_iterator370.s(); !(_step370 = _iterator370.n()).done;) {\n          var _t276 = _step370.value;\n\n          if (_t276.name === \"table\") {\n            return _t276;\n          }\n        }\n      } catch (err) {\n        _iterator370.e(err);\n      } finally {\n        _iterator370.f();\n      }\n    }\n\n    function sM(e) {\n      return !!_toConsumableArray(e.getAttributeKeys()).length;\n    }\n\n    var rM = /*#__PURE__*/function (_jw17) {\n      _inherits(rM, _jw17);\n\n      var _super153 = _createSuper(rM);\n\n      function rM() {\n        _classCallCheck(this, rM);\n\n        return _super153.apply(this, arguments);\n      }\n\n      _createClass(rM, [{\n        key: \"refresh\",\n        value: function refresh() {\n          var e = this.editor.model;\n          var t = e.document.selection;\n          var n = e.schema;\n          var i = aM(t.getFirstPosition());\n          this.isEnabled = n.checkChild(i, \"table\");\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          var t = this.editor.model;\n          var n = t.document.selection;\n          var i = this.editor.plugins.get(\"TableUtils\");\n          var o = parseInt(e.rows) || 2;\n          var s = parseInt(e.columns) || 2;\n          var r = b_(n, t);\n          t.change(function (e) {\n            var n = i.createTable(e, o, s);\n            t.insertContent(n, r);\n            e.setSelection(e.createPositionAt(n.getNodeByPath([0, 0, 0]), 0));\n          });\n        }\n      }]);\n\n      return rM;\n    }(jw);\n\n    function aM(e) {\n      var t = e.parent;\n      return t === t.root ? t : t.parent;\n    }\n\n    var cM = /*#__PURE__*/function (_jw18) {\n      _inherits(cM, _jw18);\n\n      var _super154 = _createSuper(cM);\n\n      function cM(e) {\n        var _this224;\n\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        _classCallCheck(this, cM);\n\n        _this224 = _super154.call(this, e);\n        _this224.order = t.order || \"below\";\n        return _this224;\n      }\n\n      _createClass(cM, [{\n        key: \"refresh\",\n        value: function refresh() {\n          var e = this.editor.model.document.selection;\n          var t = kT(\"table\", e.getFirstPosition());\n          this.isEnabled = !!t;\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var e = this.editor;\n          var t = e.model.document.selection;\n          var n = e.plugins.get(\"TableUtils\");\n          var i = this.order === \"above\";\n          var o = i ? t.getFirstPosition() : t.getLastPosition();\n          var s = i ? t.getFirstRange() : t.getLastRange();\n          var r = s.getContainedElement() || kT(\"tableCell\", o);\n          var a = r.parent;\n          var c = a.parent;\n          var l = c.getChildIndex(a);\n          n.insertRows(c, {\n            rows: 1,\n            at: this.order === \"below\" ? l + 1 : l\n          });\n        }\n      }]);\n\n      return cM;\n    }(jw);\n\n    var lM = /*#__PURE__*/function (_jw19) {\n      _inherits(lM, _jw19);\n\n      var _super155 = _createSuper(lM);\n\n      function lM(e) {\n        var _this225;\n\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        _classCallCheck(this, lM);\n\n        _this225 = _super155.call(this, e);\n        _this225.order = t.order || \"right\";\n        return _this225;\n      }\n\n      _createClass(lM, [{\n        key: \"refresh\",\n        value: function refresh() {\n          var e = this.editor.model.document.selection;\n          var t = kT(\"table\", e.getFirstPosition());\n          this.isEnabled = !!t;\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var e = this.editor;\n          var t = e.model.document.selection;\n          var n = e.plugins.get(\"TableUtils\");\n          var i = this.order === \"left\";\n          var o = i ? t.getFirstPosition() : t.getLastPosition();\n          var s = i ? t.getFirstRange() : t.getLastRange();\n          var r = s.getContainedElement() || kT(\"tableCell\", o);\n          var a = r.parent.parent;\n\n          var _n$getCellLocation = n.getCellLocation(r),\n              c = _n$getCellLocation.column;\n\n          n.insertColumns(a, {\n            columns: 1,\n            at: i ? c : c + 1\n          });\n        }\n      }]);\n\n      return lM;\n    }(jw);\n\n    var dM = /*#__PURE__*/function (_jw20) {\n      _inherits(dM, _jw20);\n\n      var _super156 = _createSuper(dM);\n\n      function dM(e) {\n        var _this226;\n\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        _classCallCheck(this, dM);\n\n        _this226 = _super156.call(this, e);\n        _this226.direction = t.direction || \"horizontally\";\n        return _this226;\n      }\n\n      _createClass(dM, [{\n        key: \"refresh\",\n        value: function refresh() {\n          var e = zT(this.editor.model.document.selection);\n          this.isEnabled = e.length === 1;\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var e = zT(this.editor.model.document.selection)[0];\n          var t = this.direction === \"horizontally\";\n          var n = this.editor.plugins.get(\"TableUtils\");\n\n          if (t) {\n            n.splitCellHorizontally(e, 2);\n          } else {\n            n.splitCellVertically(e, 2);\n          }\n        }\n      }]);\n\n      return dM;\n    }(jw);\n\n    var uM = /*#__PURE__*/function (_jw21) {\n      _inherits(uM, _jw21);\n\n      var _super157 = _createSuper(uM);\n\n      function uM(e, t) {\n        var _this227;\n\n        _classCallCheck(this, uM);\n\n        _this227 = _super157.call(this, e);\n        _this227.direction = t.direction;\n        _this227.isHorizontal = _this227.direction == \"right\" || _this227.direction == \"left\";\n        return _this227;\n      }\n\n      _createClass(uM, [{\n        key: \"refresh\",\n        value: function refresh() {\n          var e = this._getMergeableCell();\n\n          this.value = e;\n          this.isEnabled = !!e;\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var _this228 = this;\n\n          var e = this.editor.model;\n          var t = e.document;\n          var n = DT(t.selection)[0];\n          var i = this.value;\n          var o = this.direction;\n          e.change(function (e) {\n            var t = o == \"right\" || o == \"down\";\n            var s = t ? n : i;\n            var r = t ? i : n;\n            var a = r.parent;\n            gM(r, s, e);\n            var c = _this228.isHorizontal ? \"colspan\" : \"rowspan\";\n            var l = parseInt(n.getAttribute(c) || 1);\n            var d = parseInt(i.getAttribute(c) || 1);\n            e.setAttribute(c, l + d, s);\n            e.setSelection(e.createRangeIn(s));\n\n            if (!a.childCount) {\n              mM(a, e);\n            }\n          });\n        }\n      }, {\n        key: \"_getMergeableCell\",\n        value: function _getMergeableCell() {\n          var e = this.editor.model;\n          var t = e.document;\n          var n = DT(t.selection)[0];\n\n          if (!n) {\n            return;\n          }\n\n          var i = this.editor.plugins.get(\"TableUtils\");\n          var o = this.isHorizontal ? hM(n, this.direction, i) : fM(n, this.direction);\n\n          if (!o) {\n            return;\n          }\n\n          var s = this.isHorizontal ? \"rowspan\" : \"colspan\";\n          var r = parseInt(n.getAttribute(s) || 1);\n          var a = parseInt(o.getAttribute(s) || 1);\n\n          if (a === r) {\n            return o;\n          }\n        }\n      }]);\n\n      return uM;\n    }(jw);\n\n    function hM(e, t, n) {\n      var i = e.parent;\n      var o = i.parent;\n      var s = t == \"right\" ? e.nextSibling : e.previousSibling;\n      var r = (o.getAttribute(\"headingColumns\") || 0) > 0;\n\n      if (!s) {\n        return;\n      }\n\n      var a = t == \"right\" ? e : s;\n      var c = t == \"right\" ? s : e;\n\n      var _n$getCellLocation2 = n.getCellLocation(a),\n          l = _n$getCellLocation2.column;\n\n      var _n$getCellLocation3 = n.getCellLocation(c),\n          d = _n$getCellLocation3.column;\n\n      var u = parseInt(a.getAttribute(\"colspan\") || 1);\n      var h = TT(n, a, o);\n      var f = TT(n, c, o);\n\n      if (r && h != f) {\n        return;\n      }\n\n      var m = l + u === d;\n      return m ? s : undefined;\n    }\n\n    function fM(e, t) {\n      var n = e.parent;\n      var i = n.parent;\n      var o = i.getChildIndex(n);\n\n      if (t == \"down\" && o === i.childCount - 1 || t == \"up\" && o === 0) {\n        return;\n      }\n\n      var s = parseInt(e.getAttribute(\"rowspan\") || 1);\n      var r = i.getAttribute(\"headingRows\") || 0;\n      var a = t == \"down\" && o + s === r;\n      var c = t == \"up\" && o === r;\n\n      if (r && (a || c)) {\n        return;\n      }\n\n      var l = parseInt(e.getAttribute(\"rowspan\") || 1);\n      var d = t == \"down\" ? o + l : o;\n\n      var u = _toConsumableArray(new IT(i, {\n        endRow: d\n      }));\n\n      var h = u.find(function (t) {\n        return t.cell === e;\n      });\n      var f = h.column;\n      var m = u.find(function (_ref36) {\n        var e = _ref36.row,\n            n = _ref36.rowspan,\n            i = _ref36.column;\n\n        if (i !== f) {\n          return false;\n        }\n\n        if (t == \"down\") {\n          return e === d;\n        } else {\n          return d === e + n;\n        }\n      });\n      return m && m.cell;\n    }\n\n    function mM(e, t) {\n      var n = e.parent;\n      var i = n.getChildIndex(e);\n\n      var _iterator371 = _createForOfIteratorHelper(new IT(n, {\n        endRow: i\n      })),\n          _step371;\n\n      try {\n        for (_iterator371.s(); !(_step371 = _iterator371.n()).done;) {\n          var _step371$value = _step371.value,\n              _e328 = _step371$value.cell,\n              _o98 = _step371$value.row,\n              _s62 = _step371$value.rowspan;\n\n          var _n258 = _o98 + _s62 - 1 >= i;\n\n          if (_n258) {\n            yT(\"rowspan\", _s62 - 1, _e328, t);\n          }\n        }\n      } catch (err) {\n        _iterator371.e(err);\n      } finally {\n        _iterator371.f();\n      }\n\n      t.remove(e);\n    }\n\n    function gM(e, t, n) {\n      if (!pM(e)) {\n        if (pM(t)) {\n          n.remove(n.createRangeIn(t));\n        }\n\n        n.move(n.createRangeIn(e), n.createPositionAt(t, \"end\"));\n      }\n\n      n.remove(e);\n    }\n\n    function pM(e) {\n      return e.childCount == 1 && e.getChild(0).is(\"paragraph\") && e.getChild(0).isEmpty;\n    }\n\n    var bM = /*#__PURE__*/function (_jw22) {\n      _inherits(bM, _jw22);\n\n      var _super158 = _createSuper(bM);\n\n      function bM() {\n        _classCallCheck(this, bM);\n\n        return _super158.apply(this, arguments);\n      }\n\n      _createClass(bM, [{\n        key: \"refresh\",\n        value: function refresh() {\n          var e = zT(this.editor.model.document.selection);\n          var t = e[0];\n\n          if (t) {\n            var _n259 = t.parent.parent;\n\n            var _i213 = this.editor.plugins.get(\"TableUtils\").getRows(_n259);\n\n            var _o99 = _toConsumableArray(new IT(_n259));\n\n            var _s63 = _o99.filter(function (t) {\n              return e.includes(t.cell);\n            }).map(function (e) {\n              return e.row;\n            });\n\n            var _r40 = _s63[0];\n            var _a22 = _s63[_s63.length - 1];\n            this.isEnabled = _a22 - _r40 < _i213 - 1;\n          } else {\n            this.isEnabled = false;\n          }\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var _this229 = this;\n\n          var e = zT(this.editor.model.document.selection);\n          var t = wM(e);\n          var n = e[0];\n          var i = n.parent.parent;\n\n          var o = _toConsumableArray(new IT(i, {\n            endRow: t.last\n          }));\n\n          var s = this.editor.model.createBatch();\n          var r = vM(o, n);\n          this.editor.model.enqueueChange(s, function (e) {\n            e.setSelection(e.createSelection(i, \"on\"));\n          });\n          var a;\n\n          var _loop9 = function _loop9(_e329) {\n            _this229.editor.model.enqueueChange(s, function (t) {\n              var n = _e329;\n\n              _this229._removeRow(n, i, t, o);\n\n              a = _M(i, n, r);\n            });\n          };\n\n          for (var _e329 = t.last; _e329 >= t.first; _e329--) {\n            _loop9(_e329);\n          }\n\n          this.editor.model.enqueueChange(s, function (e) {\n            e.setSelection(e.createPositionAt(a, 0));\n          });\n        }\n      }, {\n        key: \"_removeRow\",\n        value: function _removeRow(e, t, n, i) {\n          var o = new Map();\n          var s = t.getChild(e);\n          var r = t.getAttribute(\"headingRows\") || 0;\n\n          if (r && e < r) {\n            yT(\"headingRows\", r - 1, t, n, 0);\n          }\n\n          i.filter(function (_ref37) {\n            var t = _ref37.row,\n                n = _ref37.rowspan;\n            return t === e && n > 1;\n          }).forEach(function (_ref38) {\n            var e = _ref38.column,\n                t = _ref38.cell,\n                n = _ref38.rowspan;\n            return o.set(e, {\n              cell: t,\n              rowspanToSet: n - 1\n            });\n          });\n          i.filter(function (_ref39) {\n            var t = _ref39.row,\n                n = _ref39.rowspan;\n            return t <= e - 1 && t + n > e;\n          }).forEach(function (_ref40) {\n            var e = _ref40.cell,\n                t = _ref40.rowspan;\n            return yT(\"rowspan\", t - 1, e, n);\n          });\n          var a = e + 1;\n          var c = new IT(t, {\n            includeSpanned: true,\n            startRow: a,\n            endRow: a\n          });\n          var l;\n\n          for (var _i214 = 0, _arr2 = _toConsumableArray(c); _i214 < _arr2.length; _i214++) {\n            var _arr2$_i = _arr2[_i214],\n                _e330 = _arr2$_i.row,\n                _i215 = _arr2$_i.column,\n                _s64 = _arr2$_i.cell;\n\n            if (o.has(_i215)) {\n              var _o$get = o.get(_i215),\n                  _s65 = _o$get.cell,\n                  _r41 = _o$get.rowspanToSet;\n\n              var _a23 = l ? n.createPositionAfter(l) : n.createPositionAt(t.getChild(_e330), 0);\n\n              n.move(n.createRangeOn(_s65), _a23);\n              yT(\"rowspan\", _r41, _s65, n);\n              l = _s65;\n            } else {\n              l = _s64;\n            }\n          }\n\n          n.remove(s);\n        }\n      }]);\n\n      return bM;\n    }(jw);\n\n    function wM(e) {\n      var t = e.map(function (e) {\n        return e.parent.index;\n      }).sort();\n      return {\n        first: t[0],\n        last: t[t.length - 1]\n      };\n    }\n\n    function _M(e, t, n) {\n      var i = e.getChild(t) || e.getChild(e.childCount - 1);\n      var o = i.getChild(0);\n      var s = 0;\n\n      var _iterator372 = _createForOfIteratorHelper(i.getChildren()),\n          _step372;\n\n      try {\n        for (_iterator372.s(); !(_step372 = _iterator372.n()).done;) {\n          var _e331 = _step372.value;\n\n          if (s > n) {\n            return o;\n          }\n\n          o = _e331;\n          s += parseInt(_e331.getAttribute(\"colspan\") || 1);\n        }\n      } catch (err) {\n        _iterator372.e(err);\n      } finally {\n        _iterator372.f();\n      }\n\n      return o;\n    }\n\n    function vM(e, t) {\n      var n = e.find(function (e) {\n        return e.cell === t;\n      });\n      return n.column;\n    }\n\n    var kM = /*#__PURE__*/function (_jw23) {\n      _inherits(kM, _jw23);\n\n      var _super159 = _createSuper(kM);\n\n      function kM() {\n        _classCallCheck(this, kM);\n\n        return _super159.apply(this, arguments);\n      }\n\n      _createClass(kM, [{\n        key: \"refresh\",\n        value: function refresh() {\n          var e = zT(this.editor.model.document.selection);\n          var t = e[0];\n\n          if (t) {\n            var _n260 = t.parent.parent;\n\n            var _i216 = this.editor.plugins.get(\"TableUtils\").getColumns(_n260);\n\n            var _o100 = _toConsumableArray(new IT(_n260));\n\n            var _s66 = _o100.filter(function (t) {\n              return e.includes(t.cell);\n            }).map(function (e) {\n              return e.column;\n            }).sort();\n\n            var _r42 = _s66[0];\n            var _a24 = _s66[_s66.length - 1];\n            this.isEnabled = _a24 - _r42 < _i216 - 1;\n          } else {\n            this.isEnabled = false;\n          }\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var _AM = AM(this.editor.model.document.selection),\n              _AM2 = _slicedToArray(_AM, 2),\n              e = _AM2[0],\n              t = _AM2[1];\n\n          var n = e.parent.parent;\n\n          var i = _toConsumableArray(new IT(n));\n\n          var o = {\n            first: i.find(function (t) {\n              return t.cell === e;\n            }).column,\n            last: i.find(function (e) {\n              return e.cell === t;\n            }).column\n          };\n          var s = xM(i, e, t, o);\n          this.editor.model.change(function (e) {\n            e.setSelection(e.createRangeOn(n));\n            yM(n, o, e);\n\n            for (var _t277 = o.last; _t277 >= o.first; _t277--) {\n              var _iterator373 = _createForOfIteratorHelper(i),\n                  _step373;\n\n              try {\n                for (_iterator373.s(); !(_step373 = _iterator373.n()).done;) {\n                  var _step373$value = _step373.value,\n                      _n261 = _step373$value.cell,\n                      _o101 = _step373$value.column,\n                      _s67 = _step373$value.colspan;\n\n                  if (_o101 <= _t277 && _s67 > 1 && _o101 + _s67 > _t277) {\n                    yT(\"colspan\", _s67 - 1, _n261, e);\n                  } else if (_o101 === _t277) {\n                    var _t278 = _n261.parent;\n                    e.remove(_n261);\n\n                    if (!_t278.childCount) {\n                      e.remove(_t278);\n                    }\n                  }\n                }\n              } catch (err) {\n                _iterator373.e(err);\n              } finally {\n                _iterator373.f();\n              }\n            }\n\n            e.setSelection(e.createPositionAt(s, 0));\n          });\n        }\n      }]);\n\n      return kM;\n    }(jw);\n\n    function yM(e, t, n) {\n      var i = e.getAttribute(\"headingColumns\") || 0;\n\n      if (i && t.first <= i) {\n        var _o102 = Math.min(i - 1, t.last) - t.first + 1;\n\n        n.setAttribute(\"headingColumns\", i - _o102, e);\n      }\n    }\n\n    function xM(e, t, n, i) {\n      var o = parseInt(n.getAttribute(\"colspan\") || 1);\n\n      if (o > 1) {\n        return n;\n      } else if (t.previousSibling || n.nextSibling) {\n        return n.nextSibling || t.previousSibling;\n      } else {\n        if (i.first) {\n          return e.reverse().find(function (_ref41) {\n            var e = _ref41.column;\n            return e < i.first;\n          }).cell;\n        } else {\n          return e.reverse().find(function (_ref42) {\n            var e = _ref42.column;\n            return e > i.last;\n          }).cell;\n        }\n      }\n    }\n\n    function AM(e) {\n      var t = zT(e);\n      var n = t[0];\n      var i = t.pop();\n      var o = [n, i];\n      return n.isBefore(i) ? o : o.reverse();\n    }\n\n    var CM = /*#__PURE__*/function (_jw24) {\n      _inherits(CM, _jw24);\n\n      var _super160 = _createSuper(CM);\n\n      function CM() {\n        _classCallCheck(this, CM);\n\n        return _super160.apply(this, arguments);\n      }\n\n      _createClass(CM, [{\n        key: \"refresh\",\n        value: function refresh() {\n          var _this230 = this;\n\n          var e = this.editor.model;\n          var t = zT(e.document.selection);\n          var n = t.length > 0;\n          this.isEnabled = n;\n          this.value = n && t.every(function (e) {\n            return _this230._isInHeading(e, e.parent.parent);\n          });\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          var t = this.editor.model;\n          var n = zT(t.document.selection);\n          var i = n[0];\n          var o = n[n.length - 1];\n          var s = i.parent.parent;\n          var r = s.getAttribute(\"headingRows\") || 0;\n\n          var _sort = [i.parent.index, o.parent.index].sort(),\n              _sort2 = _slicedToArray(_sort, 2),\n              a = _sort2[0],\n              c = _sort2[1];\n\n          if (e.forceValue === this.value) {\n            return;\n          }\n\n          var l = this.value ? a : c + 1;\n          t.change(function (e) {\n            if (l) {\n              var _t279 = TM(s, l, r);\n\n              var _iterator374 = _createForOfIteratorHelper(_t279),\n                  _step374;\n\n              try {\n                for (_iterator374.s(); !(_step374 = _iterator374.n()).done;) {\n                  var _n262 = _step374.value;\n                  MM(_n262, l, e);\n                }\n              } catch (err) {\n                _iterator374.e(err);\n              } finally {\n                _iterator374.f();\n              }\n            }\n\n            yT(\"headingRows\", l, s, e, 0);\n          });\n        }\n      }, {\n        key: \"_isInHeading\",\n        value: function _isInHeading(e, t) {\n          var n = parseInt(t.getAttribute(\"headingRows\") || 0);\n          return !!n && e.parent.index < n;\n        }\n      }]);\n\n      return CM;\n    }(jw);\n\n    function TM(e, t, n) {\n      var i = [];\n      var o = t > n ? n : 0;\n      var s = t - 1;\n      var r = new IT(e, {\n        startRow: o,\n        endRow: s\n      });\n\n      var _iterator375 = _createForOfIteratorHelper(r),\n          _step375;\n\n      try {\n        for (_iterator375.s(); !(_step375 = _iterator375.n()).done;) {\n          var _step375$value = _step375.value,\n              _e332 = _step375$value.row,\n              _n263 = _step375$value.rowspan,\n              _o103 = _step375$value.cell;\n\n          if (_n263 > 1 && _e332 + _n263 > t) {\n            i.push(_o103);\n          }\n        }\n      } catch (err) {\n        _iterator375.e(err);\n      } finally {\n        _iterator375.f();\n      }\n\n      return i;\n    }\n\n    function MM(e, t, n) {\n      var i = e.parent;\n      var o = i.parent;\n      var s = i.index;\n      var r = parseInt(e.getAttribute(\"rowspan\"));\n      var a = t - s;\n      var c = {};\n      var l = r - a;\n\n      if (l > 1) {\n        c.rowspan = l;\n      }\n\n      var d = parseInt(e.getAttribute(\"colspan\") || 1);\n\n      if (d > 1) {\n        c.colspan = d;\n      }\n\n      var u = o.getChildIndex(i);\n      var h = u + a;\n\n      var f = _toConsumableArray(new IT(o, {\n        startRow: u,\n        endRow: h,\n        includeSpanned: true\n      }));\n\n      var m;\n\n      var _iterator376 = _createForOfIteratorHelper(f),\n          _step376;\n\n      try {\n        for (_iterator376.s(); !(_step376 = _iterator376.n()).done;) {\n          var _step376$value = _step376.value,\n              _t280 = _step376$value.row,\n              _i217 = _step376$value.column,\n              _s68 = _step376$value.cell,\n              _r43 = _step376$value.cellIndex;\n\n          if (_s68 === e && m === undefined) {\n            m = _i217;\n          }\n\n          if (m !== undefined && m === _i217 && _t280 === h) {\n            var _e333 = o.getChild(_t280);\n\n            var _i218 = n.createPositionAt(_e333, _r43);\n\n            xT(n, _i218, c);\n          }\n        }\n      } catch (err) {\n        _iterator376.e(err);\n      } finally {\n        _iterator376.f();\n      }\n\n      yT(\"rowspan\", a, e, n);\n    }\n\n    var PM = /*#__PURE__*/function (_jw25) {\n      _inherits(PM, _jw25);\n\n      var _super161 = _createSuper(PM);\n\n      function PM() {\n        _classCallCheck(this, PM);\n\n        return _super161.apply(this, arguments);\n      }\n\n      _createClass(PM, [{\n        key: \"refresh\",\n        value: function refresh() {\n          var e = this.editor.model;\n          var t = zT(e.document.selection);\n          var n = this.editor.plugins.get(\"TableUtils\");\n          var i = t.length > 0;\n          this.isEnabled = i;\n          this.value = i && t.every(function (e) {\n            return TT(n, e);\n          });\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          var t = this.editor.model;\n          var n = this.editor.plugins.get(\"TableUtils\");\n          var i = zT(t.document.selection);\n          var o = i[0];\n          var s = i[i.length - 1];\n          var r = o.parent;\n          var a = r.parent;\n\n          var _sort3 = [n.getCellLocation(o).column, n.getCellLocation(s).column].sort(),\n              _sort4 = _slicedToArray(_sort3, 2),\n              c = _sort4[0],\n              l = _sort4[1];\n\n          if (e.forceValue === this.value) {\n            return;\n          }\n\n          var d = this.value ? c : l + 1;\n          t.change(function (e) {\n            yT(\"headingColumns\", d, a, e, 0);\n          });\n        }\n      }]);\n\n      return PM;\n    }(jw);\n\n    var EM = /*#__PURE__*/function (_Ow56) {\n      _inherits(EM, _Ow56);\n\n      var _super162 = _createSuper(EM);\n\n      function EM() {\n        _classCallCheck(this, EM);\n\n        return _super162.apply(this, arguments);\n      }\n\n      _createClass(EM, [{\n        key: \"getCellLocation\",\n        value: function getCellLocation(e) {\n          var t = e.parent;\n          var n = t.parent;\n          var i = n.getChildIndex(t);\n          var o = new IT(n, {\n            startRow: i,\n            endRow: i\n          });\n\n          var _iterator377 = _createForOfIteratorHelper(o),\n              _step377;\n\n          try {\n            for (_iterator377.s(); !(_step377 = _iterator377.n()).done;) {\n              var _step377$value = _step377.value,\n                  _t281 = _step377$value.cell,\n                  _n264 = _step377$value.row,\n                  _i219 = _step377$value.column;\n\n              if (_t281 === e) {\n                return {\n                  row: _n264,\n                  column: _i219\n                };\n              }\n            }\n          } catch (err) {\n            _iterator377.e(err);\n          } finally {\n            _iterator377.f();\n          }\n        }\n      }, {\n        key: \"createTable\",\n        value: function createTable(e, t, n) {\n          var i = e.createElement(\"table\");\n          SM(e, i, 0, t, n);\n          return i;\n        }\n      }, {\n        key: \"insertRows\",\n        value: function insertRows(e) {\n          var _this231 = this;\n\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          var n = this.editor.model;\n          var i = t.at || 0;\n          var o = t.rows || 1;\n          n.change(function (t) {\n            var n = e.getAttribute(\"headingRows\") || 0;\n\n            if (n > i) {\n              t.setAttribute(\"headingRows\", n + o, e);\n            }\n\n            if (i === 0 || i === e.childCount) {\n              SM(t, e, i, o, _this231.getColumns(e));\n              return;\n            }\n\n            var s = new IT(e, {\n              endRow: i\n            });\n            var r = 0;\n\n            var _iterator378 = _createForOfIteratorHelper(s),\n                _step378;\n\n            try {\n              for (_iterator378.s(); !(_step378 = _iterator378.n()).done;) {\n                var _step378$value = _step378.value,\n                    _e334 = _step378$value.row,\n                    _n265 = _step378$value.rowspan,\n                    _a25 = _step378$value.colspan,\n                    _c12 = _step378$value.cell;\n\n                var _s69 = _e334 < i;\n\n                var _l7 = _e334 + _n265 > i;\n\n                if (_s69 && _l7) {\n                  t.setAttribute(\"rowspan\", _n265 + o, _c12);\n                }\n\n                if (_e334 === i) {\n                  r += _a25;\n                }\n              }\n            } catch (err) {\n              _iterator378.e(err);\n            } finally {\n              _iterator378.f();\n            }\n\n            SM(t, e, i, o, r);\n          });\n        }\n      }, {\n        key: \"insertColumns\",\n        value: function insertColumns(e) {\n          var _this232 = this;\n\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          var n = this.editor.model;\n          var i = t.at || 0;\n          var o = t.columns || 1;\n          n.change(function (t) {\n            var n = e.getAttribute(\"headingColumns\");\n\n            if (i < n) {\n              t.setAttribute(\"headingColumns\", n + o, e);\n            }\n\n            var s = _this232.getColumns(e);\n\n            if (i === 0 || s === i) {\n              var _iterator379 = _createForOfIteratorHelper(e.getChildren()),\n                  _step379;\n\n              try {\n                for (_iterator379.s(); !(_step379 = _iterator379.n()).done;) {\n                  var _n266 = _step379.value;\n                  IM(o, t, t.createPositionAt(_n266, i ? \"end\" : 0));\n                }\n              } catch (err) {\n                _iterator379.e(err);\n              } finally {\n                _iterator379.f();\n              }\n\n              return;\n            }\n\n            var r = new IT(e, {\n              column: i,\n              includeSpanned: true\n            });\n\n            var _iterator380 = _createForOfIteratorHelper(r),\n                _step380;\n\n            try {\n              for (_iterator380.s(); !(_step380 = _iterator380.n()).done;) {\n                var _step380$value = _step380.value,\n                    _n267 = _step380$value.row,\n                    _s70 = _step380$value.cell,\n                    _a26 = _step380$value.cellIndex;\n\n                var _c13 = parseInt(_s70.getAttribute(\"rowspan\") || 1);\n\n                var _l8 = parseInt(_s70.getAttribute(\"colspan\") || 1);\n\n                if (_s70.index !== i && _l8 > 1) {\n                  t.setAttribute(\"colspan\", _l8 + o, _s70);\n                  r.skipRow(_n267);\n\n                  if (_c13 > 1) {\n                    for (var _e335 = _n267 + 1; _e335 < _n267 + _c13; _e335++) {\n                      r.skipRow(_e335);\n                    }\n                  }\n                } else {\n                  var _i220 = t.createPositionAt(e.getChild(_n267), _a26);\n\n                  IM(o, t, _i220);\n                }\n              }\n            } catch (err) {\n              _iterator380.e(err);\n            } finally {\n              _iterator380.f();\n            }\n          });\n        }\n      }, {\n        key: \"splitCellVertically\",\n        value: function splitCellVertically(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n          var n = this.editor.model;\n          var i = e.parent;\n          var o = i.parent;\n          var s = parseInt(e.getAttribute(\"rowspan\") || 1);\n          var r = parseInt(e.getAttribute(\"colspan\") || 1);\n          n.change(function (n) {\n            if (r > 1) {\n              var _OM = OM(r, t),\n                  _i221 = _OM.newCellsSpan,\n                  _o104 = _OM.updatedSpan;\n\n              yT(\"colspan\", _o104, e, n);\n              var _a27 = {};\n\n              if (_i221 > 1) {\n                _a27.colspan = _i221;\n              }\n\n              if (s > 1) {\n                _a27.rowspan = s;\n              }\n\n              var _c14 = r > t ? t - 1 : r - 1;\n\n              IM(_c14, n, n.createPositionAfter(e), _a27);\n            }\n\n            if (r < t) {\n              var _i222 = t - r;\n\n              var _a28 = _toConsumableArray(new IT(o));\n\n              var _a28$find = _a28.find(function (_ref43) {\n                var t = _ref43.cell;\n                return t === e;\n              }),\n                  _c15 = _a28$find.column;\n\n              var _l9 = _a28.filter(function (_ref44) {\n                var t = _ref44.cell,\n                    n = _ref44.colspan,\n                    i = _ref44.column;\n                var o = t !== e && i === _c15;\n                var s = i < _c15 && i + n > _c15;\n                return o || s;\n              });\n\n              var _iterator381 = _createForOfIteratorHelper(_l9),\n                  _step381;\n\n              try {\n                for (_iterator381.s(); !(_step381 = _iterator381.n()).done;) {\n                  var _step381$value = _step381.value,\n                      _e336 = _step381$value.cell,\n                      _t282 = _step381$value.colspan;\n                  n.setAttribute(\"colspan\", _t282 + _i222, _e336);\n                }\n              } catch (err) {\n                _iterator381.e(err);\n              } finally {\n                _iterator381.f();\n              }\n\n              var _d4 = {};\n\n              if (s > 1) {\n                _d4.rowspan = s;\n              }\n\n              IM(_i222, n, n.createPositionAfter(e), _d4);\n\n              var _u3 = o.getAttribute(\"headingColumns\") || 0;\n\n              if (_u3 > _c15) {\n                yT(\"headingColumns\", _u3 + _i222, o, n);\n              }\n            }\n          });\n        }\n      }, {\n        key: \"splitCellHorizontally\",\n        value: function splitCellHorizontally(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n          var n = this.editor.model;\n          var i = e.parent;\n          var o = i.parent;\n          var s = o.getChildIndex(i);\n          var r = parseInt(e.getAttribute(\"rowspan\") || 1);\n          var a = parseInt(e.getAttribute(\"colspan\") || 1);\n          n.change(function (n) {\n            if (r > 1) {\n              var _i223 = _toConsumableArray(new IT(o, {\n                startRow: s,\n                endRow: s + r - 1,\n                includeSpanned: true\n              }));\n\n              var _OM2 = OM(r, t),\n                  _c16 = _OM2.newCellsSpan,\n                  _l10 = _OM2.updatedSpan;\n\n              yT(\"rowspan\", _l10, e, n);\n\n              var _i223$find = _i223.find(function (_ref45) {\n                var t = _ref45.cell;\n                return t === e;\n              }),\n                  _d5 = _i223$find.column;\n\n              var _u4 = {};\n\n              if (_c16 > 1) {\n                _u4.rowspan = _c16;\n              }\n\n              if (a > 1) {\n                _u4.colspan = a;\n              }\n\n              var _iterator382 = _createForOfIteratorHelper(_i223),\n                  _step382;\n\n              try {\n                for (_iterator382.s(); !(_step382 = _iterator382.n()).done;) {\n                  var _step382$value = _step382.value,\n                      _e337 = _step382$value.column,\n                      _t283 = _step382$value.row,\n                      _r44 = _step382$value.cellIndex;\n\n                  var _i224 = _t283 >= s + _l10;\n\n                  var _a29 = _e337 === _d5;\n\n                  var _h3 = (_t283 + s + _l10) % _c16 === 0;\n\n                  if (_i224 && _a29 && _h3) {\n                    var _e338 = n.createPositionAt(o.getChild(_t283), _r44);\n\n                    IM(1, n, _e338, _u4);\n                  }\n                }\n              } catch (err) {\n                _iterator382.e(err);\n              } finally {\n                _iterator382.f();\n              }\n            }\n\n            if (r < t) {\n              var _i225 = t - r;\n\n              var _c17 = _toConsumableArray(new IT(o, {\n                startRow: 0,\n                endRow: s\n              }));\n\n              var _iterator383 = _createForOfIteratorHelper(_c17),\n                  _step383;\n\n              try {\n                for (_iterator383.s(); !(_step383 = _iterator383.n()).done;) {\n                  var _step383$value = _step383.value,\n                      _t284 = _step383$value.cell,\n                      _o105 = _step383$value.rowspan,\n                      _r45 = _step383$value.row;\n\n                  if (_t284 !== e && _r45 + _o105 > s) {\n                    var _e339 = _o105 + _i225;\n\n                    n.setAttribute(\"rowspan\", _e339, _t284);\n                  }\n                }\n              } catch (err) {\n                _iterator383.e(err);\n              } finally {\n                _iterator383.f();\n              }\n\n              var _l11 = {};\n\n              if (a > 1) {\n                _l11.colspan = a;\n              }\n\n              SM(n, o, s + 1, _i225, 1, _l11);\n\n              var _d6 = o.getAttribute(\"headingRows\") || 0;\n\n              if (_d6 > s) {\n                yT(\"headingRows\", _d6 + _i225, o, n);\n              }\n            }\n          });\n        }\n      }, {\n        key: \"getColumns\",\n        value: function getColumns(e) {\n          var t = e.getChild(0);\n          return _toConsumableArray(t.getChildren()).reduce(function (e, t) {\n            var n = parseInt(t.getAttribute(\"colspan\") || 1);\n            return e + n;\n          }, 0);\n        }\n      }, {\n        key: \"getRows\",\n        value: function getRows(e) {\n          return e.childCount;\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"TableUtils\";\n        }\n      }]);\n\n      return EM;\n    }(Ow);\n\n    function SM(e, t, n, i, o) {\n      var s = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n\n      for (var _r46 = 0; _r46 < i; _r46++) {\n        var _i226 = e.createElement(\"tableRow\");\n\n        e.insert(_i226, t, n);\n        IM(o, e, e.createPositionAt(_i226, \"end\"), s);\n      }\n    }\n\n    function IM(e, t, n) {\n      var i = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n      for (var _o106 = 0; _o106 < e; _o106++) {\n        xT(t, n, i);\n      }\n    }\n\n    function OM(e, t) {\n      if (e < t) {\n        return {\n          newCellsSpan: 1,\n          updatedSpan: 1\n        };\n      }\n\n      var n = Math.floor(e / t);\n      var i = e - n * t + n;\n      return {\n        newCellsSpan: n,\n        updatedSpan: i\n      };\n    }\n\n    function NM(e) {\n      e.document.registerPostFixer(function (t) {\n        return RM(t, e);\n      });\n    }\n\n    function RM(e, t) {\n      var n = t.document.differ.getChanges();\n      var i = false;\n      var o = new Set();\n\n      var _iterator384 = _createForOfIteratorHelper(n),\n          _step384;\n\n      try {\n        for (_iterator384.s(); !(_step384 = _iterator384.n()).done;) {\n          var _t285 = _step384.value;\n\n          var _n268 = void 0;\n\n          if (_t285.name == \"table\" && _t285.type == \"insert\") {\n            _n268 = _t285.position.nodeAfter;\n          }\n\n          if (_t285.name == \"tableRow\" || _t285.name == \"tableCell\") {\n            _n268 = kT(\"table\", _t285.position);\n          }\n\n          if (BM(_t285)) {\n            _n268 = kT(\"table\", _t285.range.start);\n          }\n\n          if (_n268 && !o.has(_n268)) {\n            i = LM(_n268, e) || i;\n            i = jM(_n268, e) || i;\n            o.add(_n268);\n          }\n        }\n      } catch (err) {\n        _iterator384.e(err);\n      } finally {\n        _iterator384.f();\n      }\n\n      return i;\n    }\n\n    function LM(e, t) {\n      var n = false;\n      var i = DM(e);\n\n      if (i.length) {\n        n = true;\n\n        var _iterator385 = _createForOfIteratorHelper(i),\n            _step385;\n\n        try {\n          for (_iterator385.s(); !(_step385 = _iterator385.n()).done;) {\n            var _e340 = _step385.value;\n            yT(\"rowspan\", _e340.rowspan, _e340.cell, t, 1);\n          }\n        } catch (err) {\n          _iterator385.e(err);\n        } finally {\n          _iterator385.f();\n        }\n      }\n\n      return n;\n    }\n\n    function jM(e, t) {\n      var n = false;\n      var i = zM(e);\n      var o = i[0];\n      var s = Object.values(i).every(function (e) {\n        return e === o;\n      });\n\n      if (!s) {\n        var _o107 = Object.values(i).reduce(function (e, t) {\n          return t > e ? t : e;\n        }, 0);\n\n        for (var _i227 = 0, _Object$entries3 = Object.entries(i); _i227 < _Object$entries3.length; _i227++) {\n          var _Object$entries3$_i = _slicedToArray(_Object$entries3[_i227], 2),\n              _s71 = _Object$entries3$_i[0],\n              _r47 = _Object$entries3$_i[1];\n\n          var _i228 = _o107 - _r47;\n\n          if (_i228) {\n            for (var _n269 = 0; _n269 < _i228; _n269++) {\n              xT(t, t.createPositionAt(e.getChild(_s71), \"end\"));\n            }\n\n            n = true;\n          }\n        }\n      }\n\n      return n;\n    }\n\n    function DM(e) {\n      var t = parseInt(e.getAttribute(\"headingRows\") || 0);\n      var n = e.childCount;\n      var i = [];\n\n      var _iterator386 = _createForOfIteratorHelper(new IT(e)),\n          _step386;\n\n      try {\n        for (_iterator386.s(); !(_step386 = _iterator386.n()).done;) {\n          var _step386$value = _step386.value,\n              _o108 = _step386$value.row,\n              _s72 = _step386$value.rowspan,\n              _r48 = _step386$value.cell;\n\n          if (_s72 < 2) {\n            continue;\n          }\n\n          var _e341 = _o108 < t;\n\n          var _a30 = _e341 ? t : n;\n\n          if (_o108 + _s72 > _a30) {\n            var _e342 = _a30 - _o108;\n\n            i.push({\n              cell: _r48,\n              rowspan: _e342\n            });\n          }\n        }\n      } catch (err) {\n        _iterator386.e(err);\n      } finally {\n        _iterator386.f();\n      }\n\n      return i;\n    }\n\n    function zM(e) {\n      var t = {};\n\n      var _iterator387 = _createForOfIteratorHelper(new IT(e, {\n        includeSpanned: true\n      })),\n          _step387;\n\n      try {\n        for (_iterator387.s(); !(_step387 = _iterator387.n()).done;) {\n          var _n270 = _step387.value.row;\n\n          if (!t[_n270]) {\n            t[_n270] = 0;\n          }\n\n          t[_n270] += 1;\n        }\n      } catch (err) {\n        _iterator387.e(err);\n      } finally {\n        _iterator387.f();\n      }\n\n      return t;\n    }\n\n    function BM(e) {\n      var t = e.type === \"attribute\";\n      var n = e.attributeKey;\n      return t && (n === \"headingRows\" || n === \"colspan\" || n === \"rowspan\");\n    }\n\n    function VM(e) {\n      e.document.registerPostFixer(function (t) {\n        return FM(t, e);\n      });\n    }\n\n    function FM(e, t) {\n      var n = t.document.differ.getChanges();\n      var i = false;\n\n      var _iterator388 = _createForOfIteratorHelper(n),\n          _step388;\n\n      try {\n        for (_iterator388.s(); !(_step388 = _iterator388.n()).done;) {\n          var _t286 = _step388.value;\n\n          if (_t286.type == \"insert\" && _t286.name == \"table\") {\n            i = HM(_t286.position.nodeAfter, e) || i;\n          }\n\n          if (_t286.type == \"insert\" && _t286.name == \"tableRow\") {\n            i = UM(_t286.position.nodeAfter, e) || i;\n          }\n\n          if (_t286.type == \"insert\" && _t286.name == \"tableCell\") {\n            i = WM(_t286.position.nodeAfter, e) || i;\n          }\n\n          if ($M(_t286)) {\n            i = WM(_t286.position.parent, e) || i;\n          }\n        }\n      } catch (err) {\n        _iterator388.e(err);\n      } finally {\n        _iterator388.f();\n      }\n\n      return i;\n    }\n\n    function HM(e, t) {\n      var n = false;\n\n      var _iterator389 = _createForOfIteratorHelper(e.getChildren()),\n          _step389;\n\n      try {\n        for (_iterator389.s(); !(_step389 = _iterator389.n()).done;) {\n          var _i229 = _step389.value;\n          n = UM(_i229, t) || n;\n        }\n      } catch (err) {\n        _iterator389.e(err);\n      } finally {\n        _iterator389.f();\n      }\n\n      return n;\n    }\n\n    function UM(e, t) {\n      var n = false;\n\n      var _iterator390 = _createForOfIteratorHelper(e.getChildren()),\n          _step390;\n\n      try {\n        for (_iterator390.s(); !(_step390 = _iterator390.n()).done;) {\n          var _i230 = _step390.value;\n          n = WM(_i230, t) || n;\n        }\n      } catch (err) {\n        _iterator390.e(err);\n      } finally {\n        _iterator390.f();\n      }\n\n      return n;\n    }\n\n    function WM(e, t) {\n      if (e.childCount == 0) {\n        t.insertElement(\"paragraph\", e);\n        return true;\n      }\n\n      var n = Array.from(e.getChildren()).filter(function (e) {\n        return e.is(\"text\");\n      });\n\n      var _iterator391 = _createForOfIteratorHelper(n),\n          _step391;\n\n      try {\n        for (_iterator391.s(); !(_step391 = _iterator391.n()).done;) {\n          var _e343 = _step391.value;\n          t.wrap(t.createRangeOn(_e343), \"paragraph\");\n        }\n      } catch (err) {\n        _iterator391.e(err);\n      } finally {\n        _iterator391.f();\n      }\n\n      return !!n.length;\n    }\n\n    function $M(e) {\n      if (!e.position || !e.position.parent.is(\"tableCell\")) {\n        return false;\n      }\n\n      return e.type == \"insert\" && e.name == \"$text\" || e.type == \"remove\";\n    }\n\n    function qM(e) {\n      e.document.registerPostFixer(function () {\n        return YM(e);\n      });\n    }\n\n    function YM(e) {\n      var t = e.document.differ;\n      var n = new Set();\n\n      var _iterator392 = _createForOfIteratorHelper(t.getChanges()),\n          _step392;\n\n      try {\n        for (_iterator392.s(); !(_step392 = _iterator392.n()).done;) {\n          var _e345 = _step392.value;\n\n          var _t287 = _e345.type == \"insert\" || _e345.type == \"remove\" ? _e345.position.parent : _e345.range.start.parent;\n\n          if (_t287.is(\"tableCell\") && JM(_t287, _e345.type)) {\n            n.add(_t287);\n          }\n        }\n      } catch (err) {\n        _iterator392.e(err);\n      } finally {\n        _iterator392.f();\n      }\n\n      if (n.size) {\n        var _iterator393 = _createForOfIteratorHelper(n.values()),\n            _step393;\n\n        try {\n          for (_iterator393.s(); !(_step393 = _iterator393.n()).done;) {\n            var _e344 = _step393.value;\n            t.refreshItem(_e344);\n          }\n        } catch (err) {\n          _iterator393.e(err);\n        } finally {\n          _iterator393.f();\n        }\n\n        return true;\n      }\n\n      return false;\n    }\n\n    function JM(e, t) {\n      var n = Array.from(e.getChildren()).some(function (e) {\n        return e.is(\"paragraph\");\n      });\n\n      if (!n) {\n        return false;\n      }\n\n      if (t == \"attribute\") {\n        var _t288 = Array.from(e.getChild(0).getAttributeKeys()).length;\n        return e.childCount === 1 && _t288 < 2;\n      }\n\n      return e.childCount <= (t == \"insert\" ? 2 : 1);\n    }\n\n    var QM = n(85);\n\n    var XM = /*#__PURE__*/function (_Ow57) {\n      _inherits(XM, _Ow57);\n\n      var _super163 = _createSuper(XM);\n\n      function XM() {\n        _classCallCheck(this, XM);\n\n        return _super163.apply(this, arguments);\n      }\n\n      _createClass(XM, [{\n        key: \"init\",\n        value: function init() {\n          var _this233 = this;\n\n          var e = this.editor;\n          var t = e.model;\n          var n = t.schema;\n          var i = e.conversion;\n          n.register(\"table\", {\n            allowWhere: \"$block\",\n            allowAttributes: [\"headingRows\", \"headingColumns\"],\n            isLimit: true,\n            isObject: true,\n            isBlock: true\n          });\n          n.register(\"tableRow\", {\n            allowIn: \"table\",\n            isLimit: true\n          });\n          n.register(\"tableCell\", {\n            allowIn: \"tableRow\",\n            allowAttributes: [\"colspan\", \"rowspan\"],\n            isObject: true\n          });\n          n.extend(\"$block\", {\n            allowIn: \"tableCell\"\n          });\n          n.addChildCheck(function (e, t) {\n            if (t.name == \"table\" && Array.from(e.getNames()).includes(\"table\")) {\n              return false;\n            }\n          });\n          i.for(\"upcast\").add(MT());\n          i.for(\"editingDowncast\").add(FT({\n            asWidget: true\n          }));\n          i.for(\"dataDowncast\").add(FT());\n          i.for(\"upcast\").elementToElement({\n            model: \"tableRow\",\n            view: \"tr\"\n          });\n          i.for(\"editingDowncast\").add(HT({\n            asWidget: true\n          }));\n          i.for(\"dataDowncast\").add(HT());\n          i.for(\"downcast\").add(qT());\n          i.for(\"upcast\").add(PT(\"td\"));\n          i.for(\"upcast\").add(PT(\"th\"));\n          i.for(\"editingDowncast\").add(UT({\n            asWidget: true\n          }));\n          i.for(\"dataDowncast\").add(UT());\n          i.attributeToAttribute({\n            model: \"colspan\",\n            view: \"colspan\"\n          });\n          i.attributeToAttribute({\n            model: \"rowspan\",\n            view: \"rowspan\"\n          });\n          i.for(\"editingDowncast\").add($T({\n            asWidget: true\n          }));\n          i.for(\"dataDowncast\").add($T());\n          i.for(\"editingDowncast\").add(WT({\n            asWidget: true\n          }));\n          i.for(\"dataDowncast\").add(WT());\n          e.commands.add(\"insertTable\", new rM(e));\n          e.commands.add(\"insertTableRowAbove\", new cM(e, {\n            order: \"above\"\n          }));\n          e.commands.add(\"insertTableRowBelow\", new cM(e, {\n            order: \"below\"\n          }));\n          e.commands.add(\"insertTableColumnLeft\", new lM(e, {\n            order: \"left\"\n          }));\n          e.commands.add(\"insertTableColumnRight\", new lM(e, {\n            order: \"right\"\n          }));\n          e.commands.add(\"removeTableRow\", new bM(e));\n          e.commands.add(\"removeTableColumn\", new kM(e));\n          e.commands.add(\"splitTableCellVertically\", new dM(e, {\n            direction: \"vertically\"\n          }));\n          e.commands.add(\"splitTableCellHorizontally\", new dM(e, {\n            direction: \"horizontally\"\n          }));\n          e.commands.add(\"mergeTableCellRight\", new uM(e, {\n            direction: \"right\"\n          }));\n          e.commands.add(\"mergeTableCellLeft\", new uM(e, {\n            direction: \"left\"\n          }));\n          e.commands.add(\"mergeTableCellDown\", new uM(e, {\n            direction: \"down\"\n          }));\n          e.commands.add(\"mergeTableCellUp\", new uM(e, {\n            direction: \"up\"\n          }));\n          e.commands.add(\"setTableColumnHeader\", new PM(e));\n          e.commands.add(\"setTableRowHeader\", new CM(e));\n          NM(t);\n          qM(t);\n          VM(t);\n          this.editor.keystrokes.set(\"Tab\", function () {\n            return _this233._handleTabOnSelectedTable.apply(_this233, arguments);\n          }, {\n            priority: \"low\"\n          });\n          this.editor.keystrokes.set(\"Tab\", this._getTabHandler(true), {\n            priority: \"low\"\n          });\n          this.editor.keystrokes.set(\"Shift+Tab\", this._getTabHandler(false), {\n            priority: \"low\"\n          });\n        }\n      }, {\n        key: \"_handleTabOnSelectedTable\",\n        value: function _handleTabOnSelectedTable(e, t) {\n          var n = this.editor;\n          var i = n.model.document.selection;\n\n          if (!i.isCollapsed && i.rangeCount === 1 && i.getFirstRange().isFlat) {\n            var _e346 = i.getSelectedElement();\n\n            if (!_e346 || !_e346.is(\"table\")) {\n              return;\n            }\n\n            t();\n            n.model.change(function (t) {\n              t.setSelection(t.createRangeIn(_e346.getChild(0).getChild(0)));\n            });\n          }\n        }\n      }, {\n        key: \"_getTabHandler\",\n        value: function _getTabHandler(e) {\n          var t = this.editor;\n          return function (n, i) {\n            var o = t.model.document.selection;\n            var s = DT(o)[0];\n\n            if (!s) {\n              return;\n            }\n\n            i();\n            var r = s.parent;\n            var a = r.parent;\n            var c = a.getChildIndex(r);\n            var l = r.getChildIndex(s);\n            var d = l === 0;\n\n            if (!e && d && c === 0) {\n              return;\n            }\n\n            var u = l === r.childCount - 1;\n            var h = c === a.childCount - 1;\n\n            if (e && h && u) {\n              t.execute(\"insertTableRowBelow\");\n\n              if (c === a.childCount - 1) {\n                return;\n              }\n            }\n\n            var f;\n\n            if (e && u) {\n              var _e347 = a.getChild(c + 1);\n\n              f = _e347.getChild(0);\n            } else if (!e && d) {\n              var _e348 = a.getChild(c - 1);\n\n              f = _e348.getChild(_e348.childCount - 1);\n            } else {\n              f = r.getChild(l + (e ? 1 : -1));\n            }\n\n            t.model.change(function (e) {\n              e.setSelection(e.createRangeIn(f));\n            });\n          };\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"TableEditing\";\n        }\n      }, {\n        key: \"requires\",\n        get: function get() {\n          return [EM];\n        }\n      }]);\n\n      return XM;\n    }(Ow);\n\n    var GM = n(87);\n\n    var KM = /*#__PURE__*/function (_gb27) {\n      _inherits(KM, _gb27);\n\n      var _super164 = _createSuper(KM);\n\n      function KM(e) {\n        var _this234;\n\n        _classCallCheck(this, KM);\n\n        _this234 = _super164.call(this, e);\n        var t = _this234.bindTemplate;\n        _this234.items = _this234.createCollection();\n\n        _this234.set(\"rows\", 0);\n\n        _this234.set(\"columns\", 0);\n\n        _this234.bind(\"label\").to(_assertThisInitialized(_this234), \"columns\", _assertThisInitialized(_this234), \"rows\", function (e, t) {\n          return \"\".concat(t, \" \\xD7 \").concat(e);\n        });\n\n        _this234.setTemplate({\n          tag: \"div\",\n          attributes: {\n            class: [\"ck\"]\n          },\n          children: [{\n            tag: \"div\",\n            attributes: {\n              class: [\"ck-insert-table-dropdown__grid\"]\n            },\n            children: _this234.items\n          }, {\n            tag: \"div\",\n            attributes: {\n              class: [\"ck-insert-table-dropdown__label\"]\n            },\n            children: [{\n              text: t.to(\"label\")\n            }]\n          }],\n          on: {\n            mousedown: t.to(function (e) {\n              e.preventDefault();\n            }),\n            click: t.to(function () {\n              _this234.fire(\"execute\");\n            })\n          }\n        });\n\n        var _loop10 = function _loop10(_e349) {\n          var t = new ZM();\n          t.on(\"over\", function () {\n            var t = Math.floor(_e349 / 10);\n            var n = _e349 % 10;\n\n            _this234.set(\"rows\", t + 1);\n\n            _this234.set(\"columns\", n + 1);\n          });\n\n          _this234.items.add(t);\n        };\n\n        for (var _e349 = 0; _e349 < 100; _e349++) {\n          _loop10(_e349);\n        }\n\n        _this234.on(\"change:columns\", function () {\n          _this234._highlightGridBoxes();\n        });\n\n        _this234.on(\"change:rows\", function () {\n          _this234._highlightGridBoxes();\n        });\n\n        return _this234;\n      }\n\n      _createClass(KM, [{\n        key: \"focus\",\n        value: function focus() {}\n      }, {\n        key: \"focusLast\",\n        value: function focusLast() {}\n      }, {\n        key: \"_highlightGridBoxes\",\n        value: function _highlightGridBoxes() {\n          var e = this.rows;\n          var t = this.columns;\n          this.items.map(function (n, i) {\n            var o = Math.floor(i / 10);\n            var s = i % 10;\n            var r = o < e && s < t;\n            n.set(\"isOn\", r);\n          });\n        }\n      }]);\n\n      return KM;\n    }(gb);\n\n    var ZM = /*#__PURE__*/function (_gb28) {\n      _inherits(ZM, _gb28);\n\n      var _super165 = _createSuper(ZM);\n\n      function ZM(e) {\n        var _this235;\n\n        _classCallCheck(this, ZM);\n\n        _this235 = _super165.call(this, e);\n        var t = _this235.bindTemplate;\n\n        _this235.set(\"isOn\", false);\n\n        _this235.setTemplate({\n          tag: \"div\",\n          attributes: {\n            class: [\"ck-insert-table-dropdown-grid-box\", t.if(\"isOn\", \"ck-on\")]\n          },\n          on: {\n            mouseover: t.to(\"over\")\n          }\n        });\n\n        return _this235;\n      }\n\n      return _createClass(ZM);\n    }(gb);\n\n    var eP = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M3 6v3h4V6H3zm0 4v3h4v-3H3zm0 4v3h4v-3H3zm5 3h4v-3H8v3zm5 0h4v-3h-4v3zm4-4v-3h-4v3h4zm0-4V6h-4v3h4zm1.5 8a1.5 1.5 0 0 1-1.5 1.5H3A1.5 1.5 0 0 1 1.5 17V4c.222-.863 1.068-1.5 2-1.5h13c.932 0 1.778.637 2 1.5v13zM12 13v-3H8v3h4zm0-4V6H8v3h4z\"/></svg>';\n    var tP = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z\" opacity=\".6\"/><path d=\"M18 7v1H2V7h16zm0 5v1H2v-1h16z\" opacity=\".6\"/><path d=\"M14 1v18a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V1a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1zm-2 1H8v4h4V2zm0 6H8v4h4V8zm0 6H8v4h4v-4z\"/></svg>';\n    var nP = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z\" opacity=\".6\"/><path d=\"M7 2h1v16H7V2zm5 0h1v16h-1V2z\" opacity=\".6\"/><path d=\"M1 6h18a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm1 2v4h4V8H2zm6 0v4h4V8H8zm6 0v4h4V8h-4z\"/></svg>';\n    var iP = '<svg viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M2.5 1h15A1.5 1.5 0 0 1 19 2.5v15a1.5 1.5 0 0 1-1.5 1.5h-15A1.5 1.5 0 0 1 1 17.5v-15A1.5 1.5 0 0 1 2.5 1zM2 2v16h16V2H2z\" opacity=\".6\"/><path d=\"M7 2h1v16H7V2zm5 0h1v7h-1V2zm6 5v1H2V7h16zM8 12v1H2v-1h6z\" opacity=\".6\"/><path d=\"M7 7h12a1 1 0 0 1 1 1v11a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1zm1 2v9h10V9H8z\"/></svg>';\n\n    var oP = /*#__PURE__*/function (_Ow58) {\n      _inherits(oP, _Ow58);\n\n      var _super166 = _createSuper(oP);\n\n      function oP() {\n        _classCallCheck(this, oP);\n\n        return _super166.apply(this, arguments);\n      }\n\n      _createClass(oP, [{\n        key: \"init\",\n        value: function init() {\n          var _this236 = this;\n\n          var e = this.editor;\n          var t = this.editor.t;\n          var n = e.locale.contentLanguageDirection;\n          var i = n === \"ltr\";\n          e.ui.componentFactory.add(\"insertTable\", function (n) {\n            var i = e.commands.get(\"insertTable\");\n            var o = dw(n);\n            o.bind(\"isEnabled\").to(i);\n            o.buttonView.set({\n              icon: eP,\n              label: t(\"q\"),\n              tooltip: true\n            });\n            var s;\n            o.on(\"change:isOpen\", function () {\n              if (s) {\n                return;\n              }\n\n              s = new KM(n);\n              o.panelView.children.add(s);\n              s.delegate(\"execute\").to(o);\n              o.buttonView.on(\"open\", function () {\n                s.rows = 0;\n                s.columns = 0;\n              });\n              o.on(\"execute\", function () {\n                e.execute(\"insertTable\", {\n                  rows: s.rows,\n                  columns: s.columns\n                });\n                e.editing.view.focus();\n              });\n            });\n            return o;\n          });\n          e.ui.componentFactory.add(\"tableColumn\", function (e) {\n            var n = [{\n              type: \"switchbutton\",\n              model: {\n                commandName: \"setTableColumnHeader\",\n                label: t(\"r\"),\n                bindIsOn: true\n              }\n            }, {\n              type: \"separator\"\n            }, {\n              type: \"button\",\n              model: {\n                commandName: i ? \"insertTableColumnLeft\" : \"insertTableColumnRight\",\n                label: t(\"s\")\n              }\n            }, {\n              type: \"button\",\n              model: {\n                commandName: i ? \"insertTableColumnRight\" : \"insertTableColumnLeft\",\n                label: t(\"t\")\n              }\n            }, {\n              type: \"button\",\n              model: {\n                commandName: \"removeTableColumn\",\n                label: t(\"u\")\n              }\n            }];\n            return _this236._prepareDropdown(t(\"v\"), tP, n, e);\n          });\n          e.ui.componentFactory.add(\"tableRow\", function (e) {\n            var n = [{\n              type: \"switchbutton\",\n              model: {\n                commandName: \"setTableRowHeader\",\n                label: t(\"w\"),\n                bindIsOn: true\n              }\n            }, {\n              type: \"separator\"\n            }, {\n              type: \"button\",\n              model: {\n                commandName: \"insertTableRowBelow\",\n                label: t(\"x\")\n              }\n            }, {\n              type: \"button\",\n              model: {\n                commandName: \"insertTableRowAbove\",\n                label: t(\"y\")\n              }\n            }, {\n              type: \"button\",\n              model: {\n                commandName: \"removeTableRow\",\n                label: t(\"z\")\n              }\n            }];\n            return _this236._prepareDropdown(t(\"aa\"), nP, n, e);\n          });\n          e.ui.componentFactory.add(\"mergeTableCells\", function (e) {\n            var n = [{\n              type: \"button\",\n              model: {\n                commandName: \"mergeTableCellUp\",\n                label: t(\"ab\")\n              }\n            }, {\n              type: \"button\",\n              model: {\n                commandName: i ? \"mergeTableCellRight\" : \"mergeTableCellLeft\",\n                label: t(\"ac\")\n              }\n            }, {\n              type: \"button\",\n              model: {\n                commandName: \"mergeTableCellDown\",\n                label: t(\"ad\")\n              }\n            }, {\n              type: \"button\",\n              model: {\n                commandName: i ? \"mergeTableCellLeft\" : \"mergeTableCellRight\",\n                label: t(\"ae\")\n              }\n            }, {\n              type: \"separator\"\n            }, {\n              type: \"button\",\n              model: {\n                commandName: \"splitTableCellVertically\",\n                label: t(\"af\")\n              }\n            }, {\n              type: \"button\",\n              model: {\n                commandName: \"splitTableCellHorizontally\",\n                label: t(\"ag\")\n              }\n            }];\n            return _this236._prepareDropdown(t(\"ah\"), iP, n, e);\n          });\n        }\n      }, {\n        key: \"_prepareDropdown\",\n        value: function _prepareDropdown(e, t, n, i) {\n          var o = this.editor;\n          var s = dw(i);\n          var r = [];\n          var a = new yr();\n\n          var _iterator394 = _createForOfIteratorHelper(n),\n              _step394;\n\n          try {\n            for (_iterator394.s(); !(_step394 = _iterator394.n()).done;) {\n              var _e350 = _step394.value;\n              sP(_e350, o, r, a);\n            }\n          } catch (err) {\n            _iterator394.e(err);\n          } finally {\n            _iterator394.f();\n          }\n\n          hw(s, a, o.ui.componentFactory);\n          s.buttonView.set({\n            label: e,\n            icon: t,\n            tooltip: true\n          });\n          s.bind(\"isEnabled\").toMany(r, \"isEnabled\", function () {\n            for (var _len20 = arguments.length, e = new Array(_len20), _key20 = 0; _key20 < _len20; _key20++) {\n              e[_key20] = arguments[_key20];\n            }\n\n            return e.some(function (e) {\n              return e;\n            });\n          });\n          this.listenTo(s, \"execute\", function (e) {\n            o.execute(e.source.commandName);\n            o.editing.view.focus();\n          });\n          return s;\n        }\n      }]);\n\n      return oP;\n    }(Ow);\n\n    function sP(e, t, n, i) {\n      var o = e.model = new Mk(e.model);\n      var _e$model = e.model,\n          s = _e$model.commandName,\n          r = _e$model.bindIsOn;\n\n      if (e.type === \"button\" || e.type === \"switchbutton\") {\n        var _e351 = t.commands.get(s);\n\n        n.push(_e351);\n        o.set({\n          commandName: s\n        });\n        o.bind(\"isEnabled\").to(_e351);\n\n        if (r) {\n          o.bind(\"isOn\").to(_e351, \"value\");\n        }\n      }\n\n      o.set({\n        withText: true\n      });\n      i.add(e);\n    }\n\n    var rP = /*#__PURE__*/function (_Qu8) {\n      _inherits(rP, _Qu8);\n\n      var _super167 = _createSuper(rP);\n\n      function rP(e) {\n        var _this237;\n\n        _classCallCheck(this, rP);\n\n        _this237 = _super167.call(this, e);\n        _this237.domEventType = [\"mousemove\", \"mouseup\", \"mouseleave\"];\n        return _this237;\n      }\n\n      _createClass(rP, [{\n        key: \"onDomEvent\",\n        value: function onDomEvent(e) {\n          this.fire(e.type, e);\n        }\n      }]);\n\n      return rP;\n    }(Qu);\n\n    function aP(e, t, n) {\n      var i = Array.from(e);\n      var o = i[0];\n      var s = i[i.length - 1];\n\n      var _t$getCellLocation = t.getCellLocation(o),\n          r = _t$getCellLocation.row,\n          a = _t$getCellLocation.column;\n\n      var c = cP(i, a, n, t);\n\n      var _t$getCellLocation2 = t.getCellLocation(s),\n          l = _t$getCellLocation2.row,\n          d = _t$getCellLocation2.column;\n\n      var u = d - a + 1;\n      var h = l - r + 1;\n      dP(c, u, h, n, t);\n      var f = kT(\"table\", o);\n      uP(c, f, r, a, n);\n      return c;\n    }\n\n    function cP(e, t, n, i) {\n      var o = n.createElement(\"table\");\n      var s = new Map();\n      var r = new Map();\n\n      var _iterator395 = _createForOfIteratorHelper(e),\n          _step395;\n\n      try {\n        for (_iterator395.s(); !(_step395 = _iterator395.n()).done;) {\n          var _t289 = _step395.value;\n\n          var _e352 = kT(\"tableRow\", _t289);\n\n          if (!s.has(_e352)) {\n            var _t290 = _e352._clone();\n\n            n.append(_t290, o);\n            s.set(_e352, _t290);\n          }\n\n          var _a31 = _t289._clone(true);\n\n          var _i$getCellLocation = i.getCellLocation(_t289),\n              _c18 = _i$getCellLocation.column;\n\n          r.set(_a31, _c18);\n          n.append(_a31, s.get(_e352));\n        }\n      } catch (err) {\n        _iterator395.e(err);\n      } finally {\n        _iterator395.f();\n      }\n\n      lP(o, t, r, n, i);\n      return o;\n    }\n\n    function lP(e, t, n, i, o) {\n      var _iterator396 = _createForOfIteratorHelper(e.getChildren()),\n          _step396;\n\n      try {\n        for (_iterator396.s(); !(_step396 = _iterator396.n()).done;) {\n          var _s73 = _step396.value;\n\n          for (var _i231 = 0, _Array$from8 = Array.from(_s73.getChildren()); _i231 < _Array$from8.length; _i231++) {\n            var _e353 = _Array$from8[_i231];\n\n            var _o$getCellLocation = o.getCellLocation(_e353),\n                _s74 = _o$getCellLocation.column;\n\n            var _r49 = n.get(_e353);\n\n            var _a32 = _r49 - t;\n\n            if (_s74 !== _a32) {\n              for (var _t291 = 0; _t291 < _a32 - _s74; _t291++) {\n                var _t292 = i.createElement(\"tableCell\");\n\n                i.insert(_t292, i.createPositionBefore(_e353));\n\n                var _n271 = i.createElement(\"paragraph\");\n\n                i.insert(_n271, _t292, 0);\n                i.insertText(\"\", _n271, 0);\n              }\n            }\n          }\n        }\n      } catch (err) {\n        _iterator396.e(err);\n      } finally {\n        _iterator396.f();\n      }\n    }\n\n    function dP(e, t, n, i, o) {\n      var _iterator397 = _createForOfIteratorHelper(e.getChildren()),\n          _step397;\n\n      try {\n        for (_iterator397.s(); !(_step397 = _iterator397.n()).done;) {\n          var _s75 = _step397.value;\n\n          var _iterator398 = _createForOfIteratorHelper(_s75.getChildren()),\n              _step398;\n\n          try {\n            for (_iterator398.s(); !(_step398 = _iterator398.n()).done;) {\n              var _e354 = _step398.value;\n\n              var _s76 = parseInt(_e354.getAttribute(\"colspan\") || 1);\n\n              var _r50 = parseInt(_e354.getAttribute(\"rowspan\") || 1);\n\n              var _o$getCellLocation2 = o.getCellLocation(_e354),\n                  _a33 = _o$getCellLocation2.row,\n                  _c19 = _o$getCellLocation2.column;\n\n              if (_c19 + _s76 > t) {\n                var _n272 = t - _c19;\n\n                if (_n272 > 1) {\n                  i.setAttribute(\"colspan\", _n272, _e354);\n                } else {\n                  i.removeAttribute(\"colspan\", _e354);\n                }\n              }\n\n              if (_a33 + _r50 > n) {\n                var _t293 = n - _a33;\n\n                if (_t293 > 1) {\n                  i.setAttribute(\"rowspan\", _t293, _e354);\n                } else {\n                  i.removeAttribute(\"rowspan\", _e354);\n                }\n              }\n            }\n          } catch (err) {\n            _iterator398.e(err);\n          } finally {\n            _iterator398.f();\n          }\n        }\n      } catch (err) {\n        _iterator397.e(err);\n      } finally {\n        _iterator397.f();\n      }\n    }\n\n    function uP(e, t, n, i, o) {\n      var s = parseInt(t.getAttribute(\"headingRows\") || 0);\n\n      if (s > 0) {\n        var _t294 = s - n;\n\n        o.setAttribute(\"headingRows\", _t294, e);\n      }\n\n      var r = parseInt(t.getAttribute(\"headingColumns\") || 0);\n\n      if (r > 0) {\n        var _t295 = r - i;\n\n        o.setAttribute(\"headingColumns\", _t295, e);\n      }\n    }\n\n    var hP = n(89);\n\n    var fP = /*#__PURE__*/function (_Ow59) {\n      _inherits(fP, _Ow59);\n\n      var _super168 = _createSuper(fP);\n\n      function fP() {\n        _classCallCheck(this, fP);\n\n        return _super168.apply(this, arguments);\n      }\n\n      _createClass(fP, [{\n        key: \"init\",\n        value: function init() {\n          var _this238 = this;\n\n          var e = this.editor;\n          var t = e.model;\n          this.listenTo(t, \"deleteContent\", function (e, t) {\n            return _this238._handleDeleteContent(e, t);\n          }, {\n            priority: \"high\"\n          });\n          e.editing.view.addObserver(rP);\n\n          this._defineSelectionConverter();\n\n          this._enableShiftClickSelection();\n\n          this._enableMouseDragSelection();\n        }\n      }, {\n        key: \"getSelectedTableCells\",\n        value: function getSelectedTableCells() {\n          var e = this.editor.model.document.selection;\n          var t = jT(e);\n\n          if (t.length == 0) {\n            return null;\n          }\n\n          return t;\n        }\n      }, {\n        key: \"getSelectionAsFragment\",\n        value: function getSelectionAsFragment() {\n          var _this239 = this;\n\n          var e = this.getSelectedTableCells();\n\n          if (!e) {\n            return null;\n          }\n\n          return this.editor.model.change(function (t) {\n            var n = t.createDocumentFragment();\n            var i = aP(e, _this239.editor.plugins.get(\"TableUtils\"), t);\n            t.insert(i, n, 0);\n            return n;\n          });\n        }\n      }, {\n        key: \"_defineSelectionConverter\",\n        value: function _defineSelectionConverter() {\n          var _this240 = this;\n\n          var e = this.editor;\n          var t = new Set();\n          e.conversion.for(\"editingDowncast\").add(function (e) {\n            return e.on(\"selection\", function (e, i, o) {\n              var s = o.writer;\n              n(s);\n\n              var r = _this240.getSelectedTableCells();\n\n              if (!r) {\n                return;\n              }\n\n              var _iterator399 = _createForOfIteratorHelper(r),\n                  _step399;\n\n              try {\n                for (_iterator399.s(); !(_step399 = _iterator399.n()).done;) {\n                  var _e355 = _step399.value;\n\n                  var _n273 = o.mapper.toViewElement(_e355);\n\n                  s.addClass(\"ck-editor__editable_selected\", _n273);\n                  t.add(_n273);\n                }\n              } catch (err) {\n                _iterator399.e(err);\n              } finally {\n                _iterator399.f();\n              }\n\n              var a = o.mapper.toViewElement(r[r.length - 1]);\n              s.setSelection(a, 0);\n            }, {\n              priority: \"lowest\"\n            });\n          });\n\n          function n(e) {\n            var _iterator400 = _createForOfIteratorHelper(t),\n                _step400;\n\n            try {\n              for (_iterator400.s(); !(_step400 = _iterator400.n()).done;) {\n                var _n274 = _step400.value;\n                e.removeClass(\"ck-editor__editable_selected\", _n274);\n              }\n            } catch (err) {\n              _iterator400.e(err);\n            } finally {\n              _iterator400.f();\n            }\n\n            t.clear();\n          }\n        }\n      }, {\n        key: \"_enableShiftClickSelection\",\n        value: function _enableShiftClickSelection() {\n          var _this241 = this;\n\n          var e = this.editor;\n          var t = false;\n          this.listenTo(e.editing.view.document, \"mousedown\", function (n, i) {\n            if (!_this241.isEnabled) {\n              return;\n            }\n\n            if (!i.domEvent.shiftKey) {\n              return;\n            }\n\n            var o = DT(e.model.document.selection)[0];\n\n            if (!o) {\n              return;\n            }\n\n            var s = _this241._getModelTableCellFromDomEvent(i);\n\n            if (s && gP(o, s)) {\n              t = true;\n\n              _this241._setCellSelection(o, s);\n\n              i.preventDefault();\n            }\n          });\n          this.listenTo(e.editing.view.document, \"mouseup\", function () {\n            t = false;\n          });\n          this.listenTo(e.editing.view.document, \"selectionChange\", function (e) {\n            if (t) {\n              e.stop();\n            }\n          }, {\n            priority: \"highest\"\n          });\n        }\n      }, {\n        key: \"_enableMouseDragSelection\",\n        value: function _enableMouseDragSelection() {\n          var _this242 = this;\n\n          var e = this.editor;\n          var t, n;\n          var i = false;\n          var o = false;\n          this.listenTo(e.editing.view.document, \"mousedown\", function (e, n) {\n            if (!_this242.isEnabled) {\n              return;\n            }\n\n            if (n.domEvent.shiftKey || n.domEvent.ctrlKey || n.domEvent.altKey) {\n              return;\n            }\n\n            t = _this242._getModelTableCellFromDomEvent(n);\n          });\n          this.listenTo(e.editing.view.document, \"mousemove\", function (e, s) {\n            if (!s.domEvent.buttons) {\n              return;\n            }\n\n            if (!t) {\n              return;\n            }\n\n            var r = _this242._getModelTableCellFromDomEvent(s);\n\n            if (r && gP(t, r)) {\n              n = r;\n\n              if (!i && n != t) {\n                i = true;\n              }\n            }\n\n            if (!i) {\n              return;\n            }\n\n            o = true;\n\n            _this242._setCellSelection(t, n);\n\n            s.preventDefault();\n          });\n          this.listenTo(e.editing.view.document, \"mouseup\", function () {\n            i = false;\n            o = false;\n            t = null;\n            n = null;\n          });\n          this.listenTo(e.editing.view.document, \"selectionChange\", function (e) {\n            if (o) {\n              e.stop();\n            }\n          }, {\n            priority: \"highest\"\n          });\n        }\n      }, {\n        key: \"_handleDeleteContent\",\n        value: function _handleDeleteContent(e, t) {\n          var _t296 = _slicedToArray(t, 2),\n              n = _t296[0],\n              i = _t296[1];\n\n          var o = this.editor.model;\n          var s = !i || i.direction == \"backward\";\n          var r = jT(n);\n\n          if (!r.length) {\n            return;\n          }\n\n          e.stop();\n          o.change(function (e) {\n            var t = r[s ? r.length - 1 : 0];\n            o.change(function (e) {\n              var _iterator401 = _createForOfIteratorHelper(r),\n                  _step401;\n\n              try {\n                for (_iterator401.s(); !(_step401 = _iterator401.n()).done;) {\n                  var _t297 = _step401.value;\n                  o.deleteContent(e.createSelection(_t297, \"in\"));\n                }\n              } catch (err) {\n                _iterator401.e(err);\n              } finally {\n                _iterator401.f();\n              }\n            });\n            var i = o.schema.getNearestSelectionRange(e.createPositionAt(t, 0));\n\n            if (i) {\n              if (n.is(\"documentSelection\")) {\n                e.setSelection(i);\n              } else {\n                n.setTo(i);\n              }\n            }\n          });\n        }\n      }, {\n        key: \"_setCellSelection\",\n        value: function _setCellSelection(e, t) {\n          var n = this._getCellsToSelect(e, t);\n\n          this.editor.model.change(function (e) {\n            e.setSelection(n.cells.map(function (t) {\n              return e.createRangeOn(t);\n            }), {\n              backward: n.backward\n            });\n          });\n        }\n      }, {\n        key: \"_getModelTableCellFromDomEvent\",\n        value: function _getModelTableCellFromDomEvent(e) {\n          var t = e.target;\n          var n = this.editor.editing.view.createPositionAt(t, 0);\n          var i = this.editor.editing.mapper.toModelPosition(n);\n          var o = i.parent;\n\n          if (!o) {\n            return;\n          }\n\n          if (o.is(\"tableCell\")) {\n            return o;\n          }\n\n          return kT(\"tableCell\", o);\n        }\n      }, {\n        key: \"_getCellsToSelect\",\n        value: function _getCellsToSelect(e, t) {\n          var n = this.editor.plugins.get(\"TableUtils\");\n          var i = n.getCellLocation(e);\n          var o = n.getCellLocation(t);\n          var s = Math.min(i.row, o.row);\n          var r = Math.max(i.row, o.row);\n          var a = Math.min(i.column, o.column);\n          var c = Math.max(i.column, o.column);\n          var l = [];\n\n          var _iterator402 = _createForOfIteratorHelper(new IT(kT(\"table\", e), {\n            startRow: s,\n            endRow: r\n          })),\n              _step402;\n\n          try {\n            for (_iterator402.s(); !(_step402 = _iterator402.n()).done;) {\n              var _t298 = _step402.value;\n\n              if (_t298.column >= a && _t298.column <= c) {\n                l.push(_t298.cell);\n              }\n            }\n          } catch (err) {\n            _iterator402.e(err);\n          } finally {\n            _iterator402.f();\n          }\n\n          if (mP(i, o)) {\n            return {\n              cells: l.reverse(),\n              backward: true\n            };\n          }\n\n          return {\n            cells: l,\n            backward: false\n          };\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"TableSelection\";\n        }\n      }, {\n        key: \"requires\",\n        get: function get() {\n          return [EM];\n        }\n      }]);\n\n      return fP;\n    }(Ow);\n\n    function mP(e, t) {\n      if (e.row > t.row) {\n        return true;\n      }\n\n      if (e.row == t.row && e.column > t.column) {\n        return true;\n      }\n\n      return false;\n    }\n\n    function gP(e, t) {\n      return e.parent.parent == t.parent.parent;\n    }\n\n    var pP = /*#__PURE__*/function (_Ow60) {\n      _inherits(pP, _Ow60);\n\n      var _super169 = _createSuper(pP);\n\n      function pP() {\n        _classCallCheck(this, pP);\n\n        return _super169.apply(this, arguments);\n      }\n\n      _createClass(pP, [{\n        key: \"init\",\n        value: function init() {\n          var _this243 = this;\n\n          var e = this.editor;\n          var t = e.editing.view.document;\n          this.listenTo(t, \"copy\", function (e, t) {\n            return _this243._onCopyCut(e, t);\n          });\n          this.listenTo(t, \"cut\", function (e, t) {\n            return _this243._onCopyCut(e, t);\n          });\n        }\n      }, {\n        key: \"_onCopyCut\",\n        value: function _onCopyCut(e, t) {\n          var n = this.editor.plugins.get(\"TableSelection\");\n\n          if (!n.getSelectedTableCells()) {\n            return;\n          }\n\n          if (e.name == \"cut\" && this.editor.isReadOnly) {\n            return;\n          }\n\n          t.preventDefault();\n          e.stop();\n          var i = this.editor.data;\n          var o = this.editor.editing.view.document;\n          var s = i.toView(n.getSelectionAsFragment());\n          o.fire(\"clipboardOutput\", {\n            dataTransfer: t.dataTransfer,\n            content: s,\n            method: e.name\n          });\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"TableClipboard\";\n        }\n      }, {\n        key: \"requires\",\n        get: function get() {\n          return [fP];\n        }\n      }]);\n\n      return pP;\n    }(Ow);\n\n    var bP = n(91);\n\n    var wP = /*#__PURE__*/function (_Ow61) {\n      _inherits(wP, _Ow61);\n\n      var _super170 = _createSuper(wP);\n\n      function wP() {\n        _classCallCheck(this, wP);\n\n        return _super170.apply(this, arguments);\n      }\n\n      _createClass(wP, null, [{\n        key: \"requires\",\n        get: function get() {\n          return [XM, oP, fP, pP, Lk];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"Table\";\n        }\n      }]);\n\n      return wP;\n    }(Ow);\n\n    var _P = /*#__PURE__*/function (_Ow62) {\n      _inherits(_P, _Ow62);\n\n      var _super171 = _createSuper(_P);\n\n      function _P() {\n        _classCallCheck(this, _P);\n\n        return _super171.apply(this, arguments);\n      }\n\n      _createClass(_P, [{\n        key: \"afterInit\",\n        value: function afterInit() {\n          var e = this.editor;\n          var t = e.t;\n          var n = e.plugins.get(Qy);\n          var i = e.config.get(\"table.contentToolbar\");\n          var o = e.config.get(\"table.tableToolbar\");\n\n          if (i) {\n            n.register(\"tableContent\", {\n              ariaLabel: t(\"c\"),\n              items: i,\n              getRelatedElement: LT\n            });\n          }\n\n          if (o) {\n            n.register(\"table\", {\n              ariaLabel: t(\"c\"),\n              items: o,\n              getRelatedElement: RT\n            });\n          }\n        }\n      }], [{\n        key: \"requires\",\n        get: function get() {\n          return [Qy];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"TableToolbar\";\n        }\n      }]);\n\n      return _P;\n    }(Ow);\n\n    var vP = /*#__PURE__*/function () {\n      function vP(e) {\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        _classCallCheck(this, vP);\n\n        this.namespaces = t.namespaces || [];\n        this._domParser = new DOMParser();\n        this._domConverter = new Dd(e, {\n          blockFillerMode: \"nbsp\"\n        });\n        this._htmlWriter = new _p();\n      }\n\n      _createClass(vP, [{\n        key: \"toData\",\n        value: function toData(e) {\n          var t = this._domConverter.viewToDom(e, document);\n\n          return this._htmlWriter.getHtml(t);\n        }\n      }, {\n        key: \"toView\",\n        value: function toView(e) {\n          var t = this._toDom(e);\n\n          return this._domConverter.domToView(t, {\n            keepOriginalCase: true\n          });\n        }\n      }, {\n        key: \"_toDom\",\n        value: function _toDom(e) {\n          var t = this.namespaces.map(function (e) {\n            return \"xmlns:\".concat(e, \"=\\\"nsp\\\"\");\n          }).join(\" \");\n          e = \"<xml \".concat(t, \">\").concat(e, \"</xml>\");\n\n          var n = this._domParser.parseFromString(e, \"text/xml\");\n\n          var i = n.querySelector(\"parsererror\");\n\n          if (i) {\n            throw new Error(\"Parse error - \" + i.textContent);\n          }\n\n          var o = n.createDocumentFragment();\n          var s = n.documentElement.childNodes;\n\n          while (s.length > 0) {\n            o.appendChild(s[0]);\n          }\n\n          return o;\n        }\n      }]);\n\n      return vP;\n    }();\n\n    var kP = /*#__PURE__*/function () {\n      function kP() {\n        _classCallCheck(this, kP);\n      }\n\n      _createClass(kP, null, [{\n        key: \"safeXmlCharactersEntities\",\n        get: function get() {\n          return {\n            tagOpener: \"&laquo;\",\n            tagCloser: \"&raquo;\",\n            doubleQuote: \"&uml;\",\n            realDoubleQuote: \"&quot;\"\n          };\n        }\n      }, {\n        key: \"safeBadBlackboardCharacters\",\n        get: function get() {\n          return {\n            ltElement: \"«mo»<«/mo»\",\n            gtElement: \"«mo»>«/mo»\",\n            ampElement: \"«mo»&«/mo»\"\n          };\n        }\n      }, {\n        key: \"safeGoodBlackboardCharacters\",\n        get: function get() {\n          return {\n            ltElement: \"«mo»§lt;«/mo»\",\n            gtElement: \"«mo»§gt;«/mo»\",\n            ampElement: \"«mo»§amp;«/mo»\"\n          };\n        }\n      }, {\n        key: \"xmlCharacters\",\n        get: function get() {\n          return {\n            id: \"xmlCharacters\",\n            tagOpener: \"<\",\n            tagCloser: \">\",\n            doubleQuote: '\"',\n            ampersand: \"&\",\n            quote: \"'\"\n          };\n        }\n      }, {\n        key: \"safeXmlCharacters\",\n        get: function get() {\n          return {\n            id: \"safeXmlCharacters\",\n            tagOpener: \"«\",\n            tagCloser: \"»\",\n            doubleQuote: \"¨\",\n            ampersand: \"§\",\n            quote: \"`\",\n            realDoubleQuote: \"¨\"\n          };\n        }\n      }]);\n\n      return kP;\n    }();\n\n    var yP = /*#__PURE__*/function () {\n      function yP() {\n        _classCallCheck(this, yP);\n      }\n\n      _createClass(yP, null, [{\n        key: \"isMathmlInAttribute\",\n        value: function isMathmlInAttribute(e, t) {\n          var n = \"['\\\"][\\\\s]*=[\\\\s]*[\\\\w-]+\";\n          var i = \"\\\"[^\\\"]*\\\"|'[^']*'\";\n          var o = \"[\\\\s]*(\".concat(i, \")[\\\\s]*=[\\\\s]*[\\\\w-]+[\\\\s]*\");\n          var s = \"('\".concat(o, \"')*\");\n          var r = \"^\".concat(n).concat(s, \"[\\\\s]+gmi<\");\n          var a = new RegExp(r);\n          var c = e.substring(0, t);\n          var l = c.split(\"\").reverse().join(\"\");\n          var d = a.test(l);\n          return d;\n        }\n      }, {\n        key: \"safeXmlDecode\",\n        value: function safeXmlDecode(e) {\n          var t = kP.safeXmlCharactersEntities.tagOpener;\n          var n = kP.safeXmlCharactersEntities.tagCloser;\n          var i = kP.safeXmlCharactersEntities.doubleQuote;\n          var o = kP.safeXmlCharactersEntities.realDoubleQuote;\n          e = e.split(t).join(kP.safeXmlCharacters.tagOpener);\n          e = e.split(n).join(kP.safeXmlCharacters.tagCloser);\n          e = e.split(i).join(kP.safeXmlCharacters.doubleQuote);\n          e = e.split(o).join(kP.safeXmlCharacters.realDoubleQuote);\n          var s = kP.safeBadBlackboardCharacters.ltElement;\n          var r = kP.safeBadBlackboardCharacters.gtElement;\n          var a = kP.safeBadBlackboardCharacters.ampElement;\n\n          if (\"_wrs_blackboard\" in window && window._wrs_blackboard) {\n            e = e.split(s).join(kP.safeGoodBlackboardCharacters.ltElement);\n            e = e.split(r).join(kP.safeGoodBlackboardCharacters.gtElement);\n            e = e.split(a).join(kP.safeGoodBlackboardCharacters.ampElement);\n          }\n\n          t = kP.safeXmlCharacters.tagOpener;\n          n = kP.safeXmlCharacters.tagCloser;\n          i = kP.safeXmlCharacters.doubleQuote;\n          o = kP.safeXmlCharacters.realDoubleQuote;\n          var c = kP.safeXmlCharacters.ampersand;\n          var l = kP.safeXmlCharacters.quote;\n          e = e.split(t).join(kP.xmlCharacters.tagOpener);\n          e = e.split(n).join(kP.xmlCharacters.tagCloser);\n          e = e.split(i).join(kP.xmlCharacters.doubleQuote);\n          e = e.split(c).join(kP.xmlCharacters.ampersand);\n          e = e.split(l).join(kP.xmlCharacters.quote);\n          var d = \"\";\n          var u = null;\n\n          for (var _t299 = 0; _t299 < e.length; _t299 += 1) {\n            var _n275 = e.charAt(_t299);\n\n            if (u == null) {\n              if (_n275 === \"$\") {\n                u = \"\";\n              } else {\n                d += _n275;\n              }\n            } else if (_n275 === \";\") {\n              d += \"&\".concat(u);\n              u = null;\n            } else if (_n275.match(/([a-zA-Z0-9#._-] | '-')/)) {\n              u += _n275;\n            } else {\n              d += \"$\".concat(u);\n              u = null;\n              _t299 -= 1;\n            }\n          }\n\n          return d;\n        }\n      }, {\n        key: \"safeXmlEncode\",\n        value: function safeXmlEncode(e) {\n          var t = kP.xmlCharacters.tagOpener;\n          var n = kP.xmlCharacters.tagCloser;\n          var i = kP.xmlCharacters.doubleQuote;\n          var o = kP.xmlCharacters.ampersand;\n          var s = kP.xmlCharacters.quote;\n          e = e.split(t).join(kP.safeXmlCharacters.tagOpener);\n          e = e.split(n).join(kP.safeXmlCharacters.tagCloser);\n          e = e.split(i).join(kP.safeXmlCharacters.doubleQuote);\n          e = e.split(o).join(kP.safeXmlCharacters.ampersand);\n          e = e.split(s).join(kP.safeXmlCharacters.quote);\n          return e;\n        }\n      }, {\n        key: \"mathMLEntities\",\n        value: function mathMLEntities(e) {\n          var t = \"\";\n\n          for (var _n276 = 0; _n276 < e.length; _n276 += 1) {\n            var _i232 = e.charAt(_n276);\n\n            if (e.codePointAt(_n276) > 128) {\n              t += \"&#\".concat(e.codePointAt(_n276), \";\");\n\n              if (e.codePointAt(_n276) > 65535) {\n                _n276 += 1;\n              }\n            } else if (_i232 === \"&\") {\n              var _o109 = e.indexOf(\";\", _n276 + 1);\n\n              if (_o109 >= 0) {\n                var _i233 = document.createElement(\"span\");\n\n                _i233.innerHTML = e.substring(_n276, _o109 + 1);\n                t += \"&#\".concat(SP.fixedCharCodeAt(_i233.textContent || _i233.innerText, 0), \";\");\n                _n276 = _o109;\n              } else {\n                t += _i232;\n              }\n            } else {\n              t += _i232;\n            }\n          }\n\n          return t;\n        }\n      }, {\n        key: \"addCustomEditorClassAttribute\",\n        value: function addCustomEditorClassAttribute(e, t) {\n          var n = \"\";\n          var i = e.indexOf(\"<math\");\n\n          if (i === 0) {\n            var _o110 = e.indexOf(\">\");\n\n            if (e.indexOf(\"class\") === -1) {\n              n = \"\".concat(e.substr(i, _o110), \" class=\\\"wrs_\").concat(t, \"\\\">\");\n              n += e.substr(_o110 + 1, e.length);\n              return n;\n            }\n          }\n\n          return e;\n        }\n      }, {\n        key: \"removeCustomEditorClassAttribute\",\n        value: function removeCustomEditorClassAttribute(e, t) {\n          if (e.indexOf(\"class\") === -1 || e.indexOf(\"wrs_\".concat(t)) === -1) {\n            return e;\n          }\n\n          if (e.indexOf(\"class=\\\"wrs_\".concat(t, \"\\\"\")) !== -1) {\n            return e.replace(\"class=\\\"wrs_\".concat(t, \"\\\"\"), \"\");\n          }\n\n          return e.replace(\"wrs_\".concat(t), \"\");\n        }\n      }, {\n        key: \"addAnnotation\",\n        value: function addAnnotation(e, t, n) {\n          var i = e.indexOf(\"<annotation\");\n          var o = \"\";\n\n          if (i !== -1) {\n            var _i234 = e.indexOf(\"</semantics>\");\n\n            o = \"\".concat(e.substring(0, _i234), \"<annotation encoding=\\\"\").concat(n, \"\\\">\").concat(t, \"</annotation>\").concat(e.substring(_i234));\n          } else if (yP.isEmpty(e)) {\n            var _i235 = e.indexOf(\"/>\");\n\n            var _s77 = e.indexOf(\">\");\n\n            var _r51 = _s77 === _i235 ? _i235 : _s77;\n\n            o = \"\".concat(e.substring(0, _r51), \"><semantics><annotation encoding=\\\"\").concat(n, \"\\\">\").concat(t, \"</annotation></semantics></math>\");\n          } else {\n            var _i236 = e.indexOf(\">\") + 1;\n\n            var _s78 = e.lastIndexOf(\"</math>\");\n\n            var _r52 = e.substring(_i236, _s78);\n\n            o = \"\".concat(e.substring(0, _i236), \"<semantics>\").concat(_r52, \"<annotation encoding=\\\"\").concat(n, \"\\\">\").concat(t, \"</annotation></semantics></math>\");\n          }\n\n          return o;\n        }\n      }, {\n        key: \"removeAnnotation\",\n        value: function removeAnnotation(e, t) {\n          var n = e;\n          var i = \"<annotation encoding=\\\"\".concat(t, \"\\\">\");\n          var o = \"</annotation>\";\n          var s = e.indexOf(i);\n\n          if (s !== -1) {\n            var _t300 = false;\n\n            var _i237 = e.indexOf(\"<annotation\");\n\n            while (_i237 !== -1) {\n              if (_i237 !== s) {\n                _t300 = true;\n              }\n\n              _i237 = e.indexOf(\"<annotation\", _i237 + 1);\n            }\n\n            if (_t300) {\n              var _t301 = e.indexOf(o, s);\n\n              var _i238 = _t301 + o.length;\n\n              var _r53 = e.substring(0, s);\n\n              n = _r53 + e.substring(_i238);\n            } else {\n              n = yP.removeSemantics(e);\n            }\n          }\n\n          return n;\n        }\n      }, {\n        key: \"removeSemantics\",\n        value: function removeSemantics(e) {\n          var t = \"</math>\";\n          var n = \"<semantics>\";\n          var i = \"<annotation\";\n          var o = e;\n          var s = e.indexOf(n);\n\n          if (s !== -1) {\n            var _r54 = e.indexOf(i, s + n.length);\n\n            if (_r54 !== -1) {\n              o = e.substring(0, s) + e.substring(s + n.length, _r54) + t;\n            }\n          }\n\n          return o;\n        }\n      }, {\n        key: \"removeSemanticsOcurrences\",\n        value: function removeSemanticsOcurrences(e) {\n          var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : kP.xmlCharacters;\n          var n = \"\".concat(t.tagOpener, \"math\");\n          var i = \"\".concat(t.tagOpener, \"/math\").concat(t.tagCloser);\n          var o = \"/\".concat(t.tagCloser);\n          var s = t.tagCloser;\n          var r = \"\".concat(t.tagOpener, \"semantics\").concat(t.tagCloser);\n          var a = \"\".concat(t.tagOpener, \"annotation encoding=\");\n          var c = \"\";\n          var l = e.indexOf(n);\n          var d = 0;\n\n          while (l !== -1) {\n            c += e.substring(d, l);\n\n            var _t302 = e.indexOf(i, l);\n\n            var _u5 = e.indexOf(o, l);\n\n            var _h4 = e.indexOf(s, l);\n\n            if (_t302 !== -1) {\n              d = _t302;\n            } else if (_u5 === _h4 - 1) {\n              d = _u5;\n            }\n\n            var _f2 = e.indexOf(r, l);\n\n            if (_f2 !== -1) {\n              var _t303 = e.substring(l, _f2);\n\n              var _o111 = e.indexOf(a, l);\n\n              if (_o111 !== -1) {\n                var _s79 = _f2 + r.length;\n\n                var _a34 = e.substring(_s79, _o111);\n\n                c += _t303 + _a34 + i;\n                l = e.indexOf(n, l + n.length);\n                d += i.length;\n              } else {\n                d = l;\n                l = e.indexOf(n, l + n.length);\n              }\n            } else {\n              d = l;\n              l = e.indexOf(n, l + n.length);\n            }\n          }\n\n          c += e.substring(d, e.length);\n          return c;\n        }\n      }, {\n        key: \"containClass\",\n        value: function containClass(e, t) {\n          var n = e.indexOf(\"class\");\n\n          if (n === -1) {\n            return false;\n          }\n\n          var i = e.indexOf(\">\", n);\n          var o = e.substring(n, i);\n\n          if (o.indexOf(t) !== -1) {\n            return true;\n          }\n\n          return false;\n        }\n      }, {\n        key: \"isEmpty\",\n        value: function isEmpty(e) {\n          var t = \">\";\n          var n = \"/>\";\n          var i = e.indexOf(t);\n          var o = e.indexOf(n);\n          var s = false;\n\n          if (o !== -1) {\n            if (o === i - 1) {\n              s = true;\n            }\n          }\n\n          if (!s) {\n            var _t304 = new RegExp(\"</(.+:)?math>\");\n\n            var _n277 = _t304.exec(e);\n\n            if (_n277) {\n              s = i + 1 === _n277.index;\n            }\n          }\n\n          return s;\n        }\n      }, {\n        key: \"encodeProperties\",\n        value: function encodeProperties(e) {\n          var t = /\\w+=\".*?\"/g;\n\n          var n = function n(e) {\n            var t = e.indexOf('\"');\n            var n = e.substring(t + 1, e.length - 1);\n            var i = SP.htmlEntities(n);\n            var o = \"\".concat(e.substring(0, t + 1)).concat(i, \"\\\"\");\n            return o;\n          };\n\n          var i = e.replace(t, n);\n          return i;\n        }\n      }]);\n\n      return yP;\n    }();\n\n    var xP = /*#__PURE__*/function () {\n      function xP() {\n        _classCallCheck(this, xP);\n      }\n\n      _createClass(xP, null, [{\n        key: \"addConfiguration\",\n        value: function addConfiguration(e) {\n          Object.assign(xP.properties, e);\n        }\n      }, {\n        key: \"properties\",\n        get: function get() {\n          return xP._properties;\n        },\n        set: function set(e) {\n          xP._properties = e;\n        }\n      }, {\n        key: \"get\",\n        value: function get(e) {\n          if (!Object.prototype.hasOwnProperty.call(xP.properties, e)) {\n            if (Object.prototype.hasOwnProperty.call(xP.properties, \"_wrs_conf_\")) {\n              return xP.properties[\"_wrs_conf_\".concat(e)];\n            }\n\n            return false;\n          }\n\n          return xP.properties[e];\n        }\n      }, {\n        key: \"set\",\n        value: function set(e, t) {\n          xP.properties[e] = t;\n        }\n      }, {\n        key: \"update\",\n        value: function update(e, t) {\n          if (!xP.get(e)) {\n            xP.set(e, t);\n          } else {\n            var _n278 = Object.assign(xP.get(e), t);\n\n            xP.set(e, _n278);\n          }\n        }\n      }]);\n\n      return xP;\n    }();\n\n    xP._properties = {};\n\n    var AP = /*#__PURE__*/function () {\n      function AP() {\n        _classCallCheck(this, AP);\n\n        this.cache = [];\n      }\n\n      _createClass(AP, [{\n        key: \"populate\",\n        value: function populate(e, t) {\n          this.cache[e] = t;\n        }\n      }, {\n        key: \"get\",\n        value: function get(e) {\n          if (Object.prototype.hasOwnProperty.call(this.cache, e)) {\n            return this.cache[e];\n          }\n\n          return false;\n        }\n      }]);\n\n      return AP;\n    }();\n\n    var CP = /*#__PURE__*/function () {\n      function CP() {\n        _classCallCheck(this, CP);\n\n        this.listeners = [];\n      }\n\n      _createClass(CP, [{\n        key: \"add\",\n        value: function add(e) {\n          this.listeners.push(e);\n        }\n      }, {\n        key: \"fire\",\n        value: function fire(e, t) {\n          for (var _n279 = 0; _n279 < this.listeners.length && !t.cancelled; _n279 += 1) {\n            if (this.listeners[_n279].eventName === e) {\n              this.listeners[_n279].callback(t);\n            }\n          }\n\n          return t.defaultPrevented;\n        }\n      }], [{\n        key: \"newListener\",\n        value: function newListener(e, t) {\n          var n = {};\n          n.eventName = e;\n          n.callback = t;\n          return n;\n        }\n      }]);\n\n      return CP;\n    }();\n\n    var TP = /*#__PURE__*/function () {\n      function TP() {\n        _classCallCheck(this, TP);\n      }\n\n      _createClass(TP, null, [{\n        key: \"listeners\",\n        get: function get() {\n          return TP._listeners;\n        }\n      }, {\n        key: \"addListener\",\n        value: function addListener(e) {\n          TP.listeners.add(e);\n        }\n      }, {\n        key: \"fireEvent\",\n        value: function fireEvent(e, t) {\n          TP.listeners.fire(e, t);\n        }\n      }, {\n        key: \"parameters\",\n        get: function get() {\n          return TP._parameters;\n        },\n        set: function set(e) {\n          TP._parameters = e;\n        }\n      }, {\n        key: \"servicePaths\",\n        get: function get() {\n          return TP._servicePaths;\n        },\n        set: function set(e) {\n          TP._servicePaths = e;\n        }\n      }, {\n        key: \"setServicePath\",\n        value: function setServicePath(e, t) {\n          TP.servicePaths[e] = t;\n        }\n      }, {\n        key: \"getServicePath\",\n        value: function getServicePath(e) {\n          return TP.servicePaths[e];\n        }\n      }, {\n        key: \"integrationPath\",\n        get: function get() {\n          return TP._integrationPath;\n        },\n        set: function set(e) {\n          TP._integrationPath = e;\n        }\n      }, {\n        key: \"getServerURL\",\n        value: function getServerURL() {\n          var e = window.location.href;\n          var t = e.split(\"/\");\n          var n = \"\".concat(t[0], \"//\").concat(t[2]);\n          return n;\n        }\n      }, {\n        key: \"init\",\n        value: function init(e) {\n          TP.parameters = e;\n          var t = TP.createServiceURI(\"configurationjs\");\n          var n = TP.createServiceURI(\"createimage\");\n          var i = TP.createServiceURI(\"showimage\");\n          var o = TP.createServiceURI(\"getmathml\");\n          var s = TP.createServiceURI(\"service\");\n\n          if (TP.parameters.URI.indexOf(\"/\") === 0) {\n            var _e356 = TP.getServerURL();\n\n            t = _e356 + t;\n            i = _e356 + i;\n            n = _e356 + n;\n            o = _e356 + o;\n            s = _e356 + s;\n          }\n\n          TP.setServicePath(\"configurationjs\", t);\n          TP.setServicePath(\"showimage\", i);\n          TP.setServicePath(\"createimage\", n);\n          TP.setServicePath(\"service\", s);\n          TP.setServicePath(\"getmathml\", o);\n          TP.setServicePath(\"configurationjs\", t);\n          TP.listeners.fire(\"onInit\", {});\n        }\n      }, {\n        key: \"getUrl\",\n        value: function getUrl(e, t) {\n          var n = window.location.toString().substr(0, window.location.toString().lastIndexOf(\"/\") + 1);\n          var i = SP.createHttpRequest();\n\n          if (i) {\n            if (typeof t === \"undefined\" || typeof t === \"undefined\") {\n              i.open(\"GET\", e, false);\n            } else if (e.substr(0, 1) === \"/\" || e.substr(0, 7) === \"http://\" || e.substr(0, 8) === \"https://\") {\n              i.open(\"POST\", e, false);\n            } else {\n              i.open(\"POST\", n + e, false);\n            }\n\n            if (typeof t !== \"undefined\" && t) {\n              i.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded; charset=UTF-8\");\n              i.send(SP.httpBuildQuery(t));\n            } else {\n              i.send(null);\n            }\n\n            return i.responseText;\n          }\n\n          return \"\";\n        }\n      }, {\n        key: \"getService\",\n        value: function getService(e, t, n) {\n          var i;\n\n          if (n === true) {\n            var _n280 = \"\".concat(TP.getServicePath(e), \"?\").concat(t);\n\n            i = TP.getUrl(_n280);\n          } else {\n            var _n281 = TP.getServicePath(e);\n\n            i = TP.getUrl(_n281, t);\n          }\n\n          return i;\n        }\n      }, {\n        key: \"getServerLanguageFromService\",\n        value: function getServerLanguageFromService(e) {\n          if (e.indexOf(\".php\") !== -1) {\n            return \"php\";\n          }\n\n          if (e.indexOf(\".aspx\") !== -1) {\n            return \"aspx\";\n          }\n\n          if (e.indexOf(\"wirispluginengine\") !== -1) {\n            return \"ruby\";\n          }\n\n          return \"java\";\n        }\n      }, {\n        key: \"createServiceURI\",\n        value: function createServiceURI(e) {\n          var t = TP.serverExtension();\n          return SP.concatenateUrl(TP.parameters.URI, e) + t;\n        }\n      }, {\n        key: \"serverExtension\",\n        value: function serverExtension() {\n          if (TP.parameters.server.indexOf(\"php\") !== -1) {\n            return \".php\";\n          }\n\n          if (TP.parameters.server.indexOf(\"aspx\") !== -1) {\n            return \".aspx\";\n          }\n\n          return \"\";\n        }\n      }]);\n\n      return TP;\n    }();\n\n    TP._servicePaths = {};\n    TP._integrationPath = \"\";\n    TP._listeners = new CP();\n    TP._parameters = {};\n\n    var MP = /*#__PURE__*/function () {\n      function MP() {\n        _classCallCheck(this, MP);\n      }\n\n      _createClass(MP, null, [{\n        key: \"cache\",\n        get: function get() {\n          return MP._cache;\n        },\n        set: function set(e) {\n          MP._cache = e;\n        }\n      }, {\n        key: \"getLatexFromMathML\",\n        value: function getLatexFromMathML(e) {\n          var t = yP.removeSemantics(e);\n          var n = MP.cache;\n          var i = {\n            service: \"mathml2latex\",\n            mml: t\n          };\n          var o = JSON.parse(TP.getService(\"service\", i));\n          var s = \"\";\n\n          if (o.status === \"ok\") {\n            s = o.result.text;\n\n            var _t305 = SP.htmlEntities(s);\n\n            var _i239 = yP.addAnnotation(e, _t305, \"LaTeX\");\n\n            n.populate(s, _i239);\n          }\n\n          return s;\n        }\n      }, {\n        key: \"getMathMLFromLatex\",\n        value: function getMathMLFromLatex(e, t) {\n          var n = MP.cache;\n\n          if (MP.cache.get(e)) {\n            return MP.cache.get(e);\n          }\n\n          var i = {\n            service: \"latex2mathml\",\n            latex: e\n          };\n\n          if (t) {\n            i.saveLatex = \"\";\n          }\n\n          var o = JSON.parse(TP.getService(\"service\", i));\n          var s;\n\n          if (o.status === \"ok\") {\n            var _t306 = o.result.text;\n            _t306 = _t306.split(\"\\r\").join(\"\").split(\"\\n\").join(\" \");\n\n            if (_t306.indexOf(\"semantics\") === -1 && _t306.indexOf(\"annotation\") === -1) {\n              _t306 = yP.addAnnotation(_t306, e, \"LaTeX\");\n              s = _t306;\n            } else {\n              s = _t306;\n            }\n\n            if (!n.get(e)) {\n              n.populate(e, _t306);\n            }\n          } else {\n            s = \"$$\".concat(e, \"$$\");\n          }\n\n          return s;\n        }\n      }, {\n        key: \"parseMathmlToLatex\",\n        value: function parseMathmlToLatex(e, t) {\n          var n = \"\";\n          var i = \"\".concat(t.tagOpener, \"math\");\n          var o = \"\".concat(t.tagOpener, \"/math\").concat(t.tagCloser);\n          var s = \"\".concat(t.tagOpener, \"annotation encoding=\").concat(t.doubleQuote, \"LaTeX\").concat(t.doubleQuote).concat(t.tagCloser);\n          var r = \"\".concat(t.tagOpener, \"/annotation\").concat(t.tagCloser);\n          var a = e.indexOf(i);\n          var c = 0;\n          var l;\n          var d;\n          var u;\n\n          while (a !== -1) {\n            n += e.substring(c, a);\n            c = e.indexOf(o, a);\n\n            if (c === -1) {\n              c = e.length - 1;\n            } else {\n              c += o.length;\n            }\n\n            l = e.substring(a, c);\n            d = l.indexOf(s);\n\n            if (d !== -1) {\n              d += s.length;\n              u = l.indexOf(r);\n\n              var _e357 = l.substring(d, u);\n\n              if (t === kP.safeXmlCharacters) {\n                _e357 = yP.safeXmlDecode(_e357);\n              }\n\n              n += \"$$\".concat(_e357, \"$$\");\n              MP.cache.populate(_e357, l);\n            } else {\n              n += l;\n            }\n\n            a = e.indexOf(i, c);\n          }\n\n          n += e.substring(c, e.length);\n          return n;\n        }\n      }, {\n        key: \"getLatexFromTextNode\",\n        value: function getLatexFromTextNode(e, t, n) {\n          var i = {\n            open: \"$$\",\n            close: \"$$\"\n          };\n\n          if (typeof n === \"undefined\" || n == null) {\n            n = i;\n          }\n\n          var o = e;\n\n          while (o.previousSibling && o.previousSibling.nodeType === 3) {\n            o = o.previousSibling;\n          }\n\n          function s(e, t, i) {\n            var o = e.nodeValue.indexOf(i, t);\n\n            while (o === -1) {\n              e = e.nextSibling;\n\n              if (!e) {\n                return null;\n              }\n\n              o = e.nodeValue ? e.nodeValue.indexOf(n.close) : -1;\n            }\n\n            return {\n              node: e,\n              position: o\n            };\n          }\n\n          function r(e, t, n, i) {\n            if (e === n) {\n              return t <= i;\n            }\n\n            while (e && e !== n) {\n              e = e.nextSibling;\n            }\n\n            return e === n;\n          }\n\n          var a;\n          var c = {\n            node: o,\n            position: 0\n          };\n          var l = n.open.length;\n\n          do {\n            a = s(c.node, c.position, n.open);\n\n            if (a == null || r(e, t, a.node, a.position)) {\n              return null;\n            }\n\n            c = s(a.node, a.position + l, n.close);\n\n            if (c == null) {\n              return null;\n            }\n\n            c.position += l;\n          } while (r(c.node, c.position, e, t));\n\n          var d;\n\n          if (a.node === c.node) {\n            d = a.node.nodeValue.substring(a.position + l, c.position - l);\n          } else {\n            var _e358 = a.position + l;\n\n            d = a.node.nodeValue.substring(_e358, a.node.nodeValue.length);\n            var _t307 = a.node;\n\n            do {\n              _t307 = _t307.nextSibling;\n\n              if (_t307 === c.node) {\n                d += c.node.nodeValue.substring(0, c.position - l);\n              } else {\n                d += _t307.nodeValue ? _t307.nodeValue : \"\";\n              }\n            } while (_t307 !== c.node);\n          }\n\n          return {\n            latex: d,\n            startNode: a.node,\n            startPosition: a.position,\n            endNode: c.node,\n            endPosition: c.position\n          };\n        }\n      }]);\n\n      return MP;\n    }();\n\n    MP._cache = new AP();\n    var PP = n(13);\n\n    var EP = /*#__PURE__*/function () {\n      function EP() {\n        _classCallCheck(this, EP);\n\n        throw new Error(\"Static class StringManager can not be instantiated.\");\n      }\n\n      _createClass(EP, null, [{\n        key: \"get\",\n        value: function get(e) {\n          var t = this.language;\n\n          if (!(t in this.strings)) {\n            console.warn(\"Unknown language \".concat(t, \" set in StringManager.\"));\n            t = \"en\";\n          }\n\n          if (!(e in this.strings[t])) {\n            console.warn(\"Unknown key \".concat(e, \" in StringManager.\"));\n            return e;\n          }\n\n          return this.strings[t][e];\n        }\n      }]);\n\n      return EP;\n    }();\n\n    EP.strings = PP;\n    EP.language = \"en\";\n\n    var SP = /*#__PURE__*/function () {\n      function SP() {\n        _classCallCheck(this, SP);\n      }\n\n      _createClass(SP, null, [{\n        key: \"fireEvent\",\n        value: function fireEvent(e, t) {\n          if (document.createEvent) {\n            var _n282 = document.createEvent(\"HTMLEvents\");\n\n            _n282.initEvent(t, true, true);\n\n            return !e.dispatchEvent(_n282);\n          }\n\n          var n = document.createEventObject();\n          return e.fireEvent(\"on\".concat(t), n);\n        }\n      }, {\n        key: \"addEvent\",\n        value: function addEvent(e, t, n) {\n          if (e.addEventListener) {\n            e.addEventListener(t, n, true);\n          } else if (e.attachEvent) {\n            e.attachEvent(\"on\".concat(t), n);\n          }\n        }\n      }, {\n        key: \"removeEvent\",\n        value: function removeEvent(e, t, n) {\n          if (e.removeEventListener) {\n            e.removeEventListener(t, n, true);\n          } else if (e.detachEvent) {\n            e.detachEvent(\"on\".concat(t), n);\n          }\n        }\n      }, {\n        key: \"addElementEvents\",\n        value: function addElementEvents(e, t, n, i) {\n          if (t) {\n            SP.addEvent(e, \"dblclick\", function (e) {\n              var n = e || window.event;\n              var i = n.srcElement ? n.srcElement : n.target;\n              t(i, n);\n            });\n          }\n\n          if (n) {\n            SP.addEvent(e, \"mousedown\", function (e) {\n              var t = e || window.event;\n              var i = t.srcElement ? t.srcElement : t.target;\n              n(i, t);\n            });\n          }\n\n          if (i) {\n            SP.addEvent(e, \"mouseup\", function (e) {\n              var t = e || window.event;\n              var n = t.srcElement ? t.srcElement : t.target;\n              i(n, t);\n            });\n          }\n        }\n      }, {\n        key: \"addClass\",\n        value: function addClass(e, t) {\n          if (!SP.containsClass(e, t)) {\n            e.className += \" \".concat(t);\n          }\n        }\n      }, {\n        key: \"containsClass\",\n        value: function containsClass(e, t) {\n          if (e == null || !(\"className\" in e)) {\n            return false;\n          }\n\n          var n = e.className.split(\" \");\n\n          for (var _e359 = n.length - 1; _e359 >= 0; _e359 -= 1) {\n            if (n[_e359] === t) {\n              return true;\n            }\n          }\n\n          return false;\n        }\n      }, {\n        key: \"removeClass\",\n        value: function removeClass(e, t) {\n          var n = \"\";\n          var i = e.className.split(\" \");\n\n          for (var _e360 = 0; _e360 < i.length; _e360 += 1) {\n            if (i[_e360] !== t) {\n              n += \"\".concat(i[_e360], \" \");\n            }\n          }\n\n          e.className = n.trim();\n        }\n      }, {\n        key: \"convertOldXmlinitialtextAttribute\",\n        value: function convertOldXmlinitialtextAttribute(e) {\n          var t = \"value=\";\n          var n = e.indexOf(\"xmlinitialtext\");\n          var i = e.indexOf(t, n);\n          var o = e.charAt(i + t.length);\n          var s = i + t.length + 1;\n          var r = e.indexOf(o, s);\n          var a = e.substring(s, r);\n          var c = a.split(\"«\").join(\"§lt;\");\n          c = c.split(\"»\").join(\"§gt;\");\n          c = c.split(\"&\").join(\"§\");\n          c = c.split(\"¨\").join(\"§quot;\");\n          e = e.split(a).join(c);\n          return e;\n        }\n      }, {\n        key: \"createElement\",\n        value: function createElement(e, t, n) {\n          if (t === undefined) {\n            t = {};\n          }\n\n          if (n === undefined) {\n            n = document;\n          }\n\n          var i;\n\n          try {\n            var _o112 = \"<\".concat(e);\n\n            Object.keys(t).forEach(function (e) {\n              _o112 += \" \".concat(e, \"=\\\"\").concat(SP.htmlEntities(t[e]), \"\\\"\");\n            });\n            _o112 += \">\";\n            i = n.createElement(_o112);\n          } catch (o) {\n            i = n.createElement(e);\n            Object.keys(t).forEach(function (e) {\n              i.setAttribute(e, t[e]);\n            });\n          }\n\n          return i;\n        }\n      }, {\n        key: \"createObject\",\n        value: function createObject(e, t) {\n          if (t === undefined) {\n            t = document;\n          }\n\n          e = e.split(\"<applet \").join('<span wirisObject=\"WirisApplet\" ').split(\"<APPLET \").join('<span wirisObject=\"WirisApplet\" ');\n          e = e.split(\"</applet>\").join(\"</span>\").split(\"</APPLET>\").join(\"</span>\");\n          e = e.split(\"<param \").join('<br wirisObject=\"WirisParam\" ').split(\"<PARAM \").join('<br wirisObject=\"WirisParam\" ');\n          e = e.split(\"</param>\").join(\"</br>\").split(\"</PARAM>\").join(\"</br>\");\n          var n = SP.createElement(\"div\", {}, t);\n          n.innerHTML = e;\n\n          function i(e) {\n            if (e.getAttribute && e.getAttribute(\"wirisObject\") === \"WirisParam\") {\n              var _n283 = {};\n\n              for (var _t308 = 0; _t308 < e.attributes.length; _t308 += 1) {\n                if (e.attributes[_t308].nodeValue !== null) {\n                  _n283[e.attributes[_t308].nodeName] = e.attributes[_t308].nodeValue;\n                }\n              }\n\n              var _i240 = SP.createElement(\"param\", _n283, t);\n\n              if (_i240.NAME) {\n                _i240.name = _i240.NAME;\n                _i240.value = _i240.VALUE;\n              }\n\n              _i240.removeAttribute(\"wirisObject\");\n\n              e.parentNode.replaceChild(_i240, e);\n            } else if (e.getAttribute && e.getAttribute(\"wirisObject\") === \"WirisApplet\") {\n              var _n284 = {};\n\n              for (var _t309 = 0; _t309 < e.attributes.length; _t309 += 1) {\n                if (e.attributes[_t309].nodeValue !== null) {\n                  _n284[e.attributes[_t309].nodeName] = e.attributes[_t309].nodeValue;\n                }\n              }\n\n              var _o113 = SP.createElement(\"applet\", _n284, t);\n\n              _o113.removeAttribute(\"wirisObject\");\n\n              for (var _t310 = 0; _t310 < e.childNodes.length; _t310 += 1) {\n                i(e.childNodes[_t310]);\n\n                if (e.childNodes[_t310].nodeName.toLowerCase() === \"param\") {\n                  _o113.appendChild(e.childNodes[_t310]);\n\n                  _t310 -= 1;\n                }\n              }\n\n              e.parentNode.replaceChild(_o113, e);\n            } else {\n              for (var _t311 = 0; _t311 < e.childNodes.length; _t311 += 1) {\n                i(e.childNodes[_t311]);\n              }\n            }\n          }\n\n          i(n);\n          return n.firstChild;\n        }\n      }, {\n        key: \"createObjectCode\",\n        value: function createObjectCode(e) {\n          if (typeof e === \"undefined\" || e === null) {\n            return null;\n          }\n\n          if (e.nodeType === 1) {\n            var _t312 = \"<\".concat(e.tagName);\n\n            for (var _n285 = 0; _n285 < e.attributes.length; _n285 += 1) {\n              if (e.attributes[_n285].specified) {\n                _t312 += \" \".concat(e.attributes[_n285].name, \"=\\\"\").concat(SP.htmlEntities(e.attributes[_n285].value), \"\\\"\");\n              }\n            }\n\n            if (e.childNodes.length > 0) {\n              _t312 += \">\";\n\n              for (var _n286 = 0; _n286 < e.childNodes.length; _n286 += 1) {\n                _t312 += SP.createObject(e.childNodes[_n286]);\n              }\n\n              _t312 += \"</\".concat(e.tagName, \">\");\n            } else if (e.nodeName === \"DIV\" || e.nodeName === \"SCRIPT\") {\n              _t312 += \"></\".concat(e.tagName, \">\");\n            } else {\n              _t312 += \"/>\";\n            }\n\n            return _t312;\n          }\n\n          if (e.nodeType === 3) {\n            return SP.htmlEntities(e.nodeValue);\n          }\n\n          return \"\";\n        }\n      }, {\n        key: \"concatenateUrl\",\n        value: function concatenateUrl(e, t) {\n          var n = \"\";\n\n          if (e.indexOf(\"/\") !== e.length && t.indexOf(\"/\") !== 0) {\n            n = \"/\";\n          }\n\n          return (e + n + t).replace(/([^:]\\/)\\/+/g, \"$1\");\n        }\n      }, {\n        key: \"htmlEntities\",\n        value: function htmlEntities(e) {\n          return e.split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split(\">\").join(\"&gt;\").split('\"').join(\"&quot;\");\n        }\n      }, {\n        key: \"htmlEntitiesDecode\",\n        value: function htmlEntitiesDecode(e) {\n          var t = document.createElement(\"textarea\");\n          t.innerHTML = e;\n          return t.value;\n        }\n      }, {\n        key: \"createHttpRequest\",\n        value: function createHttpRequest() {\n          var e = window.location.toString().substr(0, window.location.toString().lastIndexOf(\"/\") + 1);\n\n          if (e.substr(0, 7) === \"file://\") {\n            throw EP.get(\"exception_cross_site\");\n          }\n\n          if (typeof XMLHttpRequest !== \"undefined\") {\n            return new XMLHttpRequest();\n          }\n\n          try {\n            return new ActiveXObject(\"Msxml2.XMLHTTP\");\n          } catch (e) {\n            try {\n              return new ActiveXObject(\"Microsoft.XMLHTTP\");\n            } catch (e) {\n              return null;\n            }\n          }\n        }\n      }, {\n        key: \"httpBuildQuery\",\n        value: function httpBuildQuery(e) {\n          var t = \"\";\n          Object.keys(e).forEach(function (n) {\n            if (e[n] != null) {\n              t += \"\".concat(SP.urlEncode(n), \"=\").concat(SP.urlEncode(e[n]), \"&\");\n            }\n          });\n\n          if (t.substring(t.length - 1) === \"&\") {\n            t = t.substring(0, t.length - 1);\n          }\n\n          return t;\n        }\n      }, {\n        key: \"propertiesToString\",\n        value: function propertiesToString(e) {\n          var t = [];\n          Object.keys(e).forEach(function (n) {\n            if (Object.prototype.hasOwnProperty.call(e, n)) {\n              t.push(n);\n            }\n          });\n          var n = t.length;\n\n          for (var _e361 = 0; _e361 < n; _e361 += 1) {\n            for (var _i241 = _e361 + 1; _i241 < n; _i241 += 1) {\n              var _n287 = t[_e361];\n              var _o114 = t[_i241];\n\n              if (SP.compareStrings(_n287, _o114) > 0) {\n                t[_e361] = _o114;\n                t[_i241] = _n287;\n              }\n            }\n          }\n\n          var i = \"\";\n\n          for (var _o115 = 0; _o115 < n; _o115 += 1) {\n            var _n288 = t[_o115];\n            i += _n288;\n            i += \"=\";\n            var _s80 = e[_n288];\n            _s80 = _s80.replace(\"\\\\\", \"\\\\\\\\\");\n            _s80 = _s80.replace(\"\\n\", \"\\\\n\");\n            _s80 = _s80.replace(\"\\r\", \"\\\\r\");\n            _s80 = _s80.replace(\"\\t\", \"\\\\t\");\n            i += _s80;\n            i += \"\\n\";\n          }\n\n          return i;\n        }\n      }, {\n        key: \"compareStrings\",\n        value: function compareStrings(e, t) {\n          var n;\n          var i = e.length;\n          var o = t.length;\n          var s = i > o ? o : i;\n\n          for (n = 0; n < s; n += 1) {\n            var _i242 = SP.fixedCharCodeAt(e, n) - SP.fixedCharCodeAt(t, n);\n\n            if (_i242 !== 0) {\n              return _i242;\n            }\n          }\n\n          return e.length - t.length;\n        }\n      }, {\n        key: \"fixedCharCodeAt\",\n        value: function fixedCharCodeAt(e, t) {\n          t = t || 0;\n          var n = e.charCodeAt(t);\n          var i;\n          var o;\n\n          if (n >= 55296 && n <= 56319) {\n            i = n;\n            o = e.charCodeAt(t + 1);\n\n            if (Number.isNaN(o)) {\n              throw EP.get(\"exception_high_surrogate\");\n            }\n\n            return (i - 55296) * 1024 + (o - 56320) + 65536;\n          }\n\n          if (n >= 56320 && n <= 57343) {\n            return false;\n          }\n\n          return n;\n        }\n      }, {\n        key: \"urlToAssArray\",\n        value: function urlToAssArray(e) {\n          var t;\n          t = e.indexOf(\"?\");\n\n          if (t > 0) {\n            var _n289 = e.substring(t + 1);\n\n            var _i243 = _n289.split(\"&\");\n\n            var _o116 = {};\n\n            for (t = 0; t < _i243.length; t += 1) {\n              var _e362 = _i243[t];\n\n              var _n290 = _e362.split(\"=\");\n\n              if (_n290.length > 1) {\n                _o116[_n290[0]] = decodeURIComponent(_n290[1].replace(/\\+/g, \" \"));\n              }\n            }\n\n            return _o116;\n          }\n\n          return {};\n        }\n      }, {\n        key: \"urlEncode\",\n        value: function urlEncode(e) {\n          var t = \"\";\n          t = encodeURIComponent(e);\n          return t;\n        }\n      }, {\n        key: \"getWIRISImageOutput\",\n        value: function getWIRISImageOutput(e, t, n) {\n          var i = SP.createObject(e);\n\n          if (i) {\n            if (i.className === xP.get(\"imageClassName\") || i.getAttribute(xP.get(\"imageMathmlAttribute\"))) {\n              if (!t) {\n                return e;\n              }\n\n              var _o117 = i.getAttribute(xP.get(\"imageMathmlAttribute\"));\n\n              var _s81 = yP.safeXmlDecode(_o117);\n\n              if (!xP.get(\"saveHandTraces\")) {\n                _s81 = yP.removeAnnotation(_s81, \"application/json\");\n              }\n\n              if (_s81 == null) {\n                _s81 = i.getAttribute(\"alt\");\n              }\n\n              if (n) {\n                var _e363 = yP.safeXmlEncode(_s81);\n\n                return _e363;\n              }\n\n              return _s81;\n            }\n          }\n\n          return e;\n        }\n      }, {\n        key: \"getNodeLength\",\n        value: function getNodeLength(e) {\n          var t = {\n            IMG: 1,\n            BR: 1\n          };\n\n          if (e.nodeType === 3) {\n            return e.nodeValue.length;\n          }\n\n          if (e.nodeType === 1) {\n            var _n291 = t[e.nodeName.toUpperCase()];\n\n            if (_n291 === undefined) {\n              _n291 = 0;\n            }\n\n            for (var _t313 = 0; _t313 < e.childNodes.length; _t313 += 1) {\n              _n291 += SP.getNodeLength(e.childNodes[_t313]);\n            }\n\n            return _n291;\n          }\n\n          return 0;\n        }\n      }, {\n        key: \"getSelectedItem\",\n        value: function getSelectedItem(e, t, n) {\n          var i;\n\n          if (t) {\n            i = e.contentWindow;\n            i.focus();\n          } else {\n            i = window;\n            e.focus();\n          }\n\n          if (document.selection && !n) {\n            var _n292 = i.document.selection.createRange();\n\n            if (_n292.parentElement) {\n              if (_n292.htmlText.length > 0) {\n                if (_n292.text.length === 0) {\n                  return SP.getSelectedItem(e, t, true);\n                }\n\n                return null;\n              }\n\n              i.document.execCommand(\"InsertImage\", false, \"#\");\n\n              var _o118 = _n292.parentElement();\n\n              if (_o118.nodeName.toUpperCase() !== \"IMG\") {\n                _n292.pasteHTML('<span id=\"wrs_openEditorWindow_temporalObject\"></span>');\n\n                _o118 = i.document.getElementById(\"wrs_openEditorWindow_temporalObject\");\n              }\n\n              var _s82;\n\n              var _r55;\n\n              if (_o118.nextSibling && _o118.nextSibling.nodeType === 3) {\n                _s82 = _o118.nextSibling;\n                _r55 = 0;\n              } else if (_o118.previousSibling && _o118.previousSibling.nodeType === 3) {\n                _s82 = _o118.previousSibling;\n                _r55 = _s82.nodeValue.length;\n              } else {\n                _s82 = i.document.createTextNode(\"\");\n\n                _o118.parentNode.insertBefore(_s82, _o118);\n\n                _r55 = 0;\n              }\n\n              _o118.parentNode.removeChild(_o118);\n\n              return {\n                node: _s82,\n                caretPosition: _r55\n              };\n            }\n\n            if (_n292.length > 1) {\n              return null;\n            }\n\n            return {\n              node: _n292.item(0)\n            };\n          }\n\n          if (i.getSelection) {\n            var _e364;\n\n            var _t314 = i.getSelection();\n\n            try {\n              _e364 = _t314.getRangeAt(0);\n            } catch (t) {\n              _e364 = i.document.createRange();\n            }\n\n            var _n293 = _e364.startContainer;\n\n            if (_n293.nodeType === 3) {\n              return {\n                node: _n293,\n                caretPosition: _e364.startOffset\n              };\n            }\n\n            if (_n293 !== _e364.endContainer) {\n              return null;\n            }\n\n            if (_n293.nodeType === 1) {\n              var _t315 = _e364.startOffset;\n\n              if (_n293.childNodes[_t315]) {\n                return {\n                  node: _n293.childNodes[_t315]\n                };\n              }\n            }\n          }\n\n          return null;\n        }\n      }, {\n        key: \"getSelectedItemOnTextarea\",\n        value: function getSelectedItemOnTextarea(e) {\n          var t = document.createTextNode(e.value);\n          var n = MP.getLatexFromTextNode(t, e.selectionStart);\n\n          if (n === null) {\n            return null;\n          }\n\n          return {\n            node: t,\n            caretPosition: e.selectionStart,\n            startPosition: n.startPosition,\n            endPosition: n.endPosition\n          };\n        }\n      }, {\n        key: \"getElementsByNameFromString\",\n        value: function getElementsByNameFromString(e, t, n) {\n          var i = [];\n          e = e.toLowerCase();\n          t = t.toLowerCase();\n          var o = e.indexOf(\"<\".concat(t, \" \"));\n\n          while (o !== -1) {\n            var _s83 = void 0;\n\n            if (n) {\n              _s83 = \">\";\n            } else {\n              _s83 = \"</\".concat(t, \">\");\n            }\n\n            var _r56 = e.indexOf(_s83, o);\n\n            if (_r56 !== -1) {\n              _r56 += _s83.length;\n              i.push({\n                start: o,\n                end: _r56\n              });\n            } else {\n              _r56 = o + 1;\n            }\n\n            o = e.indexOf(\"<\".concat(t, \" \"), _r56);\n          }\n\n          return i;\n        }\n      }, {\n        key: \"decode64\",\n        value: function decode64(e) {\n          var t = \"+\".charCodeAt(0);\n          var n = \"/\".charCodeAt(0);\n          var i = \"0\".charCodeAt(0);\n          var o = \"a\".charCodeAt(0);\n          var s = \"A\".charCodeAt(0);\n          var r = \"-\".charCodeAt(0);\n          var a = \"_\".charCodeAt(0);\n          var c = e.charCodeAt(0);\n\n          if (c === t || c === r) {\n            return 62;\n          }\n\n          if (c === n || c === a) {\n            return 63;\n          }\n\n          if (c < i) {\n            return -1;\n          }\n\n          if (c < i + 10) {\n            return c - i + 26 + 26;\n          }\n\n          if (c < s + 26) {\n            return c - s;\n          }\n\n          if (c < o + 26) {\n            return c - o + 26;\n          }\n\n          return null;\n        }\n      }, {\n        key: \"b64ToByteArray\",\n        value: function b64ToByteArray(e, t) {\n          var n;\n\n          if (e.length % 4 > 0) {\n            throw new Error(\"Invalid string. Length must be a multiple of 4\");\n          }\n\n          var i = [];\n          var o;\n          var s;\n\n          if (!t) {\n            if (e.charAt(e.length - 2) === \"=\") {\n              s = 2;\n            } else if (e.charAt(e.length - 1) === \"=\") {\n              s = 1;\n            } else {\n              s = 0;\n            }\n\n            o = s > 0 ? e.length - 4 : e.length;\n          } else {\n            o = t;\n          }\n\n          var r;\n\n          for (r = 0; r < o; r += 4) {\n            n = SP.decode64(e.charAt(r)) << 18 | SP.decode64(e.charAt(r + 1)) << 12 | SP.decode64(e.charAt(r + 2)) << 6 | SP.decode64(e.charAt(r + 3));\n            i.push(n >> 16 & 255);\n            i.push(n >> 8 & 255);\n            i.push(n & 255);\n          }\n\n          if (s) {\n            if (s === 2) {\n              n = SP.decode64(e.charAt(r)) << 2 | SP.decode64(e.charAt(r + 1)) >> 4;\n              i.push(n & 255);\n            } else if (s === 1) {\n              n = SP.decode64(e.charAt(r)) << 10 | SP.decode64(e.charAt(r + 1)) << 4 | SP.decode64(e.charAt(r + 2)) >> 2;\n              i.push(n >> 8 & 255);\n              i.push(n & 255);\n            }\n          }\n\n          return i;\n        }\n      }, {\n        key: \"readInt32\",\n        value: function readInt32(e) {\n          if (e.length < 4) {\n            return false;\n          }\n\n          var t = e.splice(0, 4);\n          return t[0] << 24 | t[1] << 16 | t[2] << 8 | t[3] << 0;\n        }\n      }, {\n        key: \"readByte\",\n        value: function readByte(e) {\n          return e.shift() << 0;\n        }\n      }, {\n        key: \"readBytes\",\n        value: function readBytes(e, t, n) {\n          return e.splice(t, n);\n        }\n      }, {\n        key: \"updateTextArea\",\n        value: function updateTextArea(e, t) {\n          if (e && t) {\n            e.focus();\n\n            if (e.selectionStart != null) {\n              var _n294 = e.selectionEnd;\n\n              var _i244 = e.value.substring(0, e.selectionStart);\n\n              var _o119 = e.value.substring(_n294, e.value.length);\n\n              e.value = _i244 + t + _o119;\n              e.selectionEnd = _n294 + t.length;\n            } else {\n              var _e365 = document.selection.createRange();\n\n              _e365.text = t;\n            }\n          }\n        }\n      }, {\n        key: \"updateExistingTextOnTextarea\",\n        value: function updateExistingTextOnTextarea(e, t, n, i) {\n          e.focus();\n          var o = e.value.substring(0, n);\n          e.value = o + t + e.value.substring(i, e.value.length);\n          e.selectionEnd = n + t.length;\n        }\n      }, {\n        key: \"addArgument\",\n        value: function addArgument(e, t, n) {\n          var i;\n\n          if (e.indexOf(\"?\") > 0) {\n            i = \"&\";\n          } else {\n            i = \"?\";\n          }\n\n          return \"\".concat(e + i + t, \"=\").concat(n);\n        }\n      }]);\n\n      return SP;\n    }();\n\n    var IP = /*#__PURE__*/function () {\n      function IP() {\n        _classCallCheck(this, IP);\n      }\n\n      _createClass(IP, null, [{\n        key: \"removeImgDataAttributes\",\n        value: function removeImgDataAttributes(e) {\n          var t = [];\n          var n = e.attributes;\n          Object.keys(n).forEach(function (e) {\n            var i = n[e];\n\n            if (i.name.indexOf(\"data-\") === 0) {\n              t.push(i.name);\n            }\n          });\n          t.forEach(function (t) {\n            e.removeAttribute(t);\n          });\n        }\n      }, {\n        key: \"clone\",\n        value: function clone(e, t) {\n          var n = xP.get(\"imageCustomEditorName\");\n\n          if (!e.hasAttribute(n)) {\n            t.removeAttribute(n);\n          }\n\n          var i = xP.get(\"imageMathmlAttribute\");\n          var o = [i, n, \"alt\", \"height\", \"width\", \"style\", \"src\", \"role\"];\n          o.forEach(function (n) {\n            var i = e.getAttribute(n);\n\n            if (i) {\n              t.setAttribute(n, i);\n            }\n          });\n        }\n      }, {\n        key: \"setImgSize\",\n        value: function setImgSize(e, t, n) {\n          var i;\n          var o;\n          var s;\n          var r;\n\n          if (n) {\n            if (xP.get(\"imageFormat\") === \"svg\") {\n              if (xP.get(\"saveMode\") !== \"base64\") {\n                i = IP.getMetricsFromSvgString(t);\n              } else {\n                o = e.src.substr(e.src.indexOf(\"base64,\") + 7, e.src.length);\n                r = \"\";\n                s = SP.b64ToByteArray(o, o.length);\n\n                for (var _e366 = 0; _e366 < s.length; _e366 += 1) {\n                  r += String.fromCharCode(s[_e366]);\n                }\n\n                i = IP.getMetricsFromSvgString(r);\n              }\n            } else {\n              o = e.src.substr(e.src.indexOf(\"base64,\") + 7, e.src.length);\n              s = SP.b64ToByteArray(o, 88);\n              i = IP.getMetricsFromBytes(s);\n            }\n          } else {\n            i = SP.urlToAssArray(t);\n          }\n\n          var a = i.cw;\n\n          if (!a) {\n            return;\n          }\n\n          var c = i.ch;\n          var l = i.cb;\n          var _i245 = i,\n              d = _i245.dpi;\n\n          if (d) {\n            a = a * 96 / d;\n            c = c * 96 / d;\n            l = l * 96 / d;\n          }\n\n          e.width = a;\n          e.height = c;\n          e.style.verticalAlign = \"-\".concat(c - l, \"px\");\n        }\n      }, {\n        key: \"fixAfterResize\",\n        value: function fixAfterResize(e) {\n          e.removeAttribute(\"style\");\n          e.removeAttribute(\"width\");\n          e.removeAttribute(\"height\");\n          e.style.maxWidth = \"none\";\n\n          if (e.src.indexOf(\"data:image\") !== -1) {\n            if (xP.get(\"imageFormat\") === \"svg\") {\n              var _t316 = decodeURIComponent(e.src.substring(32, e.src.length));\n\n              IP.setImgSize(e, _t316, true);\n            } else {\n              var _t317 = e.src.substring(22, e.src.length);\n\n              IP.setImgSize(e, _t317, true);\n            }\n          } else {\n            IP.setImgSize(e, e.src);\n          }\n        }\n      }, {\n        key: \"getMetricsFromSvgString\",\n        value: function getMetricsFromSvgString(e) {\n          var t = e.indexOf('height=\"');\n          var n = e.indexOf('\"', t + 8, e.length);\n          var i = e.substring(t + 8, n);\n          t = e.indexOf('width=\"');\n          n = e.indexOf('\"', t + 7, e.length);\n          var o = e.substring(t + 7, n);\n          t = e.indexOf('wrs:baseline=\"');\n          n = e.indexOf('\"', t + 14, e.length);\n          var s = e.substring(t + 14, n);\n\n          if (typeof o !== \"undefined\") {\n            var _e367 = [];\n            _e367.cw = o;\n            _e367.ch = i;\n\n            if (typeof s !== \"undefined\") {\n              _e367.cb = s;\n            }\n\n            return _e367;\n          }\n\n          return [];\n        }\n      }, {\n        key: \"getMetricsFromBytes\",\n        value: function getMetricsFromBytes(e) {\n          SP.readBytes(e, 0, 8);\n          var t;\n          var n;\n          var i;\n          var o;\n          var s;\n\n          while (e.length >= 4) {\n            i = SP.readInt32(e);\n\n            if (i === 1229472850) {\n              t = SP.readInt32(e);\n              n = SP.readInt32(e);\n              SP.readInt32(e);\n              SP.readByte(e);\n            } else if (i === 1650545477) {\n              o = SP.readInt32(e);\n            } else if (i === 1883789683) {\n              s = SP.readInt32(e);\n              s = Math.round(s / 39.37);\n              SP.readInt32(e);\n              SP.readByte(e);\n            }\n\n            SP.readInt32(e);\n          }\n\n          if (typeof t !== \"undefined\") {\n            var _e368 = [];\n            _e368.cw = t;\n            _e368.ch = n;\n            _e368.dpi = s;\n\n            if (o) {\n              _e368.cb = o;\n            }\n\n            return _e368;\n          }\n\n          return [];\n        }\n      }]);\n\n      return IP;\n    }();\n\n    var OP = /*#__PURE__*/function () {\n      function OP() {\n        _classCallCheck(this, OP);\n      }\n\n      _createClass(OP, null, [{\n        key: \"cache\",\n        get: function get() {\n          return OP._cache;\n        },\n        set: function set(e) {\n          OP._cache = e;\n        }\n      }, {\n        key: \"mathMLToAccessible\",\n        value: function mathMLToAccessible(e, t, n) {\n          if (typeof t === \"undefined\") {\n            t = \"en\";\n          }\n\n          if (yP.containClass(e, \"wrs_chemistry\")) {\n            n.mode = \"chemistry\";\n          }\n\n          var i = \"\";\n\n          if (OP.cache.get(e)) {\n            i = OP.cache.get(e);\n          } else {\n            n.service = \"mathml2accessible\";\n            n.lang = t;\n\n            var _o120 = JSON.parse(TP.getService(\"service\", n));\n\n            if (_o120.status !== \"error\") {\n              i = _o120.result.text;\n              OP.cache.populate(e, i);\n            } else {\n              i = EP.get(\"error_convert_accessibility\");\n            }\n          }\n\n          return i;\n        }\n      }]);\n\n      return OP;\n    }();\n\n    OP._cache = new AP();\n    var NP = n(93);\n\n    var RP = /*#__PURE__*/function () {\n      function RP() {\n        _classCallCheck(this, RP);\n      }\n\n      _createClass(RP, null, [{\n        key: \"mathmlToImgObject\",\n        value: function mathmlToImgObject(e, t, n, i) {\n          var o = e.createElement(\"img\");\n          o.align = \"middle\";\n          o.style.maxWidth = \"none\";\n          var s = n || {};\n          s.mml = t;\n          s.lang = i;\n          s.metrics = \"true\";\n          s.centerbaseline = \"false\";\n\n          if (xP.get(\"saveMode\") === \"base64\" && xP.get(\"base64savemode\") === \"default\") {\n            s.base64 = true;\n          }\n\n          o.className = xP.get(\"imageClassName\");\n\n          if (t.indexOf('class=\"') !== -1) {\n            var _e369 = t.substring(t.indexOf('class=\"') + 'class=\"'.length, t.length);\n\n            _e369 = _e369.substring(0, _e369.indexOf('\"'));\n            _e369 = _e369.substring(4, _e369.length);\n            o.setAttribute(xP.get(\"imageCustomEditorName\"), _e369);\n          }\n\n          if (xP.get(\"wirisPluginPerformance\") && (xP.get(\"saveMode\") === \"xml\" || xP.get(\"saveMode\") === \"safeXml\")) {\n            var _e370 = JSON.parse(RP.createShowImageSrc(s, i));\n\n            if (_e370.status === \"warning\") {\n              try {\n                _e370 = JSON.parse(TP.getService(\"showimage\", s));\n              } catch (e) {\n                return null;\n              }\n            }\n\n            var _e371 = _e370;\n            _e370 = _e371.result;\n\n            if (_e370.format === \"png\") {\n              o.src = \"data:image/png;base64,\".concat(_e370.content);\n            } else {\n              o.src = \"data:image/svg+xml;charset=utf8,\".concat(SP.urlEncode(_e370.content));\n            }\n\n            o.setAttribute(xP.get(\"imageMathmlAttribute\"), yP.safeXmlEncode(t));\n            IP.setImgSize(o, _e370.content, true);\n\n            if (xP.get(\"enableAccessibility\")) {\n              if (typeof _e370.alt === \"undefined\") {\n                o.alt = OP.mathMLToAccessible(t, i, s);\n              } else {\n                o.alt = _e370.alt;\n              }\n            }\n          } else {\n            var _e372 = RP.createImageSrc(t, s);\n\n            o.setAttribute(xP.get(\"imageMathmlAttribute\"), yP.safeXmlEncode(t));\n            o.src = _e372;\n            IP.setImgSize(o, _e372, xP.get(\"saveMode\") === \"base64\" && xP.get(\"base64savemode\") === \"default\");\n\n            if (xP.get(\"enableAccessibility\")) {\n              o.alt = OP.mathMLToAccessible(t, i, s);\n            }\n          }\n\n          if (typeof RP.observer !== \"undefined\") {\n            RP.observer.observe(o);\n          }\n\n          o.setAttribute(\"role\", \"math\");\n          return o;\n        }\n      }, {\n        key: \"createImageSrc\",\n        value: function createImageSrc(e, t) {\n          if (xP.get(\"saveMode\") === \"base64\" && xP.get(\"base64savemode\") === \"default\") {\n            t.base64 = true;\n          }\n\n          var n = TP.getService(\"createimage\", t);\n\n          if (n.indexOf(\"@BASE@\") !== -1) {\n            var _e373 = TP.getServicePath(\"createimage\").split(\"/\");\n\n            _e373.pop();\n\n            n = n.split(\"@BASE@\").join(_e373.join(\"/\"));\n          }\n\n          return n;\n        }\n      }, {\n        key: \"initParse\",\n        value: function initParse(e, t) {\n          e = RP.initParseSaveMode(e, t);\n          return RP.initParseEditMode(e);\n        }\n      }, {\n        key: \"initParseSaveMode\",\n        value: function initParseSaveMode(e, t) {\n          if (xP.get(\"saveMode\")) {\n            e = MP.parseMathmlToLatex(e, kP.safeXmlCharacters);\n            e = MP.parseMathmlToLatex(e, kP.xmlCharacters);\n            e = RP.parseMathmlToImg(e, kP.safeXmlCharacters, t);\n            e = RP.parseMathmlToImg(e, kP.xmlCharacters, t);\n\n            if (xP.get(\"saveMode\") === \"base64\" && xP.get(\"base64savemode\") === \"image\") {\n              e = RP.codeImgTransform(e, \"base642showimage\");\n            }\n          }\n\n          return e;\n        }\n      }, {\n        key: \"initParseEditMode\",\n        value: function initParseEditMode(e) {\n          if (xP.get(\"parseModes\").indexOf(\"latex\") !== -1) {\n            var _t318 = SP.getElementsByNameFromString(e, \"img\", true);\n\n            var _n295 = 'encoding=\"LaTeX\">';\n            var _i246 = 0;\n\n            for (var _o121 = 0; _o121 < _t318.length; _o121 += 1) {\n              var _s84 = e.substring(_t318[_o121].start + _i246, _t318[_o121].end + _i246);\n\n              if (_s84.indexOf(\" class=\\\"\".concat(xP.get(\"imageClassName\"), \"\\\"\")) !== -1) {\n                var _r57 = \" \".concat(xP.get(\"imageMathmlAttribute\"), \"=\\\"\");\n\n                var _a35 = _s84.indexOf(_r57);\n\n                if (_a35 === -1) {\n                  _r57 = ' alt=\"';\n                  _a35 = _s84.indexOf(_r57);\n                }\n\n                if (_a35 !== -1) {\n                  _a35 += _r57.length;\n\n                  var _c20 = _s84.indexOf('\"', _a35);\n\n                  var _l12 = yP.safeXmlDecode(_s84.substring(_a35, _c20));\n\n                  var _d7 = _l12.indexOf(_n295);\n\n                  if (_d7 !== -1) {\n                    _d7 += _n295.length;\n\n                    var _s85 = _l12.indexOf(\"</annotation>\", _d7);\n\n                    var _r58 = _l12.substring(_d7, _s85);\n\n                    var _a36 = \"$$\".concat(SP.htmlEntitiesDecode(_r58), \"$$\");\n\n                    var _c21 = e.substring(0, _t318[_o121].start + _i246);\n\n                    var _u6 = e.substring(_t318[_o121].end + _i246);\n\n                    e = _c21 + _a36 + _u6;\n                    _i246 += _a36.length - (_t318[_o121].end - _t318[_o121].start);\n                  }\n                }\n              }\n            }\n          }\n\n          return e;\n        }\n      }, {\n        key: \"endParse\",\n        value: function endParse(e) {\n          var t = RP.endParseEditMode(e);\n          var n = RP.endParseSaveMode(t);\n          return n;\n        }\n      }, {\n        key: \"endParseEditMode\",\n        value: function endParseEditMode(e) {\n          if (xP.get(\"parseModes\").indexOf(\"latex\") !== -1) {\n            var _t319 = \"\";\n            var _n296 = 0;\n\n            var _i247 = e.indexOf(\"$$\");\n\n            while (_i247 !== -1) {\n              _t319 += e.substring(_n296, _i247);\n              _n296 = e.indexOf(\"$$\", _i247 + 2);\n\n              if (_n296 !== -1) {\n                var _o122 = e.substring(_i247 + 2, _n296);\n\n                var _s86 = SP.htmlEntitiesDecode(_o122);\n\n                var _r59 = MP.getMathMLFromLatex(_s86, true);\n\n                if (!xP.get(\"saveHandTraces\")) {\n                  _r59 = yP.removeAnnotation(_r59, \"application/json\");\n                }\n\n                _t319 += _r59;\n                _n296 += 2;\n              } else {\n                _t319 += \"$$\";\n                _n296 = _i247 + 2;\n              }\n\n              _i247 = e.indexOf(\"$$\", _n296);\n            }\n\n            _t319 += e.substring(_n296, e.length);\n            e = _t319;\n          }\n\n          return e;\n        }\n      }, {\n        key: \"endParseSaveMode\",\n        value: function endParseSaveMode(e) {\n          if (xP.get(\"saveMode\")) {\n            if (xP.get(\"saveMode\") === \"safeXml\") {\n              e = RP.codeImgTransform(e, \"img2mathml\");\n            } else if (xP.get(\"saveMode\") === \"xml\") {\n              e = RP.codeImgTransform(e, \"img2mathml\");\n            } else if (xP.get(\"saveMode\") === \"base64\" && xP.get(\"base64savemode\") === \"image\") {\n              e = RP.codeImgTransform(e, \"img264\");\n            }\n          }\n\n          return e;\n        }\n      }, {\n        key: \"createShowImageSrc\",\n        value: function createShowImageSrc(e, t) {\n          var n = [];\n          var i = [\"mml\", \"color\", \"centerbaseline\", \"zoom\", \"dpi\", \"fontSize\", \"fontFamily\", \"defaultStretchy\", \"backgroundColor\", \"format\"];\n          i.forEach(function (t) {\n            var o = i[t];\n\n            if (typeof e[o] !== \"undefined\") {\n              n[o] = e[o];\n            }\n          });\n          var o = {};\n          Object.keys(e).forEach(function (t) {\n            if (t !== \"mml\") {\n              o[t] = e[t];\n            }\n          });\n          o.formula = com.wiris.js.JsPluginTools.md5encode(SP.propertiesToString(n));\n          o.lang = typeof t === \"undefined\" ? \"en\" : t;\n          o.version = xP.get(\"version\");\n          var s = TP.getService(\"showimage\", SP.httpBuildQuery(o), true);\n          return s;\n        }\n      }, {\n        key: \"codeImgTransform\",\n        value: function codeImgTransform(e, t) {\n          var n = \"\";\n          var i = 0;\n          var o = /<img/gi;\n          var s = o.source.length;\n\n          while (o.test(e)) {\n            var _r60 = o.lastIndex - s;\n\n            n += e.substring(i, _r60);\n\n            var _a37 = _r60 + 1;\n\n            while (_a37 < e.length && i <= _r60) {\n              var _t320 = e.charAt(_a37);\n\n              if (_t320 === '\"' || _t320 === \"'\") {\n                var _n297 = e.indexOf(_t320, _a37 + 1);\n\n                if (_n297 === -1) {\n                  _a37 = e.length;\n                } else {\n                  _a37 = _n297;\n                }\n              } else if (_t320 === \">\") {\n                i = _a37 + 1;\n              }\n\n              _a37 += 1;\n            }\n\n            if (i < _r60) {\n              n += e.substring(_r60, e.length);\n              return n;\n            }\n\n            var _c22 = e.substring(_r60, i);\n\n            var _l13 = SP.createObject(_c22);\n\n            var _d8 = _l13.getAttribute(xP.get(\"imageMathmlAttribute\"));\n\n            var _u7 = void 0;\n\n            var _h5 = void 0;\n\n            if (t === \"base642showimage\") {\n              if (_d8 == null) {\n                _d8 = _l13.getAttribute(\"alt\");\n              }\n\n              _d8 = yP.safeXmlDecode(_d8);\n              _c22 = RP.mathmlToImgObject(document, _d8, null, null);\n              n += SP.createObjectCode(_c22);\n            } else if (t === \"img2mathml\") {\n              if (xP.get(\"saveMode\")) {\n                if (xP.get(\"saveMode\") === \"safeXml\") {\n                  _u7 = true;\n                  _h5 = true;\n                } else if (xP.get(\"saveMode\") === \"xml\") {\n                  _u7 = true;\n                  _h5 = false;\n                }\n              }\n\n              n += SP.getWIRISImageOutput(_c22, _u7, _h5);\n            } else if (t === \"img264\") {\n              if (_d8 === null) {\n                _d8 = _l13.getAttribute(\"alt\");\n              }\n\n              _d8 = yP.safeXmlDecode(_d8);\n              var _e374 = {};\n              _e374.base64 = \"true\";\n              _c22 = RP.mathmlToImgObject(document, _d8, _e374, null);\n              IP.setImgSize(_c22, _c22.src, true);\n              n += SP.createObjectCode(_c22);\n            }\n          }\n\n          n += e.substring(i, e.length);\n          return n;\n        }\n      }, {\n        key: \"parseMathmlToImg\",\n        value: function parseMathmlToImg(e, t, n) {\n          var i = \"\";\n          var o = \"\".concat(t.tagOpener, \"math\");\n          var s = \"\".concat(t.tagOpener, \"/math\").concat(t.tagCloser);\n          var r = e.indexOf(o);\n          var a = 0;\n\n          while (r !== -1) {\n            i += e.substring(a, r);\n\n            var _c23 = e.indexOf(xP.get(\"imageMathmlAttribute\"));\n\n            a = e.indexOf(s, r);\n\n            if (a === -1) {\n              a = e.length - 1;\n            } else if (_c23 !== -1) {\n              a += e.indexOf(\"/>\", r);\n            } else {\n              a += s.length;\n            }\n\n            if (!yP.isMathmlInAttribute(e, r) && _c23 === -1) {\n              var _o123 = e.substring(r, a);\n\n              _o123 = t.id === kP.safeXmlCharacters.id ? yP.safeXmlDecode(_o123) : yP.mathMLEntities(_o123);\n              i += SP.createObjectCode(RP.mathmlToImgObject(document, _o123, null, n));\n            } else {\n              i += e.substring(r, a);\n            }\n\n            r = e.indexOf(o, a);\n          }\n\n          i += e.substring(a, e.length);\n          return i;\n        }\n      }]);\n\n      return RP;\n    }();\n\n    if (typeof MutationObserver !== \"undefined\") {\n      var _e375 = new MutationObserver(function (e) {\n        e.forEach(function (e) {\n          if (e.oldValue === xP.get(\"imageClassName\") && e.attributeName === \"class\" && e.target.className.indexOf(xP.get(\"imageClassName\")) === -1) {\n            e.target.className = xP.get(\"imageClassName\");\n          }\n        });\n      });\n\n      RP.observer = Object.create(_e375);\n      RP.observer.Config = {\n        attributes: true,\n        attributeOldValue: true\n      };\n\n      RP.observer.observe = function e(t) {\n        Object.getPrototypeOf(this).observe(t, this.Config);\n      };\n    }\n\n    var LP = /*#__PURE__*/function () {\n      function LP() {\n        _classCallCheck(this, LP);\n\n        this.isContentChanged = false;\n        this.waitingForChanges = false;\n      }\n\n      _createClass(LP, [{\n        key: \"setIsContentChanged\",\n        value: function setIsContentChanged(e) {\n          this.isContentChanged = e;\n        }\n      }, {\n        key: \"getIsContentChanged\",\n        value: function getIsContentChanged() {\n          return this.isContentChanged;\n        }\n      }, {\n        key: \"setWaitingForChanges\",\n        value: function setWaitingForChanges(e) {\n          this.waitingForChanges = e;\n        }\n      }, {\n        key: \"caretPositionChanged\",\n        value: function caretPositionChanged(e) {}\n      }, {\n        key: \"clipboardChanged\",\n        value: function clipboardChanged(e) {}\n      }, {\n        key: \"contentChanged\",\n        value: function contentChanged(e) {\n          if (this.waitingForChanges === true && this.isContentChanged === false) {\n            this.isContentChanged = true;\n          }\n        }\n      }, {\n        key: \"styleChanged\",\n        value: function styleChanged(e) {}\n      }, {\n        key: \"transformationReceived\",\n        value: function transformationReceived(e) {}\n      }]);\n\n      return LP;\n    }();\n\n    var jP = /*#__PURE__*/function () {\n      function jP(e) {\n        _classCallCheck(this, jP);\n\n        this.editorAttributes = {};\n\n        if (\"editorAttributes\" in e) {\n          this.editorAttributes = e.editorAttributes;\n        } else {\n          throw new Error(\"ContentManager constructor error: editorAttributes property missed.\");\n        }\n\n        this.customEditors = null;\n\n        if (\"customEditors\" in e) {\n          this.customEditors = e.customEditors;\n        }\n\n        this.environment = {};\n\n        if (\"environment\" in e) {\n          this.environment = e.environment;\n        } else {\n          throw new Error(\"ContentManager constructor error: environment property missed\");\n        }\n\n        this.language = \"\";\n\n        if (\"language\" in e) {\n          this.language = e.language;\n        } else {\n          throw new Error(\"ContentManager constructor error: language property missed\");\n        }\n\n        this.editorListener = new LP();\n        this.editor = null;\n        this.ua = navigator.userAgent.toLowerCase();\n        this.deviceProperties = {};\n        this.deviceProperties.isAndroid = this.ua.indexOf(\"android\") > -1;\n        this.deviceProperties.isIOS = this.ua.indexOf(\"ipad\") > -1 || this.ua.indexOf(\"iphone\") > -1;\n        this.toolbar = null;\n        this.modalDialogInstance = null;\n        this.listeners = new CP();\n        this.mathML = null;\n        this.isNewElement = true;\n        this.integrationModel = null;\n        this.isEditorLoaded = false;\n      }\n\n      _createClass(jP, [{\n        key: \"addListener\",\n        value: function addListener(e) {\n          this.listeners.add(e);\n        }\n      }, {\n        key: \"setIntegrationModel\",\n        value: function setIntegrationModel(e) {\n          this.integrationModel = e;\n        }\n      }, {\n        key: \"setModalDialogInstance\",\n        value: function setModalDialogInstance(e) {\n          this.modalDialogInstance = e;\n        }\n      }, {\n        key: \"insert\",\n        value: function insert() {\n          this.updateTitle(this.modalDialogInstance);\n          this.insertEditor(this.modalDialogInstance);\n        }\n      }, {\n        key: \"insertEditor\",\n        value: function insertEditor() {\n          if (window.com && window.com.wiris && window.com.wiris.jsEditor && window.com.wiris.jsEditor.JsEditor && window.com.wiris.jsEditor.JsEditor.newInstance) {\n            this.editor = window.com.wiris.jsEditor.JsEditor.newInstance(this.editorAttributes);\n            this.editor.insertInto(this.modalDialogInstance.contentContainer);\n            this.editor.focus();\n\n            if (this.modalDialogInstance.rtl) {\n              this.editor.action(\"rtl\");\n            }\n\n            if (this.editor.getEditorModel().isRTL()) {\n              this.editor.element.style.direction = \"rtl\";\n            }\n\n            this.editor.getEditorModel().addEditorListener(this.editorListener);\n\n            if (this.modalDialogInstance.deviceProperties.isIOS) {\n              setTimeout(function e() {\n                this.modalDialogInstance.hideKeyboard();\n              }, 400);\n              var _e376 = document.getElementsByClassName(\"wrs_formulaDisplay\")[0];\n              SP.addEvent(_e376, \"focus\", this.modalDialogInstance.handleOpenedIosSoftkeyboard);\n              SP.addEvent(_e376, \"blur\", this.modalDialogInstance.handleClosedIosSoftkeyboard);\n            }\n\n            this.listeners.fire(\"onLoad\", {});\n            this.isEditorLoaded = true;\n          } else {\n            setTimeout(jP.prototype.insertEditor.bind(this), 100);\n          }\n        }\n      }, {\n        key: \"init\",\n        value: function init() {\n          var e = document.createElement(\"script\");\n          e.type = \"text/javascript\";\n          var t = xP.get(\"editorUrl\");\n          var n = document.createElement(\"a\");\n          n.href = t;\n\n          if (window.location.href.indexOf(\"https://\") === 0) {\n            if (n.protocol === \"http:\") {\n              n.protocol = \"https:\";\n            }\n          }\n\n          if (n.port === \"80\" || n.port === \"443\") {\n            t = \"\".concat(n.protocol, \"//\").concat(n.hostname, \"/\").concat(n.pathname);\n          } else {\n            t = \"\".concat(n.protocol, \"//\").concat(n.hostname, \":\").concat(n.port, \"/\").concat(n.pathname);\n          }\n\n          var i = {};\n\n          if (\"editor\" in this.environment) {\n            i.editor = this.environment.editor;\n          } else {\n            i.editor = \"unknown\";\n          }\n\n          if (\"mode\" in this.environment) {\n            i.mode = this.environment.mode;\n          } else {\n            i.mode = xP.get(\"saveMode\");\n          }\n\n          if (\"version\" in this.environment) {\n            i.version = this.environment.version;\n          } else {\n            i.version = xP.get(\"version\");\n          }\n\n          e.src = \"\".concat(t, \"?lang=\").concat(this.language, \"&stats-editor=\").concat(i.editor, \"&stats-mode=\").concat(i.mode, \"&stats-version=\").concat(i.version);\n          document.getElementsByTagName(\"head\")[0].appendChild(e);\n        }\n      }, {\n        key: \"setInitialContent\",\n        value: function setInitialContent() {\n          if (!this.isNewElement) {\n            this.setMathML(this.mathML);\n          }\n        }\n      }, {\n        key: \"setMathML\",\n        value: function setMathML(e, t) {\n          var _this244 = this;\n\n          if (typeof t === \"undefined\") {\n            t = false;\n          }\n\n          this.editor.setMathMLWithCallback(e, function () {\n            _this244.editorListener.setWaitingForChanges(true);\n          });\n          setTimeout(function () {\n            _this244.editorListener.setIsContentChanged(false);\n          }, 500);\n\n          if (!t) {\n            this.onFocus();\n          }\n        }\n      }, {\n        key: \"onFocus\",\n        value: function onFocus() {\n          if (typeof this.editor !== \"undefined\" && this.editor != null) {\n            this.editor.focus();\n          }\n        }\n      }, {\n        key: \"submitAction\",\n        value: function submitAction() {\n          if (!this.editor.isFormulaEmpty()) {\n            var _e377 = this.editor.getMathMLWithSemantics();\n\n            if (this.customEditors.getActiveEditor() !== null) {\n              var _this$customEditors$g = this.customEditors.getActiveEditor(),\n                  _t322 = _this$customEditors$g.toolbar;\n\n              _e377 = yP.addCustomEditorClassAttribute(_e377, _t322);\n            } else {\n              Object.keys(this.customEditors.editors).forEach(function (t) {\n                _e377 = yP.removeCustomEditorClassAttribute(_e377, t);\n              });\n            }\n\n            var _t321 = yP.mathMLEntities(_e377);\n\n            this.integrationModel.updateFormula(_t321);\n          } else {\n            this.integrationModel.updateFormula(null);\n          }\n\n          this.customEditors.disable();\n          this.integrationModel.notifyWindowClosed();\n          this.setEmptyMathML();\n          this.customEditors.disable();\n        }\n      }, {\n        key: \"setEmptyMathML\",\n        value: function setEmptyMathML() {\n          if (this.deviceProperties.isAndroid || this.deviceProperties.isIOS) {\n            if (this.editor.getEditorModel().isRTL()) {\n              this.setMathML('<math dir=\"rtl\"><semantics><annotation encoding=\"application/json\">[]</annotation></semantics></math>', true);\n            } else {\n              this.setMathML('<math><semantics><annotation encoding=\"application/json\">[]</annotation></semantics></math>', true);\n            }\n          } else if (this.editor.getEditorModel().isRTL()) {\n            this.setMathML('<math dir=\"rtl\"/>', true);\n          } else {\n            this.setMathML(\"<math/>\", true);\n          }\n        }\n      }, {\n        key: \"onOpen\",\n        value: function onOpen() {\n          if (this.isNewElement) {\n            this.setEmptyMathML();\n          } else {\n            this.setMathML(this.mathML);\n          }\n\n          this.updateToolbar();\n          this.onFocus();\n        }\n      }, {\n        key: \"updateToolbar\",\n        value: function updateToolbar() {\n          this.updateTitle(this.modalDialogInstance);\n          var e = this.customEditors.getActiveEditor();\n\n          if (e) {\n            var _t323 = e.toolbar ? e.toolbar : _wrs_int_wirisProperties.toolbar;\n\n            if (this.toolbar == null || this.toolbar !== _t323) {\n              this.setToolbar(_t323);\n            }\n          } else {\n            var _e378 = this.getToolbar();\n\n            if (this.toolbar == null || this.toolbar !== _e378) {\n              this.setToolbar(_e378);\n              this.customEditors.disable();\n            }\n          }\n        }\n      }, {\n        key: \"updateTitle\",\n        value: function updateTitle() {\n          var e = this.customEditors.getActiveEditor();\n\n          if (e) {\n            this.modalDialogInstance.setTitle(e.title);\n          } else {\n            this.modalDialogInstance.setTitle(\"MathType\");\n          }\n        }\n      }, {\n        key: \"getToolbar\",\n        value: function getToolbar() {\n          var e = \"general\";\n\n          if (\"toolbar\" in this.editorAttributes) {\n            e = this.editorAttributes.toolbar;\n          }\n\n          if (e === \"general\") {\n            e = typeof _wrs_int_wirisProperties === \"undefined\" || typeof _wrs_int_wirisProperties.toolbar === \"undefined\" ? \"general\" : _wrs_int_wirisProperties.toolbar;\n          }\n\n          return e;\n        }\n      }, {\n        key: \"setToolbar\",\n        value: function setToolbar(e) {\n          this.toolbar = e;\n          this.editor.setParams({\n            toolbar: this.toolbar\n          });\n        }\n      }, {\n        key: \"hasChanges\",\n        value: function hasChanges() {\n          return !this.editor.isFormulaEmpty() && this.editorListener.getIsContentChanged();\n        }\n      }, {\n        key: \"onKeyDown\",\n        value: function onKeyDown(e) {\n          if (e.key !== undefined && e.repeat === false) {\n            if (e.key === \"Escape\" || e.key === \"Esc\") {\n              var _t324 = document.getElementsByClassName(\"wrs_expandButton wrs_expandButtonFor3RowsLayout wrs_pressed\");\n\n              if (_t324.length === 0) {\n                _t324 = document.getElementsByClassName(\"wrs_expandButton wrs_expandButtonFor2RowsLayout wrs_pressed\");\n\n                if (_t324.length === 0) {\n                  _t324 = document.getElementsByClassName(\"wrs_select wrs_pressed\");\n\n                  if (_t324.length === 0) {\n                    this.modalDialogInstance.cancelAction();\n                    e.stopPropagation();\n                    e.preventDefault();\n                  }\n                }\n              }\n            } else if (e.shiftKey && e.key === \"Tab\") {\n              if (document.activeElement === this.modalDialogInstance.submitButton) {\n                this.editor.focus();\n                e.stopPropagation();\n                e.preventDefault();\n              } else {\n                var _t325 = document.querySelector('[title=\"Manual\"]');\n\n                if (document.activeElement === _t325) {\n                  this.modalDialogInstance.cancelButton.focus();\n                  e.stopPropagation();\n                  e.preventDefault();\n                }\n              }\n            } else if (e.key === \"Tab\") {\n              if (document.activeElement === this.modalDialogInstance.cancelButton) {\n                var _t326 = document.querySelector('[title=\"Manual\"]');\n\n                _t326.focus();\n\n                e.stopPropagation();\n                e.preventDefault();\n              } else {\n                var _t327 = document.getElementsByClassName(\"wrs_formulaDisplay\")[0];\n\n                if (_t327.getAttribute(\"class\") === \"wrs_formulaDisplay wrs_focused\") {\n                  this.modalDialogInstance.submitButton.focus();\n                  e.stopPropagation();\n                  e.preventDefault();\n                }\n              }\n            }\n          }\n        }\n      }]);\n\n      return jP;\n    }();\n\n    var DP = /*#__PURE__*/function () {\n      function DP() {\n        _classCallCheck(this, DP);\n\n        this.editors = [];\n        this.activeEditor = \"default\";\n      }\n\n      _createClass(DP, [{\n        key: \"addEditor\",\n        value: function addEditor(e, t) {\n          var n = {};\n          n.name = t.name;\n          n.toolbar = t.toolbar;\n          n.icon = t.icon;\n          n.confVariable = t.confVariable;\n          n.title = t.title;\n          n.tooltip = t.tooltip;\n          this.editors[e] = n;\n        }\n      }, {\n        key: \"enable\",\n        value: function enable(e) {\n          this.activeEditor = e;\n        }\n      }, {\n        key: \"disable\",\n        value: function disable() {\n          this.activeEditor = \"default\";\n        }\n      }, {\n        key: \"getActiveEditor\",\n        value: function getActiveEditor() {\n          if (this.activeEditor !== \"default\") {\n            return this.editors[this.activeEditor];\n          }\n\n          return null;\n        }\n      }]);\n\n      return DP;\n    }();\n\n    var zP = {\n      imageCustomEditorName: \"data-custom-editor\",\n      imageClassName: \"Wirisformula\",\n      CASClassName: \"Wiriscas\"\n    };\n    var BP = zP;\n\n    var VP = /*#__PURE__*/function () {\n      function VP() {\n        _classCallCheck(this, VP);\n\n        this.cancelled = false;\n        this.defaultPrevented = false;\n      }\n\n      _createClass(VP, [{\n        key: \"cancel\",\n        value: function cancel() {\n          this.cancelled = true;\n        }\n      }, {\n        key: \"preventDefault\",\n        value: function preventDefault() {\n          this.defaultPrevented = true;\n        }\n      }]);\n\n      return VP;\n    }();\n\n    var FP = /*#__PURE__*/function () {\n      function FP(e) {\n        _classCallCheck(this, FP);\n\n        this.overlayElement = e.overlayElement;\n        this.callbacks = e.callbacks;\n        this.overlayWrapper = this.overlayElement.appendChild(document.createElement(\"div\"));\n        this.overlayWrapper.setAttribute(\"class\", \"wrs_popupmessage_overlay_envolture\");\n        this.message = this.overlayWrapper.appendChild(document.createElement(\"div\"));\n        this.message.id = \"wrs_popupmessage\";\n        this.message.setAttribute(\"class\", \"wrs_popupmessage_panel\");\n        this.message.setAttribute(\"role\", \"dialog\");\n        this.message.setAttribute(\"aria-describedby\", \"description_txt\");\n        var t = document.createElement(\"p\");\n        var n = document.createTextNode(e.strings.message);\n        t.appendChild(n);\n        t.id = \"description_txt\";\n        this.message.appendChild(t);\n        var i = this.overlayWrapper.appendChild(document.createElement(\"div\"));\n        i.setAttribute(\"class\", \"wrs_popupmessage_overlay\");\n        i.addEventListener(\"click\", this.cancelAction.bind(this));\n        this.buttonArea = this.message.appendChild(document.createElement(\"div\"));\n        this.buttonArea.setAttribute(\"class\", \"wrs_popupmessage_button_area\");\n        this.buttonArea.id = \"wrs_popup_button_area\";\n        var o = {\n          class: \"wrs_button_accept\",\n          innerHTML: e.strings.submitString,\n          id: \"wrs_popup_accept_button\"\n        };\n        this.closeButton = this.createButton(o, this.closeAction.bind(this));\n        this.buttonArea.appendChild(this.closeButton);\n        var s = {\n          class: \"wrs_button_cancel\",\n          innerHTML: e.strings.cancelString,\n          id: \"wrs_popup_cancel_button\"\n        };\n        this.cancelButton = this.createButton(s, this.cancelAction.bind(this));\n        this.buttonArea.appendChild(this.cancelButton);\n      }\n\n      _createClass(FP, [{\n        key: \"createButton\",\n        value: function createButton(e, t) {\n          var n = {};\n          n = document.createElement(\"button\");\n          n.setAttribute(\"id\", e.id);\n          n.setAttribute(\"class\", e.class);\n          n.innerHTML = e.innerHTML;\n          n.addEventListener(\"click\", t);\n          return n;\n        }\n      }, {\n        key: \"show\",\n        value: function show() {\n          if (this.overlayWrapper.style.display !== \"block\") {\n            document.activeElement.blur();\n            this.overlayWrapper.style.display = \"block\";\n            this.closeButton.focus();\n          } else {\n            this.overlayWrapper.style.display = \"none\";\n\n            _wrs_modalWindow.focus();\n          }\n        }\n      }, {\n        key: \"cancelAction\",\n        value: function cancelAction() {\n          this.overlayWrapper.style.display = \"none\";\n\n          if (typeof this.callbacks.cancelCallback !== \"undefined\") {\n            this.callbacks.cancelCallback();\n          }\n        }\n      }, {\n        key: \"closeAction\",\n        value: function closeAction() {\n          this.cancelAction();\n\n          if (typeof this.callbacks.closeCallback !== \"undefined\") {\n            this.callbacks.closeCallback();\n          }\n        }\n      }, {\n        key: \"onKeyDown\",\n        value: function onKeyDown(e) {\n          if (e.key !== undefined) {\n            if (e.key === \"Escape\" || e.key === \"Esc\") {\n              this.cancelAction();\n              e.stopPropagation();\n              e.preventDefault();\n            } else if (e.key === \"Tab\") {\n              if (document.activeElement === this.closeButton) {\n                this.cancelButton.focus();\n              } else {\n                this.closeButton.focus();\n              }\n\n              e.stopPropagation();\n              e.preventDefault();\n            }\n          }\n        }\n      }]);\n\n      return FP;\n    }();\n\n    var HP = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.76 13.76\"\\n   height=\"13.76\"\\n   width=\"13.76\"\\n   id=\"svg3783\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata3789\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs3787\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image3791\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAB\\nvklEQVRYw83Z23GDMBAF0AsNhBIowSVQgjuISnAJKSEdZNOBS6CDOBUkqSC4gs2PyGhAQg92se4M\\n4w8bccYW2hVumBmRdAB6ADfopQcw2SOYNoIkAL8APgB8AzgLI0/2S/iy1xkt3B9m9h0dM9/YHxM4\\nJ/c4MfPkGX+y763OyYVKgUPQTXAJdC84Bg2CS6Gl4FSoF7wHmgvOhbrgzsW+8L4YJegccrEj749R\\ngs7ZXGdz8wbAeNbREcDTzrHvblEgBbAUFACuy6JALJeL0E/P9sbvmBnNojcgAM+oJ58AhrlnWM5Z\\nA+C9RmiokakBvIJuNTLSc7hojqY0Mo8EB6Ep2CPBm9BU7BHgKDQHqwlOguZiNcDJ0JLe4FV4iaLY\\nJjF16dLqnoob+EdDs8A1QJPBtUCTwDVBo+DaoJvgNvBIR6rDl9wirbA1QIPgVgl6VwHb+dAr7Jkk\\nS/Pg3mCkVOslxxV9yBFqSqTA/3N2Utkzye3pftw5OxzQ5tHeddcdzGj3o4VgClUwowgtAVOs3BpF\\naA6YUnsDowhNAVNu12UUoVtgCn2+ifxp1wO42Ner4KPR5dJ2tsse2ZLvTQxbVf4AmC2z7WnSvpIA\\nAAAASUVORK5CYII=\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.76\" />\\n</svg>\\n';\n    var UP = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.76 13.76\"\\n   height=\"13.76\"\\n   width=\"13.76\"\\n   id=\"svg2\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata8\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs6\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image10\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAB\\n2ElEQVRYw9XZoXPCMBTH8S+5KfDzQ29606CH3/SmQTO96aGHHn/F0Himh8eDZSblQknSJH2F0DtE\\nQw8+12vyfulr7XY7LuW4qvj+DugD18AC+AE2woa+/mz07y9cF7Y8d7YPDEtjK2AsCB4BvdLYHPi0\\nXawioAA3wAfQaQiKHhuFYl1QSbAL6gWrSKgEuArqBKsEaB1wKNQKVsasHybcpRhwLNQED0zsoMbz\\nFwJOhWL6Cmzd2e0D14Wi1/k9di2wFNnAEtBifd9jv4GtIPgaeBOCAkzLFayr/6idWSSY6DJ8sHT9\\n6VK6zRFqKwo5gQ+grnKbA/gI6gsy5wRboT7sucBOaBX21GAvNAR7KnAlNBTbNDgIGoMtwO/C0Gko\\nNBZbN525tk+dJrAj4F4YGxXgVQS019DkCgarM0OjwCoDaDBYZQINAquMoJVglRnUC1YZQp1g1RB0\\nJryn65jYJ0HoRGPHguDX8hsZ6VAiGX4eUrJBbHqSArdN7LLBmCcBnpvYWfHWo6E8Wge8Ar7Kj8E4\\nARwcnBPBB20BE7uJBMdAU8BH/YvyBAsFp0BjwNZGi201qALXgYaAnR0hX2upAzwDj/p8raFL5I4u\\n8ALc6vNfvc+ztq5al9Rh/AfwZZ/LmlMllAAAAABJRU5ErkJggg==\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.76\" />\\n</svg>\\n';\n    var WP = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.76 13.76\"\\n   height=\"13.76\"\\n   width=\"13.76\"\\n   id=\"svg3793\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata3799\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs3797\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image3801\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAG4SURBVFhHvZnhUYNAEEbRBkwH2oGUkA40FWgJ\\nKSEdaAmxA0vQDmIHKSFWgPuAHZkEAnd8y5v5kuNHMm+WY1mSm6qqCiGlZdUspXzxopY9Wu6bpZQf\\nSxlRWapwVx9p2dy2CxUHy9ryWx9pKdWyECYcIQshwlGyIBeOlAWpcLQsyISXkAWEX5tlPkvJwnP7\\nns1SsnvLS7PMZwlZiShEy8pEIVJWKgpRsnJRiJBNFf2wbCzjfZgRUZi9JYWDxT9bWk6WIXbKym4t\\nKRVloObO5oze6ZClWX9a5jyOcOrfmuUkXPRUH/1zVRhZpvsnCxN+jnDqHh0SdQaFu9vg0ZIqrBZ1\\neoXP92yKcJSocyHcd4FNEY4WdbrCR1rGrukMF9BWVhZvLZ7U9rS2nH9HVvoq63iFu+RUlOpIuCYL\\nCCPIqVjq1A9j5R3aBnMY2kKzMlbZHPQVbVHLhomCUjZUFFSy35ZQUVDIMo+Gi4JCltFwERSy75Y5\\n4+VkFLLcKHLHyyRUF1jOeJmMShbChZWy0Df8yFDLgg8/cpCN6I9cdHJhZHmy7X2anAnCtDUZ/j/Y\\ng2X2j709MHhTDAFF8QdK9SRpUl2yFgAAAABJRU5ErkJggg==\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.76\" />\\n</svg>\\n';\n    var $P = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.76 13.76\"\\n   height=\"13.76\"\\n   width=\"13.76\"\\n   id=\"svg12\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata18\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs16\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image20\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAGMSURBVFhHvdk7TsNAFIVhQ0l6elLDJqCGngXQ\\nU7MA6rALahZATQ81C6APrXP/jEaKHD/i8TnzS1eaICF/2I4f4qxt20bYOmaVlrK2Mb8s1Nj3mIu0\\nlPYZszlPa1kvMf9pKe02Zq3Gcrhc4JUaSzawA0sWsAtLcrATS1KwG0sycA0sAd6kZXm1sNzVHtOy\\nvBpYoK8xV/tPC3JjZVByYqVQcmHlUHJgLVBSY0ugPP7xO5PXYSW2FMr19ytm8sahxD7ElEBzk3c6\\nsFysn/afymKPvsXMueh3oblRMNibmPuYZ34wsyWHfqhB8OFpwKvDHLADmusFd8/ZU8FOaO4I3PcF\\nmwLXgOYOwVtexdnwdUy3vg2UQPnD2eji+vZsrruHS/eoBEpjWMpgrhi1Dv1gY6fBkuRQmtqzJVmg\\npMbaoKTEWqGkwtqhpMBWgZICWwVKCuwpzxKSFNi5T2vFqb5gVcAqLNnBSixZwWos2cBg/9JSmgUM\\n9iMt5QFe8tZ8VP6n3WXMHQtxPzHfabm0ptkBwWhpthzMp7YAAAAASUVORK5CYII=\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.76\" />\\n</svg>\\n';\n    var qP = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.76 13.76\"\\n   height=\"13.76\"\\n   width=\"13.76\"\\n   id=\"svg3813\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata3819\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs3817\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image3821\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\\nnUlEQVRYw+3Z0QnCMBSF4T/FATqCG1g3cISO0NE6iiPoCE5gneD40ohPvgkJ/AcC9/EjHELgliT0\\nkoGOIlasWLFixYoVK1asWLFixYoVK1bsjxy+5hlYgLEx47ofSEKSJW1nTUJJMgLPDlpwHoCpk8rO\\nvgZixf4Zu3Vi3cq+WroBp4ahL+BYa3AB7o1CH7vvc7M1U4N/g2sdSk8bxjfDaMNdr+hmAQAAAABJ\\nRU5ErkJggg==\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.76\" />\\n</svg>\\n';\n    var YP = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.76 13.76\"\\n   height=\"13.76\"\\n   width=\"13.76\"\\n   id=\"svg32\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata38\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs36\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image40\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\\npklEQVRYw+3ZLQ4CMRCG4bcbFOvXg99T7FG4BafAw1VALx7dWyy2mIoGgSOZJu/n6p70ZybppFIK\\nvWSgo4gVK1asWLFixYoVK1asWLFixYoV+yO7r/UMHIAxiO8FZGBrsUfgDEwBN/QNXIA11S/PW1Bo\\nCz4N9ein4Nd1Dyw9PbDR0iVW7J+xudax6HkOtZVdg0MfQE7N0G4GlmANYgNW4A6QepowfgDMXB26\\nb1V6LAAAAABJRU5ErkJggg==\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.76\" />\\n</svg>\\n';\n    var JP = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.76 13.76\"\\n   height=\"13.76\"\\n   width=\"13.76\"\\n   id=\"svg3823\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata3829\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs3827\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image3831\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAHOSURBVFhH1ZiLUcMwEEQNDcQl0AEuISVABZhO\\nUkroICVAB6ECoINQgdmVfR5FlmQrkZzjzezEzsc8NPqcdNd1XfVfuB9ec3NAmv4yiRo5ImzBlm+c\\nwZYtEHJCGsT3eSgHxKZFxs/tL+aMkCK8R3yMwu4PcsVmiXBIVDDCvh/miEtMeE5UaEsNMJcN8o64\\ng26PvPSXs9S+/zRHQtgtvLRFCb9blZpnYw/9Rb6RR3M3zxtiprFbyKYwipK1+uwlnIkSrbITUaJR\\n1itKtMkGRYk2WRZAQbTNBpzWtggrrwnaWja00hk0DrCgsEZZ4hXWKksmwjLAHobkgOv+V3+ZhXHQ\\niWxKqXYLKNyILDdqbPKlldASPhA+Mxc7uwatkSOSix1iP//q2APshLBvfJo7hbizgQj/mDtl+KYu\\nCj8h7NSqCM2zXJvZwqqEY4uCOuGYLKEwJ3kVzMlyscg5915FTFbdqhaSVbn8+mTV1gmurOqCxpZN\\nEeUu9BlZd1obioTkQ7IhPGTjYZuPIoUMK/GUFrX39asuHJTlH3w1d3FCBxCrCUufZX+NCUdPSsAq\\nwu4A8wnPiQrFhW1Z4govFRWKCoeOjzjoZF92CdwpZy6AquoPvJRHJxB8bJ8AAAAASUVORK5CYII=\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.76\" />\\n</svg>\\n';\n    var QP = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.76 13.76\"\\n   height=\"13.76\"\\n   width=\"13.76\"\\n   id=\"svg42\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata48\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs46\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image50\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAYAAADhXXHAAAAAAXNSR0IArs4c6QAAAARnQU1BAACx\\njwv8YQUAAAAJcEhZcwAALiMAAC4jAXilP3YAAAG/SURBVFhH1ZgxUsMwEEUNJRyAGmp6qKGn5xRQ\\nQ08NNfRQQw11DpAaanIAWrMv8WaELSlexhLLm/mRnImiF48jr7zVtm3zX9ju2ik5llxLdpdHNg4k\\nT5I7yWB8Cdl9yZHkRmIRRpQxOxK+YzC+hKwSnTBBKKoMxpeUBSbkksgRE1V+CJeWhUPJ5ao7ICeq\\nrIVryMKJpC88RlTZk1SThVDYIvoluZIsSqyz511SfEg4UxbRdw5qnlmFa9AsCn8hO4aBKHiUjYqC\\nN9mkKHiSzYqCJ9lPSVIUPMmySqTudEu8XbOxO90ab7KQFPYoC1Fhr7IwENbagMLCUtXnoCTM1QZW\\n3iS3dFT2mRfHvEjuVfZUckFnQh67dgqo1GYqC1MLn3XtZIR/sFcJW2C39FcD18KxpcutcGqddSmc\\nuykg/LDq+iAnC/OudUFOVrfLbkjJWvb11YjJuhSFvqxbUQhlXYuCylpE2YXy2SkLlVEgaxVluzyT\\nIEutWQ1kKZYtouF2maK4mjCyFN6bJsw9gKgmrNdsbsKNT0qEKsIqC7EJx4gqxYVDWQgntIgqRYXD\\nbY3CLpcVgmdPC974BYy3/MgRNM03hR9ubFTHT48AAAAASUVORK5CYII=\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.76\" />\\n</svg>\\n';\n    var XP = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.44 13.76\"\\n   height=\"13.76\"\\n   width=\"13.44\"\\n   id=\"svg3803\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata3809\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs3807\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image3811\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAArCAYAAAAOnxr+AAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\\nvElEQVRYw+3ZSw0CMRSF4b8T9iAFB4wDkDAWcICEkTA4GAeAA3AADurgsCkbAgsSMrmFczZNd1/a\\n3vSVJFFDGipJNdBZaRdAB2wC2TIwAgNAkrQEjsA86GBegDZJGoF18JnfJtVR9idXvaGGGmrod/b6\\nV9kD14k9LbD6FDqUM8CU2b2Deo0aaqihhhpqqKGGGhr1hH/wiP469FaBMzflEhc9PZKQ1CtmsqRO\\nEunpHbeNNN3A+dFJ/mf6V+gduGPIoUgKLbAAAAAASUVORK5CYII=\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.44\" />\\n</svg>\\n';\n    var GP = '<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?>\\n<svg\\n   xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\\n   xmlns:cc=\"http://creativecommons.org/ns#\"\\n   xmlns:rdf=\"http://www.w3.org/1999/02/22-rdf-syntax-ns#\"\\n   xmlns:svg=\"http://www.w3.org/2000/svg\"\\n   xmlns=\"http://www.w3.org/2000/svg\"\\n   xmlns:xlink=\"http://www.w3.org/1999/xlink\"\\n   viewBox=\"0 0 13.44 13.76\"\\n   height=\"13.76\"\\n   width=\"13.44\"\\n   id=\"svg22\"\\n   version=\"1.1\">\\n  <metadata\\n     id=\"metadata28\">\\n    <rdf:RDF>\\n      <cc:Work\\n         rdf:about=\"\">\\n        <dc:format>image/svg+xml</dc:format>\\n        <dc:type\\n           rdf:resource=\"http://purl.org/dc/dcmitype/StillImage\" />\\n        <dc:title></dc:title>\\n      </cc:Work>\\n    </rdf:RDF>\\n  </metadata>\\n  <defs\\n     id=\"defs26\" />\\n  <image\\n     y=\"0\"\\n     x=\"0\"\\n     id=\"image30\"\\n     xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAArCAYAAAAOnxr+AAAACXBIWXMAAC4jAAAuIwF4pT92AAAA\\nvUlEQVRYw+3ZsQ3CMBCF4d8WFekZgBqWIDUDZACmYBQWYIn0pGYAegZIexROERHRIBTdhXeVy08+\\nyT4/JzMjQmWCVBjoarSugK0z3/0degKODjeyBy5Am8ysARrnnT8nM7sCa+fQLgdAAlQ6ngQVVFBB\\nfzeUTK6t8VAwU328ztV6QQUVVFBBBRVUUEG9Ds41sJvZs/8GelDrlw7tAjhvmZLo9o6RD4bEGUp+\\nX1My/I0T4HN4rrcASf9M/wp9ASNzIKYYz2hAAAAAAElFTkSuQmCC\\n\"\\n     style=\"image-rendering:optimizeQuality\"\\n     preserveAspectRatio=\"none\"\\n     height=\"13.76\"\\n     width=\"13.44\" />\\n</svg>\\n';\n\n    var KP = /*#__PURE__*/function () {\n      function KP(e) {\n        var _this245 = this;\n\n        _classCallCheck(this, KP);\n\n        this.attributes = e;\n        var t = navigator.userAgent.toLowerCase();\n        var n = t.indexOf(\"android\") > -1;\n        var i = t.indexOf(\"ipad\") > -1 || t.indexOf(\"iphone\") > -1;\n        this.iosSoftkeyboardOpened = false;\n        this.iosMeasureUnit = t.indexOf(\"crios\") === -1 ? \"%\" : \"vh\";\n        this.iosDivHeight = \"100%\".concat(this.iosMeasureUnit);\n        var o = window.outerWidth;\n        var s = window.outerHeight;\n        var r = o > s;\n        var a = o < s;\n        var c = r && this.attributes.height > s;\n        var l = a && this.attributes.width > o;\n        var d = c || l;\n        this.instanceId = document.getElementsByClassName(\"wrs_modal_dialogContainer\").length;\n        this.deviceProperties = {\n          orientation: r ? \"landscape\" : \"portait\",\n          isAndroid: n,\n          isIOS: i,\n          isMobile: d,\n          isDesktop: !d && !i && !n\n        };\n        this.properties = {\n          created: false,\n          state: \"\",\n          previousState: \"\",\n          position: {\n            bottom: 0,\n            right: 10\n          },\n          size: {\n            height: 338,\n            width: 580\n          }\n        };\n        this.websiteBeforeLockParameters = null;\n        var u = {};\n        u.class = \"wrs_modal_overlay\";\n        u.id = this.getElementId(u.class);\n        this.overlay = SP.createElement(\"div\", u);\n        u = {};\n        u.class = \"wrs_modal_title_bar\";\n        u.id = this.getElementId(u.class);\n        this.titleBar = SP.createElement(\"div\", u);\n        u = {};\n        u.class = \"wrs_modal_title\";\n        u.id = this.getElementId(u.class);\n        this.title = SP.createElement(\"div\", u);\n        this.title.innerHTML = \"\";\n        u = {};\n        u.class = \"wrs_modal_close_button\";\n        u.id = this.getElementId(u.class);\n        u.title = EP.get(\"close\");\n        u.style = {};\n        this.closeDiv = SP.createElement(\"a\", u);\n        this.closeDiv.setAttribute(\"role\", \"button\");\n        var h = \"background-size: 10px; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(HP), \")\");\n        var f = \"background-size: 10px; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(UP), \")\");\n        this.closeDiv.setAttribute(\"style\", h);\n        this.closeDiv.setAttribute(\"onmouseover\", \"this.style = \\\"\".concat(f, \"\\\";\"));\n        this.closeDiv.setAttribute(\"onmouseout\", \"this.style = \\\"\".concat(h, \"\\\";\"));\n        u = {};\n        u.class = \"wrs_modal_stack_button\";\n        u.id = this.getElementId(u.class);\n        u.title = EP.get(\"exit_fullscreen\");\n        this.stackDiv = SP.createElement(\"a\", u);\n        this.stackDiv.setAttribute(\"role\", \"button\");\n        h = \"background-size: 10px; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(JP), \")\");\n        f = \"background-size: 10px; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(QP), \")\");\n        this.stackDiv.setAttribute(\"style\", h);\n        this.stackDiv.setAttribute(\"onmouseover\", \"this.style = \\\"\".concat(f, \"\\\";\"));\n        this.stackDiv.setAttribute(\"onmouseout\", \"this.style = \\\"\".concat(h, \"\\\";\"));\n        u = {};\n        u.class = \"wrs_modal_maximize_button\";\n        u.id = this.getElementId(u.class);\n        u.title = EP.get(\"fullscreen\");\n        this.maximizeDiv = SP.createElement(\"a\", u);\n        this.maximizeDiv.setAttribute(\"role\", \"button\");\n        h = \"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(WP), \")\");\n        f = \"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa($P), \")\");\n        this.maximizeDiv.setAttribute(\"style\", h);\n        this.maximizeDiv.setAttribute(\"onmouseover\", \"this.style = \\\"\".concat(f, \"\\\";\"));\n        this.maximizeDiv.setAttribute(\"onmouseout\", \"this.style = \\\"\".concat(h, \"\\\";\"));\n        u = {};\n        u.class = \"wrs_modal_minimize_button\";\n        u.id = this.getElementId(u.class);\n        u.title = EP.get(\"minimize\");\n        this.minimizeDiv = SP.createElement(\"a\", u);\n        this.minimizeDiv.setAttribute(\"role\", \"button\");\n        h = \"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(qP), \")\");\n        f = \"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(YP), \")\");\n        this.minimizeDiv.setAttribute(\"style\", h);\n        this.minimizeDiv.setAttribute(\"onmouseover\", \"this.style = \\\"\".concat(f, \"\\\";\"));\n        this.minimizeDiv.setAttribute(\"onmouseout\", \"this.style = \\\"\".concat(h, \"\\\";\"));\n        u = {};\n        u.class = \"wrs_modal_dialogContainer\";\n        u.id = this.getElementId(u.class);\n        u.role = \"dialog\";\n        this.container = SP.createElement(\"div\", u);\n        this.container.setAttribute(\"aria-labeledby\", \"wrs_modal_title[0]\");\n        u = {};\n        u.class = \"wrs_modal_wrapper\";\n        u.id = this.getElementId(u.class);\n        this.wrapper = SP.createElement(\"div\", u);\n        u = {};\n        u.class = \"wrs_content_container\";\n        u.id = this.getElementId(u.class);\n        this.contentContainer = SP.createElement(\"div\", u);\n        u = {};\n        u.class = \"wrs_modal_controls\";\n        u.id = this.getElementId(u.class);\n        this.controls = SP.createElement(\"div\", u);\n        u = {};\n        u.class = \"wrs_modal_buttons_container\";\n        u.id = this.getElementId(u.class);\n        this.buttonContainer = SP.createElement(\"div\", u);\n        this.submitButton = this.createSubmitButton({\n          id: this.getElementId(\"wrs_modal_button_accept\"),\n          class: \"wrs_modal_button_accept\",\n          innerHTML: EP.get(\"accept\")\n        }, this.submitAction.bind(this));\n        this.cancelButton = this.createSubmitButton({\n          id: this.getElementId(\"wrs_modal_button_cancel\"),\n          class: \"wrs_modal_button_cancel\",\n          innerHTML: EP.get(\"cancel\")\n        }, this.cancelAction.bind(this));\n        this.contentManager = null;\n        var m = {\n          cancelString: EP.get(\"cancel\"),\n          submitString: EP.get(\"close\"),\n          message: EP.get(\"close_modal_warning\")\n        };\n        var g = {\n          closeCallback: function closeCallback() {\n            _this245.close();\n          },\n          cancelCallback: function cancelCallback() {\n            _this245.focus();\n          }\n        };\n        var p = {\n          overlayElement: this.container,\n          callbacks: g,\n          strings: m\n        };\n        this.popup = new FP(p);\n        this.rtl = false;\n\n        if (\"rtl\" in this.attributes) {\n          this.rtl = this.attributes.rtl;\n        }\n\n        this.handleOpenedIosSoftkeyboard = this.handleOpenedIosSoftkeyboard.bind(this);\n        this.handleClosedIosSoftkeyboard = this.handleClosedIosSoftkeyboard.bind(this);\n      }\n\n      _createClass(KP, [{\n        key: \"setContentManager\",\n        value: function setContentManager(e) {\n          this.contentManager = e;\n        }\n      }, {\n        key: \"getContentManager\",\n        value: function getContentManager() {\n          return this.contentManager;\n        }\n      }, {\n        key: \"submitAction\",\n        value: function submitAction() {\n          if (typeof this.contentManager.submitAction !== \"undefined\") {\n            this.contentManager.submitAction();\n          }\n\n          this.close();\n        }\n      }, {\n        key: \"cancelAction\",\n        value: function cancelAction() {\n          if (typeof this.contentManager.hasChanges === \"undefined\") {\n            this.close();\n          } else if (!this.contentManager.hasChanges()) {\n            this.close();\n          } else {\n            this.showPopUpMessage();\n          }\n        }\n      }, {\n        key: \"createSubmitButton\",\n        value: function createSubmitButton(e, t) {\n          var n = /*#__PURE__*/function () {\n            function n() {\n              _classCallCheck(this, n);\n\n              this.element = document.createElement(\"button\");\n              this.element.id = e.id;\n              this.element.className = e.class;\n              this.element.innerHTML = e.innerHTML;\n              SP.addEvent(this.element, \"click\", t);\n            }\n\n            _createClass(n, [{\n              key: \"getElement\",\n              value: function getElement() {\n                return this.element;\n              }\n            }]);\n\n            return n;\n          }();\n\n          return new n(e, t).getElement();\n        }\n      }, {\n        key: \"create\",\n        value: function create() {\n          this.titleBar.appendChild(this.closeDiv);\n          this.titleBar.appendChild(this.stackDiv);\n          this.titleBar.appendChild(this.maximizeDiv);\n          this.titleBar.appendChild(this.minimizeDiv);\n          this.titleBar.appendChild(this.title);\n\n          if (this.deviceProperties.isDesktop) {\n            this.container.appendChild(this.titleBar);\n          }\n\n          this.wrapper.appendChild(this.contentContainer);\n          this.wrapper.appendChild(this.controls);\n          this.controls.appendChild(this.buttonContainer);\n          this.buttonContainer.appendChild(this.submitButton);\n          this.buttonContainer.appendChild(this.cancelButton);\n          this.container.appendChild(this.wrapper);\n          this.recalculateScrollBar();\n          document.body.appendChild(this.container);\n          document.body.appendChild(this.overlay);\n\n          if (this.deviceProperties.isDesktop) {\n            this.createModalWindowDesktop();\n            this.createResizeButtons();\n            this.addListeners();\n\n            if (xP.get(\"modalWindowFullScreen\")) {\n              this.maximize();\n            }\n          } else if (this.deviceProperties.isAndroid) {\n            this.createModalWindowAndroid();\n          } else if (this.deviceProperties.isIOS && !this.deviceProperties.isMobile) {\n            this.createModalWindowIos();\n          }\n\n          if (this.contentManager != null) {\n            this.contentManager.insert(this);\n          }\n\n          this.properties.open = true;\n          this.properties.created = true;\n\n          if (this.isRTL()) {\n            this.container.style.right = \"\".concat(window.innerWidth - this.scrollbarWidth - this.container.offsetWidth, \"px\");\n            this.container.className += \" wrs_modal_rtl\";\n          }\n        }\n      }, {\n        key: \"createResizeButtons\",\n        value: function createResizeButtons() {\n          this.resizerBR = document.createElement(\"div\");\n          this.resizerBR.className = \"wrs_bottom_right_resizer\";\n          this.resizerBR.innerHTML = \"◢\";\n          this.resizerTL = document.createElement(\"div\");\n          this.resizerTL.className = \"wrs_bottom_left_resizer\";\n          this.container.appendChild(this.resizerBR);\n          this.titleBar.appendChild(this.resizerTL);\n          SP.addEvent(this.resizerBR, \"mousedown\", this.activateResizeStateBR.bind(this));\n          SP.addEvent(this.resizerTL, \"mousedown\", this.activateResizeStateTL.bind(this));\n        }\n      }, {\n        key: \"activateResizeStateBR\",\n        value: function activateResizeStateBR(e) {\n          this.initializeResizeProperties(e, false);\n        }\n      }, {\n        key: \"activateResizeStateTL\",\n        value: function activateResizeStateTL(e) {\n          this.initializeResizeProperties(e, true);\n        }\n      }, {\n        key: \"initializeResizeProperties\",\n        value: function initializeResizeProperties(e, t) {\n          SP.addClass(document.body, \"wrs_noselect\");\n          SP.addClass(this.overlay, \"wrs_overlay_active\");\n          this.resizeDataObject = {\n            x: this.eventClient(e).X,\n            y: this.eventClient(e).Y\n          };\n          this.initialWidth = parseInt(this.container.style.width, 10);\n          this.initialHeight = parseInt(this.container.style.height, 10);\n\n          if (!t) {\n            this.initialRight = parseInt(this.container.style.right, 10);\n            this.initialBottom = parseInt(this.container.style.bottom, 10);\n          } else {\n            this.leftScale = true;\n          }\n\n          if (!this.initialRight) {\n            this.initialRight = 0;\n          }\n\n          if (!this.initialBottom) {\n            this.initialBottom = 0;\n          }\n\n          document.body.style[\"user-select\"] = \"none\";\n        }\n      }, {\n        key: \"open\",\n        value: function open() {\n          var _this246 = this;\n\n          this.removeClass(\"wrs_closed\");\n          var e = this.deviceProperties.isIOS;\n          var t = this.deviceProperties.isAndroid;\n          var n = this.deviceProperties.isMobile;\n\n          if (e || t || n) {\n            this.restoreWebsiteScale();\n            this.lockWebsiteScroll();\n            setTimeout(function () {\n              _this246.hideKeyboard();\n            }, 400);\n          }\n\n          if (!this.properties.created) {\n            this.create();\n          } else {\n            if (!this.properties.open) {\n              this.properties.open = true;\n\n              if (!this.deviceProperties.isAndroid && !this.deviceProperties.isIOS) {\n                this.restoreState();\n              }\n            }\n\n            if (this.deviceProperties.isDesktop && xP.get(\"modalWindowFullScreen\")) {\n              this.maximize();\n            }\n\n            if (this.deviceProperties.isIOS) {\n              this.iosSoftkeyboardOpened = false;\n              this.setContainerHeight(\"\".concat(100 + this.iosMeasureUnit));\n            }\n          }\n\n          if (this.contentManager.isEditorLoaded === false) {\n            var _e379 = CP.newListener(\"onLoad\", function () {\n              _this246.contentManager.onOpen(_this246);\n            });\n\n            this.contentManager.addListener(_e379);\n          } else {\n            this.contentManager.onOpen(this);\n          }\n        }\n      }, {\n        key: \"close\",\n        value: function close() {\n          this.removeClass(\"wrs_maximized\");\n          this.removeClass(\"wrs_minimized\");\n          this.removeClass(\"wrs_stack\");\n          this.addClass(\"wrs_closed\");\n          this.saveModalProperties();\n          this.unlockWebsiteScroll();\n          this.properties.open = false;\n        }\n      }, {\n        key: \"restoreWebsiteScale\",\n        value: function restoreWebsiteScale() {\n          var e = document.querySelector(\"meta[name=viewport]\");\n          var t = [\"initial-scale=\", \"minimum-scale=\", \"maximum-scale=\"];\n          var n = [\"1.0\", \"1.0\", \"1.0\"];\n\n          var i = function i(e, t) {\n            var i = e.getAttribute(\"content\");\n\n            if (i) {\n              var _o124 = i.split(\",\");\n\n              var _s87 = \"\";\n              var _r61 = [];\n\n              for (var _e380 = 0; _e380 < _o124.length; _e380 += 1) {\n                var _n298 = false;\n                var _i248 = 0;\n\n                while (!_n298 && _i248 < t.length) {\n                  if (_o124[_e380].indexOf(t[_i248])) {\n                    _n298 = true;\n                  }\n\n                  _i248 += 1;\n                }\n\n                if (!_n298) {\n                  _r61.push(_o124[_e380]);\n                }\n              }\n\n              for (var _e381 = 0; _e381 < t.length; _e381 += 1) {\n                var _i249 = t[_e381] + n[_e381];\n\n                _s87 += _e381 === 0 ? _i249 : \",\".concat(_i249);\n              }\n\n              for (var _e382 = 0; _e382 < _r61.length; _e382 += 1) {\n                _s87 += \",\".concat(_r61[_e382]);\n              }\n\n              e.setAttribute(\"content\", _s87);\n              e.setAttribute(\"content\", \"\");\n              e.setAttribute(\"content\", i);\n            } else {\n              e.setAttribute(\"content\", \"initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0\");\n              e.removeAttribute(\"content\");\n            }\n          };\n\n          if (!e) {\n            e = document.createElement(\"meta\");\n            document.getElementsByTagName(\"head\")[0].appendChild(e);\n            i(e, t, n);\n            e.remove();\n          } else {\n            i(e, t, n);\n          }\n        }\n      }, {\n        key: \"lockWebsiteScroll\",\n        value: function lockWebsiteScroll() {\n          this.websiteBeforeLockParameters = {\n            bodyStylePosition: document.body.style.position ? document.body.style.position : \"\",\n            bodyStyleOverflow: document.body.style.overflow ? document.body.style.overflow : \"\",\n            htmlStyleOverflow: document.documentElement.style.overflow ? document.documentElement.style.overflow : \"\",\n            windowScrollX: window.scrollX,\n            windowScrollY: window.scrollY\n          };\n        }\n      }, {\n        key: \"unlockWebsiteScroll\",\n        value: function unlockWebsiteScroll() {\n          if (this.websiteBeforeLockParameters) {\n            document.body.style.position = this.websiteBeforeLockParameters.bodyStylePosition;\n            document.body.style.overflow = this.websiteBeforeLockParameters.bodyStyleOverflow;\n            document.documentElement.style.overflow = this.websiteBeforeLockParameters.htmlStyleOverflow;\n            var _e383 = this.websiteBeforeLockParameters.windowScrollX;\n            var _t328 = this.websiteBeforeLockParameters.windowScrollY;\n            window.scrollTo(_e383, _t328);\n            this.websiteBeforeLockParameters = null;\n          }\n        }\n      }, {\n        key: \"isIE11\",\n        value: function isIE11() {\n          if (navigator.userAgent.search(\"Msie/\") >= 0 || navigator.userAgent.search(\"Trident/\") >= 0 || navigator.userAgent.search(\"Edge/\") >= 0) {\n            return true;\n          }\n\n          return false;\n        }\n      }, {\n        key: \"isRTL\",\n        value: function isRTL() {\n          if (this.attributes.language === \"ar\" || this.attributes.language === \"he\") {\n            return true;\n          }\n\n          return this.rtl;\n        }\n      }, {\n        key: \"addClass\",\n        value: function addClass(e) {\n          SP.addClass(this.overlay, e);\n          SP.addClass(this.titleBar, e);\n          SP.addClass(this.overlay, e);\n          SP.addClass(this.container, e);\n          SP.addClass(this.contentContainer, e);\n          SP.addClass(this.stackDiv, e);\n          SP.addClass(this.minimizeDiv, e);\n          SP.addClass(this.maximizeDiv, e);\n          SP.addClass(this.wrapper, e);\n        }\n      }, {\n        key: \"removeClass\",\n        value: function removeClass(e) {\n          SP.removeClass(this.overlay, e);\n          SP.removeClass(this.titleBar, e);\n          SP.removeClass(this.overlay, e);\n          SP.removeClass(this.container, e);\n          SP.removeClass(this.contentContainer, e);\n          SP.removeClass(this.stackDiv, e);\n          SP.removeClass(this.minimizeDiv, e);\n          SP.removeClass(this.maximizeDiv, e);\n          SP.removeClass(this.wrapper, e);\n        }\n      }, {\n        key: \"createModalWindowDesktop\",\n        value: function createModalWindowDesktop() {\n          this.addClass(\"wrs_modal_desktop\");\n          this.stack();\n        }\n      }, {\n        key: \"createModalWindowAndroid\",\n        value: function createModalWindowAndroid() {\n          this.addClass(\"wrs_modal_android\");\n          window.addEventListener(\"resize\", this.orientationChangeAndroidSoftkeyboard.bind(this));\n        }\n      }, {\n        key: \"createModalWindowIos\",\n        value: function createModalWindowIos() {\n          this.addClass(\"wrs_modal_ios\");\n          window.addEventListener(\"resize\", this.orientationChangeIosSoftkeyboard.bind(this));\n        }\n      }, {\n        key: \"restoreState\",\n        value: function restoreState() {\n          if (this.properties.state === \"maximized\") {\n            this.maximize();\n          } else if (this.properties.state === \"minimized\") {\n            this.properties.state = this.properties.previousState;\n            this.properties.previousState = \"\";\n            this.minimize();\n          } else {\n            this.stack();\n          }\n        }\n      }, {\n        key: \"stack\",\n        value: function stack() {\n          this.properties.previousState = this.properties.state;\n          this.properties.state = \"stack\";\n          this.removeClass(\"wrs_maximized\");\n          this.minimizeDiv.title = EP.get(\"minimize\");\n          this.removeClass(\"wrs_minimized\");\n          this.addClass(\"wrs_stack\");\n          var e = \"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(qP), \")\");\n          var t = \"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(YP), \")\");\n          this.minimizeDiv.setAttribute(\"style\", e);\n          this.minimizeDiv.setAttribute(\"onmouseover\", \"this.style = \\\"\".concat(t, \"\\\";\"));\n          this.minimizeDiv.setAttribute(\"onmouseout\", \"this.style = \\\"\".concat(e, \"\\\";\"));\n          this.restoreModalProperties();\n\n          if (typeof this.resizerBR !== \"undefined\" && typeof this.resizerTL !== \"undefined\") {\n            this.setResizeButtonsVisibility();\n          }\n\n          this.recalculateScrollBar();\n          this.recalculatePosition();\n          this.recalculateScale();\n          this.focus();\n        }\n      }, {\n        key: \"minimize\",\n        value: function minimize() {\n          this.saveModalProperties();\n          this.title.style.cursor = \"pointer\";\n\n          if (this.properties.state === \"minimized\" && this.properties.previousState === \"stack\") {\n            this.stack();\n          } else if (this.properties.state === \"minimized\" && this.properties.previousState === \"maximized\") {\n            this.maximize();\n          } else {\n            this.container.style.height = \"30px\";\n            this.container.style.width = \"250px\";\n            this.container.style.bottom = \"0px\";\n            this.container.style.right = \"10px\";\n            this.removeListeners();\n            this.properties.previousState = this.properties.state;\n            this.properties.state = \"minimized\";\n            this.setResizeButtonsVisibility();\n            this.minimizeDiv.title = EP.get(\"maximize\");\n\n            if (SP.containsClass(this.overlay, \"wrs_stack\")) {\n              this.removeClass(\"wrs_stack\");\n            } else {\n              this.removeClass(\"wrs_maximized\");\n            }\n\n            this.addClass(\"wrs_minimized\");\n\n            var _e384 = \"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(XP), \")\");\n\n            var _t329 = \"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(GP), \")\");\n\n            this.minimizeDiv.setAttribute(\"style\", _e384);\n            this.minimizeDiv.setAttribute(\"onmouseover\", \"this.style = \\\"\".concat(_t329, \"\\\";\"));\n            this.minimizeDiv.setAttribute(\"onmouseout\", \"this.style = \\\"\".concat(_e384, \"\\\";\"));\n          }\n        }\n      }, {\n        key: \"maximize\",\n        value: function maximize() {\n          this.saveModalProperties();\n\n          if (this.properties.state !== \"maximized\") {\n            this.properties.previousState = this.properties.state;\n            this.properties.state = \"maximized\";\n          }\n\n          this.setResizeButtonsVisibility();\n\n          if (SP.containsClass(this.overlay, \"wrs_minimized\")) {\n            this.minimizeDiv.title = EP.get(\"minimize\");\n            this.removeClass(\"wrs_minimized\");\n          } else if (SP.containsClass(this.overlay, \"wrs_stack\")) {\n            this.container.style.left = null;\n            this.container.style.top = null;\n            this.removeClass(\"wrs_stack\");\n          }\n\n          this.addClass(\"wrs_maximized\");\n          var e = \"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(qP), \")\");\n          var t = \"background-size: 10px; background-repeat: no-repeat; background-image: url(data:image/svg+xml;base64,\".concat(window.btoa(YP), \")\");\n          this.minimizeDiv.setAttribute(\"style\", e);\n          this.minimizeDiv.setAttribute(\"onmouseover\", \"this.style = \\\"\".concat(t, \"\\\";\"));\n          this.minimizeDiv.setAttribute(\"onmouseout\", \"this.style = \\\"\".concat(e, \"\\\";\"));\n          this.setSize(parseInt(window.innerHeight * .8, 10), parseInt(window.innerWidth * .8, 10));\n\n          if (this.container.clientHeight > 700) {\n            this.container.style.height = \"700px\";\n          }\n\n          if (this.container.clientWidth > 1200) {\n            this.container.style.width = \"1200px\";\n          }\n\n          var _window = window,\n              n = _window.innerHeight;\n          var _window2 = window,\n              i = _window2.innerWidth;\n          var o = this.container.offsetHeight;\n          var s = this.container.offsetWidth;\n          var r = n / 2 - o / 2;\n          var a = i / 2 - s / 2;\n          this.setPosition(r, a);\n          this.recalculateScale();\n          this.recalculatePosition();\n          this.recalculateSize();\n          this.focus();\n        }\n      }, {\n        key: \"reExpand\",\n        value: function reExpand() {\n          if (this.properties.state === \"minimized\") {\n            if (this.properties.previousState === \"maximized\") {\n              this.maximize();\n            } else {\n              this.stack();\n            }\n\n            this.title.style.cursor = \"\";\n          }\n        }\n      }, {\n        key: \"setSize\",\n        value: function setSize(e, t) {\n          this.container.style.height = \"\".concat(e, \"px\");\n          this.container.style.width = \"\".concat(t, \"px\");\n          this.recalculateSize();\n        }\n      }, {\n        key: \"setPosition\",\n        value: function setPosition(e, t) {\n          this.container.style.bottom = \"\".concat(e, \"px\");\n          this.container.style.right = \"\".concat(t, \"px\");\n        }\n      }, {\n        key: \"saveModalProperties\",\n        value: function saveModalProperties() {\n          if (this.properties.state === \"stack\") {\n            this.properties.position.bottom = parseInt(this.container.style.bottom, 10);\n            this.properties.position.right = parseInt(this.container.style.right, 10);\n            this.properties.size.width = parseInt(this.container.style.width, 10);\n            this.properties.size.height = parseInt(this.container.style.height, 10);\n          }\n        }\n      }, {\n        key: \"restoreModalProperties\",\n        value: function restoreModalProperties() {\n          if (this.properties.state === \"stack\") {\n            this.setPosition(this.properties.position.bottom, this.properties.position.right);\n            this.setSize(this.properties.size.height, this.properties.size.width);\n          }\n        }\n      }, {\n        key: \"recalculateSize\",\n        value: function recalculateSize() {\n          this.wrapper.style.width = \"\".concat(this.container.clientWidth - 12, \"px\");\n          this.wrapper.style.height = \"\".concat(this.container.clientHeight - 38, \"px\");\n          this.contentContainer.style.height = \"\".concat(parseInt(this.wrapper.offsetHeight - 50, 10), \"px\");\n        }\n      }, {\n        key: \"setResizeButtonsVisibility\",\n        value: function setResizeButtonsVisibility() {\n          if (this.properties.state === \"stack\") {\n            this.resizerTL.style.visibility = \"visible\";\n            this.resizerBR.style.visibility = \"visible\";\n          } else {\n            this.resizerTL.style.visibility = \"hidden\";\n            this.resizerBR.style.visibility = \"hidden\";\n          }\n        }\n      }, {\n        key: \"addListeners\",\n        value: function addListeners() {\n          this.maximizeDiv.addEventListener(\"click\", this.maximize.bind(this), true);\n          this.stackDiv.addEventListener(\"click\", this.stack.bind(this), true);\n          this.minimizeDiv.addEventListener(\"click\", this.minimize.bind(this), true);\n          this.closeDiv.addEventListener(\"click\", this.cancelAction.bind(this));\n          this.title.addEventListener(\"click\", this.reExpand.bind(this));\n          this.overlay.addEventListener(\"click\", this.cancelAction.bind(this));\n          SP.addEvent(window, \"mousedown\", this.startDrag.bind(this));\n          SP.addEvent(window, \"mouseup\", this.stopDrag.bind(this));\n          SP.addEvent(window, \"mousemove\", this.drag.bind(this));\n          SP.addEvent(window, \"resize\", this.onWindowResize.bind(this));\n          SP.addEvent(this.container, \"keydown\", this.onKeyDown.bind(this));\n        }\n      }, {\n        key: \"removeListeners\",\n        value: function removeListeners() {\n          SP.removeEvent(window, \"mousedown\", this.startDrag);\n          SP.removeEvent(window, \"mouseup\", this.stopDrag);\n          SP.removeEvent(window, \"mousemove\", this.drag);\n          SP.removeEvent(window, \"resize\", this.onWindowResize);\n          SP.removeEvent(this.container, \"keydown\", this.onKeyDown);\n        }\n      }, {\n        key: \"eventClient\",\n        value: function eventClient(e) {\n          if (typeof e.clientX === \"undefined\" && e.changedTouches) {\n            var _t330 = {\n              X: e.changedTouches[0].clientX,\n              Y: e.changedTouches[0].clientY\n            };\n            return _t330;\n          }\n\n          var t = {\n            X: e.clientX,\n            Y: e.clientY\n          };\n          return t;\n        }\n      }, {\n        key: \"startDrag\",\n        value: function startDrag(e) {\n          if (this.properties.state === \"minimized\") {\n            return;\n          }\n\n          if (e.target === this.title) {\n            if (typeof this.dragDataObject === \"undefined\" || this.dragDataObject === null) {\n              this.dragDataObject = {\n                x: this.eventClient(e).X,\n                y: this.eventClient(e).Y\n              };\n              this.lastDrag = {\n                x: \"0px\",\n                y: \"0px\"\n              };\n\n              if (this.container.style.right === \"\") {\n                this.container.style.right = \"0px\";\n              }\n\n              if (this.container.style.bottom === \"\") {\n                this.container.style.bottom = \"0px\";\n              }\n\n              if (this.isIE11()) {}\n\n              SP.addClass(document.body, \"wrs_noselect\");\n              SP.addClass(this.overlay, \"wrs_overlay_active\");\n              this.limitWindow = this.getLimitWindow();\n            }\n          }\n        }\n      }, {\n        key: \"drag\",\n        value: function drag(e) {\n          if (this.dragDataObject) {\n            e.preventDefault();\n\n            var _t331 = Math.min(this.eventClient(e).Y, this.limitWindow.minPointer.y);\n\n            _t331 = Math.max(this.limitWindow.maxPointer.y, _t331);\n\n            var _n299 = Math.min(this.eventClient(e).X, this.limitWindow.minPointer.x);\n\n            _n299 = Math.max(this.limitWindow.maxPointer.x, _n299);\n\n            var _i250 = \"\".concat(_n299 - this.dragDataObject.x, \"px\");\n\n            var _o125 = \"\".concat(_t331 - this.dragDataObject.y, \"px\");\n\n            this.lastDrag = {\n              x: _i250,\n              y: _o125\n            };\n            this.container.style.transform = \"translate3d(\".concat(_i250, \",\").concat(_o125, \",0)\");\n          }\n\n          if (this.resizeDataObject) {\n            var _window3 = window,\n                _t332 = _window3.innerWidth;\n            var _window4 = window,\n                _n300 = _window4.innerHeight;\n\n            var _i251 = Math.min(this.eventClient(e).X, _t332 - this.scrollbarWidth - 7);\n\n            var _o126 = Math.min(this.eventClient(e).Y, _n300 - 7);\n\n            if (_i251 < 0) {\n              _i251 = 0;\n            }\n\n            if (_o126 < 0) {\n              _o126 = 0;\n            }\n\n            var _s88;\n\n            if (this.leftScale) {\n              _s88 = -1;\n            } else {\n              _s88 = 1;\n            }\n\n            this.container.style.width = \"\".concat(this.initialWidth + _s88 * (_i251 - this.resizeDataObject.x), \"px\");\n            this.container.style.height = \"\".concat(this.initialHeight + _s88 * (_o126 - this.resizeDataObject.y), \"px\");\n\n            if (!this.leftScale) {\n              if (this.resizeDataObject.x - _i251 - this.initialWidth < -580) {\n                this.container.style.right = \"\".concat(this.initialRight - (_i251 - this.resizeDataObject.x), \"px\");\n              } else {\n                this.container.style.right = \"\".concat(this.initialRight + this.initialWidth - 580, \"px\");\n                this.container.style.width = \"580px\";\n              }\n\n              if (this.resizeDataObject.y - _o126 < this.initialHeight - 338) {\n                this.container.style.bottom = \"\".concat(this.initialBottom - (_o126 - this.resizeDataObject.y), \"px\");\n              } else {\n                this.container.style.bottom = \"\".concat(this.initialBottom + this.initialHeight - 338, \"px\");\n                this.container.style.height = \"338px\";\n              }\n            }\n\n            this.recalculateScale();\n            this.recalculatePosition();\n          }\n        }\n      }, {\n        key: \"getLimitWindow\",\n        value: function getLimitWindow() {\n          var e = window.innerWidth;\n          var t = window.innerHeight;\n          var n = this.container.offsetHeight;\n          var i = parseInt(this.container.style.bottom, 10);\n          var o = parseInt(this.container.style.right, 10);\n          var _window5 = window,\n              s = _window5.pageXOffset;\n          var r = this.dragDataObject.y;\n          var a = this.dragDataObject.x;\n          var c = n + i - (t - (r - s));\n          var l = e - this.scrollbarWidth - (a - s) - o;\n          var d = t - this.container.offsetHeight + c;\n          var u = this.title.offsetHeight - (this.title.offsetHeight - c);\n          var h = e - l - this.scrollbarWidth;\n          var f = this.container.offsetWidth - l;\n          var m = {\n            x: h,\n            y: d\n          };\n          var g = {\n            x: f,\n            y: u\n          };\n          return {\n            minPointer: m,\n            maxPointer: g\n          };\n        }\n      }, {\n        key: \"getScrollBarWidth\",\n        value: function getScrollBarWidth() {\n          var e = document.createElement(\"p\");\n          e.style.width = \"100%\";\n          e.style.height = \"200px\";\n          var t = document.createElement(\"div\");\n          t.style.position = \"absolute\";\n          t.style.top = \"0px\";\n          t.style.left = \"0px\";\n          t.style.visibility = \"hidden\";\n          t.style.width = \"200px\";\n          t.style.height = \"150px\";\n          t.style.overflow = \"hidden\";\n          t.appendChild(e);\n          document.body.appendChild(t);\n          var n = e.offsetWidth;\n          t.style.overflow = \"scroll\";\n          var i = e.offsetWidth;\n\n          if (n === i) {\n            i = t.clientWidth;\n          }\n\n          document.body.removeChild(t);\n          return n - i;\n        }\n      }, {\n        key: \"stopDrag\",\n        value: function stopDrag() {\n          if (this.dragDataObject || this.resizeDataObject) {\n            this.container.style.transform = \"\";\n\n            if (this.dragDataObject) {\n              this.container.style.right = \"\".concat(parseInt(this.container.style.right, 10) - parseInt(this.lastDrag.x, 10), \"px\");\n              this.container.style.bottom = \"\".concat(parseInt(this.container.style.bottom, 10) - parseInt(this.lastDrag.y, 10), \"px\");\n            }\n\n            this.focus();\n            document.body.style[\"user-select\"] = \"\";\n\n            if (this.isIE11()) {}\n\n            SP.removeClass(document.body, \"wrs_noselect\");\n            SP.removeClass(this.overlay, \"wrs_overlay_active\");\n          }\n\n          this.dragDataObject = null;\n          this.resizeDataObject = null;\n          this.initialWidth = null;\n          this.leftScale = null;\n        }\n      }, {\n        key: \"onWindowResize\",\n        value: function onWindowResize() {\n          this.recalculateScrollBar();\n          this.recalculatePosition();\n          this.recalculateScale();\n        }\n      }, {\n        key: \"onKeyDown\",\n        value: function onKeyDown(e) {\n          if (e.key !== undefined) {\n            if (this.popup.overlayWrapper.style.display !== \"block\") {\n              if (e.key === \"Escape\" || e.key === \"Esc\") {\n                if (this.properties.open) {\n                  this.contentManager.onKeyDown(e);\n                }\n              } else if (e.shiftKey && e.key === \"Tab\") {\n                if (document.activeElement === this.cancelButton) {\n                  this.submitButton.focus();\n                  e.stopPropagation();\n                  e.preventDefault();\n                } else {\n                  this.contentManager.onKeyDown(e);\n                }\n              } else if (e.key === \"Tab\") {\n                if (document.activeElement === this.submitButton) {\n                  this.cancelButton.focus();\n                  e.stopPropagation();\n                  e.preventDefault();\n                } else {\n                  this.contentManager.onKeyDown(e);\n                }\n              }\n            } else {\n              this.popup.onKeyDown(e);\n            }\n          }\n        }\n      }, {\n        key: \"recalculatePosition\",\n        value: function recalculatePosition() {\n          this.container.style.right = \"\".concat(Math.min(parseInt(this.container.style.right, 10), window.innerWidth - this.scrollbarWidth - this.container.offsetWidth), \"px\");\n\n          if (parseInt(this.container.style.right, 10) < 0) {\n            this.container.style.right = \"0px\";\n          }\n\n          this.container.style.bottom = \"\".concat(Math.min(parseInt(this.container.style.bottom, 10), window.innerHeight - this.container.offsetHeight), \"px\");\n\n          if (parseInt(this.container.style.bottom, 10) < 0) {\n            this.container.style.bottom = \"0px\";\n          }\n        }\n      }, {\n        key: \"recalculateScale\",\n        value: function recalculateScale() {\n          var e = false;\n\n          if (parseInt(this.container.style.width, 10) > 580) {\n            this.container.style.width = \"\".concat(Math.min(parseInt(this.container.style.width, 10), window.innerWidth - this.scrollbarWidth), \"px\");\n            e = true;\n          } else {\n            this.container.style.width = \"580px\";\n            e = true;\n          }\n\n          if (parseInt(this.container.style.height, 10) > 338) {\n            this.container.style.height = \"\".concat(Math.min(parseInt(this.container.style.height, 10), window.innerHeight), \"px\");\n            e = true;\n          } else {\n            this.container.style.height = \"338px\";\n            e = true;\n          }\n\n          if (e) {\n            this.recalculateSize();\n          }\n        }\n      }, {\n        key: \"recalculateScrollBar\",\n        value: function recalculateScrollBar() {\n          this.hasScrollBar = window.innerWidth > document.documentElement.clientWidth;\n\n          if (this.hasScrollBar) {\n            this.scrollbarWidth = this.getScrollBarWidth();\n          } else {\n            this.scrollbarWidth = 0;\n          }\n        }\n      }, {\n        key: \"hideKeyboard\",\n        value: function hideKeyboard() {\n          var e = document.createElement(\"input\");\n          this.container.appendChild(e);\n          e.focus();\n          e.blur();\n          e.remove();\n        }\n      }, {\n        key: \"focus\",\n        value: function focus() {\n          if (this.contentManager != null && typeof this.contentManager.onFocus !== \"undefined\") {\n            this.contentManager.onFocus();\n          }\n        }\n      }, {\n        key: \"portraitMode\",\n        value: function portraitMode() {\n          return window.innerHeight > window.innerWidth;\n        }\n      }, {\n        key: \"handleOpenedIosSoftkeyboard\",\n        value: function handleOpenedIosSoftkeyboard() {\n          if (!this.iosSoftkeyboardOpened && this.iosDivHeight != null && this.iosDivHeight === \"100\".concat(this.iosMeasureUnit)) {\n            if (this.portraitMode()) {\n              this.setContainerHeight(\"63\".concat(this.iosMeasureUnit));\n            } else {\n              this.setContainerHeight(\"40\".concat(this.iosMeasureUnit));\n            }\n          }\n\n          this.iosSoftkeyboardOpened = true;\n        }\n      }, {\n        key: \"handleClosedIosSoftkeyboard\",\n        value: function handleClosedIosSoftkeyboard() {\n          this.iosSoftkeyboardOpened = false;\n          this.setContainerHeight(\"100\".concat(this.iosMeasureUnit));\n        }\n      }, {\n        key: \"orientationChangeIosSoftkeyboard\",\n        value: function orientationChangeIosSoftkeyboard() {\n          if (this.iosSoftkeyboardOpened) {\n            if (this.portraitMode()) {\n              this.setContainerHeight(\"63\".concat(this.iosMeasureUnit));\n            } else {\n              this.setContainerHeight(\"40\".concat(this.iosMeasureUnit));\n            }\n          } else {\n            this.setContainerHeight(\"100\".concat(this.iosMeasureUnit));\n          }\n        }\n      }, {\n        key: \"orientationChangeAndroidSoftkeyboard\",\n        value: function orientationChangeAndroidSoftkeyboard() {\n          this.setContainerHeight(\"100%\");\n        }\n      }, {\n        key: \"setContainerHeight\",\n        value: function setContainerHeight(e) {\n          this.iosDivHeight = e;\n          this.wrapper.style.height = e;\n        }\n      }, {\n        key: \"showPopUpMessage\",\n        value: function showPopUpMessage() {\n          if (this.properties.state === \"minimized\") {\n            this.stack();\n          }\n\n          this.popup.show();\n        }\n      }, {\n        key: \"setTitle\",\n        value: function setTitle(e) {\n          this.title.innerHTML = e;\n        }\n      }, {\n        key: \"getElementId\",\n        value: function getElementId(e) {\n          return \"\".concat(e, \"[\").concat(this.instanceId, \"]\");\n        }\n      }]);\n\n      return KP;\n    }();\n\n    var ZP;\n    var eE = ZP;\n    /*! http://mths.be/codepointat v0.1.0 by @mathias */\n\n    if (!String.prototype.codePointAt) {\n      (function () {\n        \"use strict\";\n\n        var e = function (_e385) {\n          function e(_x5) {\n            return _e385.apply(this, arguments);\n          }\n\n          e.toString = function () {\n            return _e385.toString();\n          };\n\n          return e;\n        }(function (e) {\n          if (this == null) {\n            throw TypeError();\n          }\n\n          var t = String(this);\n          var n = t.length;\n          var i = e ? Number(e) : 0;\n\n          if (i != i) {\n            i = 0;\n          }\n\n          if (i < 0 || i >= n) {\n            return undefined;\n          }\n\n          var o = t.charCodeAt(i);\n          var s;\n\n          if (o >= 55296 && o <= 56319 && n > i + 1) {\n            s = t.charCodeAt(i + 1);\n\n            if (s >= 56320 && s <= 57343) {\n              return (o - 55296) * 1024 + s - 56320 + 65536;\n            }\n          }\n\n          return o;\n        });\n\n        if (Object.defineProperty) {\n          Object.defineProperty(String.prototype, \"codePointAt\", {\n            value: e,\n            configurable: true,\n            writable: true\n          });\n        } else {\n          String.prototype.codePointAt = e;\n        }\n      })();\n    }\n\n    if (typeof Object.assign != \"function\") {\n      Object.defineProperty(Object, \"assign\", {\n        value: function e(t, n) {\n          \"use strict\";\n\n          if (t == null) {\n            throw new TypeError(\"Cannot convert undefined or null to object\");\n          }\n\n          var i = Object(t);\n\n          for (var o = 1; o < arguments.length; o++) {\n            var s = arguments[o];\n\n            if (s != null) {\n              for (var r in s) {\n                if (Object.prototype.hasOwnProperty.call(s, r)) {\n                  i[r] = s[r];\n                }\n              }\n            }\n          }\n\n          return i;\n        },\n        writable: true,\n        configurable: true\n      });\n    }\n\n    var tE = n(94);\n\n    var nE = /*#__PURE__*/function () {\n      function nE(e) {\n        _classCallCheck(this, nE);\n\n        this.language = \"en\";\n        this.editMode = \"images\";\n        this.modalDialog = null;\n        this.customEditors = new DP();\n        var t = {\n          name: \"Chemistry\",\n          toolbar: \"chemistry\",\n          icon: \"chem.png\",\n          confVariable: \"chemEnabled\",\n          title: \"ChemType\",\n          tooltip: \"Insert a chemistry formula - ChemType\"\n        };\n        this.customEditors.addEditor(\"chemistry\", t);\n        this.environment = {};\n        this.editionProperties = {};\n        this.editionProperties.isNewElement = true;\n        this.editionProperties.temporalImage = null;\n        this.editionProperties.latexRange = null;\n        this.editionProperties.range = null;\n        this.integrationModel = null;\n        this.contentManager = null;\n\n        this.browser = function () {\n          var e = navigator.userAgent;\n          var t = \"none\";\n\n          if (e.search(\"Edge/\") >= 0) {\n            t = \"EDGE\";\n          } else if (e.search(\"Chrome/\") >= 0) {\n            t = \"CHROME\";\n          } else if (e.search(\"Trident/\") >= 0) {\n            t = \"IE\";\n          } else if (e.search(\"Firefox/\") >= 0) {\n            t = \"FIREFOX\";\n          } else if (e.search(\"Safari/\") >= 0) {\n            t = \"SAFARI\";\n          }\n\n          return t;\n        }();\n\n        this.listeners = new CP();\n        this.serviceProviderProperties = {};\n\n        if (\"serviceProviderProperties\" in e) {\n          this.serviceProviderProperties = e.serviceProviderProperties;\n        } else {\n          throw new Error(\"serviceProviderProperties property missing.\");\n        }\n      }\n\n      _createClass(nE, [{\n        key: \"setIntegrationModel\",\n        value: function setIntegrationModel(e) {\n          this.integrationModel = e;\n        }\n      }, {\n        key: \"setEnvironment\",\n        value: function setEnvironment(e) {\n          if (\"editor\" in e) {\n            this.environment.editor = e.editor;\n          }\n\n          if (\"mode\" in e) {\n            this.environment.mode = e.mode;\n          }\n\n          if (\"version\" in e) {\n            this.environment.version = e.version;\n          }\n        }\n      }, {\n        key: \"getModalDialog\",\n        value: function getModalDialog() {\n          return this.modalDialog;\n        }\n      }, {\n        key: \"init\",\n        value: function init() {\n          var _this247 = this;\n\n          if (!nE.initialized) {\n            var _e386 = CP.newListener(\"onInit\", function () {\n              var e = TP.getService(\"configurationjs\", \"\", \"get\");\n              var t = JSON.parse(e);\n              xP.addConfiguration(t);\n              xP.addConfiguration(BP);\n              EP.language = _this247.language;\n\n              _this247.listeners.fire(\"onLoad\", {});\n            });\n\n            TP.addListener(_e386);\n            TP.init(this.serviceProviderProperties);\n            nE.initialized = true;\n          } else {\n            this.listeners.fire(\"onLoad\", {});\n          }\n        }\n      }, {\n        key: \"addListener\",\n        value: function addListener(e) {\n          this.listeners.add(e);\n        }\n      }, {\n        key: \"beforeUpdateFormula\",\n        value: function beforeUpdateFormula(e, t) {\n          var n = new VP();\n          n.mathml = e;\n          n.wirisProperties = {};\n\n          if (t != null) {\n            Object.keys(t).forEach(function (e) {\n              n.wirisProperties[e] = t[e];\n            });\n          }\n\n          n.language = this.language;\n          n.editMode = this.editMode;\n\n          if (this.listeners.fire(\"onBeforeFormulaInsertion\", n)) {\n            return {};\n          }\n\n          if (nE.globalListeners.fire(\"onBeforeFormulaInsertion\", n)) {\n            return {};\n          }\n\n          return {\n            mathml: n.mathml,\n            wirisProperties: n.wirisProperties\n          };\n        }\n      }, {\n        key: \"insertFormula\",\n        value: function insertFormula(e, t, n, i) {\n          var o = {};\n\n          if (!n) {\n            this.insertElementOnSelection(null, e, t);\n          } else if (this.editMode === \"latex\") {\n            o.latex = MP.getLatexFromMathML(n);\n\n            if (!!this.integrationModel.fillNonLatexNode && !o.latex) {\n              var _i252 = new VP();\n\n              _i252.editMode = this.editMode;\n              _i252.windowTarget = t;\n              _i252.focusElement = e;\n              _i252.latex = o.latex;\n              this.integrationModel.fillNonLatexNode(_i252, t, n);\n            } else {\n              o.node = t.document.createTextNode(\"$$\".concat(o.latex, \"$$\"));\n            }\n\n            this.insertElementOnSelection(o.node, e, t);\n          } else {\n            o.node = RP.mathmlToImgObject(t.document, n, i, this.language);\n            this.insertElementOnSelection(o.node, e, t);\n          }\n\n          return o;\n        }\n      }, {\n        key: \"afterUpdateFormula\",\n        value: function afterUpdateFormula(e, t, n, i) {\n          var o = new VP();\n          o.editMode = this.editMode;\n          o.windowTarget = t;\n          o.focusElement = e;\n          o.node = n;\n          o.latex = i;\n\n          if (this.listeners.fire(\"onAfterFormulaInsertion\", o)) {\n            return {};\n          }\n\n          if (nE.globalListeners.fire(\"onAfterFormulaInsertion\", o)) {\n            return {};\n          }\n\n          return {};\n        }\n      }, {\n        key: \"placeCaretAfterNode\",\n        value: function placeCaretAfterNode(e) {\n          this.integrationModel.getSelection();\n          var t = e.ownerDocument;\n\n          if (typeof t.getSelection !== \"undefined\" && !!e.parentElement) {\n            var _n301 = t.createRange();\n\n            _n301.setStartAfter(e);\n\n            _n301.collapse(true);\n\n            var _i253 = t.getSelection();\n\n            _i253.removeAllRanges();\n\n            _i253.addRange(_n301);\n\n            t.body.focus();\n          }\n        }\n      }, {\n        key: \"insertElementOnSelection\",\n        value: function insertElementOnSelection(e, t, n) {\n          if (this.editionProperties.isNewElement) {\n            if (e) {\n              if (t.type === \"textarea\") {\n                SP.updateTextArea(t, e.textContent);\n              } else if (document.selection && document.getSelection === 0) {\n                var _t333 = n.document.selection.createRange();\n\n                n.document.execCommand(\"InsertImage\", false, e.src);\n\n                if (!(\"parentElement\" in _t333)) {\n                  n.document.execCommand(\"delete\", false);\n                  _t333 = n.document.selection.createRange();\n                  n.document.execCommand(\"InsertImage\", false, e.src);\n                }\n\n                if (\"parentElement\" in _t333) {\n                  var _n302 = _t333.parentElement();\n\n                  if (_n302.nodeName.toUpperCase() === \"IMG\") {\n                    _n302.parentNode.replaceChild(e, _n302);\n                  } else {\n                    _t333.pasteHTML(SP.createObjectCode(e));\n                  }\n                }\n              } else {\n                var _t334 = this.integrationModel.getSelection();\n\n                var _n303 = null;\n\n                if (this.editionProperties.range) {\n                  _n303 = this.editionProperties.range;\n                  this.editionProperties.range = null;\n                } else {\n                  _n303 = _t334.getRangeAt(0);\n                }\n\n                _n303.deleteContents();\n\n                var _i254 = _n303.startContainer;\n                var _o127 = _n303.startOffset;\n\n                if (_i254.nodeType === 3) {\n                  _i254 = _i254.splitText(_o127);\n\n                  _i254.parentNode.insertBefore(e, _i254);\n                } else if (_i254.nodeType === 1) {\n                  _i254.insertBefore(e, _i254.childNodes[_o127]);\n                }\n\n                this.placeCaretAfterNode(e);\n              }\n            } else if (t.type === \"textarea\") {\n              t.focus();\n            } else {\n              var _e387 = this.integrationModel.getSelection();\n\n              _e387.removeAllRanges();\n\n              if (this.editionProperties.range) {\n                var _t335 = this.editionProperties.range;\n                this.editionProperties.range = null;\n\n                _e387.addRange(_t335);\n              }\n            }\n          } else if (this.editionProperties.latexRange) {\n            if (document.selection && document.getSelection === 0) {\n              this.editionProperties.isNewElement = true;\n              this.editionProperties.latexRange.select();\n              this.insertElementOnSelection(e, t, n);\n            } else {\n              this.editionProperties.latexRange.deleteContents();\n              this.editionProperties.latexRange.insertNode(e);\n              this.placeCaretAfterNode(e);\n            }\n          } else if (t.type === \"textarea\") {\n            var _n304;\n\n            if (typeof this.integrationModel.getSelectedItem !== \"undefined\") {\n              _n304 = this.integrationModel.getSelectedItem(t, false);\n            } else {\n              _n304 = SP.getSelectedItemOnTextarea(t);\n            }\n\n            SP.updateExistingTextOnTextarea(t, e.textContent, _n304.startPosition, _n304.endPosition);\n          } else {\n            if (e && e.nodeName.toLowerCase() === \"img\") {\n              IP.removeImgDataAttributes(this.editionProperties.temporalImage);\n              IP.clone(e, this.editionProperties.temporalImage);\n            } else {\n              this.editionProperties.temporalImage.remove();\n            }\n\n            this.placeCaretAfterNode(this.editionProperties.temporalImage);\n          }\n        }\n      }, {\n        key: \"openModalDialog\",\n        value: function openModalDialog(e, t) {\n          var _this248 = this;\n\n          this.editMode = \"images\";\n\n          try {\n            if (t) {\n              e.contentWindow.focus();\n\n              var _t336 = e.contentWindow.getSelection();\n\n              this.editionProperties.range = _t336.getRangeAt(0);\n            } else {\n              e.focus();\n\n              var _t337 = getSelection();\n\n              this.editionProperties.range = _t337.getRangeAt(0);\n            }\n          } catch (e) {\n            this.editionProperties.range = null;\n          }\n\n          if (t === undefined) {\n            t = true;\n          }\n\n          this.editionProperties.latexRange = null;\n\n          if (e) {\n            var _n305;\n\n            if (typeof this.integrationModel.getSelectedItem !== \"undefined\") {\n              _n305 = this.integrationModel.getSelectedItem(e, t);\n            } else {\n              _n305 = SP.getSelectedItem(e, t);\n            }\n\n            if (_n305) {\n              if (!_n305.caretPosition && SP.containsClass(_n305.node, xP.get(\"imageClassName\"))) {\n                this.editionProperties.temporalImage = _n305.node;\n                this.editionProperties.isNewElement = false;\n              } else if (_n305.node.nodeType === 3) {\n                if (this.integrationModel.getMathmlFromTextNode) {\n                  var _e388 = this.integrationModel.getMathmlFromTextNode(_n305.node, _n305.caretPosition);\n\n                  if (_e388) {\n                    this.editMode = \"latex\";\n                    this.editionProperties.isNewElement = false;\n                    this.editionProperties.temporalImage = document.createElement(\"img\");\n                    this.editionProperties.temporalImage.setAttribute(xP.get(\"imageMathmlAttribute\"), yP.safeXmlEncode(_e388));\n                  }\n                } else {\n                  var _i255 = MP.getLatexFromTextNode(_n305.node, _n305.caretPosition);\n\n                  if (_i255) {\n                    var _n306 = MP.getMathMLFromLatex(_i255.latex);\n\n                    this.editMode = \"latex\";\n                    this.editionProperties.isNewElement = false;\n                    this.editionProperties.temporalImage = document.createElement(\"img\");\n                    this.editionProperties.temporalImage.setAttribute(xP.get(\"imageMathmlAttribute\"), yP.safeXmlEncode(_n306));\n\n                    var _o128 = t ? e.contentWindow : window;\n\n                    if (e.tagName.toLowerCase() !== \"textarea\") {\n                      if (document.selection) {\n                        var _e389 = 0;\n                        var _t338 = _i255.startNode.previousSibling;\n\n                        while (_t338) {\n                          _e389 += SP.getNodeLength(_t338);\n                          _t338 = _t338.previousSibling;\n                        }\n\n                        this.editionProperties.latexRange = _o128.document.selection.createRange();\n                        this.editionProperties.latexRange.moveToElementText(_i255.startNode.parentNode);\n                        this.editionProperties.latexRange.move(\"character\", _e389 + _i255.startPosition);\n                        this.editionProperties.latexRange.moveEnd(\"character\", _i255.latex.length + 4);\n                      } else {\n                        this.editionProperties.latexRange = _o128.document.createRange();\n                        this.editionProperties.latexRange.setStart(_i255.startNode, _i255.startPosition);\n                        this.editionProperties.latexRange.setEnd(_i255.endNode, _i255.endPosition);\n                      }\n                    }\n                  }\n                }\n              }\n            } else if (e.tagName.toLowerCase() === \"textarea\") {\n              this.editMode = \"latex\";\n            }\n          }\n\n          var n = xP.get(\"editorAttributes\").split(\", \");\n          var i = {};\n\n          for (var _e390 = 0, _t339 = n.length; _e390 < _t339; _e390 += 1) {\n            var _t340 = n[_e390].split(\"=\");\n\n            var _o129 = _t340[0];\n            var _s89 = _t340[1];\n            i[_o129] = _s89;\n          }\n\n          var o = {};\n          var s = xP.get(\"editorParameters\");\n          var r = this.integrationModel.editorParameters;\n          Object.assign(o, i, s);\n          Object.assign(o, i, r);\n          o.language = this.language;\n          o.rtl = this.integrationModel.rtl;\n          var a = {};\n          a.editorAttributes = o;\n          a.language = this.language;\n          a.customEditors = this.customEditors;\n          a.environment = this.environment;\n\n          if (this.modalDialog == null) {\n            this.modalDialog = new KP(o);\n            this.contentManager = new jP(a);\n\n            var _e391 = CP.newListener(\"onLoad\", function () {\n              _this248.contentManager.isNewElement = _this248.editionProperties.isNewElement;\n\n              if (_this248.editionProperties.temporalImage != null) {\n                var _e392 = yP.safeXmlDecode(_this248.editionProperties.temporalImage.getAttribute(xP.get(\"imageMathmlAttribute\")));\n\n                _this248.contentManager.mathML = _e392;\n              }\n            });\n\n            this.contentManager.addListener(_e391);\n            this.contentManager.init();\n            this.modalDialog.setContentManager(this.contentManager);\n            this.contentManager.setModalDialogInstance(this.modalDialog);\n          } else {\n            this.contentManager.isNewElement = this.editionProperties.isNewElement;\n\n            if (this.editionProperties.temporalImage != null) {\n              var _e393 = yP.safeXmlDecode(this.editionProperties.temporalImage.getAttribute(xP.get(\"imageMathmlAttribute\")));\n\n              this.contentManager.mathML = _e393;\n            }\n          }\n\n          this.contentManager.setIntegrationModel(this.integrationModel);\n          this.modalDialog.open();\n        }\n      }, {\n        key: \"getCustomEditors\",\n        value: function getCustomEditors() {\n          return this.customEditors;\n        }\n      }], [{\n        key: \"globalListeners\",\n        get: function get() {\n          return nE._globalListeners;\n        },\n        set: function set(e) {\n          nE._globalListeners = e;\n        }\n      }, {\n        key: \"initialized\",\n        get: function get() {\n          return nE._initialized;\n        },\n        set: function set(e) {\n          nE._initialized = e;\n        }\n      }, {\n        key: \"addGlobalListener\",\n        value: function addGlobalListener(e) {\n          nE.globalListeners.add(e);\n        }\n      }]);\n\n      return nE;\n    }();\n\n    nE._globalListeners = new CP();\n    nE._initialized = false;\n\n    var iE = /*#__PURE__*/function () {\n      function iE(e) {\n        var _this249 = this;\n\n        _classCallCheck(this, iE);\n\n        this.language = \"en\";\n        this.serviceProviderProperties = {};\n\n        if (\"serviceProviderProperties\" in e) {\n          this.serviceProviderProperties = e.serviceProviderProperties;\n        }\n\n        this.configurationService = \"\";\n\n        if (\"configurationService\" in e) {\n          this.serviceProviderProperties.URI = e.configurationService;\n          console.warn(\"Deprecated property configurationService. Use serviceParameters on instead.\", [e.configurationService]);\n        }\n\n        this.version = \"version\" in e ? e.version : \"\";\n        this.target = null;\n\n        if (\"target\" in e) {\n          this.target = e.target;\n        } else {\n          throw new Error(\"IntegrationModel constructor error: target property missed.\");\n        }\n\n        if (\"scriptName\" in e) {\n          this.scriptName = e.scriptName;\n        }\n\n        this.callbackMethodArguments = {};\n\n        if (\"callbackMethodArguments\" in e) {\n          this.callbackMethodArguments = e.callbackMethodArguments;\n        }\n\n        this.environment = {};\n\n        if (\"environment\" in e) {\n          this.environment = e.environment;\n        }\n\n        this.isIframe = false;\n\n        if (this.target != null) {\n          this.isIframe = this.target.tagName.toUpperCase() === \"IFRAME\";\n        }\n\n        this.editorObject = null;\n\n        if (\"editorObject\" in e) {\n          this.editorObject = e.editorObject;\n        }\n\n        this.rtl = false;\n\n        if (\"rtl\" in e) {\n          this.rtl = e.rtl;\n        }\n\n        this.managesLanguage = false;\n\n        if (\"managesLanguage\" in e) {\n          this.managesLanguage = e.managesLanguage;\n        }\n\n        this.temporalImageResizing = false;\n        this.core = null;\n        this.listeners = new CP();\n\n        if (\"integrationParameters\" in e) {\n          iE.integrationParameters.forEach(function (t) {\n            if (t in e.integrationParameters) {\n              var _n307 = e.integrationParameters[t];\n\n              if (Object.keys(_n307).length !== 0) {\n                _this249[t] = _n307;\n              }\n            }\n          });\n        }\n      }\n\n      _createClass(iE, [{\n        key: \"init\",\n        value: function init() {\n          var _this250 = this;\n\n          this.language = this.getLanguage();\n          var e = CP.newListener(\"onLoad\", function () {\n            _this250.callbackFunction(_this250.callbackMethodArguments);\n          });\n\n          if (this.serviceProviderProperties.URI.indexOf(\"configuration\") !== -1) {\n            var _e394 = this.serviceProviderProperties.URI;\n\n            var _t341 = TP.getServerLanguageFromService(_e394);\n\n            this.serviceProviderProperties.server = _t341;\n\n            var _n308 = this.serviceProviderProperties.URI.indexOf(\"configuration\");\n\n            var _i256 = this.serviceProviderProperties.URI.substring(0, _n308);\n\n            this.serviceProviderProperties.URI = _i256;\n          }\n\n          var t = this.serviceProviderProperties.URI;\n          t = t.indexOf(\"/\") === 0 || t.indexOf(\"http\") === 0 ? t : SP.concatenateUrl(this.getPath(), t);\n          this.serviceProviderProperties.URI = t;\n          var n = {};\n          n.serviceProviderProperties = this.serviceProviderProperties;\n          this.setCore(new nE(n));\n          this.core.addListener(e);\n          this.core.language = this.language;\n          this.core.init();\n          this.core.setEnvironment(this.environment);\n        }\n      }, {\n        key: \"getPath\",\n        value: function getPath() {\n          if (typeof this.scriptName === \"undefined\") {\n            throw new Error(\"scriptName property needed for getPath.\");\n          }\n\n          var e = document.getElementsByTagName(\"script\");\n          var t = \"\";\n\n          for (var _n309 = 0; _n309 < e.length; _n309 += 1) {\n            var _i257 = e[_n309].src.lastIndexOf(this.scriptName);\n\n            if (_i257 >= 0) {\n              t = e[_n309].src.substr(0, _i257 - 1);\n            }\n          }\n\n          return t;\n        }\n      }, {\n        key: \"setLanguage\",\n        value: function setLanguage(e) {\n          this.language = e;\n        }\n      }, {\n        key: \"setCore\",\n        value: function setCore(e) {\n          this.core = e;\n          e.setIntegrationModel(this);\n        }\n      }, {\n        key: \"getCore\",\n        value: function getCore() {\n          return this.core;\n        }\n      }, {\n        key: \"setTarget\",\n        value: function setTarget(e) {\n          this.target = e;\n          this.isIframe = this.target.tagName.toUpperCase() === \"IFRAME\";\n        }\n      }, {\n        key: \"setEditorObject\",\n        value: function setEditorObject(e) {\n          this.editorObject = e;\n        }\n      }, {\n        key: \"openNewFormulaEditor\",\n        value: function openNewFormulaEditor() {\n          this.core.editionProperties.isNewElement = true;\n          this.core.openModalDialog(this.target, this.isIframe);\n        }\n      }, {\n        key: \"openExistingFormulaEditor\",\n        value: function openExistingFormulaEditor() {\n          this.core.editionProperties.isNewElement = false;\n          this.core.openModalDialog(this.target, this.isIframe);\n        }\n      }, {\n        key: \"updateFormula\",\n        value: function updateFormula(e) {\n          if (this.editorParameters) {\n            e = com.wiris.editor.util.EditorUtils.addAnnotation(e, \"application/vnd.wiris.mtweb-params+json\", JSON.stringify(this.editorParameters));\n          }\n\n          var t;\n          var n;\n          var i = null;\n\n          if (this.isIframe) {\n            t = this.target.contentWindow;\n            n = this.target.contentWindow;\n          } else {\n            t = this.target;\n            n = window;\n          }\n\n          var o = this.core.beforeUpdateFormula(e, i);\n\n          if (!o) {\n            return \"\";\n          }\n\n          o = this.insertFormula(t, n, o.mathml, o.wirisProperties);\n\n          if (!o) {\n            return \"\";\n          }\n\n          return this.core.afterUpdateFormula(o.focusElement, o.windowTarget, o.node, o.latex);\n        }\n      }, {\n        key: \"insertFormula\",\n        value: function insertFormula(e, t, n, i) {\n          return this.core.insertFormula(e, t, n, i);\n        }\n      }, {\n        key: \"getSelection\",\n        value: function getSelection() {\n          if (this.isIframe) {\n            this.target.contentWindow.focus();\n            return this.target.contentWindow.getSelection();\n          }\n\n          this.target.focus();\n          return window.getSelection();\n        }\n      }, {\n        key: \"addEvents\",\n        value: function addEvents() {\n          var _this251 = this;\n\n          var e = this.isIframe ? this.target.contentWindow.document : this.target;\n          SP.addElementEvents(e, function (e, t) {\n            _this251.doubleClickHandler(e, t);\n          }, function (e, t) {\n            _this251.mousedownHandler(e, t);\n          }, function (e, t) {\n            _this251.mouseupHandler(e, t);\n          });\n        }\n      }, {\n        key: \"doubleClickHandler\",\n        value: function doubleClickHandler(e) {\n          if (e.nodeName.toLowerCase() === \"img\") {\n            this.core.getCustomEditors().disable();\n\n            var _t342 = xP.get(\"imageCustomEditorName\");\n\n            if (e.hasAttribute(_t342)) {\n              var _n310 = e.getAttribute(_t342);\n\n              this.core.getCustomEditors().enable(_n310);\n            }\n\n            if (SP.containsClass(e, xP.get(\"imageClassName\"))) {\n              this.core.editionProperties.temporalImage = e;\n              this.core.editionProperties.isNewElement = true;\n              this.openExistingFormulaEditor();\n            }\n          }\n        }\n      }, {\n        key: \"mouseupHandler\",\n        value: function mouseupHandler() {\n          var _this252 = this;\n\n          if (this.temporalImageResizing) {\n            setTimeout(function () {\n              IP.fixAfterResize(_this252.temporalImageResizing);\n            }, 10);\n          }\n        }\n      }, {\n        key: \"mousedownHandler\",\n        value: function mousedownHandler(e) {\n          if (e.nodeName.toLowerCase() === \"img\") {\n            if (SP.containsClass(e, xP.get(\"imageClassName\"))) {\n              this.temporalImageResizing = e;\n            }\n          }\n        }\n      }, {\n        key: \"getLanguage\",\n        value: function getLanguage() {\n          return this.getBrowserLanguage();\n        }\n      }, {\n        key: \"getBrowserLanguage\",\n        value: function getBrowserLanguage() {\n          var e = \"en\";\n\n          if (navigator.userLanguage) {\n            e = navigator.userLanguage.substring(0, 2);\n          } else if (navigator.language) {\n            e = navigator.language.substring(0, 2);\n          } else {\n            e = \"en\";\n          }\n\n          return e;\n        }\n      }, {\n        key: \"callbackFunction\",\n        value: function callbackFunction() {\n          var _this253 = this;\n\n          var e = CP.newListener(\"onTargetReady\", function () {\n            _this253.addEvents(_this253.target);\n          });\n          this.listeners.add(e);\n        }\n      }, {\n        key: \"notifyWindowClosed\",\n        value: function notifyWindowClosed() {}\n      }, {\n        key: \"getMathmlFromTextNode\",\n        value: function getMathmlFromTextNode(e, t) {}\n      }, {\n        key: \"fillNonLatexNode\",\n        value: function fillNonLatexNode(e, t, n) {}\n      }, {\n        key: \"getSelectedItem\",\n        value: function getSelectedItem(e, t) {}\n      }]);\n\n      return iE;\n    }();\n\n    iE.prototype.getMathmlFromTextNode = undefined;\n    iE.prototype.fillNonLatexNode = undefined;\n    iE.prototype.getSelectedItem = undefined;\n    iE.integrationParameters = [\"serviceProviderProperties\", \"editorParameters\"];\n\n    var oE = /*#__PURE__*/function (_iE) {\n      _inherits(oE, _iE);\n\n      var _super172 = _createSuper(oE);\n\n      function oE(e) {\n        var _this254;\n\n        _classCallCheck(this, oE);\n\n        var t = e.editorObject;\n\n        if (typeof t.config != \"undefined\" && typeof t.config.get(\"mathTypeParameters\") != \"undefined\") {\n          e.integrationParameters = t.config.get(\"mathTypeParameters\");\n        }\n\n        _this254 = _super172.call(this, e);\n        _this254.integrationFolderName = \"ckeditor_wiris\";\n        return _this254;\n      }\n\n      _createClass(oE, [{\n        key: \"getLanguage\",\n        value: function getLanguage() {\n          return this.editorObject.config.get(\"language\");\n        }\n      }, {\n        key: \"addEditorListeners\",\n        value: function addEditorListeners() {\n          var e = this.editorObject;\n\n          if (typeof e.config.wirislistenersdisabled == \"undefined\" || !e.config.wirislistenersdisabled) {\n            this.checkElement();\n          }\n        }\n      }, {\n        key: \"checkElement\",\n        value: function checkElement() {\n          var e = this.editorObject;\n          var t = e.sourceElement;\n\n          if (!t.wirisActive) {\n            this.setTarget(t);\n            this.addEvents();\n            t.wirisActive = true;\n          }\n        }\n      }, {\n        key: \"doubleClickHandler\",\n        value: function doubleClickHandler(e, t) {\n          if (e.nodeName.toLowerCase() == \"img\") {\n            if (SP.containsClass(e, xP.get(\"imageClassName\"))) {\n              if (typeof t.stopPropagation != \"undefined\") {\n                t.stopPropagation();\n              } else {\n                t.returnValue = false;\n              }\n\n              this.core.getCustomEditors().disable();\n\n              var _n311 = e.getAttribute(xP.get(\"imageCustomEditorName\"));\n\n              if (_n311) {\n                this.core.getCustomEditors().enable(_n311);\n              }\n\n              this.core.editionProperties.temporalImage = e;\n              this.openExistingFormulaEditor();\n            }\n          }\n        }\n      }, {\n        key: \"getCorePath\",\n        value: function getCorePath() {\n          return null;\n        }\n      }, {\n        key: \"callbackFunction\",\n        value: function callbackFunction() {\n          _get(_getPrototypeOf(oE.prototype), \"callbackFunction\", this).call(this);\n\n          this.addEditorListeners();\n        }\n      }, {\n        key: \"openNewFormulaEditor\",\n        value: function openNewFormulaEditor() {\n          this.core.editionProperties.selection = this.editorObject.editing.view.document.selection;\n          return _get(_getPrototypeOf(oE.prototype), \"openNewFormulaEditor\", this).call(this);\n        }\n      }, {\n        key: \"insertMathml\",\n        value: function insertMathml(e) {\n          var _this255 = this;\n\n          return this.editorObject.model.change(function (t) {\n            var n = _this255.getCore();\n\n            var i = t.createElement(\"mathml\", {\n              formula: e\n            });\n\n            if (n.editionProperties.isNewElement) {\n              if (!e) return;\n\n              var _n312 = _this255.core.editionProperties.selection || _this255.editorObject.editing.view.document.selection;\n\n              var _o130 = _this255.editorObject.editing.mapper.toModelPosition(_n312.getLastPosition());\n\n              t.insert(i, _o130);\n\n              if (!_n312.isCollapsed) {\n                var _iterator403 = _createForOfIteratorHelper(_n312.getRanges()),\n                    _step403;\n\n                try {\n                  for (_iterator403.s(); !(_step403 = _iterator403.n()).done;) {\n                    var _e395 = _step403.value;\n                    t.remove(_this255.editorObject.editing.mapper.toModelRange(_e395));\n                  }\n                } catch (err) {\n                  _iterator403.e(err);\n                } finally {\n                  _iterator403.f();\n                }\n              }\n            } else {\n              var _o131 = n.editionProperties.temporalImage;\n\n              var _s90 = _this255.editorObject.editing.view.domConverter.domToView(_o131).parent;\n\n              var _r62 = _this255.editorObject.editing.mapper.toModelElement(_s90);\n\n              var _a38 = _this255.editorObject.model.createPositionBefore(_r62);\n\n              if (e) {\n                t.insert(i, _a38);\n              }\n\n              t.remove(_r62);\n            }\n\n            return i;\n          });\n        }\n      }, {\n        key: \"findText\",\n        value: function findText(e) {\n          var t = e;\n          var n;\n\n          while (!n) {\n            n = this.editorObject.editing.mapper.toModelElement(this.editorObject.editing.view.domConverter.domToView(t));\n            t = t.parentElement;\n          }\n\n          var i = this.editorObject.model.createRangeIn(n);\n          var o = Array.from(i.getItems());\n\n          for (var _i258 = 0, _o132 = o; _i258 < _o132.length; _i258++) {\n            var _t343 = _o132[_i258];\n\n            if (_t343.is(\"textProxy\") && _t343.data == e.data.replace(String.fromCharCode(160), \" \")) {\n              return _t343.textNode;\n            }\n          }\n        }\n      }, {\n        key: \"insertFormula\",\n        value: function insertFormula(e, t, n, i) {\n          var _this256 = this;\n\n          var o = {};\n\n          if (!n) {\n            this.insertMathml(\"\");\n          } else if (this.core.editMode == \"latex\") {\n            o.latex = MP.getLatexFromMathML(n);\n            o.node = t.document.createTextNode(\"$$\" + o.latex + \"$$\");\n            this.editorObject.model.change(function (e) {\n              var t = _this256.core.editionProperties.latexRange;\n\n              var n = _this256.findText(t.startContainer);\n\n              var i = _this256.findText(t.endContainer);\n\n              var s = e.createPositionAt(n.parent, n.startOffset + t.startOffset);\n              var r = e.createPositionAt(i.parent, i.startOffset + t.endOffset);\n              var a = e.createRange(s, r);\n              e.remove(a);\n              e.insertText(\"$$\" + o.latex + \"$$\", n.getAttributes(), s);\n            });\n          } else {\n            o.node = this.editorObject.editing.view.domConverter.viewToDom(this.editorObject.editing.mapper.toViewElement(this.insertMathml(n)), t.document);\n          }\n\n          return o;\n        }\n      }, {\n        key: \"notifyWindowClosed\",\n        value: function notifyWindowClosed() {\n          this.editorObject.editing.view.focus();\n        }\n      }]);\n\n      return oE;\n    }(iE);\n\n    var sE = /*#__PURE__*/function (_jw26) {\n      _inherits(sE, _jw26);\n\n      var _super173 = _createSuper(sE);\n\n      function sE(e) {\n        _classCallCheck(this, sE);\n\n        return _super173.call(this, e);\n      }\n\n      _createClass(sE, [{\n        key: \"execute\",\n        value: function execute() {\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n          if (!e.hasOwnProperty(\"integration\") || !(e.integration instanceof oE)) {\n            throw 'Must pass a valid CKEditor5Integration instance as attribute \"integration\" of options';\n          }\n\n          this.integration = e.integration;\n          this.setEditor();\n          this.openEditor();\n        }\n      }, {\n        key: \"setEditor\",\n        value: function setEditor() {\n          this.integration.core.getCustomEditors().disable();\n        }\n      }, {\n        key: \"openEditor\",\n        value: function openEditor() {\n          var e = this._getSelectedImage();\n\n          if (typeof e !== \"undefined\" && e !== null && e.classList.contains(WirisPlugin.Configuration.get(\"imageClassName\"))) {\n            this.integration.core.editionProperties.temporalImage = e;\n            this.integration.openExistingFormulaEditor();\n          } else {\n            this.integration.openNewFormulaEditor();\n          }\n        }\n      }, {\n        key: \"_getSelectedImage\",\n        value: function _getSelectedImage() {\n          var e = this.editor.editing.view.document.selection;\n\n          if (e.isCollapsed || e.rangeCount !== 1) {\n            return;\n          }\n\n          var t = e.getFirstRange();\n          var n;\n\n          var _iterator404 = _createForOfIteratorHelper(t),\n              _step404;\n\n          try {\n            for (_iterator404.s(); !(_step404 = _iterator404.n()).done;) {\n              var _e396 = _step404.value;\n\n              if (_e396.item.name !== \"span\") {\n                return;\n              }\n\n              n = _e396.item.getChild(0);\n              break;\n            }\n          } catch (err) {\n            _iterator404.e(err);\n          } finally {\n            _iterator404.f();\n          }\n\n          if (!n) {\n            return;\n          }\n\n          return this.editor.editing.view.domConverter.mapViewToDom(n);\n        }\n      }]);\n\n      return sE;\n    }(jw);\n\n    var rE = /*#__PURE__*/function (_sE) {\n      _inherits(rE, _sE);\n\n      var _super174 = _createSuper(rE);\n\n      function rE() {\n        _classCallCheck(this, rE);\n\n        return _super174.apply(this, arguments);\n      }\n\n      _createClass(rE, [{\n        key: \"setEditor\",\n        value: function setEditor() {\n          this.integration.core.getCustomEditors().enable(\"chemistry\");\n        }\n      }]);\n\n      return rE;\n    }(sE);\n\n    var aE = '<?xml version=\"1.0\" encoding=\"utf-8\"?>\\n\\x3c!-- Generator: Adobe Illustrator 22.0.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\\x3e\\n<svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\\n\\t viewBox=\"0 0 300 261.7\" style=\"enable-background:new 0 0 300 261.7;\" xml:space=\"preserve\">\\n<style type=\"text/css\">\\n\\t.st0{fill:#FFFFFF;}\\n\\t.st1{fill:#EF4A5F;}\\n\\t.st2{fill:#C8202F;}\\n</style>\\n<path class=\"st0\" d=\"M300,32.8c0-16.4-13.4-29.7-29.9-29.7c-2.9,0-7.2,0.8-7.2,0.8c-37.9,9.1-71.3,14-112,14c-0.3,0-0.6,0-1,0\\n\\tc-16.5,0-29.9,13.3-29.9,29.7c0,16.4,13.4,29.7,29.9,29.7l0,0c45.3,0,83.1-5.3,125.3-15.3h0C289.3,59.5,300,47.4,300,32.8\"/>\\n<path class=\"st0\" d=\"M90.2,257.7c-11.4,0-21.9-6.4-27-16.7l-60-119.9c-7.5-14.9-1.4-33.1,13.5-40.5c14.9-7.5,33.1-1.4,40.5,13.5\\n\\tl27.3,54.7L121.1,39c5.3-15.8,22.4-24.4,38.2-19.1c15.8,5.3,24.4,22.4,19.1,38.2l-59.6,179c-3.9,11.6-14.3,19.7-26.5,20.6\\n\\tC91.6,257.7,90.9,257.7,90.2,257.7\"/>\\n<g>\\n\\t<g>\\n\\t\\t<path class=\"st1\" d=\"M90.2,257.7c-11.4,0-21.9-6.4-27-16.7l-60-119.9c-7.5-14.9-1.4-33.1,13.5-40.5c14.9-7.5,33.1-1.4,40.5,13.5\\n\\t\\t\\tl27.3,54.7L121.1,39c5.3-15.8,22.4-24.4,38.2-19.1c15.8,5.3,24.4,22.4,19.1,38.2l-59.6,179c-3.9,11.6-14.3,19.7-26.5,20.6\\n\\t\\t\\tC91.6,257.7,90.9,257.7,90.2,257.7\"/>\\n\\t</g>\\n</g>\\n<g>\\n\\t<g>\\n\\t\\t<path class=\"st2\" d=\"M300,32.8c0-16.4-13.4-29.7-29.9-29.7c-2.9,0-7.2,0.8-7.2,0.8c-37.9,9.1-71.3,14-112,14c-0.3,0-0.6,0-1,0\\n\\t\\t\\tc-16.5,0-29.9,13.3-29.9,29.7c0,16.4,13.4,29.7,29.9,29.7l0,0c45.3,0,83.1-5.3,125.3-15.3h0C289.3,59.5,300,47.4,300,32.8\"/>\\n\\t</g>\\n</g>\\n</svg>\\n';\n    var cE = '<?xml version=\"1.0\" encoding=\"utf-8\"?>\\n\\x3c!-- Generator: Adobe Illustrator 22.0.1, SVG Export Plug-In . SVG Version: 6.00 Build 0)  --\\x3e\\n<svg version=\"1.1\" id=\"Layer_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\\n\\t viewBox=\"0 0 40.3 49.5\" style=\"enable-background:new 0 0 40.3 49.5;\" xml:space=\"preserve\">\\n<style type=\"text/css\">\\n\\t.st0{fill:#A4CF61;}\\n</style>\\n<path class=\"st0\" d=\"M39.2,12.1c0-1.9-1.1-3.6-2.7-4.4L24.5,0.9l0,0c-0.7-0.4-1.5-0.6-2.4-0.6c-0.9,0-1.7,0.2-2.4,0.6l0,0L2.3,10.8\\n\\tl0,0C0.9,11.7,0,13.2,0,14.9h0v19.6h0c0,1.7,0.9,3.3,2.3,4.1l0,0l17.4,9.9l0,0c0.7,0.4,1.5,0.6,2.4,0.6c0.9,0,1.7-0.2,2.4-0.6l0,0\\n\\tl12.2-6.9h0c1.5-0.8,2.6-2.5,2.6-4.3c0-2.7-2.2-4.9-4.9-4.9c-0.9,0-1.8,0.3-2.5,0.7l0,0l-9.7,5.6l-12.3-7V17.8l12.3-7l9.9,5.7l0,0\\n\\tc0.7,0.4,1.5,0.6,2.4,0.6C37,17,39.2,14.8,39.2,12.1\"/>\\n</svg>\\n';\n\n    var lE = /*#__PURE__*/function (_Ow63) {\n      _inherits(lE, _Ow63);\n\n      var _super175 = _createSuper(lE);\n\n      function lE() {\n        _classCallCheck(this, lE);\n\n        return _super175.apply(this, arguments);\n      }\n\n      _createClass(lE, [{\n        key: \"init\",\n        value: function init() {\n          var e = this._addIntegration();\n\n          this._addCommands();\n\n          this._addViews(e);\n\n          this._addSchema();\n\n          this._addConverters();\n\n          this._exposeWiris();\n        }\n      }, {\n        key: \"_addIntegration\",\n        value: function _addIntegration() {\n          var e = this.editor;\n          var t = {};\n          t.environment = {};\n          t.environment.editor = \"CKEditor5\";\n          t.editorObject = e;\n          t.serviceProviderProperties = {};\n          t.serviceProviderProperties.URI = \"https://www.wiris.net/demo/plugins/app\";\n          t.serviceProviderProperties.server = \"java\";\n          t.target = e.sourceElement;\n          t.scriptName = \"bundle.js\";\n          t.managesLanguage = true;\n          var n;\n\n          if (t.target) {\n            n = new oE(t);\n            n.init();\n            n.listeners.fire(\"onTargetReady\", {});\n            n.checkElement();\n            this.listenTo(e.editing.view.document, \"click\", function (e, t) {\n              if (t.domEvent.detail == 2) {\n                n.doubleClickHandler(t.domTarget, t.domEvent);\n                e.stop();\n              }\n            }, {\n              priority: \"highest\"\n            });\n          }\n\n          return n;\n        }\n      }, {\n        key: \"_addCommands\",\n        value: function _addCommands() {\n          var e = this.editor;\n          e.commands.add(\"MathType\", new sE(e));\n          e.commands.add(\"ChemType\", new rE(e));\n        }\n      }, {\n        key: \"_addViews\",\n        value: function _addViews(e) {\n          var t = this.editor;\n          t.ui.componentFactory.add(\"MathType\", function (n) {\n            var i = new Kb(n);\n            i.bind(\"isEnabled\").to(t.commands.get(\"MathType\"), \"isEnabled\");\n            i.set({\n              label: \"Insert a math equation - MathType\",\n              icon: aE,\n              tooltip: true\n            });\n            i.on(\"execute\", function () {\n              t.execute(\"MathType\", {\n                integration: e\n              });\n            });\n            return i;\n          });\n          t.ui.componentFactory.add(\"ChemType\", function (n) {\n            var i = new Kb(n);\n            i.bind(\"isEnabled\").to(t.commands.get(\"ChemType\"), \"isEnabled\");\n            i.set({\n              label: \"Insert a chemistry formula - ChemType\",\n              icon: cE,\n              tooltip: true\n            });\n            i.on(\"execute\", function () {\n              t.execute(\"ChemType\", {\n                integration: e\n              });\n            });\n            return i;\n          });\n          t.editing.view.addObserver(eA);\n        }\n      }, {\n        key: \"_addSchema\",\n        value: function _addSchema() {\n          var e = this.editor.model.schema;\n          e.register(\"mathml\", {\n            allowWhere: \"$text\",\n            isObject: true,\n            isInline: true,\n            allowAttributes: [\"formula\"]\n          });\n        }\n      }, {\n        key: \"_addConverters\",\n        value: function _addConverters() {\n          var e = this.editor;\n          e.conversion.for(\"upcast\").elementToElement({\n            view: {\n              name: \"span\",\n              classes: \"ck-math-widget\"\n            },\n            model: function model(e, t) {\n              var n = yP.safeXmlDecode(e.getChild(0).getAttribute(\"data-mathml\"));\n              return t.createElement(\"mathml\", {\n                formula: n\n              });\n            }\n          });\n          e.data.upcastDispatcher.on(\"element:math\", function (n, i, o) {\n            var s = o.consumable,\n                r = o.writer;\n            var a = i.viewItem;\n\n            if (!s.test(a, {\n              name: true\n            })) {\n              return;\n            }\n\n            var c = t(a);\n            var l = new vP(e.editing.view.document);\n            var d = new Lx(e.editing.view.document);\n            var u = d.createDocumentFragment(a.getChildren());\n\n            var h = _toConsumableArray(a.getAttributes()).map(function (_ref46) {\n              var _ref47 = _slicedToArray(_ref46, 2),\n                  e = _ref47[0],\n                  t = _ref47[1];\n\n              return \" \".concat(e, \"=\\\"\").concat(t, \"\\\"\");\n            }).join(\"\");\n\n            var f = l.toData(u) || \"\";\n            f = \"<math\".concat(h, \">\").concat(f, \"</math>\");\n            var m = c ? r.createText(RP.initParse(f, e.config.get(\"language\"))) : r.createElement(\"mathml\", {\n              formula: f\n            });\n            var g = o.splitToAllowedParent(m, i.modelCursor);\n\n            if (!g) {\n              return;\n            }\n\n            o.writer.insert(m, g.position);\n            s.consume(a, {\n              name: true\n            });\n            var p = o.getSplitParts(m);\n            i.modelRange = r.createRange(o.writer.createPositionBefore(m), o.writer.createPositionAfter(p[p.length - 1]));\n\n            if (g.cursorParent) {\n              i.modelCursor = o.writer.createPositionAt(g.cursorParent, 0);\n            } else {\n              i.modelCursor = i.modelRange.end;\n            }\n          });\n\n          function t(e) {\n            var t = e.getChild(0);\n            if (!t || t.name !== \"semantics\") return false;\n\n            var _iterator405 = _createForOfIteratorHelper(t.getChildren()),\n                _step405;\n\n            try {\n              for (_iterator405.s(); !(_step405 = _iterator405.n()).done;) {\n                var _e397 = _step405.value;\n\n                if (_e397.name === \"annotation\" && _e397.getAttribute(\"encoding\") === \"LaTeX\") {\n                  return true;\n                }\n              }\n            } catch (err) {\n              _iterator405.e(err);\n            } finally {\n              _iterator405.f();\n            }\n\n            return false;\n          }\n\n          e.conversion.for(\"editingDowncast\").elementToElement({\n            model: \"mathml\",\n            view: o\n          });\n          e.conversion.for(\"dataDowncast\").elementToElement({\n            model: \"mathml\",\n            view: i\n          });\n\n          function n(e, t) {\n            if (t.is(\"text\")) {\n              return e.createText(t.data);\n            } else if (t.is(\"element\")) {\n              if (t.is(\"emptyElement\")) {\n                return e.createEmptyElement(t.name, t.getAttributes());\n              } else {\n                var _i259 = e.createContainerElement(t.name, t.getAttributes());\n\n                var _iterator406 = _createForOfIteratorHelper(t.getChildren()),\n                    _step406;\n\n                try {\n                  for (_iterator406.s(); !(_step406 = _iterator406.n()).done;) {\n                    var _o133 = _step406.value;\n                    e.insert(e.createPositionAt(_i259, \"end\"), n(e, _o133));\n                  }\n                } catch (err) {\n                  _iterator406.e(err);\n                } finally {\n                  _iterator406.f();\n                }\n\n                return _i259;\n              }\n            }\n\n            throw new Exception(\"Given node has unsupported type.\");\n          }\n\n          function i(e, t) {\n            var i = new vp(t.document);\n            var o = RP.endParseSaveMode(e.getAttribute(\"formula\"));\n\n            if (!xP.get(\"saveHandTraces\")) {\n              o = yP.removeAnnotation(o, \"application/json\");\n            }\n\n            var s = i.toView(o).getChild(0);\n            return n(t, s);\n          }\n\n          function o(e, t) {\n            var n = t.createContainerElement(\"span\", {\n              class: \"ck-math-widget\"\n            });\n            var i = s(e, t);\n            t.insert(t.createPositionAt(n, 0), i);\n            return h_(n, t);\n          }\n\n          function s(t, n) {\n            var i = new vp(n.document);\n            var o = t.getAttribute(\"formula\");\n            var s = RP.initParse(o, e.config.get(\"language\"));\n            var r = i.toView(s).getChild(0);\n            return n.createEmptyElement(\"img\", r.getAttributes());\n          }\n        }\n      }, {\n        key: \"_exposeWiris\",\n        value: function _exposeWiris() {\n          window.WirisPlugin = {\n            Core: nE,\n            Parser: RP,\n            Image: IP,\n            MathML: yP,\n            Util: SP,\n            Configuration: xP,\n            Listeners: CP,\n            IntegrationModel: iE,\n            Latex: MP\n          };\n        }\n      }], [{\n        key: \"requires\",\n        get: function get() {\n          return [Lk];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"MathType\";\n        }\n      }]);\n\n      return lE;\n    }(Ow);\n\n    function dE(e, t) {\n      var _iterator407, _step407, _n313;\n\n      return _regeneratorRuntime().wrap(function dE$(_context37) {\n        while (1) {\n          switch (_context37.prev = _context37.next) {\n            case 0:\n              _iterator407 = _createForOfIteratorHelper(t);\n              _context37.prev = 1;\n\n              _iterator407.s();\n\n            case 3:\n              if ((_step407 = _iterator407.n()).done) {\n                _context37.next = 10;\n                break;\n              }\n\n              _n313 = _step407.value;\n\n              if (!(_n313 && e.getAttributeProperties(_n313[0]).copyOnEnter)) {\n                _context37.next = 8;\n                break;\n              }\n\n              _context37.next = 8;\n              return _n313;\n\n            case 8:\n              _context37.next = 3;\n              break;\n\n            case 10:\n              _context37.next = 15;\n              break;\n\n            case 12:\n              _context37.prev = 12;\n              _context37.t0 = _context37[\"catch\"](1);\n\n              _iterator407.e(_context37.t0);\n\n            case 15:\n              _context37.prev = 15;\n\n              _iterator407.f();\n\n              return _context37.finish(15);\n\n            case 18:\n            case \"end\":\n              return _context37.stop();\n          }\n        }\n      }, _marked6, null, [[1, 12, 15, 18]]);\n    }\n\n    var uE = /*#__PURE__*/function (_jw27) {\n      _inherits(uE, _jw27);\n\n      var _super176 = _createSuper(uE);\n\n      function uE() {\n        _classCallCheck(this, uE);\n\n        return _super176.apply(this, arguments);\n      }\n\n      _createClass(uE, [{\n        key: \"execute\",\n        value: function execute() {\n          var _this257 = this;\n\n          var e = this.editor.model;\n          var t = e.document;\n          e.change(function (n) {\n            hE(_this257.editor.model, n, t.selection, e.schema);\n\n            _this257.fire(\"afterExecute\", {\n              writer: n\n            });\n          });\n        }\n      }]);\n\n      return uE;\n    }(jw);\n\n    function hE(e, t, n, i) {\n      var o = n.isCollapsed;\n      var s = n.getFirstRange();\n      var r = s.start.parent;\n      var a = s.end.parent;\n\n      if (i.isLimit(r) || i.isLimit(a)) {\n        if (!o && r == a) {\n          e.deleteContent(n);\n        }\n\n        return;\n      }\n\n      if (o) {\n        var _e398 = dE(t.model.schema, n.getAttributes());\n\n        fE(t, s.start);\n        t.setSelectionAttribute(_e398);\n      } else {\n        var _i260 = !(s.start.isAtStart && s.end.isAtEnd);\n\n        var _o134 = r == a;\n\n        e.deleteContent(n, {\n          leaveUnmerged: _i260\n        });\n\n        if (_i260) {\n          if (_o134) {\n            fE(t, n.focus);\n          } else {\n            t.setSelection(a, 0);\n          }\n        }\n      }\n    }\n\n    function fE(e, t) {\n      e.split(t);\n      e.setSelection(t.parent.nextSibling, 0);\n    }\n\n    var mE = /*#__PURE__*/function (_Yd6) {\n      _inherits(mE, _Yd6);\n\n      var _super177 = _createSuper(mE);\n\n      function mE(e) {\n        var _this258;\n\n        _classCallCheck(this, mE);\n\n        _this258 = _super177.call(this, e);\n        var t = _this258.document;\n        t.on(\"keydown\", function (e, n) {\n          if (_this258.isEnabled && n.keyCode == Rl.enter) {\n            var _i261;\n\n            t.once(\"enter\", function (e) {\n              return _i261 = e;\n            }, {\n              priority: \"highest\"\n            });\n            t.fire(\"enter\", new Ju(t, n.domEvent, {\n              isSoft: n.shiftKey\n            }));\n\n            if (_i261 && _i261.stop.called) {\n              e.stop();\n            }\n          }\n        });\n        return _this258;\n      }\n\n      _createClass(mE, [{\n        key: \"observe\",\n        value: function observe() {}\n      }]);\n\n      return mE;\n    }(Yd);\n\n    var gE = /*#__PURE__*/function (_Ow64) {\n      _inherits(gE, _Ow64);\n\n      var _super178 = _createSuper(gE);\n\n      function gE() {\n        _classCallCheck(this, gE);\n\n        return _super178.apply(this, arguments);\n      }\n\n      _createClass(gE, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          var t = e.editing.view;\n          var n = t.document;\n          t.addObserver(mE);\n          e.commands.add(\"enter\", new uE(e));\n          this.listenTo(n, \"enter\", function (n, i) {\n            i.preventDefault();\n\n            if (i.isSoft) {\n              return;\n            }\n\n            e.execute(\"enter\");\n            t.scrollToTheSelection();\n          }, {\n            priority: \"low\"\n          });\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"Enter\";\n        }\n      }]);\n\n      return gE;\n    }(Ow);\n\n    var pE = /*#__PURE__*/function (_jw28) {\n      _inherits(pE, _jw28);\n\n      var _super179 = _createSuper(pE);\n\n      function pE() {\n        _classCallCheck(this, pE);\n\n        return _super179.apply(this, arguments);\n      }\n\n      _createClass(pE, [{\n        key: \"execute\",\n        value: function execute() {\n          var _this259 = this;\n\n          var e = this.editor.model;\n          var t = e.document;\n          e.change(function (n) {\n            wE(e, n, t.selection);\n\n            _this259.fire(\"afterExecute\", {\n              writer: n\n            });\n          });\n        }\n      }, {\n        key: \"refresh\",\n        value: function refresh() {\n          var e = this.editor.model;\n          var t = e.document;\n          this.isEnabled = bE(e.schema, t.selection);\n        }\n      }]);\n\n      return pE;\n    }(jw);\n\n    function bE(e, t) {\n      if (t.rangeCount > 1) {\n        return false;\n      }\n\n      var n = t.anchor;\n\n      if (!n || !e.checkChild(n, \"softBreak\")) {\n        return false;\n      }\n\n      var i = t.getFirstRange();\n      var o = i.start.parent;\n      var s = i.end.parent;\n\n      if ((vE(o, e) || vE(s, e)) && o !== s) {\n        return false;\n      }\n\n      return true;\n    }\n\n    function wE(e, t, n) {\n      var i = n.isCollapsed;\n      var o = n.getFirstRange();\n      var s = o.start.parent;\n      var r = o.end.parent;\n      var a = s == r;\n\n      if (i) {\n        var _i262 = dE(e.schema, n.getAttributes());\n\n        _E(e, t, o.end);\n\n        t.removeSelectionAttribute(n.getAttributeKeys());\n        t.setSelectionAttribute(_i262);\n      } else {\n        var _i263 = !(o.start.isAtStart && o.end.isAtEnd);\n\n        e.deleteContent(n, {\n          leaveUnmerged: _i263\n        });\n\n        if (a) {\n          _E(e, t, n.focus);\n        } else {\n          if (_i263) {\n            t.setSelection(r, 0);\n          }\n        }\n      }\n    }\n\n    function _E(e, t, n) {\n      var i = t.createElement(\"softBreak\");\n      e.insertContent(i, n);\n      t.setSelection(i, \"after\");\n    }\n\n    function vE(e, t) {\n      if (e.is(\"rootElement\")) {\n        return false;\n      }\n\n      return t.isLimit(e) || vE(e.parent, t);\n    }\n\n    var kE = /*#__PURE__*/function (_Ow65) {\n      _inherits(kE, _Ow65);\n\n      var _super180 = _createSuper(kE);\n\n      function kE() {\n        _classCallCheck(this, kE);\n\n        return _super180.apply(this, arguments);\n      }\n\n      _createClass(kE, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          var t = e.model.schema;\n          var n = e.conversion;\n          var i = e.editing.view;\n          var o = i.document;\n          t.register(\"softBreak\", {\n            allowWhere: \"$text\",\n            isInline: true\n          });\n          n.for(\"upcast\").elementToElement({\n            model: \"softBreak\",\n            view: \"br\"\n          });\n          n.for(\"downcast\").elementToElement({\n            model: \"softBreak\",\n            view: function view(e, t) {\n              return t.createEmptyElement(\"br\");\n            }\n          });\n          i.addObserver(mE);\n          e.commands.add(\"shiftEnter\", new pE(e));\n          this.listenTo(o, \"enter\", function (t, n) {\n            n.preventDefault();\n\n            if (!n.isSoft) {\n              return;\n            }\n\n            e.execute(\"shiftEnter\");\n            i.scrollToTheSelection();\n          }, {\n            priority: \"low\"\n          });\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"ShiftEnter\";\n        }\n      }]);\n\n      return kE;\n    }(Ow);\n\n    var yE = /*#__PURE__*/function () {\n      function yE(e) {\n        var _this260 = this;\n\n        var t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 20;\n\n        _classCallCheck(this, yE);\n\n        this.model = e;\n        this.size = 0;\n        this.limit = t;\n        this.isLocked = false;\n\n        this._changeCallback = function (e, t) {\n          if (t.type != \"transparent\" && t !== _this260._batch) {\n            _this260._reset(true);\n          }\n        };\n\n        this._selectionChangeCallback = function () {\n          _this260._reset();\n        };\n\n        this.model.document.on(\"change\", this._changeCallback);\n        this.model.document.selection.on(\"change:range\", this._selectionChangeCallback);\n        this.model.document.selection.on(\"change:attribute\", this._selectionChangeCallback);\n      }\n\n      _createClass(yE, [{\n        key: \"batch\",\n        get: function get() {\n          if (!this._batch) {\n            this._batch = this.model.createBatch();\n          }\n\n          return this._batch;\n        }\n      }, {\n        key: \"input\",\n        value: function input(e) {\n          this.size += e;\n\n          if (this.size >= this.limit) {\n            this._reset(true);\n          }\n        }\n      }, {\n        key: \"lock\",\n        value: function lock() {\n          this.isLocked = true;\n        }\n      }, {\n        key: \"unlock\",\n        value: function unlock() {\n          this.isLocked = false;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          this.model.document.off(\"change\", this._changeCallback);\n          this.model.document.selection.off(\"change:range\", this._selectionChangeCallback);\n          this.model.document.selection.off(\"change:attribute\", this._selectionChangeCallback);\n        }\n      }, {\n        key: \"_reset\",\n        value: function _reset(e) {\n          if (!this.isLocked || e) {\n            this._batch = null;\n            this.size = 0;\n          }\n        }\n      }]);\n\n      return yE;\n    }();\n\n    var xE = /*#__PURE__*/function (_jw29) {\n      _inherits(xE, _jw29);\n\n      var _super181 = _createSuper(xE);\n\n      function xE(e, t) {\n        var _this261;\n\n        _classCallCheck(this, xE);\n\n        _this261 = _super181.call(this, e);\n        _this261._buffer = new yE(e.model, t);\n        _this261._batches = new WeakSet();\n        return _this261;\n      }\n\n      _createClass(xE, [{\n        key: \"buffer\",\n        get: function get() {\n          return this._buffer;\n        }\n      }, {\n        key: \"destroy\",\n        value: function destroy() {\n          _get(_getPrototypeOf(xE.prototype), \"destroy\", this).call(this);\n\n          this._buffer.destroy();\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var _this262 = this;\n\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          var t = this.editor.model;\n          var n = t.document;\n          var i = e.text || \"\";\n          var o = i.length;\n          var s = e.range ? t.createSelection(e.range) : n.selection;\n          var r = e.resultRange;\n          t.enqueueChange(this._buffer.batch, function (e) {\n            _this262._buffer.lock();\n\n            t.deleteContent(s);\n\n            if (i) {\n              t.insertContent(e.createText(i, n.selection.getAttributes()), s);\n            }\n\n            if (r) {\n              e.setSelection(r);\n            } else if (!s.is(\"documentSelection\")) {\n              e.setSelection(s);\n            }\n\n            _this262._buffer.unlock();\n\n            _this262._buffer.input(o);\n\n            _this262._batches.add(_this262._buffer.batch);\n          });\n        }\n      }]);\n\n      return xE;\n    }(jw);\n\n    function AE(e) {\n      var t = null;\n      var n = e.model;\n      var i = e.editing.view;\n      var o = e.commands.get(\"input\");\n\n      if (Cl.isAndroid) {\n        i.document.on(\"beforeinput\", function (e, t) {\n          return s(t);\n        }, {\n          priority: \"lowest\"\n        });\n      } else {\n        i.document.on(\"keydown\", function (e, t) {\n          return s(t);\n        }, {\n          priority: \"lowest\"\n        });\n      }\n\n      i.document.on(\"compositionstart\", r, {\n        priority: \"lowest\"\n      });\n      i.document.on(\"compositionend\", function () {\n        t = n.createSelection(n.document.selection);\n      }, {\n        priority: \"lowest\"\n      });\n\n      function s(e) {\n        var s = n.document;\n        var r = i.document.isComposing;\n        var c = t && t.isEqual(s.selection);\n        t = null;\n\n        if (!o.isEnabled) {\n          return;\n        }\n\n        if (TE(e) || s.selection.isCollapsed) {\n          return;\n        }\n\n        if (r && e.keyCode === 229) {\n          return;\n        }\n\n        if (!r && e.keyCode === 229 && c) {\n          return;\n        }\n\n        a();\n      }\n\n      function r() {\n        var e = n.document;\n        var t = e.selection.rangeCount === 1 ? e.selection.getFirstRange().isFlat : true;\n\n        if (e.selection.isCollapsed || t) {\n          return;\n        }\n\n        a();\n      }\n\n      function a() {\n        var e = o.buffer;\n        e.lock();\n        n.enqueueChange(e.batch, function () {\n          n.deleteContent(n.document.selection);\n        });\n        e.unlock();\n      }\n    }\n\n    var CE = [Ll(\"arrowUp\"), Ll(\"arrowRight\"), Ll(\"arrowDown\"), Ll(\"arrowLeft\"), 9, 16, 17, 18, 19, 20, 27, 33, 34, 35, 36, 45, 91, 93, 144, 145, 173, 174, 175, 176, 177, 178, 179, 255];\n\n    for (var _e399 = 112; _e399 <= 135; _e399++) {\n      CE.push(_e399);\n    }\n\n    function TE(e) {\n      if (e.ctrlKey) {\n        return true;\n      }\n\n      return CE.includes(e.keyCode);\n    }\n\n    function ME(e, t) {\n      var n = [];\n      var i = 0;\n      var o;\n      e.forEach(function (e) {\n        if (e == \"equal\") {\n          s();\n          i++;\n        } else if (e == \"insert\") {\n          if (r(\"insert\")) {\n            o.values.push(t[i]);\n          } else {\n            s();\n            o = {\n              type: \"insert\",\n              index: i,\n              values: [t[i]]\n            };\n          }\n\n          i++;\n        } else {\n          if (r(\"delete\")) {\n            o.howMany++;\n          } else {\n            s();\n            o = {\n              type: \"delete\",\n              index: i,\n              howMany: 1\n            };\n          }\n        }\n      });\n      s();\n      return n;\n\n      function s() {\n        if (o) {\n          n.push(o);\n          o = null;\n        }\n      }\n\n      function r(e) {\n        return o && o.type == e;\n      }\n    }\n\n    function PE(e) {\n      if (e.length == 0) {\n        return false;\n      }\n\n      var _iterator408 = _createForOfIteratorHelper(e),\n          _step408;\n\n      try {\n        for (_iterator408.s(); !(_step408 = _iterator408.n()).done;) {\n          var _t344 = _step408.value;\n\n          if (_t344.type === \"children\" && !EE(_t344)) {\n            return true;\n          }\n        }\n      } catch (err) {\n        _iterator408.e(err);\n      } finally {\n        _iterator408.f();\n      }\n\n      return false;\n    }\n\n    function EE(e) {\n      if (e.newChildren.length - e.oldChildren.length != 1) {\n        return;\n      }\n\n      var t = vd(e.oldChildren, e.newChildren, SE);\n      var n = ME(t, e.newChildren);\n\n      if (n.length > 1) {\n        return;\n      }\n\n      var i = n[0];\n\n      if (!(!!i.values[0] && i.values[0].is(\"text\"))) {\n        return;\n      }\n\n      return i;\n    }\n\n    function SE(e, t) {\n      if (!!e && e.is(\"text\") && !!t && t.is(\"text\")) {\n        return e.data === t.data;\n      } else {\n        return e === t;\n      }\n    }\n\n    function IE(e) {\n      e.editing.view.document.on(\"mutations\", function (t, n, i) {\n        new OE(e).handle(n, i);\n      });\n    }\n\n    var OE = /*#__PURE__*/function () {\n      function OE(e) {\n        _classCallCheck(this, OE);\n\n        this.editor = e;\n        this.editing = this.editor.editing;\n      }\n\n      _createClass(OE, [{\n        key: \"handle\",\n        value: function handle(e, t) {\n          if (PE(e)) {\n            this._handleContainerChildrenMutations(e, t);\n          } else {\n            var _iterator409 = _createForOfIteratorHelper(e),\n                _step409;\n\n            try {\n              for (_iterator409.s(); !(_step409 = _iterator409.n()).done;) {\n                var _n314 = _step409.value;\n\n                this._handleTextMutation(_n314, t);\n\n                this._handleTextNodeInsertion(_n314);\n              }\n            } catch (err) {\n              _iterator409.e(err);\n            } finally {\n              _iterator409.f();\n            }\n          }\n        }\n      }, {\n        key: \"_handleContainerChildrenMutations\",\n        value: function _handleContainerChildrenMutations(e, t) {\n          var n = NE(e);\n\n          if (!n) {\n            return;\n          }\n\n          var i = this.editor.editing.view.domConverter;\n          var o = i.mapViewToDom(n);\n          var s = new Dd(this.editor.editing.view.document);\n          var r = this.editor.data.toModel(s.domToView(o)).getChild(0);\n          var a = this.editor.editing.mapper.toModelElement(n);\n\n          if (!a) {\n            return;\n          }\n\n          var c = Array.from(r.getChildren());\n          var l = Array.from(a.getChildren());\n          var d = c[c.length - 1];\n          var u = l[l.length - 1];\n\n          if (d && d.is(\"softBreak\") && u && !u.is(\"softBreak\")) {\n            c.pop();\n          }\n\n          var h = this.editor.model.schema;\n\n          if (!RE(c, h) || !RE(l, h)) {\n            return;\n          }\n\n          var f = c.map(function (e) {\n            return e.is(\"text\") ? e.data : \"@\";\n          }).join(\"\").replace(/\\u00A0/g, \" \");\n          var m = l.map(function (e) {\n            return e.is(\"text\") ? e.data : \"@\";\n          }).join(\"\").replace(/\\u00A0/g, \" \");\n\n          if (m === f) {\n            return;\n          }\n\n          var g = vd(m, f);\n\n          var _LE = LE(g),\n              p = _LE.firstChangeAt,\n              b = _LE.insertions,\n              w = _LE.deletions;\n\n          var _ = null;\n\n          if (t) {\n            _ = this.editing.mapper.toModelRange(t.getFirstRange());\n          }\n\n          var v = f.substr(p, b);\n          var k = this.editor.model.createRange(this.editor.model.createPositionAt(a, p), this.editor.model.createPositionAt(a, p + w));\n          this.editor.execute(\"input\", {\n            text: v,\n            range: k,\n            resultRange: _\n          });\n        }\n      }, {\n        key: \"_handleTextMutation\",\n        value: function _handleTextMutation(e, t) {\n          if (e.type != \"text\") {\n            return;\n          }\n\n          var n = e.newText.replace(/\\u00A0/g, \" \");\n          var i = e.oldText.replace(/\\u00A0/g, \" \");\n\n          if (i === n) {\n            return;\n          }\n\n          var o = vd(i, n);\n\n          var _LE2 = LE(o),\n              s = _LE2.firstChangeAt,\n              r = _LE2.insertions,\n              a = _LE2.deletions;\n\n          var c = null;\n\n          if (t) {\n            c = this.editing.mapper.toModelRange(t.getFirstRange());\n          }\n\n          var l = this.editing.view.createPositionAt(e.node, s);\n          var d = this.editing.mapper.toModelPosition(l);\n          var u = this.editor.model.createRange(d, d.getShiftedBy(a));\n          var h = n.substr(s, r);\n          this.editor.execute(\"input\", {\n            text: h,\n            range: u,\n            resultRange: c\n          });\n        }\n      }, {\n        key: \"_handleTextNodeInsertion\",\n        value: function _handleTextNodeInsertion(e) {\n          if (e.type != \"children\") {\n            return;\n          }\n\n          var t = EE(e);\n          var n = this.editing.view.createPositionAt(e.node, t.index);\n          var i = this.editing.mapper.toModelPosition(n);\n          var o = t.values[0].data;\n          this.editor.execute(\"input\", {\n            text: o.replace(/\\u00A0/g, \" \"),\n            range: this.editor.model.createRange(i)\n          });\n        }\n      }]);\n\n      return OE;\n    }();\n\n    function NE(e) {\n      var t = e.map(function (e) {\n        return e.node;\n      }).reduce(function (e, t) {\n        return e.getCommonAncestor(t, {\n          includeSelf: true\n        });\n      });\n\n      if (!t) {\n        return;\n      }\n\n      return t.getAncestors({\n        includeSelf: true,\n        parentFirst: true\n      }).find(function (e) {\n        return e.is(\"containerElement\") || e.is(\"rootElement\");\n      });\n    }\n\n    function RE(e, t) {\n      return e.every(function (e) {\n        return t.isInline(e);\n      });\n    }\n\n    function LE(e) {\n      var t = null;\n      var n = null;\n\n      for (var _i264 = 0; _i264 < e.length; _i264++) {\n        var _o135 = e[_i264];\n\n        if (_o135 != \"equal\") {\n          t = t === null ? _i264 : t;\n          n = _i264;\n        }\n      }\n\n      var i = 0;\n      var o = 0;\n\n      for (var _s91 = t; _s91 <= n; _s91++) {\n        if (e[_s91] != \"insert\") {\n          i++;\n        }\n\n        if (e[_s91] != \"delete\") {\n          o++;\n        }\n      }\n\n      return {\n        insertions: o,\n        deletions: i,\n        firstChangeAt: t\n      };\n    }\n\n    var jE = /*#__PURE__*/function (_Ow66) {\n      _inherits(jE, _Ow66);\n\n      var _super182 = _createSuper(jE);\n\n      function jE() {\n        _classCallCheck(this, jE);\n\n        return _super182.apply(this, arguments);\n      }\n\n      _createClass(jE, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          var t = new xE(e, e.config.get(\"typing.undoStep\") || 20);\n          e.commands.add(\"input\", t);\n          AE(e);\n          IE(e);\n        }\n      }, {\n        key: \"isInput\",\n        value: function isInput(e) {\n          var t = this.editor.commands.get(\"input\");\n          return t._batches.has(e);\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"Input\";\n        }\n      }]);\n\n      return jE;\n    }(Ow);\n\n    var DE = /*#__PURE__*/function (_jw30) {\n      _inherits(DE, _jw30);\n\n      var _super183 = _createSuper(DE);\n\n      function DE(e, t) {\n        var _this263;\n\n        _classCallCheck(this, DE);\n\n        _this263 = _super183.call(this, e);\n        _this263.direction = t;\n        _this263._buffer = new yE(e.model, e.config.get(\"typing.undoStep\"));\n        return _this263;\n      }\n\n      _createClass(DE, [{\n        key: \"buffer\",\n        get: function get() {\n          return this._buffer;\n        }\n      }, {\n        key: \"execute\",\n        value: function execute() {\n          var _this264 = this;\n\n          var e = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n          var t = this.editor.model;\n          var n = t.document;\n          t.enqueueChange(this._buffer.batch, function (i) {\n            _this264._buffer.lock();\n\n            var o = i.createSelection(e.selection || n.selection);\n            var s = o.isCollapsed;\n\n            if (o.isCollapsed) {\n              t.modifySelection(o, {\n                direction: _this264.direction,\n                unit: e.unit\n              });\n            }\n\n            if (_this264._shouldEntireContentBeReplacedWithParagraph(e.sequence || 1)) {\n              _this264._replaceEntireContentWithParagraph(i);\n\n              return;\n            }\n\n            if (o.isCollapsed) {\n              return;\n            }\n\n            var r = 0;\n            o.getFirstRange().getMinimalFlatRanges().forEach(function (e) {\n              r += fl(e.getWalker({\n                singleCharacters: true,\n                ignoreElementEnd: true,\n                shallow: true\n              }));\n            });\n            t.deleteContent(o, {\n              doNotResetEntireContent: s,\n              direction: _this264.direction\n            });\n\n            _this264._buffer.input(r);\n\n            i.setSelection(o);\n\n            _this264._buffer.unlock();\n          });\n        }\n      }, {\n        key: \"_shouldEntireContentBeReplacedWithParagraph\",\n        value: function _shouldEntireContentBeReplacedWithParagraph(e) {\n          if (e > 1) {\n            return false;\n          }\n\n          var t = this.editor.model;\n          var n = t.document;\n          var i = n.selection;\n          var o = t.schema.getLimitElement(i);\n          var s = i.isCollapsed && i.containsEntireContent(o);\n\n          if (!s) {\n            return false;\n          }\n\n          if (!t.schema.checkChild(o, \"paragraph\")) {\n            return false;\n          }\n\n          var r = o.getChild(0);\n\n          if (r && r.name === \"paragraph\") {\n            return false;\n          }\n\n          return true;\n        }\n      }, {\n        key: \"_replaceEntireContentWithParagraph\",\n        value: function _replaceEntireContentWithParagraph(e) {\n          var t = this.editor.model;\n          var n = t.document;\n          var i = n.selection;\n          var o = t.schema.getLimitElement(i);\n          var s = e.createElement(\"paragraph\");\n          e.remove(e.createRangeIn(o));\n          e.insert(s, o);\n          e.setSelection(s, 0);\n        }\n      }]);\n\n      return DE;\n    }(jw);\n\n    var zE = /*#__PURE__*/function (_Yd7) {\n      _inherits(zE, _Yd7);\n\n      var _super184 = _createSuper(zE);\n\n      function zE(e) {\n        var _this265;\n\n        _classCallCheck(this, zE);\n\n        _this265 = _super184.call(this, e);\n        var t = e.document;\n        var n = 0;\n        t.on(\"keyup\", function (e, t) {\n          if (t.keyCode == Rl.delete || t.keyCode == Rl.backspace) {\n            n = 0;\n          }\n        });\n        t.on(\"keydown\", function (e, t) {\n          var o = {};\n\n          if (t.keyCode == Rl.delete) {\n            o.direction = \"forward\";\n            o.unit = \"character\";\n          } else if (t.keyCode == Rl.backspace) {\n            o.direction = \"backward\";\n            o.unit = \"codePoint\";\n          } else {\n            return;\n          }\n\n          var s = Cl.isMac ? t.altKey : t.ctrlKey;\n          o.unit = s ? \"word\" : o.unit;\n          o.sequence = ++n;\n          i(e, t.domEvent, o);\n        });\n\n        if (Cl.isAndroid) {\n          t.on(\"beforeinput\", function (t, n) {\n            if (n.domEvent.inputType != \"deleteContentBackward\") {\n              return;\n            }\n\n            var o = {\n              unit: \"codepoint\",\n              direction: \"backward\",\n              sequence: 1\n            };\n            var s = n.domTarget.ownerDocument.defaultView.getSelection();\n\n            if (s.anchorNode == s.focusNode && s.anchorOffset + 1 != s.focusOffset) {\n              o.selectionToRemove = e.domConverter.domSelectionToView(s);\n            }\n\n            i(t, n.domEvent, o);\n          });\n        }\n\n        function i(e, n, i) {\n          var o;\n          t.once(\"delete\", function (e) {\n            return o = e;\n          }, {\n            priority: Number.POSITIVE_INFINITY\n          });\n          t.fire(\"delete\", new Ju(t, n, i));\n\n          if (o && o.stop.called) {\n            e.stop();\n          }\n        }\n\n        return _this265;\n      }\n\n      _createClass(zE, [{\n        key: \"observe\",\n        value: function observe() {}\n      }]);\n\n      return zE;\n    }(Yd);\n\n    var BE = /*#__PURE__*/function (_Ow67) {\n      _inherits(BE, _Ow67);\n\n      var _super185 = _createSuper(BE);\n\n      function BE() {\n        _classCallCheck(this, BE);\n\n        return _super185.apply(this, arguments);\n      }\n\n      _createClass(BE, [{\n        key: \"init\",\n        value: function init() {\n          var e = this.editor;\n          var t = e.editing.view;\n          var n = t.document;\n          t.addObserver(zE);\n          e.commands.add(\"forwardDelete\", new DE(e, \"forward\"));\n          e.commands.add(\"delete\", new DE(e, \"backward\"));\n          this.listenTo(n, \"delete\", function (n, i) {\n            var o = {\n              unit: i.unit,\n              sequence: i.sequence\n            };\n\n            if (i.selectionToRemove) {\n              var _t345 = e.model.createSelection();\n\n              var _n315 = [];\n\n              var _iterator410 = _createForOfIteratorHelper(i.selectionToRemove.getRanges()),\n                  _step410;\n\n              try {\n                for (_iterator410.s(); !(_step410 = _iterator410.n()).done;) {\n                  var _t346 = _step410.value;\n\n                  _n315.push(e.editing.mapper.toModelRange(_t346));\n                }\n              } catch (err) {\n                _iterator410.e(err);\n              } finally {\n                _iterator410.f();\n              }\n\n              _t345.setTo(_n315);\n\n              o.selection = _t345;\n            }\n\n            e.execute(i.direction == \"forward\" ? \"forwardDelete\" : \"delete\", o);\n            i.preventDefault();\n            t.scrollToTheSelection();\n          });\n\n          if (Cl.isAndroid) {\n            var _e400 = null;\n            this.listenTo(n, \"delete\", function (t, n) {\n              var i = n.domTarget.ownerDocument.defaultView.getSelection();\n              _e400 = {\n                anchorNode: i.anchorNode,\n                anchorOffset: i.anchorOffset,\n                focusNode: i.focusNode,\n                focusOffset: i.focusOffset\n              };\n            }, {\n              priority: \"lowest\"\n            });\n            this.listenTo(n, \"keyup\", function (t, n) {\n              if (_e400) {\n                var _t347 = n.domTarget.ownerDocument.defaultView.getSelection();\n\n                _t347.collapse(_e400.anchorNode, _e400.anchorOffset);\n\n                _t347.extend(_e400.focusNode, _e400.focusOffset);\n\n                _e400 = null;\n              }\n            });\n          }\n        }\n      }], [{\n        key: \"pluginName\",\n        get: function get() {\n          return \"Delete\";\n        }\n      }]);\n\n      return BE;\n    }(Ow);\n\n    var VE = /*#__PURE__*/function (_Ow68) {\n      _inherits(VE, _Ow68);\n\n      var _super186 = _createSuper(VE);\n\n      function VE() {\n        _classCallCheck(this, VE);\n\n        return _super186.apply(this, arguments);\n      }\n\n      _createClass(VE, null, [{\n        key: \"requires\",\n        get: function get() {\n          return [jE, BE];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"Typing\";\n        }\n      }]);\n\n      return VE;\n    }(Ow);\n\n    var FE = /*#__PURE__*/function (_Ow69) {\n      _inherits(FE, _Ow69);\n\n      var _super187 = _createSuper(FE);\n\n      function FE() {\n        _classCallCheck(this, FE);\n\n        return _super187.apply(this, arguments);\n      }\n\n      _createClass(FE, null, [{\n        key: \"requires\",\n        get: function get() {\n          return [Rx, gE, kE, VE, IC];\n        }\n      }, {\n        key: \"pluginName\",\n        get: function get() {\n          return \"Essentials\";\n        }\n      }]);\n\n      return FE;\n    }(Ow);\n\n    var HE = /*#__PURE__*/function (_Tw) {\n      _inherits(HE, _Tw);\n\n      var _super188 = _createSuper(HE);\n\n      function HE() {\n        _classCallCheck(this, HE);\n\n        return _super188.apply(this, arguments);\n      }\n\n      return _createClass(HE);\n    }(Tw);\n\n    HE.builtinPlugins = [Rw, Yw, e_, bk, gk, Ik, _y, Iy, Jy, Zy, Fx, Yx, Zx, uA, JA, VC, vT, wP, _P, lE, FE, vk];\n  }])[\"default\"];\n});","map":null,"metadata":{},"sourceType":"script"}